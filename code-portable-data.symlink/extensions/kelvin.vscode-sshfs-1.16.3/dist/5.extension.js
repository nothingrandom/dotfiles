exports.ids=[5],exports.modules={50:function(t,e,n){"use strict";n.r(e),n.d(e,"getSessions",function(){return c}),n.d(e,"getSession",function(){return f});var r=n(51),o=n(1),i=n(3),s=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})};const u=new r({hive:r.HKCU,key:"\\Software\\SimonTatham\\PuTTY\\Sessions\\"});function c(){return s(this,void 0,void 0,function*(){o.d("Fetching PuTTY sessions from registry");const t=yield Object(i.b)(t=>u.keys(t)),e=[];return yield Promise.all(t.map(t=>((n,r)=>s(this,void 0,void 0,function*(){const n=decodeURIComponent(t.key.substr(u.key.length)),r=yield Object(i.b)(e=>t.values(e)),o={};r.forEach(t=>o[t.name.toLowerCase()]=function(t){switch(t.type){case"REG_DWORD":return parseInt(t.value,16);case"REG_SZ":return t.value}throw console.log(t.name,t.value),new Error(`Unknown RegistryItem type: '${t.type}'`)}(t)),e.push(Object.assign({name:n},o))}))())),o.b(`\tFound ${e.length} sessions:`),e.forEach(t=>o.b(`\t${JSON.stringify(t)}`)),e})}function f(t,e,n,r=!1){return s(this,void 0,void 0,function*(){const o=yield c();if(t){t=t.toLowerCase();const e=o.find(e=>e.name.toLowerCase()===t)||null;if(r||e)return e}if(!e)return null;e=e.toLowerCase();const i=o.filter(t=>t.hostname&&t.hostname.toLowerCase()===e);return n?(n=n.toLowerCase(),i.find(t=>!t.username||t.username.toLowerCase()===n)||null):i[0]||null})}},51:function(t,e,n){var r=n(7),o=n(11),i=n(16).spawn,s="HKLM",u=[s,"HKCU","HKCR","HKU","HKCC"],c=["REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE"],f=/(\\[a-zA-Z0-9_\s]+)*/,a=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,h=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function l(t,e){if(!(this instanceof l))return new l(t,e);Error.captureStackTrace(this,l),this.__defineGetter__("name",function(){return l.name}),this.__defineGetter__("message",function(){return t}),this.__defineGetter__("code",function(){return e})}function p(t){var e={stdout:"",stderr:""};return t.stdout.on("data",function(t){e.stdout+=t.toString()}),t.stderr.on("data",function(t){e.stderr+=t.toString()}),e}function _(t,e,n){var o=n.stdout.trim(),i=n.stderr.trim();return new l(r.format("%s command exited with code %d:\n%s\n%s",t,e,o,i),e)}function d(t,e){e&&t.push("/reg:"+function(t){if("x64"==t)return"64";if("x86"==t)return"32";throw new Error("illegal architecture: "+t+" (use x86 or x64)")}(e))}function E(){return"win32"===process.platform?o.join(process.env.windir,"system32","reg.exe"):"REG"}function v(t,e,n,r,o,i,s){if(!(this instanceof v))return new v(t,e,n,r,o,i,s);var u=t,c=e,f=n,a=r,h=o,l=i,p=s;this.__defineGetter__("host",function(){return u}),this.__defineGetter__("hive",function(){return c}),this.__defineGetter__("key",function(){return f}),this.__defineGetter__("name",function(){return a}),this.__defineGetter__("type",function(){return h}),this.__defineGetter__("value",function(){return l}),this.__defineGetter__("arch",function(){return p})}function y(t){if(!(this instanceof y))return new y(t);var e=t||{},n=""+(e.host||""),r=""+(e.hive||s),o=""+(e.key||""),i=e.arch||null;if(this.__defineGetter__("host",function(){return n}),this.__defineGetter__("hive",function(){return r}),this.__defineGetter__("key",function(){return o}),this.__defineGetter__("path",function(){return(0==n.length?"":"\\\\"+n+"\\")+r+o}),this.__defineGetter__("arch",function(){return i}),this.__defineGetter__("parent",function(){var t=o.lastIndexOf("\\");return new y({host:this.host,hive:this.hive,key:-1==t?"":o.substring(0,t),arch:this.arch})}),-1==u.indexOf(r))throw new Error("illegal hive specified.");if(!f.test(o))throw new Error("illegal key specified.");if(i&&"x64"!=i&&"x86"!=i)throw new Error("illegal architecture specified (use x86 or x64)")}r.inherits(l,Error),r.inherits(v,Object),y.HKLM=s,y.HKCU="HKCU",y.HKCR="HKCR",y.HKU="HKU",y.HKCC="HKCC",y.HIVES=u,y.REG_SZ="REG_SZ",y.REG_MULTI_SZ="REG_MULTI_SZ",y.REG_EXPAND_SZ="REG_EXPAND_SZ",y.REG_DWORD="REG_DWORD",y.REG_QWORD="REG_QWORD",y.REG_BINARY="REG_BINARY",y.REG_NONE="REG_NONE",y.REG_TYPES=c,y.DEFAULT_VALUE="",y.prototype.values=function(t){if("function"!=typeof t)throw new TypeError("must specify a callback");var e=["QUERY",this.path];d(e,this.arch);var n=i(E(),e,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",o=this,s=null,u=p(n);return n.on("close",function(e){if(!s)if(0!==e)t(_("QUERY",e,u),null);else{for(var n=[],i=[],c=r.split("\n"),f=0,a=0,l=c.length;a<l;a++){var p=c[a].trim();p.length>0&&(0!=f&&n.push(p),++f)}for(a=0,l=n.length;a<l;a++){var d,E,y,R=h.exec(n[a]);R&&(d=R[1].trim(),E=R[2].trim(),y=R[3],i.push(new v(o.host,o.hive,o.key,d,E,y,o.arch)))}t(null,i)}}),n.stdout.on("data",function(t){r+=t.toString()}),n.on("error",function(e){s=e,t(e)}),this},y.prototype.keys=function(t){if("function"!=typeof t)throw new TypeError("must specify a callback");var e=["QUERY",this.path];d(e,this.arch);var n=i(E(),e,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",o=this,s=null,u=p(n);return n.on("close",function(e){s||0!==e&&t(_("QUERY",e,u),null)}),n.stdout.on("data",function(t){r+=t.toString()}),n.stdout.on("end",function(){for(var e=[],n=[],i=r.split("\n"),s=0,u=i.length;s<u;s++){var c=i[s].trim();c.length>0&&e.push(c)}for(s=0,u=e.length;s<u;s++){var f,h=a.exec(e[s]);h&&(h[1],(f=h[2])&&f!==o.key&&n.push(new y({host:o.host,hive:o.hive,key:f,arch:o.arch})))}t(null,n)}),n.on("error",function(e){s=e,t(e)}),this},y.prototype.get=function(t,e){if("function"!=typeof e)throw new TypeError("must specify a callback");var n=["QUERY",this.path];""==t?n.push("/ve"):n=n.concat(["/v",t]),d(n,this.arch);var r=i(E(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),o="",s=this,u=null,c=p(r);return r.on("close",function(t){if(!u)if(0!==t)e(_("QUERY",t,c),null);else{for(var n=[],r=null,i=o.split("\n"),f=0,a=0,l=i.length;a<l;a++){var p=i[a].trim();p.length>0&&(0!=f&&n.push(p),++f)}var d,E,y,R=n[n.length-1]||"",w=h.exec(R);w&&(d=w[1].trim(),E=w[2].trim(),y=w[3],r=new v(s.host,s.hive,s.key,d,E,y,s.arch)),e(null,r)}}),r.stdout.on("data",function(t){o+=t.toString()}),r.on("error",function(t){u=t,e(t)}),this},y.prototype.set=function(t,e,n,r){if("function"!=typeof r)throw new TypeError("must specify a callback");if(-1==c.indexOf(e))throw Error("illegal type specified.");var o=["ADD",this.path];""==t?o.push("/ve"):o=o.concat(["/v",t]),d(o=o.concat(["/t",e,"/d",n,"/f"]),this.arch);var s=i(E(),o,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),u=null,f=p(s);return s.on("close",function(t){u||r(0!==t?_("ADD",t,f):null)}),s.stdout.on("data",function(t){}),s.on("error",function(t){u=t,r(t)}),this},y.prototype.remove=function(t,e){if("function"!=typeof e)throw new TypeError("must specify a callback");var n=t?["DELETE",this.path,"/f","/v",t]:["DELETE",this.path,"/f","/ve"];d(n,this.arch);var r=i(E(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),o=null,s=p(r);return r.on("close",function(t){o||(0!==t?e(_("DELETE",t,s),null):e(null))}),r.stdout.on("data",function(t){}),r.on("error",function(t){o=t,e(t)}),this},y.prototype.clear=function(t){if("function"!=typeof t)throw new TypeError("must specify a callback");var e=["DELETE",this.path,"/f","/va"];d(e,this.arch);var n=i(E(),e,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,o=p(n);return n.on("close",function(e){r||(0!==e?t(_("DELETE",e,o),null):t(null))}),n.stdout.on("data",function(t){}),n.on("error",function(e){r=e,t(e)}),this},y.prototype.erase=y.prototype.clear,y.prototype.destroy=function(t){if("function"!=typeof t)throw new TypeError("must specify a callback");var e=["DELETE",this.path,"/f"];d(e,this.arch);var n=i(E(),e,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,o=p(n);return n.on("close",function(e){r||(0!==e?t(_("DELETE",e,o),null):t(null))}),n.stdout.on("data",function(t){}),n.on("error",function(e){r=e,t(e)}),this},y.prototype.create=function(t){if("function"!=typeof t)throw new TypeError("must specify a callback");var e=["ADD",this.path,"/f"];d(e,this.arch);var n=i(E(),e,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,o=p(n);return n.on("close",function(e){r||(0!==e?t(_("ADD",e,o),null):t(null))}),n.stdout.on("data",function(t){}),n.on("error",function(e){r=e,t(e)}),this},y.prototype.keyExists=function(t){return this.values(function(e,n){if(e)return 1==e.code?t(null,!1):t(e);t(null,!0)}),this},y.prototype.valueExists=function(t,e){return this.get(t,function(t,n){if(t)return 1==t.code?e(null,!1):e(t);e(null,!0)}),this},t.exports=y}};
//# sourceMappingURL=5.extension.js.map