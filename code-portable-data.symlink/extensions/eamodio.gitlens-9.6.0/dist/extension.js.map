{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///./node_modules/safer-buffer/safer.js","webpack:///external \"buffer\"","webpack:///./node_modules/iconv-lite/lib/index.js","webpack:///./node_modules/dayjs/dayjs.min.js","webpack:///./node_modules/vsls/vscode.js","webpack:///external \"stream\"","webpack:///external \"crypto\"","webpack:///./node_modules/dayjs/plugin/advancedFormat.js","webpack:///./node_modules/dayjs/plugin/relativeTime.js","webpack:///external \"child_process\"","webpack:///./node_modules/iconv-lite/lib/bom-handling.js","webpack:///./node_modules/iconv-lite/encodings/index.js","webpack:///./node_modules/iconv-lite/encodings/internal.js","webpack:///external \"string_decoder\"","webpack:///./node_modules/iconv-lite/encodings/utf16.js","webpack:///./node_modules/iconv-lite/encodings/utf7.js","webpack:///./node_modules/iconv-lite/encodings/sbcs-codec.js","webpack:///./node_modules/iconv-lite/encodings/sbcs-data.js","webpack:///./node_modules/iconv-lite/encodings/sbcs-data-generated.js","webpack:///./node_modules/iconv-lite/encodings/dbcs-codec.js","webpack:///./node_modules/iconv-lite/encodings/dbcs-data.js","webpack:///./node_modules/iconv-lite/lib/streams.js","webpack:///./node_modules/iconv-lite/lib/extend-node.js","webpack:///./src/comparers.ts","webpack:///./src/config.ts","webpack:///./src/constants.ts","webpack:///./src/system/array.ts","webpack:///./src/system/date.ts","webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/lodash-es/_root.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/lodash-es/toFinite.js","webpack:///./node_modules/lodash-es/toInteger.js","webpack:///./node_modules/lodash-es/before.js","webpack:///./node_modules/lodash-es/once.js","webpack:///./src/system/function.ts","webpack:///./src/system/decorators/gate.ts","webpack:///./src/logger.ts","webpack:///./src/system/decorators/log.ts","webpack:///./src/system/string.ts","webpack:///./src/system/iterable.ts","webpack:///./src/system/object.ts","webpack:///./src/system/searchTree.ts","webpack:///./src/system/version.ts","webpack:///./src/configuration.ts","webpack:///./src/annotations/annotationProvider.ts","webpack:///./src/messages.ts","webpack:///./src/trackers/trackedDocument.ts","webpack:///./src/trackers/documentTracker.ts","webpack:///./src/trackers/gitDocumentTracker.ts","webpack:///./src/git/shell.ts","webpack:///./src/git/locator.ts","webpack:///./src/git/gitUri.ts","webpack:///./src/git/formatters/formatter.ts","webpack:///./src/git/formatters/commitFormatter.ts","webpack:///./src/git/models/file.ts","webpack:///./src/git/formatters/statusFormatter.ts","webpack:///./src/gravatar.ts","webpack:///./src/git/models/commit.ts","webpack:///./src/git/models/blameCommit.ts","webpack:///./src/git/models/status.ts","webpack:///./src/git/models/branch.ts","webpack:///./src/git/models/contributor.ts","webpack:///./src/git/parsers/diffParser.ts","webpack:///./src/git/models/diff.ts","webpack:///./src/git/models/logCommit.ts","webpack:///./src/git/models/remote.ts","webpack:///./src/git/remotes/provider.ts","webpack:///./src/git/remotes/azure-devops.ts","webpack:///./src/git/remotes/bitbucket.ts","webpack:///./src/git/remotes/bitbucket-server.ts","webpack:///./src/git/remotes/custom.ts","webpack:///./src/git/remotes/github.ts","webpack:///./src/git/remotes/gitlab.ts","webpack:///./src/git/remotes/factory.ts","webpack:///./src/git/models/repository.ts","webpack:///./src/git/models/stashCommit.ts","webpack:///./src/git/models/tag.ts","webpack:///./src/git/parsers/blameParser.ts","webpack:///./src/git/parsers/branchParser.ts","webpack:///./src/git/parsers/logParser.ts","webpack:///./src/git/parsers/remoteParser.ts","webpack:///./src/git/parsers/shortlogParser.ts","webpack:///./src/git/parsers/stashParser.ts","webpack:///./src/git/parsers/statusParser.ts","webpack:///./src/git/parsers/tagParser.ts","webpack:///./src/git/parsers/treeParser.ts","webpack:///./src/git/git.ts","webpack:///./src/vsls/protocol.ts","webpack:///./src/vsls/host.ts","webpack:///./src/vsls/guest.ts","webpack:///./src/vsls/vsls.ts","webpack:///./src/git/gitService.ts","webpack:///./src/webviews/apps/shared/colors.ts","webpack:///./src/annotations/annotations.ts","webpack:///./src/annotations/fileAnnotationController.ts","webpack:///./src/annotations/blameAnnotationProvider.ts","webpack:///./src/annotations/gutterBlameAnnotationProvider.ts","webpack:///./src/annotations/heatmapBlameAnnotationProvider.ts","webpack:///./src/annotations/recentChangesAnnotationProvider.ts","webpack:///./src/annotations/lineAnnotationController.ts","webpack:///./src/codelens/codeLensProvider.ts","webpack:///./src/codelens/codeLensController.ts","webpack:///./src/git/fsProvider.ts","webpack:///./src/hovers/lineHoverController.ts","webpack:///./src/keyboard.ts","webpack:///./src/statusbar/statusBarController.ts","webpack:///./src/trackers/lineTracker.ts","webpack:///./src/trackers/gitLineTracker.ts","webpack:///./src/views/nodes/viewNode.ts","webpack:///./src/views/nodes/commitFileNode.ts","webpack:///./src/views/nodes/folderNode.ts","webpack:///./src/views/nodes/commitNode.ts","webpack:///./src/views/nodes/common.ts","webpack:///./src/views/nodes/helpers.ts","webpack:///./src/views/nodes/branchTrackingStatusNode.ts","webpack:///./src/views/nodes/branchNode.ts","webpack:///./src/views/nodes/branchOrTagFolderNode.ts","webpack:///./src/views/nodes/branchesNode.ts","webpack:///./src/views/nodes/contributorNode.ts","webpack:///./src/views/nodes/contributorsNode.ts","webpack:///./src/views/nodes/fileHistoryNode.ts","webpack:///./src/quickpicks/referencesQuickPick.ts","webpack:///./src/quickpicks/commonQuickPicks.ts","webpack:///./src/quickpicks/remotesQuickPick.ts","webpack:///./src/quickpicks/branchHistoryQuickPick.ts","webpack:///./src/quickpicks/commitFileQuickPick.ts","webpack:///./src/quickpicks/commitQuickPick.ts","webpack:///./src/quickpicks/commitsQuickPick.ts","webpack:///./src/quickpicks/fileHistoryQuickPick.ts","webpack:///./src/quickpicks/repositoriesQuickPick.ts","webpack:///./src/quickpicks/repoStatusQuickPick.ts","webpack:///./src/quickpicks/stashListQuickPick.ts","webpack:///./src/views/nodes/fileHistoryTrackerNode.ts","webpack:///./src/views/nodes/lineHistoryNode.ts","webpack:///./src/views/nodes/lineHistoryTrackerNode.ts","webpack:///./src/views/nodes/remoteNode.ts","webpack:///./src/views/nodes/remotesNode.ts","webpack:///./src/views/nodes/stashFileNode.ts","webpack:///./src/views/nodes/stashNode.ts","webpack:///./src/views/nodes/stashesNode.ts","webpack:///./src/views/nodes/statusFileNode.ts","webpack:///./src/views/nodes/statusFilesNode.ts","webpack:///./src/views/nodes/tagNode.ts","webpack:///./src/views/nodes/tagsNode.ts","webpack:///./src/views/nodes/repositoryNode.ts","webpack:///./src/views/nodes/repositoriesNode.ts","webpack:///./src/views/nodes/resultsCommitsNode.ts","webpack:///./src/views/nodes/resultsFileNode.ts","webpack:///./src/views/nodes/resultsFilesNode.ts","webpack:///./src/views/nodes/compareResultsNode.ts","webpack:///./src/views/nodes/comparePickerNode.ts","webpack:///./src/views/nodes/compareNode.ts","webpack:///./src/commands/common.ts","webpack:///./src/views/nodes/searchNode.ts","webpack:///./src/views/nodes/searchResultsCommitsNode.ts","webpack:///./src/views/viewBase.ts","webpack:///./src/views/compareView.ts","webpack:///./src/views/fileHistoryView.ts","webpack:///./src/views/lineHistoryView.ts","webpack:///./src/views/repositoriesView.ts","webpack:///./src/views/searchView.ts","webpack:///./src/views/viewCommands.ts","webpack:///./src/webviews/protocol.ts","webpack:///./src/webviews/webviewBase.ts","webpack:///./src/webviews/settingsWebview.ts","webpack:///./src/webviews/welcomeWebview.ts","webpack:///./src/container.ts","webpack:///./src/commands/annotations.ts","webpack:///./src/commands/closeUnchangedFiles.ts","webpack:///./src/commands/copyMessageToClipboard.ts","webpack:///./src/commands/copyRemoteFileUrlToClipboard.ts","webpack:///./src/commands/copyShaToClipboard.ts","webpack:///./src/commands/diffBranchWith.ts","webpack:///./src/commands/diffDirectory.ts","webpack:///./src/commands/diffLineWithPrevious.ts","webpack:///./src/commands/diffLineWithWorking.ts","webpack:///./src/commands/diffWith.ts","webpack:///./src/commands/diffWithNext.ts","webpack:///./src/commands/diffWithPrevious.ts","webpack:///./src/commands/diffWithRef.ts","webpack:///./src/commands/diffWithRevision.ts","webpack:///./src/commands/diffWithWorking.ts","webpack:///./src/commands/externalDiff.ts","webpack:///./src/commands/openBranchesInRemote.ts","webpack:///./src/commands/openBranchInRemote.ts","webpack:///./src/commands/openChangedFiles.ts","webpack:///./src/commands/openCommitInRemote.ts","webpack:///./src/commands/openFileInRemote.ts","webpack:///./src/commands/openFileRevision.ts","webpack:///./src/commands/openFileRevisionFrom.ts","webpack:///./src/commands/openInRemote.ts","webpack:///./src/commands/openRepoInRemote.ts","webpack:///./src/commands/openWorkingFile.ts","webpack:///./src/commands/repositories.ts","webpack:///./src/commands/resetSuppressedWarnings.ts","webpack:///./src/commands/searchCommits.ts","webpack:///./src/commands/showLastQuickPick.ts","webpack:///./src/commands/showQuickBranchHistory.ts","webpack:///./src/commands/showQuickCommitDetails.ts","webpack:///./src/commands/showQuickCommitFileDetails.ts","webpack:///./src/commands/showQuickCurrentBranchHistory.ts","webpack:///./src/commands/showQuickFileHistory.ts","webpack:///./src/commands/showQuickRepoStatus.ts","webpack:///./src/commands/showQuickStashList.ts","webpack:///./src/commands/showView.ts","webpack:///./src/commands/stashApply.ts","webpack:///./src/commands/stashDelete.ts","webpack:///./src/commands/stashSave.ts","webpack:///./src/commands/supportGitLens.ts","webpack:///./src/commands/switchMode.ts","webpack:///./src/quickpicks/modesQuickPick.ts","webpack:///./src/commands/toggleCodeLens.ts","webpack:///./src/extension.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","buffer","Buffer","safer","Safer","from","Uint8Array","encodingOrOffset","length","TypeError","alloc","size","fill","encoding","RangeError","buf","kStringMaxLength","process","binding","e","constants","MAX_LENGTH","kMaxLength","MAX_STRING_LENGTH","bomHandling","iconv","encodings","defaultCharUnicode","defaultCharSingleByte","encode","str","options","encoder","getEncoder","res","write","trail","end","concat","decode","skipDecodeWarning","console","error","decoder","getDecoder","encodingExists","enc","getCodec","toEncoding","fromEncoding","_codecDataCache","_canonicalizeEncoding","codecOptions","codec","codecDef","encodingName","type","Error","toLowerCase","replace","bomAware","addBOM","PrependBOM","stripBOM","StripBOM","nodeVer","versions","node","nodeVerArr","split","map","Number","u","a","h","f","String","Array","join","z","utcOffset","Math","abs","floor","year","month","clone","add","ceil","M","y","w","ms","Q","$","weekdays","months","S","g","format","pl","date","D","locale","$L","utc","$u","this","parse","$d","Date","NaN","test","match","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","day","hour","minute","second","millisecond","unix","valueOf","getTime","toDate","apply","slice","$locale","weekStart","$set","min","daysInMonth","setDate","subtract","substr","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","round","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","extend","isDayjs","en","Ls","vscode","liveShareApiVersion","version","async","getApi","liveshareExtension","extensions","getExtension","extensionId","extensionApi","isActive","activate","getApiAsync","Role","Access","View","ViewItem","ordinal","weekYear","week","relativeTime","future","past","yy","to","toNow","fromNow","PrependBOMWrapper","StripBOMWrapper","pass","InternalCodec","InternalEncoderBase64","InternalEncoderCesu8","InternalDecoderCesu8","utf8","cesu8","unicode11utf8","ucs2","utf16le","binary","base64","hex","_internal","InternalEncoder","InternalDecoder","StringDecoder","prevStr","acc","contBytes","accBytes","completeQuads","bufIdx","charCode","charCodeAt","curByte","fromCharCode","Utf16BECodec","Utf16BEEncoder","Utf16BEDecoder","overflowByte","Utf16Codec","Utf16Encoder","undefined","Utf16Decoder","initialBytes","initialBytesLen","detectEncoding","defaultEncoding","asciiCharsLE","asciiCharsBE","_len","utf16be","tmp","buf2","j","utf16","push","Utf7Codec","utf7","unicode11utf7","Utf7Encoder","Utf7Decoder","nonDirectChars","inBase64","base64Accum","chunk","base64Regex","base64Chars","plusChar","minusChar","andChar","Utf7IMAPCodec","Utf7IMAPEncoder","base64AccumIdx","Utf7IMAPDecoder","lastI","b64str","canBeDecoded","utf7imap","uChar","base64IMAPChars","SBCSCodec","chars","asciiString","decodeBuf","encodeBuf","SBCSEncoder","SBCSDecoder","_sbcs","newBuf","idx1","idx2","10029","maccenteuro","808","ibm808","cp808","mik","ascii8bit","usascii","ansix34","ansix341968","ansix341986","csascii","cp367","ibm367","isoir6","iso646us","iso646irv","us","latin1","latin2","latin3","latin4","latin5","latin6","latin7","latin8","latin9","latin10","csisolatin1","csisolatin2","csisolatin3","csisolatin4","csisolatincyrillic","csisolatinarabic","csisolatingreek","csisolatinhebrew","csisolatin5","csisolatin6","l1","l2","l3","l4","l5","l6","l7","l8","l9","l10","isoir14","isoir57","isoir100","isoir101","isoir109","isoir110","isoir144","isoir127","isoir126","isoir138","isoir148","isoir157","isoir166","isoir179","isoir199","isoir203","isoir226","cp819","ibm819","cyrillic","arabic","arabic8","ecma114","asmo708","greek","greek8","ecma118","elot928","hebrew","hebrew8","turkish","turkish8","thai","thai8","celtic","celtic8","isoceltic","tis6200","tis62025291","tis62025330","10000","10006","10007","10079","10081","cspc8codepage437","cspc775baltic","cspc850multilingual","cspcp852","cspc862latinhebrew","cpgr","msee","mscyrl","msansi","msgreek","msturk","mshebr","msarab","winbaltrim","cp20866","20866","ibm878","cskoi8r","cp21866","21866","ibm1168","strk10482002","tcvn5712","tcvn57121","gb198880","cn","csiso14jisc6220ro","jisc62201969ro","jp","cshproman8","r8","roman8","xroman8","ibm1051","mac","csmacintosh","437","737","775","850","852","855","856","857","858","860","861","862","863","864","865","866","869","874","922","1046","1124","1125","1129","1133","1161","1162","1163","1250","1251","1252","1253","1254","1255","1256","1257","1258","28591","28592","28593","28594","28595","28596","28597","28598","28599","28600","28601","28603","28604","28605","28606","windows874","win874","cp874","windows1250","win1250","cp1250","windows1251","win1251","cp1251","windows1252","win1252","cp1252","windows1253","win1253","cp1253","windows1254","win1254","cp1254","windows1255","win1255","cp1255","windows1256","win1256","cp1256","windows1257","win1257","cp1257","windows1258","win1258","cp1258","iso88591","cp28591","iso88592","cp28592","iso88593","cp28593","iso88594","cp28594","iso88595","cp28595","iso88596","cp28596","iso88597","cp28597","iso88598","cp28598","iso88599","cp28599","iso885910","cp28600","iso885911","cp28601","iso885913","cp28603","iso885914","cp28604","iso885915","cp28605","iso885916","cp28606","cp437","ibm437","csibm437","cp737","ibm737","csibm737","cp775","ibm775","csibm775","cp850","ibm850","csibm850","cp852","ibm852","csibm852","cp855","ibm855","csibm855","cp856","ibm856","csibm856","cp857","ibm857","csibm857","cp858","ibm858","csibm858","cp860","ibm860","csibm860","cp861","ibm861","csibm861","cp862","ibm862","csibm862","cp863","ibm863","csibm863","cp864","ibm864","csibm864","cp865","ibm865","csibm865","cp866","ibm866","csibm866","cp869","ibm869","csibm869","cp922","ibm922","csibm922","cp1046","ibm1046","csibm1046","cp1124","ibm1124","csibm1124","cp1125","ibm1125","csibm1125","cp1129","ibm1129","csibm1129","cp1133","ibm1133","csibm1133","cp1161","ibm1161","csibm1161","cp1162","ibm1162","csibm1162","cp1163","ibm1163","csibm1163","maccroatian","maccyrillic","macgreek","maciceland","macroman","macromania","macthai","macturkish","macukraine","koi8r","koi8u","koi8ru","koi8t","armscii8","rk1048","tcvn","georgianacademy","georgianps","pt154","viscii","iso646cn","iso646jp","hproman8","macintosh","ascii","tis620","_dbcs","DBCSCodec","UNASSIGNED","GB18030_CODE","NODE_START","UNASSIGNED_NODE","table","mappingTable","decodeTables","decodeTableSeq","_addDecodeChunk","encodeTable","encodeTableSeq","skipEncodeChars","encodeSkipVals","val","_fillEncodeTable","encodeAdd","_setEncodeChar","defCharSB","gb18030","thirdByteNodeIdx","thirdByteNode","fourthByteNodeIdx","fourthByteNode","secondByteNodeIdx","secondByteNode","DBCSEncoder","leadSurrogate","seqObj","DBCSDecoder","nodeIdx","prevBuf","findIdx","mid","_getDecodeTrieNode","addr","bytes","curAddr","parseInt","writeTable","k","part","code","codeTrail","len","seq","_getEncodeBucket","uCode","high","dbcsCode","bucket","low","_setEncodeSequence","oldVal","prefix","mbCode","nextChar","resCode","subtable","idx","uChars","gbChars","prevBufOffset","seqStart","curSeq","ptr","uCodeLead","ret","shiftjis","¥","‾","csshiftjis","mskanji","sjis","windows31j","ms31j","xsjis","windows932","ms932","932","cp932","eucjp","gb2312","gb231280","gb23121980","csgb2312","csiso58gb231280","euccn","windows936","ms936","936","cp936","gbk","xgbk","isoir58","€","chinese","windows949","ms949","949","cp949","cseuckr","csksc56011987","euckr","isoir149","korean","ksc56011987","ksc56011989","ksc5601","windows950","ms950","950","cp950","big5","big5hkscs","cnbig5","csbig5","xxbig5","Transform","IconvLiteEncoderStream","conv","decodeStrings","IconvLiteDecoderStream","encodeStream","decodeStream","supportsStreams","_collect","collect","constructor","_transform","done","_flush","cb","chunks","on","isBuffer","original","supportsNodeEncodingsExtension","extendNodeEncodings","nodeNativeEncodings","utf-8","ucs-2","utf-16le","isNativeEncoding","SlowBuffer","SlowBufferToString","start","SlowBufferWrite","string","offset","isFinite","swap","remaining","copy","BufferIsEncoding","isEncoding","BufferByteLength","byteLength","BufferToString","BufferWrite","_offset","_length","_encoding","Readable","ReadableSetEncoding","setEncoding","_readableState","undoExtendNodeEncodings","Comparer","textDocumentComparer","TextDocumentComparer","[object Object]","lhs","rhs","textEditorComparer","TextEditorComparer","useId","usePosition","viewColumn","document","equals","id","uriComparer","UriComparer","exact","scheme","fsPath","AnnotationsToggleMode","CodeLensCommand","CodeLensScopes","CustomRemoteType","DateStyle","FileAnnotationType","GravatarDefaultStyle","HighlightLocations","KeyMap","StatusBarCommand","ViewBranchesLayout","ViewFilesLayout","extensionOutputChannelName","extensionQualifiedId","extensionTerminalName","BuiltInCommands","CommandContext","DocumentSchemes","GlyphChars","GlobalState","setCommandContext","external_vscode_","executeCommand","SetContext","isActiveDocument","editor","activeTextEditor","isTextEditor","uri","Output","DebugConsole","ImageMimetypes",".png",".gif",".jpg",".jpeg",".jpe",".webp",".tif",".tiff",".bmp","WorkspaceState","Arrays","compactHierarchy","root","joinPath","isRoot","children","values","child","relativePath","countUniques","source","accessor","uniqueCounts","item","filterMap","predicateMapper","reduce","accumulator","current","mapped","filterMapAsync","groupBy","groupings","groupByMap","group","Map","groupByFilterMap","makeHierarchical","splitPath","compact","seed","descendants","hierarchy","folder","folderName","uniqueBy","predicate","uniqueValues","filter","date_Dates","dayjs_min","advancedFormat","Dates","MillisecondsPerMinute","MillisecondsPerHour","MillisecondsPerDay","toFormatter","wrappedDate","lodash_es_isObject","_freeGlobal","global","freeSelf","self","lodash_es_root","Function","lodash_es_now","now","_Symbol","objectProto","_getRawTag_hasOwnProperty","nativeObjectToString","symToStringTag","_getRawTag","isOwn","tag","unmasked","result","_objectToString_nativeObjectToString","_objectToString","nullTag","undefinedTag","_baseGetTag_symToStringTag","_baseGetTag","lodash_es_isObjectLike","symbolTag","lodash_es_isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","lodash_es_toNumber","other","isBinary","FUNC_ERROR_TEXT","nativeMax","max","nativeMin","lodash_es_debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","timeWaiting","remainingWait","debounced","isInvoking","arguments","leadingEdge","cancel","clearTimeout","flush","INFINITY","MAX_INTEGER","lodash_es_toFinite","lodash_es_toInteger","remainder","before_FUNC_ERROR_TEXT","lodash_es_before","function_Functions","lodash_es_once","gate","target","descriptor","fn","gateKey","configurable","writable","promise","isPromise","then","Functions","cachedOnce","cached","Promise","resolve","cancellable","token","reject","onCancellationRequested","debounce","track","opts","pending","tracked","comma","emptyStr","openBrace","openParen","closeParen","fnBodyRegex","fnBodyStripCommentsRegex","fnBodyStripParamDefaultValueRegex","getParameters","fnBody","open","indexOf","close","param","trim","is","propOrMatcher","obj","once","propOf","propOfCore","assign","interval","timer","disposable","dispose","clearInterval","setInterval","waitUntil","timeout","counter","logger_emptyStr","TraceLevel","ConsolePrefix","isDebuggingRegex","logger_Logger","context","level","loggableFn","customLoggableFn","_level","Silent","output","createOutputChannel","contextOrMessage","params","Debug","isDebugging","message","shift","log","timestamp","appendLine","toLoggableParams","ex","stack","exec","log_correlationContext","correlationCounter","Verbose","warn","show","sanitize","loggable","JSON","stringify","_a","instance","index","getUTCMilliseconds","debugOnly","toLoggable","_isDebugging","env","VSCODE_DEBUGGING_EXTENSION","command","gitOutput","string_emptyStr","string_Strings","Strings","getDurationMilliseconds","secs","nanosecs","hrtime","pathNormalizeRegex","pathStripTrailingSlashRegex","tokenRegex","tokenSanitizeRegex","padLeft","padTo","padding","width","getWidth","repeat","padRight","getTokensFromTemplate","template","tokens","truncateTo","option","suffix","collapseWhitespace","padDirection","interpolate","lines","substring","md5","external_crypto_","update","digest","normalizePath","fileName","stripTrailingSlash","normalized","addLeadingSlash","pad","before","after","padLeftOrTruncate","truncate","padOrTruncate","left","padRightOrTruncate","pluralize","count","zero","number","plural","illegalCharsForFSRegex","ellipsis","sanitizeForFileSystem","replacement","sha1","splitSingle","splitter","parts","first","ansiRegex","containsNonAsciiRegex","emoji","joiners","graphemes","codePointAt","isFullwidthCodePoint","cp","log_emptyStr","clearCorrelationContext","correlationId","delete","LogInstanceNameFn","log_debug","timed","log_log","debug","logFn","parameters","MAX_SAFE_INTEGER","condition","instanceName","toLoggableName","correlate","correlationContext","setCorrelationContext","enter","loggableParams","singleLine","argFns","argFn","v","Boolean","logWithDebugParams","exit","logError","timing","exitDetails","logResult","catch","Iterables","Objects","some","next","every","forEach","find","iterator","flatMap","mapper","has","isIterable","separator","last","skip","take","union","sources","entries","flatten","flattened","_flatten","isArray","isEmpty","paths","path","results","FIN","StringIterator","_value","_pos","PathIterator","_from","_to","justSeps","ch","aPos","aLen","thisPos","cmp","TernarySearchTreeNode","right","searchTree_TernarySearchTree","segments","_iter","_root","element","iter","reset","segment","hasNext","oldElement","dir","parent","pop","candidate","limit","_nodeIterator","data","_forEach","callback","_iterator","Versions","major","minor","patch","pre","compare","v1","v2","localeCompare","fromString","ver","emptyConfig","Proxy","configuration_Configuration","_onDidChange","_onWillChange","initializingChangeEvent","affectsConfiguration","section","resource","subscriptions","onDidChangeConfiguration","configuration","onConfigurationChanged","onDidChange","event","onWillChange","evt","change","fire","transform","defaultValue","getConfiguration","inspect","inspection","migrated","globalValue","migrationFn","Global","workspaceValue","Workspace","workspaceFolderValue","WorkspaceFolder","fallbackValue","fromInspection","toInspection","AnnotationStatus","annotationProvider_AnnotationProviderBase","trackedDocument","decoration","highlightDecoration","correlationKey","getCorrelationKey","onDidChangeTextEditorSelection","onTextEditorSelectionChanged","clear","textEditor","selection","selections","active","line","editorId","editorUri","status","setDecorations","additionalDecorations","_b","_c","changes","_resetDebounced","onReset","provideAnnotation","_disposed","Computing","decorations","ranges","Computed","shaOrLine","onProvideAnnotation","SuppressedMessages","messages_Messages","commit","showMessage","CommitHasNoPreviousCommitWarning","shortSha","author","formattedDate","CommitNotFoundWarning","title","showOutputChannel","FileNotUnderSourceControlWarning","GitDisabledWarning","GitVersionWarning","LineUncommittedWarning","NoRepositoryWarning","actions","ViewsHideSupportGitLens","suppressedMessage","SupportGitLensNotification","Open","Commands","ShowWelcomePage","suppressionKey","dontShowAgain","showInformationMessage","showWarningMessage","showErrorMessage","messages","trackedDocument_TrackedDocument","_document","dirty","_eventDelegates","_onDidBlameStateChange","_forceDirtyStateChangeOnNextDocumentChange","_hasRemotes","_isDirtyIdle","_isTracked","_blameFailed","_repo","initialize","onDidBlameStateChange","_disposable","container_Container","git","_uri","gitUri_GitUri","fromUri","repo","getRepository","onRepositoryChanged","initializing","changed","RepositoryChange","Repository","forceDirtyStateChangeOnNextDocumentChange","hasRemotes","isBlameable","isDirtyIdle","isRevision","sha","isTracked","lineCount","ActiveFileStatus","getStatus","reason","state","wasBlameable","forceBlameChange","getEditorIfActive","blameable","documentTracker_DocumentTracker","_onDidChangeBlameState","_onDidChangeDirtyState","_onDidTriggerDirtyIdle","_documentMap","onDidChangeActiveTextEditor","onActiveTextEditorChanged","onDidChangeTextDocument","onTextDocumentChanged","onDidCloseTextDocument","onTextDocumentClosed","onDidSaveTextDocument","onTextDocumentSaved","onDidChangeBlameState","onDidChangeDirtyState","onDidTriggerDirtyIdle","_dirtyIdleTriggerDelay","_dirtyIdleTriggeredDebounced","_timer","doc","addCore","File","Vsls","isDirty","resetForceDirtyStateChangeOnNextDocumentChange","fireDocumentDirtyStateChanged","documentOrId","_add","_get","toKey","openTextDocument","documentUri","useVersionedPath","msg","includes","BinaryTextDocument","MissingRevisionTextDocument","ensureInitialized","setImmediate","_dirtyStateChangedDebounced","documentTracker_EmptyTextDocument","gitUri","eol","LF","isClosed","isUntitled","languageId","range","position","regex","GitDocumentState","cache","gitDocumentTracker_GitDocumentTracker","isWindows","platform","runDownPath","exe","external_path_","external_fs_","PATH","haystack","needle","RunError","exitCode","super","captureStackTrace","run","stdin","stdinEncoding","maxBuffer","proc","external_child_process_","err","stdout","stderr","lib","findSpecificGit","findExecutable","cmd","possibleExts","ext","possibleFullPath","SYSTEMROOT","execPath","raw","findSystemGitWin32","basePath","findGitPath","findGitDarwin","gitUri_emptyStr","slash","commitOrRepoPath","GitLens","query","authority","fragment","repoPath","gitService_GitService","isStagedUncommitted","ref","isUncommitted","ensureValidUNCPath","versionedPath","shortenSha","file","relativeTo","getDirectory","Dot","directory","useVslsScheme","vsls","isMaybeGuest","with","previous","previousUri","previousSha","fileOrName","resolveToUri","originalFileName","isTrackable","Git","getRepoPath","stagedUncommittedSha","commitish","fileNameOrUri","getFormattedPath","getRelativePath","encodeURIComponent","normalizedFileName","normalizedRepoPath","startsWith","uriOrRef","fileNameOrFile","filePath","__decorate","formatter_emptyStr","spaceReplacementRegex","formatter_Formatter","collapsableWhitespace","_item","_options","dateFormat","tokenOptions","formatter","dateFormatOrOptions","_formatter","commitFormatter_emptyStr","emojiMap","emojiRegex","escapeMarkdownRegex","markdownHeaderReplacement","ZeroWidthSpace","commitFormatter_CommitFormatter","_ago","_date","formatDate","_agoOrDate","dateStyle","config","defaultDateStyle","Absolute","ago","_padOrTruncate","agoOrDate","authorAgo","authorAgoOrDate","avatar","markdown","hovers","avatars","getGravatarUri","defaultGravatarsStyle","logCommit_GitLogCommit","GitCommitType","getFormattedDiffStatus","changesShort","commands","showQuickCommitDetails_ShowQuickCommitDetailsCommand","getMarkdownCommandArgs","MuchGreaterThan","diffWith_DiffWithCommand","annotationType","RecentChanges","Blame","toRevisionUri","SquareWithTopShadow","openFileRevision_OpenFileRevisionCommand","remotes","ArrowUpRight","openCommitInRemote_OpenCommitInRemoteCommand","MiddleEllipsis","showQuickCommitFileDetails_ShowQuickCommitFileDetailsCommand","email","truncateMessageAtNewLine","Space","Ellipsis","sort","b","default","numeric","sensitivity","provider","enrichMessage","fromTemplateCore","file_GitFile","GitFile","getFormattedDirectory","includeOriginal","ArrowLeft","statusIconsMap","!","?","C","R","T","U","X","B","getStatusIcon","statusOcticonsMap","getStatusOcticon","missing","statusTextMap","getStatusText","statusFormatter_StatusFileFormatter","working","statusFile","files","icon","workingTreeStatus","indexStatus","Pencil","SpaceThinnest","Check","SpaceThin","EnDash","gravatarCache","missingGravatarHash","fallback","hash","gravatar","CommitFormatting","commit_GitCommit","previousFileName","_fileName","_previousSha","isFile","_shortSha","git_Git","StashFile","isStash","Stash","_isStagedUncommitted","_isUncommitted","previousFileShortSha","previousFileSha","_resolvedPreviousFileSha","previousShortSha","workingUri","workingFileName","_dateFormatter","fromTemplate","resolveReference","fromCommit","blameCommit_GitBlameCommit","getChangedValue","status_GitStatus","branch","upstream","detached","branch_GitBranch","isDetached","formatDetached","_diff","added","deleted","getDiffStatus","empty","expand","getUpstreamStatus","behind","ahead","ArrowDown","ArrowUp","status_GitStatusFile","staged","workTreeStatus","tracking","remote","_basename","getName","lastIndexOf","_name","getRemote","starred","workspaceState","StarredBranches","updateStarred","star","_","rest","contributor_GitContributor","nameStatusDiffRegex","shortStatDiffRegex","unifiedDiffRegex","diffParser_GitDiffParser","currentStart","previousStart","diff_GitDiffChunk","currentLines","previousLines","removed","chunkLines","chunkLine","rawStatus","insertions","deletions","currentPosition","previousPosition","_chunk","_lines","parseChunk","committedDate","parentShas","isMerge","nextShortSha","nextSha","nextUri","nextFileName","GitRemoteType","RemoteResourceType","remote_GitRemote","domain","types","defaultRemote","DefaultRemote","getNameFromRemoteResource","Branch","Branches","Commit","Repo","Revision","provider_RemoteProvider","protocol","custom","displayPath","baseUrl","url","clipboard","writeText","showGenericErrorMessage","openUrl","getUrlForBranch","getUrlForBranches","getUrlForCommit","getUrlForFile","getUrlForRepository","issueEnricherRegex","gitRegex","legacyDefaultCollectionRegex","orgAndProjectRegex","sshDomainRegex","sshPathRegex","azure_devops_AzureDevOpsRemote","legacy","org","project","_displayPath","bitbucket_issueEnricherRegex","prEnricherRegex","bitbucket_BitbucketRemote","formatName","bitbucket_server_issueEnricherRegex","bitbucket_server_prEnricherRegex","bitbucket_server_BitbucketServerRemote","custom_CustomRemote","urls","repository","getContext","branches","fileLine","fileRange","fileInCommit","fileInBranch","repoBase","github_issueEnricherRegex","issueEnricher3rdParyRegex","github_GitHubRemote","gitlab_issueEnricherRegex","gitlab_GitLabRemote","defaultProviders","factory_RemoteProviderFactory","providers","matcher","creator","cfg","rc","getCustomProvider","Bitbucket","BitbucketServer","Custom","GitHub","GitLab","RepositoryChangeEvent","solely","repository_Repository","onAnyRepositoryChanged","suspended","closed","_onDidChangeFileSystem","supportsChangeEvents","_fireChangeDebounced","_fireFileSystemChangeDebounced","_fsWatchCounter","_pendingChanges","_closed","getWorkspaceFolder","fromRepoPath","formattedName","normalizedPath","endsWith","_suspended","watcher","createFileSystemWatcher","onDidCreate","onDidDelete","onDidChangeFileSystem","stopWatchingFileSystem","_providers","loadProviders","_remotes","fireChange","Remotes","fireFileSystemChange","Stashes","_branch","Tags","Config","Closed","progress","fetchCore","withProgress","location","Notification","fetch","getBranch","getBranches","getChangedFilesCount","getContributors","stat","mtime","remotesCfg","getRemotesCore","getStashList","getStatusForRepo","getTags","getRemotes","pullCore","force","pushCore","fs","StarredRepositories","_fsWatcherDisposable","onFileSystemChanged","reasons","fireChangeCore","fireFileSystemChangeCore","uris","repository_decorate","stashCommit_GitStashCommit","stashName","GitTag","annotation","blameParser_emptyStr","blameParser_slash","blameParser_GitBlameParser","currentUser","authors","commits","lineParts","relativeFileName","entry","authorEmail","authorDate","authorTimeZone","summary","parseEntry","originalLine","branchWithTrackingRegex","branchWithTrackingStateRegex","branchParser_GitBranchParser","parseState","isNaN","logParser_emptyStr","logParser_slash","diffRegex","emptyEntry","logParser_GitLogParser","maxCount","reverse","recentCommit","truncationCount","parseFileName","matches","truncated","remoteParser_emptyStr","remoteRegex","urlRegex","remoteParser_GitRemoteParser","providerFactory","groups","uniqueness","parseGitUrl","shortlogRegex","shortlogParser_GitShortLogParser","contributors","stashParser_emptyStr","stashParser_emptyEntry","stashParser_GitStashParser","fileNames","statusParser_emptyStr","aheadStatusV1Regex","behindStatusV1Regex","statusParser_GitStatusParser","porcelainVersion","parseV1","parseV2","upstreamStatus","aheadStatus","behindStatus","file1","file2","parseStatusFile","tagWithRefRegex","tagWithAnnotationRegex","tagParser_GitTagParser","tags","treeParser_emptyStr","treeRegex","GitTreeParser","trees","commitSha","emptyArray","freeze","emptyObj","git_emptyStr","git_slash","rootSha","defaultBlameParams","defaultLogParams","defaultStashParams","GitErrors","badRevision","notAValidObjectName","GitWarnings","notARepository","outsideRepository","noPath","noCommits","notFound","foundButNotInRevision","headNotABranch","noUpstream","unknownRevision","mustRunInWorkTree","patchWithConflicts","noRemoteRepositorySpecified","remoteConnectionError","notAGitCommand","GitErrorHandling","pendingCommands","local","guest","cwd","configs","errors","errorHandling","runOpts","GCM_INTERACTIVE","GCM_PRESERVE_CREDS","LC_ALL","gitCommand","waiting","exception","splice","gitInfo","Ignore","Throw","defaultExceptionHandler","duration","logGitCommand","warning","gitPath","shaRegex","shaLikeRegex","stagedUncommittedRegex","uncommittedRegex","strings","stagedUncommitted","uncommitted","advanced","abbreviatedShaLength","shaShortenRegex","rev","extract","gitMajor","gitMinor","pathspec","allowConflicts","ignoreWhitespace","startLine","endLine","contents","all","deletedOrMissingSha","pattern","ref1","ref2","tool","renames","search","forkPoint","deleteAfter","pathspecs","GIT_OPTIONAL_LOCKS","uncommittedSha","RequestType","GitCommandRequestType","RepositoriesInFolderRequestType","WorkspaceFileExistsRequestType","defaultWhitelistFn","gitWhitelist","leadingSlashRegex","host_VslsHostService","_api","_service","_localToSharedPaths","_sharedToLocalPaths","onDidChangeIsServiceAvailable","onAvailabilityChanged","onDidChangeWorkspaceFolders","onWorkspaceFoldersChanged","onRequest","onGitCommandRequest","onRepositoriesInFolderRequest","onWorkspaceFileExistsRequest","api","service","shareService","ServiceId","unshareService","requestType","handler","cancellation","available","workspaceFolders","cc","getCorrelationContext","localPath","sharedPath","convertLocalUriToShared","localPaths","_localPathsRegex","RegExp","sharedPaths","_sharedPathsRegex","request","isRootWorkspace","shared","localCwd","arg","convertSharedUriToLocal","folderUri","repositories","getRepositories","vslsUri","exists","fileExists","localUri","sharedUri","vslsUriRootRegex","host_decorate","guest_VslsGuestService","isServiceAvailable","getSharedService","Enabled","response","sendRequest","ensureCase","guest_decorate","vslsUriPrefixRegex","vsls_VslsController","_host","_guest","Readonly","_waitForReady","_onReady","onDidChangeSession","onLiveShareSessionChanged","session","role","Host","liveshare","allowGuestAccess","share","Guest","connect","gitService_emptyStr","gitService_slash","RepoSearchWarnings","doesNotExist","userConfigRegex","mappedAuthorRegex","GitRepoSearchBy","_onDidChangeRepositories","_branchesCache","_tagsCache","_tagsWithRefsCache","_trackedCache","_userMapCache","_repositoryTree","forPaths","onDidChangeWindowState","onWindowStateChanged","_repositoriesLoadingPromise","onDidChangeRepositories","UseCaching","caching","enabled","updateContext","fireRepositoriesChanged","focused","resume","suspend","getRepositoriesInFolder","repositorySearch","repos","findSuperstr","reposToDelete","depth","anyRepoChangedFn","rootPath","getRepoPathCore","excludes","repoPaths","repositorySearchCore","rp","folders","promises","resolve2","reject2","isDirectory","repositoryTree","hasRepository","any","HasRemotes","isCloseAffordance","checkout","getOrderedRepositories","total","report","increment","isCancellationRequested","pull","fileExistsWithCase","repoPathLength","getLogForFile","findNextFileName","findNextFileNameCore","getRecentShaForFile","getLog","commitOrFileName","tracker","getOrAdd","getHighlanderRepoPath","highlander","cachedBlame","getBlameForFileCore","emptyPromise","blame","customArguments","getCurrentUser","errorMessage","setBlameFailure","getBlameForFileContentsCore","blame_contents","skipCache","getBlameForFile","blameLine","lineToBlame","getBlameForFileContents","getBlameForRangeSync","allLines","shas","Set","sortedAuthors","revparse_currentBranch","diff_shortstat","parseShortStat","config_get","shortlog","user","config_getRegex","mappedAuthor","check_mailmap","cachedDiff","getDiffForFileCore","getEncoding","getDiffForFile","diff_nameStatus","parseNameStatus","show_status","getLogCommitForFile","log_recent","firstIfNotFound","isSha","maxListItems","searchBy","searchArgs","Author","ChangedLines","Changes","Files","Message","Sha","log_search","getLogForSearch","fileHistoryFollowsRenames","fromFile","cachedLog","getLogForFileCore","log_file","hasTrackingBranch","merge_base","includeAll","factory","filePathOrUri","skipCacheUpdate","isVslsScheme","findRepositoryForPath","revparse_toplevel","getActiveRepoPath","getRepositoryTree","repoPathOrUri","findSubstr","vslsPath","stash_list","validateVersion","status_file","includeRefs","showref_tag","parseWithRef","ls_tree","schemeOruri","cacheKey","isTrackedCore","ls_files","getDiffTool","difftool_fileDiff","difftool_dirDiff","resolved","isShaLike","revparse","ensuredRef","cat_file_validate","cat_validate","directoryOrUri","stash_apply","stash_delete","stash_save","ensureGitVersion","stash_push","gitApi","getBuiltInGitApi","setOrFindGitPath","extension","getAPI","getGitPath","getGitVersion","deletedOrMissing","feature","gitVersion","gitService_decorate","0","1","2","cssColorRegex","toRgba","color","parseFloat","defaultHeatmapHotColor","defaultHeatmapColdColor","computedHeatmapColor","annotations_Annotations","heatmap","getHeatmapColor","renderOptions","borderColor","baseColor","cold","colors","hot","age","computeAge","rgba","rgb","toFixed","detailsMarkdownFormat","isTrusted","codeDiff","getCodeDiff","Dash","ArrowLeftRightLong","getDiffForLine","hoverMessage","getHoverDiffMessage","dateFormatOrFormatOptions","uncommittedColor","contentText","separateLines","borderStyle","borderWidth","spacing","backgroundColor","fontWeight","fontStyle","height","margin","textDecoration","applyHeatmap","scrollable","AnnotationClearReason","blameAnnotationProvider_BlameAnnotationProviderBase","_blame","getText","setForceDirtyStateChangeOnNextDocumentChange","_hoverProviderDisposable","commitLine","highlightDecorationRanges","validateRange","dates","half","median","lookup","newest","step","oldest","ageThreshold","coldColor","hotColor","annotations","details","registerHoverProvider","provideHover","provideChangesHover","provideDetailsHover","getCommitForHover","logCommit","getHoverMessage","defaultDateFormat","hover","changesHover","over","character","getBlame","blameAnnotationProvider_decorate","gutterBlameAnnotationProvider_GutterBlameAnnotationProvider","gravatarDefault","gutterRenderOptions","decorationsMap","avatarDecorationsMap","gutter","computedHeatmap","compacted","getComputedHeatmap","addOrUpdateGravatarDecoration","registerHoverProviders","avatarDecoration","createTextEditorDecorationType","gutterIconPath","gutterIconSize","gutterBlameAnnotationProvider_decorate","heatmapBlameAnnotationProvider_HeatmapBlameAnnotationProvider","Heatmap","heatmapRenderOptions","heatmapBlameAnnotationProvider_decorate","recentChangesAnnotationProvider_RecentChangesAnnotationProvider","getRecentLogCommitForFile","recentChangesAnnotationProvider_decorate","Decorations","blameAnnotation","rangeBehavior","ClosedOpen","blameHighlight","heatmapAnnotation","heatmapHighlight","recentChangesAnnotation","recentChangesHighlight","fileAnnotationController_FileAnnotationController","_onDidToggleAnnotations","_annotationProviders","_keyboardScope","_annotationType","_toggleModes","onDidToggleAnnotations","clearAll","_annotationsDisposable","cfgHighlight","highlight","isWholeLine","overviewRulerLane","Right","locations","Line","overviewRulerColor","Overview","dark","Gutter","asAbsolutePath","light","recentChanges","toggleMode","_editor","isInWindowToggle","getProvider","detachKeyboardHook","attachKeyboardHook","BlameabilityChanged","clearCore","DocumentChanged","DocumentClosed","restore","fuzzyProvider","ColumnChanged","editors","getToggleMode","Window","User","Disposing","visibleTextEditors","currentProvider","computingAnnotations","showAnnotationsCore","reopen","keyboard","beginScope","escape","onDidPressKey","annotationsLabel","validate","onDidChangeTextEditorViewColumn","onTextEditorViewColumnChanged","onDidChangeVisibleTextEditors","onVisibleTextEditorsChanged","onBlameStateChanged","onDirtyStateChanged","annotationDecoration","lineAnnotationController_LineAnnotationController","_enabled","fileAnnotations","onFileAnnotationsToggled","clearAnnotations","lineTracker","stop","currentLine","setLineTracker","refresh","includesAll","getState","isSubscribed","onDidChangeActiveLines","onActiveLinesChanged","lineAnnotationController_decorate","codeLensProvider_GitRecentChangeCodeLens","symbol","blameRange","isFullRange","desiredCommand","codeLensProvider_GitAuthorsCodeLens","codeLensProvider_GitCodeLensProvider","_git","_tracker","_onDidChangeCodeLenses","onDidChangeCodeLenses","maxLines","sizeThresholdAfterEdit","languageScope","scopesByLanguage","ll","language","scopes","symbolScopes","lenses","symbols","Document","ExecuteDocumentSymbolProvider","documentRangeFn","dirtyCommand","getDirtyTitle","sym","provideCodeLens","blameForRangeFn","recentChange","fileSymbol","getFilename","getRangeFromSymbol","includeSingleLineSymbols","valid","symbolName","kind","Containers","Package","Class","Interface","Module","Namespace","Struct","isSingleLine","Constructor","Enum","Method","Property","Blocks","getValidateSymbolRange","lineAt","lineNumber","startChar","multiline","isDocumentSymbol","lens","resolveGitRecentChangeCodeLens","resolveGitAuthorsCodeLens","containerName","DiffWithPrevious","applyDiffWithPreviousCommand","ShowQuickCommitDetails","applyShowQuickCommitDetailsCommand","ShowQuickCommitFileDetails","applyShowQuickCommitFileDetailsCommand","ShowQuickCurrentBranchHistory","applyShowQuickCurrentBranchHistoryCommand","ShowQuickFileHistory","applyShowQuickFileHistoryCommand","ToggleFileBlame","applyToggleFileBlameCommand","commandArgs","toFileUri","codeLens","unsavedChanges","recentChangeAndAuthors","recentChangeOnly","authorsOnly","selector","codeLensController_GitCodeLensController","_canToggle","_providerDisposable","_provider","createProvider","CanToggleCodeLens","registerCodeLensProvider","onDirtyIdleTriggered","fsProvider_emptyArray","fromGitLensFSUri","fromRevisionUri","fsProvider_GitFileSystemProvider","_searchTreeMap","_onDidChangeFile","registerFileSystemProvider","isCaseSensitive","isReadonly","onDidChangeFile","NoPermissions","tree","getTree","FileNotFound","typeToFileType","getVersionedFileBuffer","ctime","treeItem","searchTree","Directory","getTreeFileForRevision","getTreeForRevision","createSearchTree","getOrCreateSearchTree","Unknown","lineHoverController_LineHoverController","unregister","register","lineState","getAnnotationType","wholeLine","lineAnnotations","keyNoopCommand","keys","mappings","keyboard_KeyboardScope","mapping","updateKeyCommandsContext","Key","keyboard_Keyboard","registerCommand","execute","begin","statusBarController_StatusBarController","clearBlame","_blameStatusBarItem","_modeStatusBarItem","statusBar","modes","statusBarItemName","alignment","Left","createStatusBarItem","SwitchMode","text","tooltip","reduceFlicker","updateBlame","hide","DiffLineWithPrevious","DiffWithWorking","DiffLineWithWorking","ToggleCodeLens","lineTracker_LineTracker","_onDidChangeActiveLines","_state","trigger","subscriber","subscription","_linesChangedDebounced","onLinesChanged","fireLinesChanged","lines1","lines2","GitLineState","gitLineTracker_GitLineTracker","_count","_subscriptions","updated","updateState","getBlameForLineContents","getBlameForLine","setState","ResourceType","unknownGitUri","viewNode_ViewNode","ViewNode","view","_instanceId","refreshNode","CommitFileNodeDisplayAs","viewNode_decorate","ViewRefNode","supportsAutoRefresh","viewNode_SubscribeableViewNode","_canSubscribe","disposables","onDidChangeVisibility","onVisibilityChanged","onDidChangeNodeState","onNodeStateChanged","onDidChangeAutoRefresh","onAutoRefreshChanged","unsubscribe","canSubscribe","ensureSubscription","triggerChange","_subscription","subscriptionPromise","visible","onStateChanged","onParentStateChanged","autoRefresh","subscribe","nodeSupportsConditionalDismissal","canDismiss","commitFileNode_CommitFileNode","_displayAs","_selection","priority","toFileCommit","label","None","contextValue","resourceType","description","CommitIcon","iconPath","StatusIcon","Gravatar","getCommand","_label","_description","_tooltip","CommitLabel","getCommitDescriptionTemplate","getCommitFileDescriptionTemplate","_folderName","getCommitTemplate","getCommitFileTemplate","_relativePath","CommitFile","commitFormat","commitDescriptionFormat","commitFileFormat","commitFileDescriptionFormat","showOptions","preserveFocus","preview","folderNode_FolderNode","containsWorkingFiles","getFileNesting","List","Collapsed","Folder","nesting","layout","Auto","nestingThreshold","threshold","Tree","commitNode_CommitNode","getBranchAndTagTips","toGitUri","getChildren","branchAndTagTips","AngleBracketLeftHeavy","AngleBracketRightHeavy","ArrowHeadRight","common_MessageNode","_message","_iconPath","common_CommandMessageNode","_command","getTreeItem","common_PagerNode","previousNode","views","pageItemLimit","_args","Pager","common_ShowMoreNode","itemType","getBranchesAndTagTipsFn","currentName","branchesAndTagsBySha","bt","branchesAndTags","markers","insertDateMarkers","iterable","showRelativeDateMarkers","daysAgo","marker","setUTCHours","nextDate","branchTrackingStatusNode_BranchTrackingStatusNode","direction","supportsPaging","defaultItemLimit","previousLog","StatusAheadOfUpstream","StatusBehindUpstream","BranchStatusAheadOfUpstream","BranchStatusBehindUpstream","iconSuffix","branchNode_BranchNode","branchName","getBasename","treeHierarchy","_children","showTrackingBranch","getTrackingStatus","unstar","branchNode_decorate","branchOrTagFolderNode_BranchOrTagFolderNode","_expanded","expanded","Expanded","branchesNode_BranchesNode","branchNodes","contributorNode_ContributorNode","contributor","Contributor","contributorsNode_ContributorsNode","Contributors","fileHistoryNode_FileHistoryNode","displayAs","getStatusForFile","FileHistory","onRepoChanged","onRepoFileSystemChanged","startWatchingFileSystem","fileHistoryNode_decorate","referencesQuickPick_RefQuickPickItem","checked","referencesQuickPick_BranchQuickPickItem","referencesQuickPick_TagQuickPickItem","referencesQuickPick_ReferencesQuickPick","placeHolder","scope","autoPick","goBack","pick","items","getItems","itms","allowEnteringRefs","quickpick","createQuickPick","busy","placeholder","ignoreFocusOut","getQuickPickIgnoreFocusOut","onDidHide","onDidAccept","selectedItems","validateReference","showQuickPick","filters","include","showQuickPickProgress","_getInfiniteCancellablePromise","_showQuickPickProgress","commonQuickPicks_CommandQuickPickItem","commandOrArgs","commonQuickPicks_CommitQuickPickItem","getShortMessage","detail","KeyCommandQuickPickItem","MessageQuickPickItem","commonQuickPicks_OpenFileCommandQuickPickItem","openEditor","commonQuickPicks_OpenFilesCommandQuickPickItem","commonQuickPicks_ShowCommitInViewQuickPickItem","searchView","commonQuickPicks_ShowCommitSearchResultsInViewQuickPickItem","resultsLabel","showSearchResults","commonQuickPicks_ShowFileHistoryFromQuickPickItem","_goBack","commonQuickPicks_ShowFileHistoryInViewQuickPickItem","baseRef","fileHistoryView","showHistoryForUri","remotesQuickPick_OpenRemoteCommandQuickPickItem","remotesQuickPick_OpenRemotesCommandQuickPickItem","goBackCommand","shortFileSha","OpenInRemote","branchHistoryQuickPick_BranchHistoryQuickPick",",",".","progressCancellation","nextPageCommand","currentCommandArgs","currentCommand","ArrowBack","ShowQuickBranchHistory","previousPageCommand","npc","matchOnDescription","matchOnDetail","commitFileQuickPick_ApplyCommitFileChangesCommandQuickPickItem","applyChangesToWorkingFile","commitFileQuickPick_OpenCommitFileCommandQuickPickItem","commitFileQuickPick_OpenCommitFileRevisionCommandQuickPickItem","commitQuickPick_CommitWithFileStatusQuickPickItem","octicon","commitQuickPick_OpenCommitFilesCommandQuickPickItem","versioned","commitQuickPick_OpenCommitFileRevisionsCommandQuickPickItem","commitsQuickPick_CommitsQuickPick","showInViewCommand","showAllCommand","fileHistoryQuickPick_FileHistoryQuickPick","pickerOnly","findWorkingFileName","goBackCommandArgs","RepositoryQuickPickItem","repositoriesQuickPick_RepositoriesQuickPick","repoStatusQuickPick_OpenStatusFileCommandQuickPickItem","realIndexStatus","getOcticon","repoStatusQuickPick_OpenStatusFilesCommandQuickPickItem","OpenChangedFiles","stashListQuickPick_StashListQuickPick","stash","StashSave","fileHistoryTrackerNode_FileHistoryTrackerNode","resetChild","_child","_fileUri","_baseRef","fileUri","ActiveFileHistory","onActiveEditorChanged","fileHistoryTrackerNode_decorate","lineHistoryNode_LineHistoryNode","LineHistory","lineHistoryNode_decorate","lineHistoryTrackerNode_LineHistoryTrackerNode","_base","ActiveLineHistory","isEqual","lineHistoryTrackerNode_decorate","remoteNode_RemoteNode","rt","Fetch","Push","ArrowRight","Remote","setAsDefault","remoteNode_decorate","remotesNode_RemotesNode","stashFileNode_StashFileNode","stashFormat","stashDescriptionFormat","stashFileFormat","stashFileDescriptionFormat","stashNode_StashNode","stashesNode_StashesNode","statusFileNode_StatusFileNode","_hasStagedChanges","_hasUnstagedChanges","resourceUri","collapsibleState","StatusFileCommits","getChangedIn","statusFileDescriptionFormat","statusFileFormat","changedIn","statusFilesNode_StatusFilesNode","includeWorkingTree","older","setMilliseconds","toStatusFile","aheadFiles","uniques","stats","StatusFiles","previousRef","tagNode_TagNode","Tag","tagsNode_TagsNode","tagNodes","hasTimeRegex","repositoryNode_RepositoryNode","_lastFetched","_status","getLastFetched","lastFetchedTooltip","formatLastFetched","includeTime","workingStatus","triggerNodeChange","defaultDateShortFormat","repositoryNode_decorate","repositoriesNode_RepositoriesNode","resetChildren","Repositories","onRepositoriesChanged","autoReveal","containsUri","getParent","reveal","repositoriesNode_decorate","resultsCommitsNode_ResultsCommitsNode","_commitsQuery","ResultsCommits","getCommitsQueryResults","getRepositoryCount","_commitsQueryResults","resultsFileNode_ResultsFileNode","ResultsFile","statusIcon","DiffWith","resultsFilesNode_ResultsFilesNode","_ref1","_ref2","getFilesQueryResults","ResultsFiles","_filesQueryResults","getFilesQueryResultsCore","compareResultsNode_CompareResultsNode","_pinned","pinned","getCommitsQuery","CompareResults","updatePinnedComparison","getPinnableId","currentId","compareResultsNode_decorate","comparePickerNode_ComparePickerNode","selectedRef","ComparePicker","getQualifiedCommand","ComparePickerWithRef","compareNode_CompareNode","_selectedRef","_comparePickerNode","getPinnedComparisons","focus","select","Compare","ViewsCanCompare","selectForCompare","getRefName","getRepoPathOrPrompt","autoCompare","compareWithSelected","compareNode_decorate","searchNode_SearchNode","getCommandArgs","Search","findIndex","searchNode_decorate","registrableCommands","common_command","getCommandUri","getRepoPathOrActiveOrPrompt","getRepoPathOrActive","isCommandViewContextWithBranch","isCommandViewContextWithCommit","isCommandViewContextWithRemote","isCommandViewContextWithRepo","isScmResourceGroup","handle","resourceStates","isScmResourceState","common_Command","contextParsingOptions","_execute","parseContext","preExecute","firstArg","edit","common_isTextEditor","states","scmResourceStates","scmResourceGroups","common_ActiveEditorCommand","lastCommand","ActiveEditorCachedCommand","rethrow","showTextDocument","Active","searchResultsCommitsNode_SearchResultsCommitsNode","commitsQuery","SearchResults","prefillOnly","SearchCommitsInView","viewBase_ViewBase","_onDidChangeTreeData","_onDidChangeVisibility","_onDidChangeNodeState","registerCommands","onDidChangeTreeData","container","_tree","createTreeView","treeDataProvider","onDidCollapseElement","onElementCollapsed","onDidExpandElement","onElementExpanded","getRoot","ensureRoot","isPageable","viewBase_decorate","compareView_CompareView","ViewsCompareKeepResults","keepResults","viewCommands","setFilesLayout","setKeepResults","pinComparison","unpinComparison","swapComparison","showCollapseAll","dismiss","addResults","PinnedComparisons","pin","addOrReplace","updateEffective","unpin","fileHistoryView_FileHistoryView","changeBase","setEditorFollowing","setRenameFollowing","ViewsFileHistoryEditorFollowing","fileHistory","lineHistoryView_LineHistoryView","ViewsLineHistoryEditorFollowing","lineHistory","repositoriesView_RepositoriesView","_onDidChangeAutoRefresh","setAutoRefresh","ViewsRepositoriesAutoRefresh","workspaceEnabled","searchView_SearchView","ViewsSearchKeepResults","searchQueryFn","getSearchQueryFn","getSearchLabel","resultsType","singular","viewCommands_ViewCommands","dismissNode","viewSupportsNodeDismissal","closeRepository","unsetAsDefault","openInTerminal","exploreRepoRevision","contributorAddCoauthoredBy","contributorCopyToClipboard","openChanges","openChangesWithWorking","openFile","openFileRevision","openFileRevisionInRemote","openChangedFiles","openChangedFileChanges","openChangedFileChangesWithWorking","openChangedFileRevisions","applyChanges","stageDirectory","stageFile","unstageDirectory","unstageFile","compareAncestryWithWorking","compareWithHead","compareWithRemote","compareFileWithSelected","selectFileForCompare","compareWithWorking","terminalCheckoutBranch","terminalCreateBranch","terminalDeleteBranch","terminalMergeBranch","terminalRebaseBranch","terminalRebaseBranchToRemote","terminalSquashBranchIntoCommit","terminalCheckoutCommit","terminalCherryPickCommit","terminalPushCommit","terminalRebaseCommit","terminalResetCommit","terminalRevertCommit","terminalRemoveRemote","terminalCreateTag","terminalDeleteTag","rootUri","coauthor","inputBox","newlines","compareView","commonAncestor","getMergeBase","_selectedFile","selected","ViewsCanCompareFile","diffArgs","openInNewWindow","OpenFolder","updateWorkspaceFolders","openWorkspace","FocusFilesExplorer","openDiffWith","OpenFileInRemote","OpenInTerminal","unStageDirectory","unStageFile","sendTerminalCommand","remoteBranch","showInputBox","prompt","_terminal","createTerminal","onDidCloseTerminal","_terminalCwd","sendText","terminal","ensureTerminal","DidChangeConfigurationNotificationType","IpcNotificationType","method","UpdateConfigurationCommandType","IpcCommandType","ipcSequence","webviewBase_WebviewBase","_disposablePanel","notifyDidChangeConfiguration","_panel","webviewPanel","removes","onMessageReceived","html","getHtml","createWebviewPanel","retainContextWhenHidden","enableFindWidget","enableCommandUris","enableScripts","onDidDispose","onPanelDisposed","onDidChangeViewState","onViewStateChanged","webview","onDidReceiveMessage","onMessageReceivedCore","filename","content","_html","getBootstrap","postMessage","nextIpcId","notify","settingsWebview_SettingsWebview","getAvailableScopes","ShowSettingsPage","welcomeWebview_WelcomeWebview","_context","_config","applyMode","_lineTracker","_vsls","_fileAnnotationController","_lineAnnotationController","_lineHoverController","_statusBarController","_codeLensController","_keyboard","_settingsWebview","_welcomeWebview","_compareView","_fileHistoryView","_lineHistoryView","_repositoriesView","_searchView","onConfigurationChanging","_applyModeConfigurationTransformBound","applyModeConfigurationTransform","lineHistoryView","lineHovers","repositoriesView","settingsWebview","_viewCommands","welcomeWebview","ToggleFileHeatmap","ToggleFileRecentChanges","_configsAffectedByMode","annotations_ClearFileAnnotationsCommand","ClearFileAnnotationsCommand","common_EditorCommand","registerTextEditorCommand","executeCore","ClearFileAnnotations","ComputingFileAnnotations","annotations_decorate","annotations_ToggleFileBlameCommand","ToggleFileBlameCommand","toggle","annotations_ToggleFileHeatmapCommand","ToggleFileHeatmapCommand","copyArgs","annotations_ToggleFileRecentChangesCommand","ToggleFileRecentChangesCommand","annotations_ToggleLineBlameCommand","ToggleLineBlameCommand","ToggleLineBlame","closeUnchangedFiles_CloseUnchangedFilesCommand","CloseUnchangedFilesCommand","CloseUnchangedFiles","CloseAllEditors","_onEditorChangedFn","loopCount","found","nextEditor","closeEditor","CloseActiveEditor","waitForEditorChange","NextEditor","closeUnchangedFiles_decorate","copyMessageToClipboard_CopyMessageToClipboardCommand","CopyMessageToClipboardCommand","CopyMessageToClipboard","blameline","getLogCommit","copyMessageToClipboard_decorate","copyRemoteFileUrlToClipboard_CopyRemoteFileUrlToClipboardCommand","CopyRemoteFileUrlToClipboardCommand","CopyRemoteFileUrlToClipboard","copyRemoteFileUrlToClipboard_decorate","copyShaToClipboard_CopyShaToClipboardCommand","CopyShaToClipboardCommand","CopyShaToClipboard","copyShaToClipboard_decorate","diffBranchWith_DiffBranchWithCommand","DiffBranchWithCommand","DiffHeadWith","DiffWorkingWith","DiffHeadWithBranch","DiffWorkingWithBranch","diffBranchWith_decorate","diffDirectory_DiffDirectoryCommand","DiffDirectoryCommand","DiffDirectory","DiffDirectoryWithHead","ViewsOpenDirectoryDiff","ViewsOpenDirectoryDiffWithWorking","isCommandViewContextWithRef","openDirectoryDiff","diffDirectory_decorate","diffLineWithPrevious_DiffLineWithPreviousCommand","DiffLineWithPreviousCommand","showFileNotUnderSourceControlWarningMessage","diffLineWithPrevious_decorate","diffLineWithWorking_DiffLineWithWorkingCommand","DiffLineWithWorkingCommand","diffLineWithWorking_decorate","DiffWithCommand","argsOrCommit1","commit2","commit1","getMarkdownCommandArgsCore","lhsSha","rhsSha","getFileStatusForCommit","getVersionedUri","rhsSuffix","lhsSuffix","Diff","diffWith_decorate","diffWithNext_DiffWithNextCommand","DiffWithNextCommand","DiffWithNext","DiffWithNextInDiff","inDiffEditor","diffWithNext_decorate","diffWithPrevious_DiffWithPreviousCommand","DiffWithPreviousCommand","DiffWithPreviousInDiff","showCommitHasNoPreviousCommitWarningMessage","originalSha","diffWithPrevious_decorate","diffWithRef_DiffWithRefCommand","DiffWithRefCommand","DiffWithRef","DiffWithBranch","showNoRepositoryWarningMessage","renamedUri","renamedTitle","rename","diffWithRef_decorate","diffWithRevision_DiffWithRevisionCommand","DiffWithRevisionCommand","DiffWithRevision","reference","showProgress","diffWithRevision_decorate","diffWithWorking_DiffWithWorkingCommand","DiffWithWorkingCommand","DiffWithWorkingInDiff","diffWithWorking_decorate","Status","ResourceGroupType","externalDiff_ExternalDiffCommand","ExternalDiffCommand","ExternalDiff","ExternalDiffAll","isCommandViewContextWithFileCommit","isCommandViewContextWithFileRefs","resourceGroupType","Index","isModified","BOTH_MODIFIED","INDEX_MODIFIED","MODIFIED","openDiffTool","externalDiff_decorate","openBranchesInRemote_OpenBranchesInRemoteCommand","OpenBranchesInRemoteCommand","OpenBranchesInRemote","openBranchesInRemote_decorate","openBranchInRemote_OpenBranchInRemoteCommand","OpenBranchInRemoteCommand","OpenBranchInRemote","openBranchInRemote_decorate","openChangedFiles_OpenChangedFilesCommand","OpenChangedFilesCommand","openChangedFiles_decorate","OpenCommitInRemoteCommand","OpenCommitInRemote","argsOrSha","openCommitInRemote_decorate","openFileInRemote_OpenFileInRemoteCommand","OpenFileInRemoteCommand","remotePart","branchPart","openFileInRemote_decorate","OpenFileRevisionCommand","OpenFileRevision","argsOrUri","openFileRevision_decorate","openFileRevisionFrom_OpenFileRevisionFromCommand","OpenFileRevisionFromCommand","OpenFileRevisionFrom","OpenFileRevisionFromBranch","openFileRevisionFrom_decorate","openInRemote_OpenInRemoteCommand","OpenInRemoteCommand","ensureRemoteBranchName","verb","shaSuffix","remotesQuickPick_RemotesQuickPick","openInRemote_decorate","openRepoInRemote_OpenRepoInRemoteCommand","OpenRepoInRemoteCommand","OpenRepoInRemote","openRepoInRemote_decorate","openWorkingFile_OpenWorkingFileCommand","OpenWorkingFileCommand","OpenWorkingFile","openWorkingFile_decorate","repositories_FetchRepositoriesCommand","FetchRepositoriesCommand","FetchRepositories","fetchAll","repositories_decorate","repositories_PullRepositoriesCommand","PullRepositoriesCommand","PullRepositories","pullAll","repositories_PushRepositoriesCommand","PushRepositoriesCommand","PushRepositories","pushAll","resetSuppressedWarnings_ResetSuppressedWarningsCommand","ResetSuppressedWarningsCommand","ResetSuppressedWarnings","resetSuppressedWarnings_decorate","searchByRegex","symbolToSearchByMap","searchByToSymbolMap","searchCommits_SearchCommitsCommand","SearchCommitsCommand","SearchCommits","showInView","originalArgs","_lastSearch","valueSelection","searchLabel","searchCommits_decorate","showLastQuickPick_ShowLastQuickPickCommand","ShowLastQuickPickCommand","ShowLastQuickPick","showLastQuickPick_decorate","showQuickBranchHistory_ShowQuickBranchHistoryCommand","ShowQuickBranchHistoryCommand","repoLog","showQuickBranchHistory_decorate","ShowQuickCommitDetailsCommand","ShowCommitInView","showLineUncommittedWarningMessage","showCommitNotFoundWarningMessage","commitQuickPick_CommitQuickPick","resolvePreviousFileSha","stashApplyCommmandArgs","confirm","stashItem","StashApply","stashDeleteCommmandArgs","StashDelete","diffDirectoryCommmandArgs","copyShaCommandArgs","copyMessageCommandArgs","commitDetailsCommandArgs","previousCommand","nextCommand","previousCommandArgs","nextLog","nextCommandArgs","onDidSelectItem","setKeyCommand","onDidSelect","showQuickCommitDetails_decorate","ShowQuickCommitFileDetailsCommand","ShowQuickRevisionDetails","fileLog","commitFileQuickPick_CommitFileQuickPick","workingName","fileHistoryCommandArgs","findNextCommit","ArrowRightHollow","showQuickCommitFileDetails_decorate","showQuickCurrentBranchHistory_ShowQuickCurrentBranchHistoryCommand","ShowQuickCurrentBranchHistoryCommand","showQuickCurrentBranchHistory_decorate","showQuickFileHistory_ShowQuickFileHistoryCommand","ShowQuickFileHistoryCommand","ShowFileHistoryInView","showQuickFileHistory_decorate","showQuickRepoStatus_ShowQuickRepoStatusCommand","ShowQuickRepoStatusCommand","ShowQuickRepoStatus","repoStatusQuickPick_RepoStatusQuickPick","stagedAdds","unstagedAdds","stagedChanges","unstagedChanges","stagedDeletes","unstagedDeletes","stagedAddsAndChanges","unstagedAddsAndChanges","unstaged","stagedStatus","unstagedStatus","repoStatusCommandArgs","computed","computeStatus","unstagedIndex","stashListCommandArgs","ShowQuickStashList","branchHistoryCommandArgs","showQuickRepoStatus_decorate","showQuickStashList_ShowQuickStashListCommand","ShowQuickStashListCommand","showQuickStashList_decorate","showView_ShowViewCommand","ShowViewCommand","ShowCompareView","ShowFileHistoryView","ShowLineHistoryView","ShowRepositoriesView","ShowSearchView","showView_decorate","stashApply_StashApplyCommand","StashApplyCommand","stashApply","stashApply_decorate","stashDelete_StashDeleteCommand","StashDeleteCommand","stashDelete","stashDelete_decorate","stashSave_StashSaveCommand","StashSaveCommand","StashSaveFiles","isCommandViewContextWithFile","isCommandViewContextWithRepoPath","stashSave","stashSave_decorate","supportGitLens_SupportGitLensCommand","SupportGitLensCommand","SupportGitLens","showSupportGitLensMessage","supportGitLens_decorate","switchMode_SwitchModeCommand","SwitchModeCommand","modesQuickPick_ModesQuickPick","modeCfg","activeAnnotations","switchMode_decorate","switchMode_ToggleReviewModeCommand","ToggleReviewModeCommand","ToggleReviewMode","switchMode_ToggleZenModeCommand","ToggleZenModeCommand","ToggleZenMode","toggleCodeLens_ToggleCodeLensCommand","ToggleCodeLensCommand","toggleCodeLens","configure","gitlensVersion","packageJSON","showGitDisabledErrorMessage","previousVersion","globalState","GitLensVersion","migrate","explorers","migrateSettings","compareGitVersion","showGitVersionUnsupportedErrorMessage","notifyOnUnsupportedGitVersion","showWhatsNewAfterUpgrades","prevMajor","prevMinor","showWhatsNewMessage","showWelcomePage","deactivate","toggleCodeLens_decorate","__webpack_exports__"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 36);\n","module.exports = require(\"vscode\");","module.exports = require(\"path\");","module.exports = require(\"fs\");","/* eslint-disable node/no-deprecated-api */\n\n'use strict'\n\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n","module.exports = require(\"buffer\");","\"use strict\";\n\n// Some environments don't have global Buffer (e.g. React Native).\n// Solution would be installing npm modules \"buffer\" and \"stream\" explicitly.\nvar Buffer = require(\"safer-buffer\").Buffer;\n\nvar bomHandling = require(\"./bom-handling\"),\n    iconv = module.exports;\n\n// All codecs and aliases are kept here, keyed by encoding name/alias.\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\niconv.encodings = null;\n\n// Characters emitted in case of error.\niconv.defaultCharUnicode = '�';\niconv.defaultCharSingleByte = '?';\n\n// Public API.\niconv.encode = function encode(str, encoding, options) {\n    str = \"\" + (str || \"\"); // Ensure string.\n\n    var encoder = iconv.getEncoder(encoding, options);\n\n    var res = encoder.write(str);\n    var trail = encoder.end();\n    \n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\n}\n\niconv.decode = function decode(buf, encoding, options) {\n    if (typeof buf === 'string') {\n        if (!iconv.skipDecodeWarning) {\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\n            iconv.skipDecodeWarning = true;\n        }\n\n        buf = Buffer.from(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\n    }\n\n    var decoder = iconv.getDecoder(encoding, options);\n\n    var res = decoder.write(buf);\n    var trail = decoder.end();\n\n    return trail ? (res + trail) : res;\n}\n\niconv.encodingExists = function encodingExists(enc) {\n    try {\n        iconv.getCodec(enc);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Legacy aliases to convert functions\niconv.toEncoding = iconv.encode;\niconv.fromEncoding = iconv.decode;\n\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\niconv._codecDataCache = {};\niconv.getCodec = function getCodec(encoding) {\n    if (!iconv.encodings)\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\n    \n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    var enc = iconv._canonicalizeEncoding(encoding);\n\n    // Traverse iconv.encodings to find actual codec.\n    var codecOptions = {};\n    while (true) {\n        var codec = iconv._codecDataCache[enc];\n        if (codec)\n            return codec;\n\n        var codecDef = iconv.encodings[enc];\n\n        switch (typeof codecDef) {\n            case \"string\": // Direct alias to other encoding.\n                enc = codecDef;\n                break;\n\n            case \"object\": // Alias with options. Can be layered.\n                for (var key in codecDef)\n                    codecOptions[key] = codecDef[key];\n\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n                \n                enc = codecDef.type;\n                break;\n\n            case \"function\": // Codec itself.\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\n                // It'll be called only once (for each different options object).\n                codec = new codecDef(codecOptions, iconv);\n\n                iconv._codecDataCache[codecOptions.encodingName] = codec; // Save it to be reused later.\n                return codec;\n\n            default:\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\n        }\n    }\n}\n\niconv._canonicalizeEncoding = function(encoding) {\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    return (''+encoding).toLowerCase().replace(/:\\d{4}$|[^0-9a-z]/g, \"\");\n}\n\niconv.getEncoder = function getEncoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        encoder = new codec.encoder(options, codec);\n\n    if (codec.bomAware && options && options.addBOM)\n        encoder = new bomHandling.PrependBOM(encoder, options);\n\n    return encoder;\n}\n\niconv.getDecoder = function getDecoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        decoder = new codec.decoder(options, codec);\n\n    if (codec.bomAware && !(options && options.stripBOM === false))\n        decoder = new bomHandling.StripBOM(decoder, options);\n\n    return decoder;\n}\n\n\n// Load extensions in Node. All of them are omitted in Browserify build via 'browser' field in package.json.\nvar nodeVer = typeof process !== 'undefined' && process.versions && process.versions.node;\nif (nodeVer) {\n\n    // Load streaming support in Node v0.10+\n    var nodeVerArr = nodeVer.split(\".\").map(Number);\n    if (nodeVerArr[0] > 0 || nodeVerArr[1] >= 10) {\n        require(\"./streams\")(iconv);\n    }\n\n    // Load Node primitive extensions.\n    require(\"./extend-node\")(iconv);\n}\n\nif (\"Ā\" != \"\\u0100\") {\n    console.error(\"iconv-lite warning: javascript files use encoding different from utf-8. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.\");\n}\n","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):t.dayjs=n()}(this,function(){\"use strict\";var t=\"millisecond\",n=\"second\",e=\"minute\",i=\"hour\",r=\"day\",s=\"week\",u=\"month\",a=\"quarter\",o=\"year\",h=/^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,f=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var i=String(t);return!i||i.length>=n?t:\"\"+Array(n+1-i.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),i=Math.floor(e/60),r=e%60;return(n<=0?\"+\":\"-\")+c(i,2,\"0\")+\":\"+c(r,2,\"0\")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(e,u),r=n-i<0,s=t.clone().add(e+(r?-1:1),u);return Number(-(e+(n-i)/(r?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:o,w:s,d:r,h:i,m:e,s:n,ms:t,Q:a}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},$={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},l=\"en\",m={};m[l]=$;var y=function(t){return t instanceof S},M=function(t,n,e){var i;if(!t)return null;if(\"string\"==typeof t)m[t]&&(i=t),n&&(m[t]=n,i=t);else{var r=t.name;m[r]=t,i=r}return e||(l=i),i},g=function(t,n,e){if(y(t))return t.clone();var i=n?\"string\"==typeof n?{format:n,pl:e}:n:{};return i.date=t,new S(i)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u})};var S=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0)||l,this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if(\"string\"==typeof n&&!/Z$/i.test(n)){var i=n.match(h);if(i)return e?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(n)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,\"$y\",o)},d.month=function(t){return this.$g(t,\"$M\",u)},d.day=function(t){return this.$g(t,\"$W\",r)},d.date=function(t){return this.$g(t,\"$D\",\"date\")},d.hour=function(t){return this.$g(t,\"$H\",i)},d.minute=function(t){return this.$g(t,\"$m\",e)},d.second=function(t){return this.$g(t,\"$s\",n)},d.millisecond=function(n){return this.$g(n,\"$ms\",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,a){var h=this,f=!!D.u(a)||a,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(r)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M=\"set\"+(this.$u?\"UTC\":\"\");switch(c){case o:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,S=(l<g?l+7:l)-g;return d(f?y-S:y+(6-S),m);case r:case\"date\":return $(M+\"Hours\",0);case i:return $(M+\"Minutes\",1);case e:return $(M+\"Seconds\",2);case n:return $(M+\"Milliseconds\",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,a){var h,f=D.p(s),c=\"set\"+(this.$u?\"UTC\":\"\"),d=(h={},h[r]=c+\"Date\",h.date=c+\"Date\",h[u]=c+\"Month\",h[o]=c+\"FullYear\",h[i]=c+\"Hours\",h[e]=c+\"Minutes\",h[n]=c+\"Seconds\",h[t]=c+\"Milliseconds\",h)[f],$=f===r?this.$D+(a-this.$W):a;if(f===u||f===o){var l=this.clone().set(\"date\",1);l.$d[d]($),l.init(),this.$d=l.set(\"date\",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,a){var h,f=this;t=Number(t);var c=D.p(a),d=function(n){var e=new Date(f.$d);return e.setDate(e.getDate()+n*t),D.w(e,f)};if(c===u)return this.set(u,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===r)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[i]=36e5,h[n]=1e3,h)[c]||1,l=this.valueOf()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return\"Invalid Date\";var e=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=D.z(this),r=this.$locale(),s=r.weekdays,u=r.months,a=function(t,n,e,i){return t&&t[n]||e[n].substr(0,i)},o=function(t){return D.s(n.$H%12||12,t,\"0\")},h={YY:String(this.$y).slice(-2),YYYY:String(this.$y),M:String(this.$M+1),MM:D.s(this.$M+1,2,\"0\"),MMM:a(r.monthsShort,this.$M,u,3),MMMM:u[this.$M],D:String(this.$D),DD:D.s(this.$D,2,\"0\"),d:String(this.$W),dd:a(r.weekdaysMin,this.$W,s,2),ddd:a(r.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(this.$H),HH:D.s(this.$H,2,\"0\"),h:o(1),hh:o(2),a:this.$H<12?\"am\":\"pm\",A:this.$H<12?\"AM\":\"PM\",m:String(this.$m),mm:D.s(this.$m,2,\"0\"),s:String(this.$s),ss:D.s(this.$s,2,\"0\"),SSS:D.s(this.$ms,3,\"0\"),Z:i};return e.replace(f,function(t,n){return n||h[t]||i.replace(\":\",\"\")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[o]=y/12,c[u]=y,c[a]=y/3,c[s]=(m-l)/6048e5,c[r]=(m-l)/864e5,c[i]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone();return e.$L=M(t,n,!0),e},d.clone=function(){return D.w(this.toDate(),this)},d.toDate=function(){return new Date(this.$d)},d.toJSON=function(){return this.toISOString()},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=S.prototype,g.extend=function(t,n){return t(n,S,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});\n","//\n//  Copyright (c) Microsoft Corporation. All rights reserved.\n//\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Entrypoint and type definitions for Live Share for VS Code extension API\n */\nconst vscode = require(\"vscode\");\nconst liveShareApiVersion = require('./package.json').version;\n/**\n * Extension ID of the Live Share extension for VS Code.\n */\nexports.extensionId = 'ms-vsliveshare.vsliveshare';\n/**\n * Entrypoint for access to the Live Share API.\n *\n * @returns an instance of the Live Share API, or `null` if the Live Share extension\n * is not installed or failed to activate.\n *\n * @example To access the Live Share API from another extension:\n *\n *     import * as vsls from 'vsls/vscode';\n *     const liveshare = await vsls.getApi();\n */\nasync function getApi() {\n    const liveshareExtension = vscode.extensions.getExtension(exports.extensionId);\n    if (!liveshareExtension) {\n        // The extension is not installed.\n        return null;\n    }\n    const extensionApi = liveshareExtension.isActive ?\n        liveshareExtension.exports : await liveshareExtension.activate();\n    if (!extensionApi) {\n        // The extensibility API is not enabled.\n        return null;\n    }\n    // Support deprecated function name to preserve compatibility with older versions of VSLS.\n    if (!extensionApi.getApi)\n        return extensionApi.getApiAsync(liveShareApiVersion);\n    return extensionApi.getApi(liveShareApiVersion);\n}\nexports.getApi = getApi;\n/** @deprecated */\nfunction getApiAsync() { return getApi(); }\nexports.getApiAsync = getApiAsync;\nvar Role;\n(function (Role) {\n    Role[Role[\"None\"] = 0] = \"None\";\n    Role[Role[\"Host\"] = 1] = \"Host\";\n    Role[Role[\"Guest\"] = 2] = \"Guest\";\n})(Role = exports.Role || (exports.Role = {}));\n/** This is just a placeholder for a richer access control model to be added later. */\nvar Access;\n(function (Access) {\n    Access[Access[\"None\"] = 0] = \"None\";\n    Access[Access[\"ReadOnly\"] = 1] = \"ReadOnly\";\n    Access[Access[\"ReadWrite\"] = 3] = \"ReadWrite\";\n    Access[Access[\"Owner\"] = 255] = \"Owner\";\n})(Access = exports.Access || (exports.Access = {}));\n/**\n * Identifiers for Live Share tree views. These identifiers may be used by other extensions\n * to extend Live Share tree views with additional nodes via the `registerTreeDataProvider()`\n * API.\n */\nvar View;\n(function (View) {\n    View[\"Session\"] = \"liveshare.session\";\n    View[\"ExplorerSession\"] = \"liveshare.session.explorer\";\n    View[\"Contacts\"] = \"liveshare.contacts\";\n    View[\"Help\"] = \"liveshare.help\";\n})(View = exports.View || (exports.View = {}));\n/**\n * Identifiers for Live Share tree view items. These identifiers may be used by other\n * extensions to extend Live Share tree items with additional commands using conditional\n * expressions in the `view/item/context` section of their own package.json.\n */\nvar ViewItem;\n(function (ViewItem) {\n    // session item groups\n    ViewItem[\"Participants\"] = \"participants\";\n    ViewItem[\"Servers\"] = \"servers\";\n    ViewItem[\"Terminals\"] = \"terminals\";\n    // participants\n    ViewItem[\"CurrentUser\"] = \"participants.currentuser\";\n    ViewItem[\"Guest\"] = \"participants.guest\";\n    ViewItem[\"FollowedGuest\"] = \"participants.guest.followed\";\n    ViewItem[\"Participant\"] = \"participants.participant\";\n    ViewItem[\"FollowedParticipant\"] = \"participants.participant.followed\";\n    ViewItem[\"GuestAnonymous\"] = \"participants.guest.anonymous\";\n    ViewItem[\"FollowedGuestAnonymous\"] = \"participants.guest.followed.anonymous\";\n    ViewItem[\"GuestElevated\"] = \"participants.guest.elevated\";\n    ViewItem[\"FollowedGuestElevated\"] = \"participants.guest.followed.elevated\";\n    // servers\n    ViewItem[\"LocalServer\"] = \"servers.local\";\n    ViewItem[\"RemoteServer\"] = \"servers.remote\";\n    // terminals\n    ViewItem[\"LocalTerminalReadOnly\"] = \"terminals.local.readonly\";\n    ViewItem[\"LocalTerminalReadWrite\"] = \"terminals.local.readwrite\";\n    ViewItem[\"RemoteTerminal\"] = \"terminals.remote\";\n    // contacts\n    ViewItem[\"SuggestedContacts\"] = \"contacts.suggested\";\n    ViewItem[\"AvailableContacts\"] = \"contacts.available\";\n    ViewItem[\"ContactsProvider\"] = \"contacts.provider\";\n    ViewItem[\"SelfContact\"] = \"contacts.selfContact\";\n    ViewItem[\"Contact\"] = \"contacts.contact\";\n    ViewItem[\"ContactOffline\"] = \"contacts.contact.offline\";\n    ViewItem[\"RecentContact\"] = \"contacts.recentContact\";\n    ViewItem[\"RecentContactOffline\"] = \"contacts.recentContact.offline\";\n    ViewItem[\"NoContact\"] = \"contacts.noContact\";\n    ViewItem[\"RecentContacts\"] = \"contacts.RecentContacts\";\n    ViewItem[\"NoSuggestedContacts\"] = \"contacts.NoSuggestedUsers\";\n    ViewItem[\"NoRecentContacts\"] = \"contacts.NoRecentContacts\";\n    ViewItem[\"InvitedContact\"] = \"contacts.invited\";\n    // help\n    ViewItem[\"SessionFeedbackQuestion\"] = \"help.sessionFeedback\";\n    ViewItem[\"ReportAProblem\"] = \"help.reportAProblem\";\n    ViewItem[\"TweetUsYourFeedback\"] = \"help.tweetUsYourFeedback\";\n    ViewItem[\"Survey\"] = \"help.survey\";\n    ViewItem[\"GoodFeedback\"] = \"help.goodFeedback\";\n    ViewItem[\"BadFeedback\"] = \"help.badFeedback\";\n    ViewItem[\"DontAskAgain\"] = \"help.dontAskAgain\";\n    ViewItem[\"Thankyou\"] = \"help.thankyou\";\n    ViewItem[\"MoreInfo\"] = \"help.moreinfo\";\n    // Shown while session sharing / joining is in progress\n    ViewItem[\"Loading\"] = \"loading\";\n    // Other / unspecified item type\n    ViewItem[\"Other\"] = \"other\";\n})(ViewItem = exports.ViewItem || (exports.ViewItem = {}));\n\n//# sourceMappingURL=liveShare.js.map\n","module.exports = require(\"stream\");","module.exports = require(\"crypto\");","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_advancedFormat=t()}(this,function(){\"use strict\";return function(e,t,n){var r=t.prototype,o=r.format;n.en.ordinal=function(e){var t=[\"th\",\"st\",\"nd\",\"rd\"],n=e%100;return\"[\"+e+(t[(n-20)%10]||t[n]||t[0])+\"]\"},r.format=function(e){var t=this,n=this.$locale(),r=this.$utils(),i=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/Q|wo|gggg|Do|X|x|k{1,2}|S/g,function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return n.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"wo\":return n.ordinal(t.week(),\"W\");case\"k\":case\"kk\":return r.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);default:return t.$d.getTime()}});return o.bind(this)(i)}}});\n","!function(e,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define(r):e.dayjs_plugin_relativeTime=r()}(this,function(){\"use strict\";return function(e,r,t){var n=r.prototype;t.en.relativeTime={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};var o=function(e,r,n,o){for(var d,i,a=n.$locale().relativeTime,u=[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],f=u.length,s=0;s<f;s+=1){var l=u[s];l.d&&(d=o?t(e).diff(n,l.d,!0):n.diff(e,l.d,!0));var m=Math.ceil(Math.abs(d));if(m<=l.r||!l.r){i=a[l.l].replace(\"%d\",m);break}}return r?i:(d>0?a.future:a.past).replace(\"%s\",i)};n.to=function(e,r){return o(e,r,this,!0)},n.from=function(e,r){return o(e,r,this)},n.toNow=function(e){return this.to(t(),e)},n.fromNow=function(e){return this.from(t(),e)}}});\n","module.exports = require(\"child_process\");","\"use strict\";\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n","\"use strict\";\n\n// Update this array if you add/rename/remove files in this directory.\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\nvar modules = [\n    require(\"./internal\"),\n    require(\"./utf16\"),\n    require(\"./utf7\"),\n    require(\"./sbcs-codec\"),\n    require(\"./sbcs-data\"),\n    require(\"./sbcs-data-generated\"),\n    require(\"./dbcs-codec\"),\n    require(\"./dbcs-data\"),\n];\n\n// Put all encoding/alias/codec definitions to single object and export it. \nfor (var i = 0; i < modules.length; i++) {\n    var module = modules[i];\n    for (var enc in module)\n        if (Object.prototype.hasOwnProperty.call(module, enc))\n            exports[enc] = module[enc];\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Export Node.js internal encodings.\n\nmodule.exports = {\n    // Encodings\n    utf8:   { type: \"_internal\", bomAware: true},\n    cesu8:  { type: \"_internal\", bomAware: true},\n    unicode11utf8: \"utf8\",\n\n    ucs2:   { type: \"_internal\", bomAware: true},\n    utf16le: \"ucs2\",\n\n    binary: { type: \"_internal\" },\n    base64: { type: \"_internal\" },\n    hex:    { type: \"_internal\" },\n\n    // Codec.\n    _internal: InternalCodec,\n};\n\n//------------------------------------------------------------------------------\n\nfunction InternalCodec(codecOptions, iconv) {\n    this.enc = codecOptions.encodingName;\n    this.bomAware = codecOptions.bomAware;\n\n    if (this.enc === \"base64\")\n        this.encoder = InternalEncoderBase64;\n    else if (this.enc === \"cesu8\") {\n        this.enc = \"utf8\"; // Use utf8 for decoding.\n        this.encoder = InternalEncoderCesu8;\n\n        // Add decoder for versions of Node not supporting CESU-8\n        if (Buffer.from('eda0bdedb2a9', 'hex').toString() !== '💩') {\n            this.decoder = InternalDecoderCesu8;\n            this.defaultCharUnicode = iconv.defaultCharUnicode;\n        }\n    }\n}\n\nInternalCodec.prototype.encoder = InternalEncoder;\nInternalCodec.prototype.decoder = InternalDecoder;\n\n//------------------------------------------------------------------------------\n\n// We use node.js internal decoder. Its signature is the same as ours.\nvar StringDecoder = require('string_decoder').StringDecoder;\n\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\n    StringDecoder.prototype.end = function() {};\n\n\nfunction InternalDecoder(options, codec) {\n    StringDecoder.call(this, codec.enc);\n}\n\nInternalDecoder.prototype = StringDecoder.prototype;\n\n\n//------------------------------------------------------------------------------\n// Encoder is mostly trivial\n\nfunction InternalEncoder(options, codec) {\n    this.enc = codec.enc;\n}\n\nInternalEncoder.prototype.write = function(str) {\n    return Buffer.from(str, this.enc);\n}\n\nInternalEncoder.prototype.end = function() {\n}\n\n\n//------------------------------------------------------------------------------\n// Except base64 encoder, which must keep its state.\n\nfunction InternalEncoderBase64(options, codec) {\n    this.prevStr = '';\n}\n\nInternalEncoderBase64.prototype.write = function(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n\n    return Buffer.from(str, \"base64\");\n}\n\nInternalEncoderBase64.prototype.end = function() {\n    return Buffer.from(this.prevStr, \"base64\");\n}\n\n\n//------------------------------------------------------------------------------\n// CESU-8 encoder is also special.\n\nfunction InternalEncoderCesu8(options, codec) {\n}\n\nInternalEncoderCesu8.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length * 3), bufIdx = 0;\n    for (var i = 0; i < str.length; i++) {\n        var charCode = str.charCodeAt(i);\n        // Naive implementation, but it works because CESU-8 is especially easy\n        // to convert from UTF-16 (which all JS strings are encoded in).\n        if (charCode < 0x80)\n            buf[bufIdx++] = charCode;\n        else if (charCode < 0x800) {\n            buf[bufIdx++] = 0xC0 + (charCode >>> 6);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n        else { // charCode will always be < 0x10000 in javascript.\n            buf[bufIdx++] = 0xE0 + (charCode >>> 12);\n            buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n    }\n    return buf.slice(0, bufIdx);\n}\n\nInternalEncoderCesu8.prototype.end = function() {\n}\n\n//------------------------------------------------------------------------------\n// CESU-8 decoder is not implemented in Node v4.0+\n\nfunction InternalDecoderCesu8(options, codec) {\n    this.acc = 0;\n    this.contBytes = 0;\n    this.accBytes = 0;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n}\n\nInternalDecoderCesu8.prototype.write = function(buf) {\n    var acc = this.acc, contBytes = this.contBytes, accBytes = this.accBytes, \n        res = '';\n    for (var i = 0; i < buf.length; i++) {\n        var curByte = buf[i];\n        if ((curByte & 0xC0) !== 0x80) { // Leading byte\n            if (contBytes > 0) { // Previous code is invalid\n                res += this.defaultCharUnicode;\n                contBytes = 0;\n            }\n\n            if (curByte < 0x80) { // Single-byte code\n                res += String.fromCharCode(curByte);\n            } else if (curByte < 0xE0) { // Two-byte code\n                acc = curByte & 0x1F;\n                contBytes = 1; accBytes = 1;\n            } else if (curByte < 0xF0) { // Three-byte code\n                acc = curByte & 0x0F;\n                contBytes = 2; accBytes = 1;\n            } else { // Four or more are not supported for CESU-8.\n                res += this.defaultCharUnicode;\n            }\n        } else { // Continuation byte\n            if (contBytes > 0) { // We're waiting for it.\n                acc = (acc << 6) | (curByte & 0x3f);\n                contBytes--; accBytes++;\n                if (contBytes === 0) {\n                    // Check for overlong encoding, but support Modified UTF-8 (encoding NULL as C0 80)\n                    if (accBytes === 2 && acc < 0x80 && acc > 0)\n                        res += this.defaultCharUnicode;\n                    else if (accBytes === 3 && acc < 0x800)\n                        res += this.defaultCharUnicode;\n                    else\n                        // Actually add character.\n                        res += String.fromCharCode(acc);\n                }\n            } else { // Unexpected continuation byte\n                res += this.defaultCharUnicode;\n            }\n        }\n    }\n    this.acc = acc; this.contBytes = contBytes; this.accBytes = accBytes;\n    return res;\n}\n\nInternalDecoderCesu8.prototype.end = function() {\n    var res = 0;\n    if (this.contBytes > 0)\n        res += this.defaultCharUnicode;\n    return res;\n}\n","module.exports = require(\"string_decoder\");","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Note: UTF16-LE (or UCS2) codec is Node.js native. See encodings/internal.js\n\n// == UTF16-BE codec. ==========================================================\n\nexports.utf16be = Utf16BECodec;\nfunction Utf16BECodec() {\n}\n\nUtf16BECodec.prototype.encoder = Utf16BEEncoder;\nUtf16BECodec.prototype.decoder = Utf16BEDecoder;\nUtf16BECodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf16BEEncoder() {\n}\n\nUtf16BEEncoder.prototype.write = function(str) {\n    var buf = Buffer.from(str, 'ucs2');\n    for (var i = 0; i < buf.length; i += 2) {\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\n    }\n    return buf;\n}\n\nUtf16BEEncoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf16BEDecoder() {\n    this.overflowByte = -1;\n}\n\nUtf16BEDecoder.prototype.write = function(buf) {\n    if (buf.length == 0)\n        return '';\n\n    var buf2 = Buffer.alloc(buf.length + 1),\n        i = 0, j = 0;\n\n    if (this.overflowByte !== -1) {\n        buf2[0] = buf[0];\n        buf2[1] = this.overflowByte;\n        i = 1; j = 2;\n    }\n\n    for (; i < buf.length-1; i += 2, j+= 2) {\n        buf2[j] = buf[i+1];\n        buf2[j+1] = buf[i];\n    }\n\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\n\n    return buf2.slice(0, j).toString('ucs2');\n}\n\nUtf16BEDecoder.prototype.end = function() {\n}\n\n\n// == UTF-16 codec =============================================================\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\n// Defaults to UTF-16LE, as it's prevalent and default in Node.\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {defaultEncoding: 'utf-16be'});\n\n// Encoder uses UTF-16LE and prepends BOM (which can be overridden with addBOM: false).\n\nexports.utf16 = Utf16Codec;\nfunction Utf16Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n}\n\nUtf16Codec.prototype.encoder = Utf16Encoder;\nUtf16Codec.prototype.decoder = Utf16Decoder;\n\n\n// -- Encoding (pass-through)\n\nfunction Utf16Encoder(options, codec) {\n    options = options || {};\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n    this.encoder = codec.iconv.getEncoder('utf-16le', options);\n}\n\nUtf16Encoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n}\n\nUtf16Encoder.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n// -- Decoding\n\nfunction Utf16Decoder(options, codec) {\n    this.decoder = null;\n    this.initialBytes = [];\n    this.initialBytesLen = 0;\n\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf16Decoder.prototype.write = function(buf) {\n    if (!this.decoder) {\n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBytes.push(buf);\n        this.initialBytesLen += buf.length;\n        \n        if (this.initialBytesLen < 16) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n        this.initialBytes.length = this.initialBytesLen = 0;\n    }\n\n    return this.decoder.write(buf);\n}\n\nUtf16Decoder.prototype.end = function() {\n    if (!this.decoder) {\n        var buf = Buffer.concat(this.initialBytes),\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var res = this.decoder.write(buf),\n            trail = this.decoder.end();\n\n        return trail ? (res + trail) : res;\n    }\n    return this.decoder.end();\n}\n\nfunction detectEncoding(buf, defaultEncoding) {\n    var enc = defaultEncoding || 'utf-16le';\n\n    if (buf.length >= 2) {\n        // Check BOM.\n        if (buf[0] == 0xFE && buf[1] == 0xFF) // UTF-16BE BOM\n            enc = 'utf-16be';\n        else if (buf[0] == 0xFF && buf[1] == 0xFE) // UTF-16LE BOM\n            enc = 'utf-16le';\n        else {\n            // No BOM found. Try to deduce encoding from initial content.\n            // Most of the time, the content has ASCII chars (U+00**), but the opposite (U+**00) is uncommon.\n            // So, we count ASCII as if it was LE or BE, and decide from that.\n            var asciiCharsLE = 0, asciiCharsBE = 0, // Counts of chars in both positions\n                _len = Math.min(buf.length - (buf.length % 2), 64); // Len is always even.\n\n            for (var i = 0; i < _len; i += 2) {\n                if (buf[i] === 0 && buf[i+1] !== 0) asciiCharsBE++;\n                if (buf[i] !== 0 && buf[i+1] === 0) asciiCharsLE++;\n            }\n\n            if (asciiCharsBE > asciiCharsLE)\n                enc = 'utf-16be';\n            else if (asciiCharsBE < asciiCharsLE)\n                enc = 'utf-16le';\n        }\n    }\n\n    return enc;\n}\n\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\n// See also below a UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\n\nexports.utf7 = Utf7Codec;\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\nfunction Utf7Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7Codec.prototype.encoder = Utf7Encoder;\nUtf7Codec.prototype.decoder = Utf7Decoder;\nUtf7Codec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\n\nfunction Utf7Encoder(options, codec) {\n    this.iconv = codec.iconv;\n}\n\nUtf7Encoder.prototype.write = function(str) {\n    // Naive implementation.\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\n    return Buffer.from(str.replace(nonDirectChars, function(chunk) {\n        return \"+\" + (chunk === '+' ? '' : \n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \n            + \"-\";\n    }.bind(this)));\n}\n\nUtf7Encoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf7Decoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64Regex = /[A-Za-z0-9\\/+]/;\nvar base64Chars = [];\nfor (var i = 0; i < 256; i++)\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\n\nvar plusChar = '+'.charCodeAt(0), \n    minusChar = '-'.charCodeAt(0),\n    andChar = '&'.charCodeAt(0);\n\nUtf7Decoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '+'\n            if (buf[i] == plusChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64Chars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\n                    res += \"+\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString();\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString();\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7Decoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n// UTF-7-IMAP codec.\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\n// Differences:\n//  * Base64 part is started by \"&\" instead of \"+\"\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\n//  * In Base64, \",\" is used instead of \"/\"\n//  * Base64 must not be used to represent direct characters.\n//  * No implicit shift back from Base64 (should always end with '-')\n//  * String must end in non-shifted position.\n//  * \"-&\" while in base64 is not allowed.\n\n\nexports.utf7imap = Utf7IMAPCodec;\nfunction Utf7IMAPCodec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7IMAPCodec.prototype.encoder = Utf7IMAPEncoder;\nUtf7IMAPCodec.prototype.decoder = Utf7IMAPDecoder;\nUtf7IMAPCodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf7IMAPEncoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = Buffer.alloc(6);\n    this.base64AccumIdx = 0;\n}\n\nUtf7IMAPEncoder.prototype.write = function(str) {\n    var inBase64 = this.inBase64,\n        base64Accum = this.base64Accum,\n        base64AccumIdx = this.base64AccumIdx,\n        buf = Buffer.alloc(str.length*5 + 10), bufIdx = 0;\n\n    for (var i = 0; i < str.length; i++) {\n        var uChar = str.charCodeAt(i);\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\n            if (inBase64) {\n                if (base64AccumIdx > 0) {\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n                    base64AccumIdx = 0;\n                }\n\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n                inBase64 = false;\n            }\n\n            if (!inBase64) {\n                buf[bufIdx++] = uChar; // Write direct character\n\n                if (uChar === andChar)  // Ampersand -> '&-'\n                    buf[bufIdx++] = minusChar;\n            }\n\n        } else { // Non-direct character\n            if (!inBase64) {\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\n                inBase64 = true;\n            }\n            if (inBase64) {\n                base64Accum[base64AccumIdx++] = uChar >> 8;\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\n\n                if (base64AccumIdx == base64Accum.length) {\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\n                    base64AccumIdx = 0;\n                }\n            }\n        }\n    }\n\n    this.inBase64 = inBase64;\n    this.base64AccumIdx = base64AccumIdx;\n\n    return buf.slice(0, bufIdx);\n}\n\nUtf7IMAPEncoder.prototype.end = function() {\n    var buf = Buffer.alloc(10), bufIdx = 0;\n    if (this.inBase64) {\n        if (this.base64AccumIdx > 0) {\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n            this.base64AccumIdx = 0;\n        }\n\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n        this.inBase64 = false;\n    }\n\n    return buf.slice(0, bufIdx);\n}\n\n\n// -- Decoding\n\nfunction Utf7IMAPDecoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64IMAPChars = base64Chars.slice();\nbase64IMAPChars[','.charCodeAt(0)] = true;\n\nUtf7IMAPDecoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '&'\n            if (buf[i] == andChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\n                    res += \"&\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString().replace(/,/g, '/');\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString().replace(/,/g, '/');\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7IMAPDecoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \n\nexports._sbcs = SBCSCodec;\nfunction SBCSCodec(codecOptions, iconv) {\n    if (!codecOptions)\n        throw new Error(\"SBCS codec is called without the data.\")\n    \n    // Prepare char buffer for decoding.\n    if (!codecOptions.chars || (codecOptions.chars.length !== 128 && codecOptions.chars.length !== 256))\n        throw new Error(\"Encoding '\"+codecOptions.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\n    \n    if (codecOptions.chars.length === 128) {\n        var asciiString = \"\";\n        for (var i = 0; i < 128; i++)\n            asciiString += String.fromCharCode(i);\n        codecOptions.chars = asciiString + codecOptions.chars;\n    }\n\n    this.decodeBuf = Buffer.from(codecOptions.chars, 'ucs2');\n    \n    // Encoding buffer.\n    var encodeBuf = Buffer.alloc(65536, iconv.defaultCharSingleByte.charCodeAt(0));\n\n    for (var i = 0; i < codecOptions.chars.length; i++)\n        encodeBuf[codecOptions.chars.charCodeAt(i)] = i;\n\n    this.encodeBuf = encodeBuf;\n}\n\nSBCSCodec.prototype.encoder = SBCSEncoder;\nSBCSCodec.prototype.decoder = SBCSDecoder;\n\n\nfunction SBCSEncoder(options, codec) {\n    this.encodeBuf = codec.encodeBuf;\n}\n\nSBCSEncoder.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length);\n    for (var i = 0; i < str.length; i++)\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\n    \n    return buf;\n}\n\nSBCSEncoder.prototype.end = function() {\n}\n\n\nfunction SBCSDecoder(options, codec) {\n    this.decodeBuf = codec.decodeBuf;\n}\n\nSBCSDecoder.prototype.write = function(buf) {\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\n    var decodeBuf = this.decodeBuf;\n    var newBuf = Buffer.alloc(buf.length*2);\n    var idx1 = 0, idx2 = 0;\n    for (var i = 0; i < buf.length; i++) {\n        idx1 = buf[i]*2; idx2 = i*2;\n        newBuf[idx2] = decodeBuf[idx1];\n        newBuf[idx2+1] = decodeBuf[idx1+1];\n    }\n    return newBuf.toString('ucs2');\n}\n\nSBCSDecoder.prototype.end = function() {\n}\n","\"use strict\";\n\n// Manually added data to be used by sbcs codec in addition to generated one.\n\nmodule.exports = {\n    // Not supported by iconv, not sure why.\n    \"10029\": \"maccenteuro\",\n    \"maccenteuro\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ\"\n    },\n\n    \"808\": \"cp808\",\n    \"ibm808\": \"cp808\",\n    \"cp808\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёЄєЇїЎў°∙·√№€■ \"\n    },\n\n    \"mik\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя└┴┬├─┼╣║╚╔╩╦╠═╬┐░▒▓│┤№§╗╝┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n    },\n\n    // Aliases of generated encodings.\n    \"ascii8bit\": \"ascii\",\n    \"usascii\": \"ascii\",\n    \"ansix34\": \"ascii\",\n    \"ansix341968\": \"ascii\",\n    \"ansix341986\": \"ascii\",\n    \"csascii\": \"ascii\",\n    \"cp367\": \"ascii\",\n    \"ibm367\": \"ascii\",\n    \"isoir6\": \"ascii\",\n    \"iso646us\": \"ascii\",\n    \"iso646irv\": \"ascii\",\n    \"us\": \"ascii\",\n\n    \"latin1\": \"iso88591\",\n    \"latin2\": \"iso88592\",\n    \"latin3\": \"iso88593\",\n    \"latin4\": \"iso88594\",\n    \"latin5\": \"iso88599\",\n    \"latin6\": \"iso885910\",\n    \"latin7\": \"iso885913\",\n    \"latin8\": \"iso885914\",\n    \"latin9\": \"iso885915\",\n    \"latin10\": \"iso885916\",\n\n    \"csisolatin1\": \"iso88591\",\n    \"csisolatin2\": \"iso88592\",\n    \"csisolatin3\": \"iso88593\",\n    \"csisolatin4\": \"iso88594\",\n    \"csisolatincyrillic\": \"iso88595\",\n    \"csisolatinarabic\": \"iso88596\",\n    \"csisolatingreek\" : \"iso88597\",\n    \"csisolatinhebrew\": \"iso88598\",\n    \"csisolatin5\": \"iso88599\",\n    \"csisolatin6\": \"iso885910\",\n\n    \"l1\": \"iso88591\",\n    \"l2\": \"iso88592\",\n    \"l3\": \"iso88593\",\n    \"l4\": \"iso88594\",\n    \"l5\": \"iso88599\",\n    \"l6\": \"iso885910\",\n    \"l7\": \"iso885913\",\n    \"l8\": \"iso885914\",\n    \"l9\": \"iso885915\",\n    \"l10\": \"iso885916\",\n\n    \"isoir14\": \"iso646jp\",\n    \"isoir57\": \"iso646cn\",\n    \"isoir100\": \"iso88591\",\n    \"isoir101\": \"iso88592\",\n    \"isoir109\": \"iso88593\",\n    \"isoir110\": \"iso88594\",\n    \"isoir144\": \"iso88595\",\n    \"isoir127\": \"iso88596\",\n    \"isoir126\": \"iso88597\",\n    \"isoir138\": \"iso88598\",\n    \"isoir148\": \"iso88599\",\n    \"isoir157\": \"iso885910\",\n    \"isoir166\": \"tis620\",\n    \"isoir179\": \"iso885913\",\n    \"isoir199\": \"iso885914\",\n    \"isoir203\": \"iso885915\",\n    \"isoir226\": \"iso885916\",\n\n    \"cp819\": \"iso88591\",\n    \"ibm819\": \"iso88591\",\n\n    \"cyrillic\": \"iso88595\",\n\n    \"arabic\": \"iso88596\",\n    \"arabic8\": \"iso88596\",\n    \"ecma114\": \"iso88596\",\n    \"asmo708\": \"iso88596\",\n\n    \"greek\" : \"iso88597\",\n    \"greek8\" : \"iso88597\",\n    \"ecma118\" : \"iso88597\",\n    \"elot928\" : \"iso88597\",\n\n    \"hebrew\": \"iso88598\",\n    \"hebrew8\": \"iso88598\",\n\n    \"turkish\": \"iso88599\",\n    \"turkish8\": \"iso88599\",\n\n    \"thai\": \"iso885911\",\n    \"thai8\": \"iso885911\",\n\n    \"celtic\": \"iso885914\",\n    \"celtic8\": \"iso885914\",\n    \"isoceltic\": \"iso885914\",\n\n    \"tis6200\": \"tis620\",\n    \"tis62025291\": \"tis620\",\n    \"tis62025330\": \"tis620\",\n\n    \"10000\": \"macroman\",\n    \"10006\": \"macgreek\",\n    \"10007\": \"maccyrillic\",\n    \"10079\": \"maciceland\",\n    \"10081\": \"macturkish\",\n\n    \"cspc8codepage437\": \"cp437\",\n    \"cspc775baltic\": \"cp775\",\n    \"cspc850multilingual\": \"cp850\",\n    \"cspcp852\": \"cp852\",\n    \"cspc862latinhebrew\": \"cp862\",\n    \"cpgr\": \"cp869\",\n\n    \"msee\": \"cp1250\",\n    \"mscyrl\": \"cp1251\",\n    \"msansi\": \"cp1252\",\n    \"msgreek\": \"cp1253\",\n    \"msturk\": \"cp1254\",\n    \"mshebr\": \"cp1255\",\n    \"msarab\": \"cp1256\",\n    \"winbaltrim\": \"cp1257\",\n\n    \"cp20866\": \"koi8r\",\n    \"20866\": \"koi8r\",\n    \"ibm878\": \"koi8r\",\n    \"cskoi8r\": \"koi8r\",\n\n    \"cp21866\": \"koi8u\",\n    \"21866\": \"koi8u\",\n    \"ibm1168\": \"koi8u\",\n\n    \"strk10482002\": \"rk1048\",\n\n    \"tcvn5712\": \"tcvn\",\n    \"tcvn57121\": \"tcvn\",\n\n    \"gb198880\": \"iso646cn\",\n    \"cn\": \"iso646cn\",\n\n    \"csiso14jisc6220ro\": \"iso646jp\",\n    \"jisc62201969ro\": \"iso646jp\",\n    \"jp\": \"iso646jp\",\n\n    \"cshproman8\": \"hproman8\",\n    \"r8\": \"hproman8\",\n    \"roman8\": \"hproman8\",\n    \"xroman8\": \"hproman8\",\n    \"ibm1051\": \"hproman8\",\n\n    \"mac\": \"macintosh\",\n    \"csmacintosh\": \"macintosh\",\n};\n\n","\"use strict\";\n\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\nmodule.exports = {\n  \"437\": \"cp437\",\n  \"737\": \"cp737\",\n  \"775\": \"cp775\",\n  \"850\": \"cp850\",\n  \"852\": \"cp852\",\n  \"855\": \"cp855\",\n  \"856\": \"cp856\",\n  \"857\": \"cp857\",\n  \"858\": \"cp858\",\n  \"860\": \"cp860\",\n  \"861\": \"cp861\",\n  \"862\": \"cp862\",\n  \"863\": \"cp863\",\n  \"864\": \"cp864\",\n  \"865\": \"cp865\",\n  \"866\": \"cp866\",\n  \"869\": \"cp869\",\n  \"874\": \"windows874\",\n  \"922\": \"cp922\",\n  \"1046\": \"cp1046\",\n  \"1124\": \"cp1124\",\n  \"1125\": \"cp1125\",\n  \"1129\": \"cp1129\",\n  \"1133\": \"cp1133\",\n  \"1161\": \"cp1161\",\n  \"1162\": \"cp1162\",\n  \"1163\": \"cp1163\",\n  \"1250\": \"windows1250\",\n  \"1251\": \"windows1251\",\n  \"1252\": \"windows1252\",\n  \"1253\": \"windows1253\",\n  \"1254\": \"windows1254\",\n  \"1255\": \"windows1255\",\n  \"1256\": \"windows1256\",\n  \"1257\": \"windows1257\",\n  \"1258\": \"windows1258\",\n  \"28591\": \"iso88591\",\n  \"28592\": \"iso88592\",\n  \"28593\": \"iso88593\",\n  \"28594\": \"iso88594\",\n  \"28595\": \"iso88595\",\n  \"28596\": \"iso88596\",\n  \"28597\": \"iso88597\",\n  \"28598\": \"iso88598\",\n  \"28599\": \"iso88599\",\n  \"28600\": \"iso885910\",\n  \"28601\": \"iso885911\",\n  \"28603\": \"iso885913\",\n  \"28604\": \"iso885914\",\n  \"28605\": \"iso885915\",\n  \"28606\": \"iso885916\",\n  \"windows874\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€����…�����������‘’“”•–—�������� กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  },\n  \"win874\": \"windows874\",\n  \"cp874\": \"windows874\",\n  \"windows1250\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚�„…†‡�‰Š‹ŚŤŽŹ�‘’“”•–—�™š›śťžź ˇ˘Ł¤Ą¦§¨©Ş«¬­®Ż°±˛ł´µ¶·¸ąş»Ľ˝ľżŔÁÂĂÄĹĆÇČÉĘËĚÍÎĎĐŃŇÓÔŐÖ×ŘŮÚŰÜÝŢßŕáâăäĺćçčéęëěíîďđńňóôőö÷řůúűüýţ˙\"\n  },\n  \"win1250\": \"windows1250\",\n  \"cp1250\": \"windows1250\",\n  \"windows1251\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ЂЃ‚ѓ„…†‡€‰Љ‹ЊЌЋЏђ‘’“”•–—�™љ›њќћџ ЎўЈ¤Ґ¦§Ё©Є«¬­®Ї°±Ііґµ¶·ё№є»јЅѕїАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя\"\n  },\n  \"win1251\": \"windows1251\",\n  \"cp1251\": \"windows1251\",\n  \"windows1252\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰Š‹Œ�Ž��‘’“”•–—˜™š›œ�žŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"win1252\": \"windows1252\",\n  \"cp1252\": \"windows1252\",\n  \"windows1253\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡�‰�‹�����‘’“”•–—�™�›���� ΅Ά£¤¥¦§¨©�«¬­®―°±²³΄µ¶·ΈΉΊ»Ό½ΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ�ΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ�\"\n  },\n  \"win1253\": \"windows1253\",\n  \"cp1253\": \"windows1253\",\n  \"windows1254\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰Š‹Œ����‘’“”•–—˜™š›œ��Ÿ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓÔÕÖ×ØÙÚÛÜİŞßàáâãäåæçèéêëìíîïğñòóôõö÷øùúûüışÿ\"\n  },\n  \"win1254\": \"windows1254\",\n  \"cp1254\": \"windows1254\",\n  \"windows1255\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰�‹�����‘’“”•–—˜™�›���� ¡¢£₪¥¦§¨©×«¬­®¯°±²³´µ¶·¸¹÷»¼½¾¿ְֱֲֳִֵֶַָֹֺֻּֽ־ֿ׀ׁׂ׃װױײ׳״�������אבגדהוזחטיךכלםמןנסעףפץצקרשת��‎‏�\"\n  },\n  \"win1255\": \"windows1255\",\n  \"cp1255\": \"windows1255\",\n  \"windows1256\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€پ‚ƒ„…†‡ˆ‰ٹ‹Œچژڈگ‘’“”•–—ک™ڑ›œ‌‍ں ،¢£¤¥¦§¨©ھ«¬­®¯°±²³´µ¶·¸¹؛»¼½¾؟ہءآأؤإئابةتثجحخدذرزسشصض×طظعغـفقكàلâمنهوçèéêëىيîïًٌٍَôُِ÷ّùْûü‎‏ے\"\n  },\n  \"win1256\": \"windows1256\",\n  \"cp1256\": \"windows1256\",\n  \"windows1257\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚�„…†‡�‰�‹�¨ˇ¸�‘’“”•–—�™�›�¯˛� �¢£¤�¦§Ø©Ŗ«¬­®Æ°±²³´µ¶·ø¹ŗ»¼½¾æĄĮĀĆÄÅĘĒČÉŹĖĢĶĪĻŠŃŅÓŌÕÖ×ŲŁŚŪÜŻŽßąįāćäåęēčéźėģķīļšńņóōõö÷ųłśūüżž˙\"\n  },\n  \"win1257\": \"windows1257\",\n  \"cp1257\": \"windows1257\",\n  \"windows1258\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰�‹Œ����‘’“”•–—˜™�›œ��Ÿ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ\"\n  },\n  \"win1258\": \"windows1258\",\n  \"cp1258\": \"windows1258\",\n  \"iso88591\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"cp28591\": \"iso88591\",\n  \"iso88592\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" Ą˘Ł¤ĽŚ§¨ŠŞŤŹ­ŽŻ°ą˛ł´ľśˇ¸šşťź˝žżŔÁÂĂÄĹĆÇČÉĘËĚÍÎĎĐŃŇÓÔŐÖ×ŘŮÚŰÜÝŢßŕáâăäĺćçčéęëěíîďđńňóôőö÷řůúűüýţ˙\"\n  },\n  \"cp28592\": \"iso88592\",\n  \"iso88593\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" Ħ˘£¤�Ĥ§¨İŞĞĴ­�Ż°ħ²³´µĥ·¸ışğĵ½�żÀÁÂ�ÄĊĈÇÈÉÊËÌÍÎÏ�ÑÒÓÔĠÖ×ĜÙÚÛÜŬŜßàáâ�äċĉçèéêëìíîï�ñòóôġö÷ĝùúûüŭŝ˙\"\n  },\n  \"cp28593\": \"iso88593\",\n  \"iso88594\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ĄĸŖ¤ĨĻ§¨ŠĒĢŦ­Ž¯°ą˛ŗ´ĩļˇ¸šēģŧŊžŋĀÁÂÃÄÅÆĮČÉĘËĖÍÎĪĐŅŌĶÔÕÖ×ØŲÚÛÜŨŪßāáâãäåæįčéęëėíîīđņōķôõö÷øųúûüũū˙\"\n  },\n  \"cp28594\": \"iso88594\",\n  \"iso88595\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ЁЂЃЄЅІЇЈЉЊЋЌ­ЎЏАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя№ёђѓєѕіїјљњћќ§ўџ\"\n  },\n  \"cp28595\": \"iso88595\",\n  \"iso88596\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ���¤�������،­�������������؛���؟�ءآأؤإئابةتثجحخدذرزسشصضطظعغ�����ـفقكلمنهوىيًٌٍَُِّْ�������������\"\n  },\n  \"cp28596\": \"iso88596\",\n  \"iso88597\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ‘’£€₯¦§¨©ͺ«¬­�―°±²³΄΅Ά·ΈΉΊ»Ό½ΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ�ΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ�\"\n  },\n  \"cp28597\": \"iso88597\",\n  \"iso88598\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" �¢£¤¥¦§¨©×«¬­®¯°±²³´µ¶·¸¹÷»¼½¾��������������������������������‗אבגדהוזחטיךכלםמןנסעףפץצקרשת��‎‏�\"\n  },\n  \"cp28598\": \"iso88598\",\n  \"iso88599\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓÔÕÖ×ØÙÚÛÜİŞßàáâãäåæçèéêëìíîïğñòóôõö÷øùúûüışÿ\"\n  },\n  \"cp28599\": \"iso88599\",\n  \"iso885910\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ĄĒĢĪĨĶ§ĻĐŠŦŽ­ŪŊ°ąēģīĩķ·ļđšŧž―ūŋĀÁÂÃÄÅÆĮČÉĘËĖÍÎÏÐŅŌÓÔÕÖŨØŲÚÛÜÝÞßāáâãäåæįčéęëėíîïðņōóôõöũøųúûüýþĸ\"\n  },\n  \"cp28600\": \"iso885910\",\n  \"iso885911\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  },\n  \"cp28601\": \"iso885911\",\n  \"iso885913\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ”¢£¤„¦§Ø©Ŗ«¬­®Æ°±²³“µ¶·ø¹ŗ»¼½¾æĄĮĀĆÄÅĘĒČÉŹĖĢĶĪĻŠŃŅÓŌÕÖ×ŲŁŚŪÜŻŽßąįāćäåęēčéźėģķīļšńņóōõö÷ųłśūüżž’\"\n  },\n  \"cp28603\": \"iso885913\",\n  \"iso885914\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" Ḃḃ£ĊċḊ§Ẁ©ẂḋỲ­®ŸḞḟĠġṀṁ¶ṖẁṗẃṠỳẄẅṡÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏŴÑÒÓÔÕÖṪØÙÚÛÜÝŶßàáâãäåæçèéêëìíîïŵñòóôõöṫøùúûüýŷÿ\"\n  },\n  \"cp28604\": \"iso885914\",\n  \"iso885915\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£€¥Š§š©ª«¬­®¯°±²³Žµ¶·ž¹º»ŒœŸ¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"cp28605\": \"iso885915\",\n  \"iso885916\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ĄąŁ€„Š§š©Ș«Ź­źŻ°±ČłŽ”¶·žčș»ŒœŸżÀÁÂĂÄĆÆÇÈÉÊËÌÍÎÏĐŃÒÓÔŐÖŚŰÙÚÛÜĘȚßàáâăäćæçèéêëìíîïđńòóôőöśűùúûüęțÿ\"\n  },\n  \"cp28606\": \"iso885916\",\n  \"cp437\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm437\": \"cp437\",\n  \"csibm437\": \"cp437\",\n  \"cp737\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩαβγδεζηθικλμνξοπρσςτυφχψ░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀ωάέήϊίόύϋώΆΈΉΊΌΎΏ±≥≤ΪΫ÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm737\": \"cp737\",\n  \"csibm737\": \"cp737\",\n  \"cp775\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ĆüéāäģåćłēŖŗīŹÄÅÉæÆōöĢ¢ŚśÖÜø£Ø×¤ĀĪóŻżź”¦©®¬½¼Ł«»░▒▓│┤ĄČĘĖ╣║╗╝ĮŠ┐└┴┬├─┼ŲŪ╚╔╩╦╠═╬Žąčęėįšųūž┘┌█▄▌▐▀ÓßŌŃõÕµńĶķĻļņĒŅ’­±“¾¶§÷„°∙·¹³²■ \"\n  },\n  \"ibm775\": \"cp775\",\n  \"csibm775\": \"cp775\",\n  \"cp850\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø×ƒáíóúñÑªº¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ðÐÊËÈıÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµþÞÚÛÙýÝ¯´­±‗¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm850\": \"cp850\",\n  \"csibm850\": \"cp850\",\n  \"cp852\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäůćçłëŐőîŹÄĆÉĹĺôöĽľŚśÖÜŤťŁ×čáíóúĄąŽžĘę¬źČş«»░▒▓│┤ÁÂĚŞ╣║╗╝Żż┐└┴┬├─┼Ăă╚╔╩╦╠═╬¤đĐĎËďŇÍÎě┘┌█▄ŢŮ▀ÓßÔŃńňŠšŔÚŕŰýÝţ´­˝˛ˇ˘§÷¸°¨˙űŘř■ \"\n  },\n  \"ibm852\": \"cp852\",\n  \"csibm852\": \"cp852\",\n  \"cp855\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ђЂѓЃёЁєЄѕЅіІїЇјЈљЉњЊћЋќЌўЎџЏюЮъЪаАбБцЦдДеЕфФгГ«»░▒▓│┤хХиИ╣║╗╝йЙ┐└┴┬├─┼кК╚╔╩╦╠═╬¤лЛмМнНоОп┘┌█▄Пя▀ЯрРсСтТуУжЖвВьЬ№­ыЫзЗшШэЭщЩчЧ§■ \"\n  },\n  \"ibm855\": \"cp855\",\n  \"csibm855\": \"cp855\",\n  \"cp856\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"אבגדהוזחטיךכלםמןנסעףפץצקרשת�£�×����������®¬½¼�«»░▒▓│┤���©╣║╗╝¢¥┐└┴┬├─┼��╚╔╩╦╠═╬¤���������┘┌█▄¦�▀������µ�������¯´­±‗¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm856\": \"cp856\",\n  \"csibm856\": \"cp856\",\n  \"cp857\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîıÄÅÉæÆôöòûùİÖÜø£ØŞşáíóúñÑĞğ¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ºªÊËÈ�ÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµ�×ÚÛÙìÿ¯´­±�¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm857\": \"cp857\",\n  \"csibm857\": \"cp857\",\n  \"cp858\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø×ƒáíóúñÑªº¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ðÐÊËÈ€ÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµþÞÚÛÙýÝ¯´­±‗¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm858\": \"cp858\",\n  \"csibm858\": \"cp858\",\n  \"cp860\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâãàÁçêÊèÍÔìÃÂÉÀÈôõòÚùÌÕÜ¢£Ù₧ÓáíóúñÑªº¿Ò¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm860\": \"cp860\",\n  \"csibm860\": \"cp860\",\n  \"cp861\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèÐðÞÄÅÉæÆôöþûÝýÖÜø£Ø₧ƒáíóúÁÍÓÚ¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm861\": \"cp861\",\n  \"csibm861\": \"cp861\",\n  \"cp862\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"אבגדהוזחטיךכלםמןנסעףפץצקרשת¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm862\": \"cp862\",\n  \"csibm862\": \"cp862\",\n  \"cp863\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâÂà¶çêëèïî‗À§ÉÈÊôËÏûù¤ÔÜ¢£ÙÛƒ¦´óú¨¸³¯Î⌐¬½¼¾«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm863\": \"cp863\",\n  \"csibm863\": \"cp863\",\n  \"cp864\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$٪&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~°·∙√▒─│┼┤┬├┴┐┌└┘β∞φ±½¼≈«»ﻷﻸ��ﻻﻼ� ­ﺂ£¤ﺄ��ﺎﺏﺕﺙ،ﺝﺡﺥ٠١٢٣٤٥٦٧٨٩ﻑ؛ﺱﺵﺹ؟¢ﺀﺁﺃﺅﻊﺋﺍﺑﺓﺗﺛﺟﺣﺧﺩﺫﺭﺯﺳﺷﺻﺿﻁﻅﻋﻏ¦¬÷×ﻉـﻓﻗﻛﻟﻣﻧﻫﻭﻯﻳﺽﻌﻎﻍﻡﹽّﻥﻩﻬﻰﻲﻐﻕﻵﻶﻝﻙﻱ■�\"\n  },\n  \"ibm864\": \"cp864\",\n  \"csibm864\": \"cp864\",\n  \"cp865\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø₧ƒáíóúñÑªº¿⌐¬½¼¡«¤░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm865\": \"cp865\",\n  \"csibm865\": \"cp865\",\n  \"cp866\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёЄєЇїЎў°∙·√№¤■ \"\n  },\n  \"ibm866\": \"cp866\",\n  \"csibm866\": \"cp866\",\n  \"cp869\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"������Ά�·¬¦‘’Έ―ΉΊΪΌ��ΎΫ©Ώ²³ά£έήίϊΐόύΑΒΓΔΕΖΗ½ΘΙ«»░▒▓│┤ΚΛΜΝ╣║╗╝ΞΟ┐└┴┬├─┼ΠΡ╚╔╩╦╠═╬ΣΤΥΦΧΨΩαβγ┘┌█▄δε▀ζηθικλμνξοπρσςτ΄­±υφχ§ψ΅°¨ωϋΰώ■ \"\n  },\n  \"ibm869\": \"cp869\",\n  \"csibm869\": \"cp869\",\n  \"cp922\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§¨©ª«¬­®‾°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏŠÑÒÓÔÕÖ×ØÙÚÛÜÝŽßàáâãäåæçèéêëìíîïšñòóôõö÷øùúûüýžÿ\"\n  },\n  \"ibm922\": \"cp922\",\n  \"csibm922\": \"cp922\",\n  \"cp1046\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ﺈ×÷ﹱ■│─┐┌└┘ﹹﹻﹽﹿﹷﺊﻰﻳﻲﻎﻏﻐﻶﻸﻺﻼ ¤ﺋﺑﺗﺛﺟﺣ،­ﺧﺳ٠١٢٣٤٥٦٧٨٩ﺷ؛ﺻﺿﻊ؟ﻋءآأؤإئابةتثجحخدذرزسشصضطﻇعغﻌﺂﺄﺎﻓـفقكلمنهوىيًٌٍَُِّْﻗﻛﻟﻵﻷﻹﻻﻣﻧﻬﻩ�\"\n  },\n  \"ibm1046\": \"cp1046\",\n  \"csibm1046\": \"cp1046\",\n  \"cp1124\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ЁЂҐЄЅІЇЈЉЊЋЌ­ЎЏАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя№ёђґєѕіїјљњћќ§ўџ\"\n  },\n  \"ibm1124\": \"cp1124\",\n  \"csibm1124\": \"cp1124\",\n  \"cp1125\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёҐґЄєІіЇї·√№¤■ \"\n  },\n  \"ibm1125\": \"cp1125\",\n  \"csibm1125\": \"cp1125\",\n  \"cp1129\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§œ©ª«¬­®¯°±²³Ÿµ¶·Œ¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ\"\n  },\n  \"ibm1129\": \"cp1129\",\n  \"csibm1129\": \"cp1129\",\n  \"cp1133\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ກຂຄງຈສຊຍດຕຖທນບປຜຝພຟມຢຣລວຫອຮ���ຯະາຳິີຶືຸູຼັົຽ���ເແໂໃໄ່້໊໋໌ໍໆ�ໜໝ₭����������������໐໑໒໓໔໕໖໗໘໙��¢¬¦�\"\n  },\n  \"ibm1133\": \"cp1133\",\n  \"csibm1133\": \"cp1133\",\n  \"cp1161\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"��������������������������������่กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู้๊๋€฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛¢¬¦ \"\n  },\n  \"ibm1161\": \"cp1161\",\n  \"csibm1161\": \"cp1161\",\n  \"cp1162\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€…‘’“”•–— กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  },\n  \"ibm1162\": \"cp1162\",\n  \"csibm1162\": \"cp1162\",\n  \"cp1163\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£€¥¦§œ©ª«¬­®¯°±²³Ÿµ¶·Œ¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ\"\n  },\n  \"ibm1163\": \"cp1163\",\n  \"csibm1163\": \"cp1163\",\n  \"maccroatian\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊�©⁄¤‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ\"\n  },\n  \"maccyrillic\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°¢£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµ∂ЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю¤\"\n  },\n  \"macgreek\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦­ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ�\"\n  },\n  \"maciceland\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macroman\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macromania\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂŞ∞±≤≥¥µ∂∑∏π∫ªºΩăş¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤‹›Ţţ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macthai\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"«»…“”�•‘’� กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู﻿​–—฿เแโใไๅๆ็่้๊๋์ํ™๏๐๑๒๓๔๕๖๗๘๙®©����\"\n  },\n  \"macturkish\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙ�ˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macukraine\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю¤\"\n  },\n  \"koi8r\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"─│┌┐└┘├┤┬┴┼▀▄█▌▐░▒▓⌠■∙√≈≤≥ ⌡°²·÷═║╒ё╓╔╕╖╗╘╙╚╛╜╝╞╟╠╡Ё╢╣╤╥╦╧╨╩╪╫╬©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"koi8u\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"─│┌┐└┘├┤┬┴┼▀▄█▌▐░▒▓⌠■∙√≈≤≥ ⌡°²·÷═║╒ёє╔ії╗╘╙╚╛ґ╝╞╟╠╡ЁЄ╣ІЇ╦╧╨╩╪Ґ╬©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"koi8ru\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"─│┌┐└┘├┤┬┴┼▀▄█▌▐░▒▓⌠■∙√≈≤≥ ⌡°²·÷═║╒ёє╔ії╗╘╙╚╛ґў╞╟╠╡ЁЄ╣ІЇ╦╧╨╩╪ҐЎ©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"koi8t\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"қғ‚Ғ„…†‡�‰ҳ‹ҲҷҶ�Қ‘’“”•–—�™�›�����ӯӮё¤ӣ¦§���«¬­®�°±²Ё�Ӣ¶·�№�»���©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"armscii8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" �և։)(»«—.՝,-֊…՜՛՞ԱաԲբԳգԴդԵեԶզԷէԸըԹթԺժԻիԼլԽխԾծԿկՀհՁձՂղՃճՄմՅյՆնՇշՈոՉչՊպՋջՌռՍսՎվՏտՐրՑցՒւՓփՔքՕօՖֆ՚�\"\n  },\n  \"rk1048\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ЂЃ‚ѓ„…†‡€‰Љ‹ЊҚҺЏђ‘’“”•–—�™љ›њқһџ ҰұӘ¤Ө¦§Ё©Ғ«¬­®Ү°±Ііөµ¶·ё№ғ»әҢңүАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя\"\n  },\n  \"tcvn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000ÚỤ\\u0003ỪỬỮ\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010ỨỰỲỶỸÝỴ\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ÀẢÃÁẠẶẬÈẺẼÉẸỆÌỈĨÍỊÒỎÕÓỌỘỜỞỠỚỢÙỦŨ ĂÂÊÔƠƯĐăâêôơưđẶ̀̀̉̃́àảãáạẲằẳẵắẴẮẦẨẪẤỀặầẩẫấậèỂẻẽéẹềểễếệìỉỄẾỒĩíịòỔỏõóọồổỗốộờởỡớợùỖủũúụừửữứựỳỷỹýỵỐ\"\n  },\n  \"georgianacademy\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"‚ƒ„…†‡ˆ‰Š‹Œ‘’“”•–—˜™š›œŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿აბგდევზთიკლმნოპჟრსტუფქღყშჩცძწჭხჯჰჱჲჳჴჵჶçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"georgianps\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"‚ƒ„…†‡ˆ‰Š‹Œ‘’“”•–—˜™š›œŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿აბგდევზჱთიკლმნჲოპჟრსტჳუფქღყშჩცძწჭხჴჯჰჵæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"pt154\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ҖҒӮғ„…ҶҮҲүҠӢҢҚҺҸҗ‘’“”•–—ҳҷҡӣңқһҹ ЎўЈӨҘҰ§Ё©Ә«¬ӯ®Ҝ°ұІіҙө¶·ё№ә»јҪҫҝАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя\"\n  },\n  \"viscii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001Ẳ\\u0003\\u0004ẴẪ\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013Ỷ\\u0015\\u0016\\u0017\\u0018Ỹ\\u001a\\u001b\\u001c\\u001dỴ\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ẠẮẰẶẤẦẨẬẼẸẾỀỂỄỆỐỒỔỖỘỢỚỜỞỊỎỌỈỦŨỤỲÕắằặấầẩậẽẹếềểễệốồổỗỠƠộờởịỰỨỪỬơớƯÀÁÂÃẢĂẳẵÈÉÊẺÌÍĨỳĐứÒÓÔạỷừửÙÚỹỵÝỡưàáâãảăữẫèéêẻìíĩỉđựòóôõỏọụùúũủýợỮ\"\n  },\n  \"iso646cn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#¥%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}‾��������������������������������������������������������������������������������������������������������������������������������\"\n  },\n  \"iso646jp\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[¥]^_`abcdefghijklmnopqrstuvwxyz{|}‾��������������������������������������������������������������������������������������������������������������������������������\"\n  },\n  \"hproman8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ÀÂÈÊËÎÏ´ˋˆ¨˜ÙÛ₤¯Ýý°ÇçÑñ¡¿¤£¥§ƒ¢âêôûáéóúàèòùäëöüÅîØÆåíøæÄìÖÜÉïßÔÁÃãÐðÍÌÓÒÕõŠšÚŸÿÞþ·µ¶¾—¼½ªº«■»±�\"\n  },\n  \"macintosh\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"ascii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"��������������������������������������������������������������������������������������������������������������������������������\"\n  },\n  \"tis620\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"���������������������������������กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  }\n}","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\n// To save memory and loading time, we read table files only when requested.\n\nexports._dbcs = DBCSCodec;\n\nvar UNASSIGNED = -1,\n    GB18030_CODE = -2,\n    SEQ_START  = -10,\n    NODE_START = -1000,\n    UNASSIGNED_NODE = new Array(0x100),\n    DEF_CHAR = -1;\n\nfor (var i = 0; i < 0x100; i++)\n    UNASSIGNED_NODE[i] = UNASSIGNED;\n\n\n// Class DBCSCodec reads and initializes mapping tables.\nfunction DBCSCodec(codecOptions, iconv) {\n    this.encodingName = codecOptions.encodingName;\n    if (!codecOptions)\n        throw new Error(\"DBCS codec is called without the data.\")\n    if (!codecOptions.table)\n        throw new Error(\"Encoding '\" + this.encodingName + \"' has no data.\");\n\n    // Load tables.\n    var mappingTable = codecOptions.table();\n\n\n    // Decode tables: MBCS -> Unicode.\n\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\n    // Trie root is decodeTables[0].\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\n    //         == UNASSIGNED -> unknown/unassigned sequence.\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\n    this.decodeTables = [];\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\n\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \n    this.decodeTableSeq = [];\n\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\n    for (var i = 0; i < mappingTable.length; i++)\n        this._addDecodeChunk(mappingTable[i]);\n\n    this.defaultCharUnicode = iconv.defaultCharUnicode;\n\n    \n    // Encode tables: Unicode -> DBCS.\n\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\n    //         == UNASSIGNED -> no conversion found. Output a default char.\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\n    this.encodeTable = [];\n    \n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\n    // Objects are kept separately from encodeTable to increase performance.\n    this.encodeTableSeq = [];\n\n    // Some chars can be decoded, but need not be encoded.\n    var skipEncodeChars = {};\n    if (codecOptions.encodeSkipVals)\n        for (var i = 0; i < codecOptions.encodeSkipVals.length; i++) {\n            var val = codecOptions.encodeSkipVals[i];\n            if (typeof val === 'number')\n                skipEncodeChars[val] = true;\n            else\n                for (var j = val.from; j <= val.to; j++)\n                    skipEncodeChars[j] = true;\n        }\n        \n    // Use decode trie to recursively fill out encode tables.\n    this._fillEncodeTable(0, 0, skipEncodeChars);\n\n    // Add more encoding pairs when needed.\n    if (codecOptions.encodeAdd) {\n        for (var uChar in codecOptions.encodeAdd)\n            if (Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd, uChar))\n                this._setEncodeChar(uChar.charCodeAt(0), codecOptions.encodeAdd[uChar]);\n    }\n\n    this.defCharSB  = this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\n\n\n    // Load & create GB18030 tables when needed.\n    if (typeof codecOptions.gb18030 === 'function') {\n        this.gb18030 = codecOptions.gb18030(); // Load GB18030 ranges.\n\n        // Add GB18030 decode tables.\n        var thirdByteNodeIdx = this.decodeTables.length;\n        var thirdByteNode = this.decodeTables[thirdByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        var fourthByteNodeIdx = this.decodeTables.length;\n        var fourthByteNode = this.decodeTables[fourthByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        for (var i = 0x81; i <= 0xFE; i++) {\n            var secondByteNodeIdx = NODE_START - this.decodeTables[0][i];\n            var secondByteNode = this.decodeTables[secondByteNodeIdx];\n            for (var j = 0x30; j <= 0x39; j++)\n                secondByteNode[j] = NODE_START - thirdByteNodeIdx;\n        }\n        for (var i = 0x81; i <= 0xFE; i++)\n            thirdByteNode[i] = NODE_START - fourthByteNodeIdx;\n        for (var i = 0x30; i <= 0x39; i++)\n            fourthByteNode[i] = GB18030_CODE\n    }        \n}\n\nDBCSCodec.prototype.encoder = DBCSEncoder;\nDBCSCodec.prototype.decoder = DBCSDecoder;\n\n// Decoder helpers\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\n    var bytes = [];\n    for (; addr > 0; addr >>= 8)\n        bytes.push(addr & 0xFF);\n    if (bytes.length == 0)\n        bytes.push(0);\n\n    var node = this.decodeTables[0];\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\n        var val = node[bytes[i]];\n\n        if (val == UNASSIGNED) { // Create new node.\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\n        }\n        else if (val <= NODE_START) { // Existing node.\n            node = this.decodeTables[NODE_START - val];\n        }\n        else\n            throw new Error(\"Overwrite byte in \" + this.encodingName + \", addr: \" + addr.toString(16));\n    }\n    return node;\n}\n\n\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\n    // First element of chunk is the hex mbcs code where we start.\n    var curAddr = parseInt(chunk[0], 16);\n\n    // Choose the decoding node where we'll write our chars.\n    var writeTable = this._getDecodeTrieNode(curAddr);\n    curAddr = curAddr & 0xFF;\n\n    // Write all other elements of the chunk to the table.\n    for (var k = 1; k < chunk.length; k++) {\n        var part = chunk[k];\n        if (typeof part === \"string\") { // String, write as-is.\n            for (var l = 0; l < part.length;) {\n                var code = part.charCodeAt(l++);\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\n                    var codeTrail = part.charCodeAt(l++);\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\n                    else\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n                }\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\n                    var len = 0xFFF - code + 2;\n                    var seq = [];\n                    for (var m = 0; m < len; m++)\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\n\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\n                    this.decodeTableSeq.push(seq);\n                }\n                else\n                    writeTable[curAddr++] = code; // Basic char\n            }\n        } \n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\n            var charCode = writeTable[curAddr - 1] + 1;\n            for (var l = 0; l < part; l++)\n                writeTable[curAddr++] = charCode++;\n        }\n        else\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n    }\n    if (curAddr > 0xFF)\n        throw new Error(\"Incorrect chunk in \"  + this.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\n}\n\n// Encoder helpers\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\n    if (this.encodeTable[high] === undefined)\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\n    return this.encodeTable[high];\n}\n\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n    if (bucket[low] <= SEQ_START)\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\n    else if (bucket[low] == UNASSIGNED)\n        bucket[low] = dbcsCode;\n}\n\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\n    \n    // Get the root of character tree according to first character of the sequence.\n    var uCode = seq[0];\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n\n    var node;\n    if (bucket[low] <= SEQ_START) {\n        // There's already a sequence with  - use it.\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\n    }\n    else {\n        // There was no sequence object - allocate a new one.\n        node = {};\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\n        this.encodeTableSeq.push(node);\n    }\n\n    // Traverse the character tree, allocating new nodes as needed.\n    for (var j = 1; j < seq.length-1; j++) {\n        var oldVal = node[uCode];\n        if (typeof oldVal === 'object')\n            node = oldVal;\n        else {\n            node = node[uCode] = {}\n            if (oldVal !== undefined)\n                node[DEF_CHAR] = oldVal\n        }\n    }\n\n    // Set the leaf to given dbcsCode.\n    uCode = seq[seq.length-1];\n    node[uCode] = dbcsCode;\n}\n\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\n    var node = this.decodeTables[nodeIdx];\n    for (var i = 0; i < 0x100; i++) {\n        var uCode = node[i];\n        var mbCode = prefix + i;\n        if (skipEncodeChars[mbCode])\n            continue;\n\n        if (uCode >= 0)\n            this._setEncodeChar(uCode, mbCode);\n        else if (uCode <= NODE_START)\n            this._fillEncodeTable(NODE_START - uCode, mbCode << 8, skipEncodeChars);\n        else if (uCode <= SEQ_START)\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\n    }\n}\n\n\n\n// == Encoder ==================================================================\n\nfunction DBCSEncoder(options, codec) {\n    // Encoder state\n    this.leadSurrogate = -1;\n    this.seqObj = undefined;\n    \n    // Static data\n    this.encodeTable = codec.encodeTable;\n    this.encodeTableSeq = codec.encodeTableSeq;\n    this.defaultCharSingleByte = codec.defCharSB;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSEncoder.prototype.write = function(str) {\n    var newBuf = Buffer.alloc(str.length * (this.gb18030 ? 4 : 3)),\n        leadSurrogate = this.leadSurrogate,\n        seqObj = this.seqObj, nextChar = -1,\n        i = 0, j = 0;\n\n    while (true) {\n        // 0. Get next character.\n        if (nextChar === -1) {\n            if (i == str.length) break;\n            var uCode = str.charCodeAt(i++);\n        }\n        else {\n            var uCode = nextChar;\n            nextChar = -1;    \n        }\n\n        // 1. Handle surrogates.\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\n            if (uCode < 0xDC00) { // We've got lead surrogate.\n                if (leadSurrogate === -1) {\n                    leadSurrogate = uCode;\n                    continue;\n                } else {\n                    leadSurrogate = uCode;\n                    // Double lead surrogate found.\n                    uCode = UNASSIGNED;\n                }\n            } else { // We've got trail surrogate.\n                if (leadSurrogate !== -1) {\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\n                    leadSurrogate = -1;\n                } else {\n                    // Incomplete surrogate pair - only trail surrogate found.\n                    uCode = UNASSIGNED;\n                }\n                \n            }\n        }\n        else if (leadSurrogate !== -1) {\n            // Incomplete surrogate pair - only lead surrogate found.\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\n            leadSurrogate = -1;\n        }\n\n        // 2. Convert uCode character.\n        var dbcsCode = UNASSIGNED;\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\n            var resCode = seqObj[uCode];\n            if (typeof resCode === 'object') { // Sequence continues.\n                seqObj = resCode;\n                continue;\n\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\n                dbcsCode = resCode;\n\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\n\n                // Try default character for this sequence\n                resCode = seqObj[DEF_CHAR];\n                if (resCode !== undefined) {\n                    dbcsCode = resCode; // Found. Write it.\n                    nextChar = uCode; // Current character will be written too in the next iteration.\n\n                } else {\n                    // TODO: What if we have no default? (resCode == undefined)\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\n                    // Didn't do it for now because no encoding has this situation yet.\n                    // Currently, just skip the sequence and write current char.\n                }\n            }\n            seqObj = undefined;\n        }\n        else if (uCode >= 0) {  // Regular character\n            var subtable = this.encodeTable[uCode >> 8];\n            if (subtable !== undefined)\n                dbcsCode = subtable[uCode & 0xFF];\n            \n            if (dbcsCode <= SEQ_START) { // Sequence start\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\n                continue;\n            }\n\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\n                // Use GB18030 algorithm to find character(s) to write.\n                var idx = findIdx(this.gb18030.uChars, uCode);\n                if (idx != -1) {\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\n                    newBuf[j++] = 0x30 + dbcsCode;\n                    continue;\n                }\n            }\n        }\n\n        // 3. Write dbcsCode character.\n        if (dbcsCode === UNASSIGNED)\n            dbcsCode = this.defaultCharSingleByte;\n        \n        if (dbcsCode < 0x100) {\n            newBuf[j++] = dbcsCode;\n        }\n        else if (dbcsCode < 0x10000) {\n            newBuf[j++] = dbcsCode >> 8;   // high byte\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\n        }\n        else {\n            newBuf[j++] = dbcsCode >> 16;\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        }\n    }\n\n    this.seqObj = seqObj;\n    this.leadSurrogate = leadSurrogate;\n    return newBuf.slice(0, j);\n}\n\nDBCSEncoder.prototype.end = function() {\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\n        return; // All clean. Most often case.\n\n    var newBuf = Buffer.alloc(10), j = 0;\n\n    if (this.seqObj) { // We're in the sequence.\n        var dbcsCode = this.seqObj[DEF_CHAR];\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\n            if (dbcsCode < 0x100) {\n                newBuf[j++] = dbcsCode;\n            }\n            else {\n                newBuf[j++] = dbcsCode >> 8;   // high byte\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\n            }\n        } else {\n            // See todo above.\n        }\n        this.seqObj = undefined;\n    }\n\n    if (this.leadSurrogate !== -1) {\n        // Incomplete surrogate pair - only lead surrogate found.\n        newBuf[j++] = this.defaultCharSingleByte;\n        this.leadSurrogate = -1;\n    }\n    \n    return newBuf.slice(0, j);\n}\n\n// Export for testing\nDBCSEncoder.prototype.findIdx = findIdx;\n\n\n// == Decoder ==================================================================\n\nfunction DBCSDecoder(options, codec) {\n    // Decoder state\n    this.nodeIdx = 0;\n    this.prevBuf = Buffer.alloc(0);\n\n    // Static data\n    this.decodeTables = codec.decodeTables;\n    this.decodeTableSeq = codec.decodeTableSeq;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSDecoder.prototype.write = function(buf) {\n    var newBuf = Buffer.alloc(buf.length*2),\n        nodeIdx = this.nodeIdx, \n        prevBuf = this.prevBuf, prevBufOffset = this.prevBuf.length,\n        seqStart = -this.prevBuf.length, // idx of the start of current parsed sequence.\n        uCode;\n\n    if (prevBufOffset > 0) // Make prev buf overlap a little to make it easier to slice later.\n        prevBuf = Buffer.concat([prevBuf, buf.slice(0, 10)]);\n    \n    for (var i = 0, j = 0; i < buf.length; i++) {\n        var curByte = (i >= 0) ? buf[i] : prevBuf[i + prevBufOffset];\n\n        // Lookup in current trie node.\n        var uCode = this.decodeTables[nodeIdx][curByte];\n\n        if (uCode >= 0) { \n            // Normal character, just use it.\n        }\n        else if (uCode === UNASSIGNED) { // Unknown char.\n            // TODO: Callback with seq.\n            //var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            i = seqStart; // Try to parse again, after skipping first byte of the sequence ('i' will be incremented by 'for' cycle).\n            uCode = this.defaultCharUnicode.charCodeAt(0);\n        }\n        else if (uCode === GB18030_CODE) {\n            var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            var ptr = (curSeq[0]-0x81)*12600 + (curSeq[1]-0x30)*1260 + (curSeq[2]-0x81)*10 + (curSeq[3]-0x30);\n            var idx = findIdx(this.gb18030.gbChars, ptr);\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\n        }\n        else if (uCode <= NODE_START) { // Go to next trie node.\n            nodeIdx = NODE_START - uCode;\n            continue;\n        }\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\n            for (var k = 0; k < seq.length - 1; k++) {\n                uCode = seq[k];\n                newBuf[j++] = uCode & 0xFF;\n                newBuf[j++] = uCode >> 8;\n            }\n            uCode = seq[seq.length-1];\n        }\n        else\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\n\n        // Write the character to buffer, handling higher planes using surrogate pair.\n        if (uCode > 0xFFFF) { \n            uCode -= 0x10000;\n            var uCodeLead = 0xD800 + Math.floor(uCode / 0x400);\n            newBuf[j++] = uCodeLead & 0xFF;\n            newBuf[j++] = uCodeLead >> 8;\n\n            uCode = 0xDC00 + uCode % 0x400;\n        }\n        newBuf[j++] = uCode & 0xFF;\n        newBuf[j++] = uCode >> 8;\n\n        // Reset trie node.\n        nodeIdx = 0; seqStart = i+1;\n    }\n\n    this.nodeIdx = nodeIdx;\n    this.prevBuf = (seqStart >= 0) ? buf.slice(seqStart) : prevBuf.slice(seqStart + prevBufOffset);\n    return newBuf.slice(0, j).toString('ucs2');\n}\n\nDBCSDecoder.prototype.end = function() {\n    var ret = '';\n\n    // Try to parse all remaining chars.\n    while (this.prevBuf.length > 0) {\n        // Skip 1 character in the buffer.\n        ret += this.defaultCharUnicode;\n        var buf = this.prevBuf.slice(1);\n\n        // Parse remaining as usual.\n        this.prevBuf = Buffer.alloc(0);\n        this.nodeIdx = 0;\n        if (buf.length > 0)\n            ret += this.write(buf);\n    }\n\n    this.nodeIdx = 0;\n    return ret;\n}\n\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\nfunction findIdx(table, val) {\n    if (table[0] > val)\n        return -1;\n\n    var l = 0, r = table.length;\n    while (l < r-1) { // always table[l] <= val < table[r]\n        var mid = l + Math.floor((r-l+1)/2);\n        if (table[mid] <= val)\n            l = mid;\n        else\n            r = mid;\n    }\n    return l;\n}\n\n","\"use strict\";\n\n// Description of supported double byte encodings and aliases.\n// Tables are not require()-d until they are needed to speed up library load.\n// require()-s are direct to support Browserify.\n\nmodule.exports = {\n    \n    // == Japanese/ShiftJIS ====================================================\n    // All japanese encodings are based on JIS X set of standards:\n    // JIS X 0201 - Single-byte encoding of ASCII + ¥ + Kana chars at 0xA1-0xDF.\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \n    //              Has several variations in 1978, 1983, 1990 and 1997.\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\n    //              2 planes, first is superset of 0208, second - revised 0212.\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\n\n    // Byte encodings are:\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\n    //               0x00-0x7F       - lower part of 0201\n    //               0x8E, 0xA1-0xDF - upper part of 0201\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\n    //               Used as-is in ISO2022 family.\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \n    //                0201-1976 Roman, 0208-1978, 0208-1983.\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\n    //\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\n    //\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\n\n    'shiftjis': {\n        type: '_dbcs',\n        table: function() { return require('./tables/shiftjis.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\n    },\n    'csshiftjis': 'shiftjis',\n    'mskanji': 'shiftjis',\n    'sjis': 'shiftjis',\n    'windows31j': 'shiftjis',\n    'ms31j': 'shiftjis',\n    'xsjis': 'shiftjis',\n    'windows932': 'shiftjis',\n    'ms932': 'shiftjis',\n    '932': 'shiftjis',\n    'cp932': 'shiftjis',\n\n    'eucjp': {\n        type: '_dbcs',\n        table: function() { return require('./tables/eucjp.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n    },\n\n    // TODO: KDDI extension to Shift_JIS\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\n\n\n    // == Chinese/GBK ==========================================================\n    // http://en.wikipedia.org/wiki/GBK\n    // We mostly implement W3C recommendation: https://www.w3.org/TR/encoding/#gbk-encoder\n\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\n    'gb2312': 'cp936',\n    'gb231280': 'cp936',\n    'gb23121980': 'cp936',\n    'csgb2312': 'cp936',\n    'csiso58gb231280': 'cp936',\n    'euccn': 'cp936',\n\n    // Microsoft's CP936 is a subset and approximation of GBK.\n    'windows936': 'cp936',\n    'ms936': 'cp936',\n    '936': 'cp936',\n    'cp936': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json') },\n    },\n\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\n    'gbk': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n    },\n    'xgbk': 'gbk',\n    'isoir58': 'gbk',\n\n    // GB18030 is an algorithmic extension of GBK.\n    // Main source: https://www.w3.org/TR/encoding/#gbk-encoder\n    // http://icu-project.org/docs/papers/gb18030.html\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\n    'gb18030': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\n        encodeSkipVals: [0x80],\n        encodeAdd: {'€': 0xA2E3},\n    },\n\n    'chinese': 'gb18030',\n\n\n    // == Korean ===============================================================\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\n    'windows949': 'cp949',\n    'ms949': 'cp949',\n    '949': 'cp949',\n    'cp949': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp949.json') },\n    },\n\n    'cseuckr': 'cp949',\n    'csksc56011987': 'cp949',\n    'euckr': 'cp949',\n    'isoir149': 'cp949',\n    'korean': 'cp949',\n    'ksc56011987': 'cp949',\n    'ksc56011989': 'cp949',\n    'ksc5601': 'cp949',\n\n\n    // == Big5/Taiwan/Hong Kong ================================================\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\n    // Variations, in roughly number of defined chars:\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\n    //    Plus, it has 4 combining sequences.\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\n    // \n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\n\n    'windows950': 'cp950',\n    'ms950': 'cp950',\n    '950': 'cp950',\n    'cp950': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json') },\n    },\n\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\n    'big5': 'big5hkscs',\n    'big5hkscs': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\n        encodeSkipVals: [0xa2cc],\n    },\n\n    'cnbig5': 'big5hkscs',\n    'csbig5': 'big5hkscs',\n    'xxbig5': 'big5hkscs',\n};\n","\"use strict\";\n\nvar Buffer = require(\"buffer\").Buffer,\n    Transform = require(\"stream\").Transform;\n\n\n// == Exports ==================================================================\nmodule.exports = function(iconv) {\n    \n    // Additional Public API.\n    iconv.encodeStream = function encodeStream(encoding, options) {\n        return new IconvLiteEncoderStream(iconv.getEncoder(encoding, options), options);\n    }\n\n    iconv.decodeStream = function decodeStream(encoding, options) {\n        return new IconvLiteDecoderStream(iconv.getDecoder(encoding, options), options);\n    }\n\n    iconv.supportsStreams = true;\n\n\n    // Not published yet.\n    iconv.IconvLiteEncoderStream = IconvLiteEncoderStream;\n    iconv.IconvLiteDecoderStream = IconvLiteDecoderStream;\n    iconv._collect = IconvLiteDecoderStream.prototype.collect;\n};\n\n\n// == Encoder stream =======================================================\nfunction IconvLiteEncoderStream(conv, options) {\n    this.conv = conv;\n    options = options || {};\n    options.decodeStrings = false; // We accept only strings, so we don't need to decode them.\n    Transform.call(this, options);\n}\n\nIconvLiteEncoderStream.prototype = Object.create(Transform.prototype, {\n    constructor: { value: IconvLiteEncoderStream }\n});\n\nIconvLiteEncoderStream.prototype._transform = function(chunk, encoding, done) {\n    if (typeof chunk != 'string')\n        return done(new Error(\"Iconv encoding stream needs strings as its input.\"));\n    try {\n        var res = this.conv.write(chunk);\n        if (res && res.length) this.push(res);\n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteEncoderStream.prototype._flush = function(done) {\n    try {\n        var res = this.conv.end();\n        if (res && res.length) this.push(res);\n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteEncoderStream.prototype.collect = function(cb) {\n    var chunks = [];\n    this.on('error', cb);\n    this.on('data', function(chunk) { chunks.push(chunk); });\n    this.on('end', function() {\n        cb(null, Buffer.concat(chunks));\n    });\n    return this;\n}\n\n\n// == Decoder stream =======================================================\nfunction IconvLiteDecoderStream(conv, options) {\n    this.conv = conv;\n    options = options || {};\n    options.encoding = this.encoding = 'utf8'; // We output strings.\n    Transform.call(this, options);\n}\n\nIconvLiteDecoderStream.prototype = Object.create(Transform.prototype, {\n    constructor: { value: IconvLiteDecoderStream }\n});\n\nIconvLiteDecoderStream.prototype._transform = function(chunk, encoding, done) {\n    if (!Buffer.isBuffer(chunk))\n        return done(new Error(\"Iconv decoding stream needs buffers as its input.\"));\n    try {\n        var res = this.conv.write(chunk);\n        if (res && res.length) this.push(res, this.encoding);\n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteDecoderStream.prototype._flush = function(done) {\n    try {\n        var res = this.conv.end();\n        if (res && res.length) this.push(res, this.encoding);                \n        done();\n    }\n    catch (e) {\n        done(e);\n    }\n}\n\nIconvLiteDecoderStream.prototype.collect = function(cb) {\n    var res = '';\n    this.on('error', cb);\n    this.on('data', function(chunk) { res += chunk; });\n    this.on('end', function() {\n        cb(null, res);\n    });\n    return this;\n}\n\n","\"use strict\";\nvar Buffer = require(\"buffer\").Buffer;\n// Note: not polyfilled with safer-buffer on a purpose, as overrides Buffer\n\n// == Extend Node primitives to use iconv-lite =================================\n\nmodule.exports = function (iconv) {\n    var original = undefined; // Place to keep original methods.\n\n    // Node authors rewrote Buffer internals to make it compatible with\n    // Uint8Array and we cannot patch key functions since then.\n    // Note: this does use older Buffer API on a purpose\n    iconv.supportsNodeEncodingsExtension = !(Buffer.from || new Buffer(0) instanceof Uint8Array);\n\n    iconv.extendNodeEncodings = function extendNodeEncodings() {\n        if (original) return;\n        original = {};\n\n        if (!iconv.supportsNodeEncodingsExtension) {\n            console.error(\"ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node\");\n            console.error(\"See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility\");\n            return;\n        }\n\n        var nodeNativeEncodings = {\n            'hex': true, 'utf8': true, 'utf-8': true, 'ascii': true, 'binary': true, \n            'base64': true, 'ucs2': true, 'ucs-2': true, 'utf16le': true, 'utf-16le': true,\n        };\n\n        Buffer.isNativeEncoding = function(enc) {\n            return enc && nodeNativeEncodings[enc.toLowerCase()];\n        }\n\n        // -- SlowBuffer -----------------------------------------------------------\n        var SlowBuffer = require('buffer').SlowBuffer;\n\n        original.SlowBufferToString = SlowBuffer.prototype.toString;\n        SlowBuffer.prototype.toString = function(encoding, start, end) {\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.SlowBufferToString.call(this, encoding, start, end);\n\n            // Otherwise, use our decoding method.\n            if (typeof start == 'undefined') start = 0;\n            if (typeof end == 'undefined') end = this.length;\n            return iconv.decode(this.slice(start, end), encoding);\n        }\n\n        original.SlowBufferWrite = SlowBuffer.prototype.write;\n        SlowBuffer.prototype.write = function(string, offset, length, encoding) {\n            // Support both (string, offset, length, encoding)\n            // and the legacy (string, encoding, offset, length)\n            if (isFinite(offset)) {\n                if (!isFinite(length)) {\n                    encoding = length;\n                    length = undefined;\n                }\n            } else {  // legacy\n                var swap = encoding;\n                encoding = offset;\n                offset = length;\n                length = swap;\n            }\n\n            offset = +offset || 0;\n            var remaining = this.length - offset;\n            if (!length) {\n                length = remaining;\n            } else {\n                length = +length;\n                if (length > remaining) {\n                    length = remaining;\n                }\n            }\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.SlowBufferWrite.call(this, string, offset, length, encoding);\n\n            if (string.length > 0 && (length < 0 || offset < 0))\n                throw new RangeError('attempt to write beyond buffer bounds');\n\n            // Otherwise, use our encoding method.\n            var buf = iconv.encode(string, encoding);\n            if (buf.length < length) length = buf.length;\n            buf.copy(this, offset, 0, length);\n            return length;\n        }\n\n        // -- Buffer ---------------------------------------------------------------\n\n        original.BufferIsEncoding = Buffer.isEncoding;\n        Buffer.isEncoding = function(encoding) {\n            return Buffer.isNativeEncoding(encoding) || iconv.encodingExists(encoding);\n        }\n\n        original.BufferByteLength = Buffer.byteLength;\n        Buffer.byteLength = SlowBuffer.byteLength = function(str, encoding) {\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.BufferByteLength.call(this, str, encoding);\n\n            // Slow, I know, but we don't have a better way yet.\n            return iconv.encode(str, encoding).length;\n        }\n\n        original.BufferToString = Buffer.prototype.toString;\n        Buffer.prototype.toString = function(encoding, start, end) {\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.BufferToString.call(this, encoding, start, end);\n\n            // Otherwise, use our decoding method.\n            if (typeof start == 'undefined') start = 0;\n            if (typeof end == 'undefined') end = this.length;\n            return iconv.decode(this.slice(start, end), encoding);\n        }\n\n        original.BufferWrite = Buffer.prototype.write;\n        Buffer.prototype.write = function(string, offset, length, encoding) {\n            var _offset = offset, _length = length, _encoding = encoding;\n            // Support both (string, offset, length, encoding)\n            // and the legacy (string, encoding, offset, length)\n            if (isFinite(offset)) {\n                if (!isFinite(length)) {\n                    encoding = length;\n                    length = undefined;\n                }\n            } else {  // legacy\n                var swap = encoding;\n                encoding = offset;\n                offset = length;\n                length = swap;\n            }\n\n            encoding = String(encoding || 'utf8').toLowerCase();\n\n            // Use native conversion when possible\n            if (Buffer.isNativeEncoding(encoding))\n                return original.BufferWrite.call(this, string, _offset, _length, _encoding);\n\n            offset = +offset || 0;\n            var remaining = this.length - offset;\n            if (!length) {\n                length = remaining;\n            } else {\n                length = +length;\n                if (length > remaining) {\n                    length = remaining;\n                }\n            }\n\n            if (string.length > 0 && (length < 0 || offset < 0))\n                throw new RangeError('attempt to write beyond buffer bounds');\n\n            // Otherwise, use our encoding method.\n            var buf = iconv.encode(string, encoding);\n            if (buf.length < length) length = buf.length;\n            buf.copy(this, offset, 0, length);\n            return length;\n\n            // TODO: Set _charsWritten.\n        }\n\n\n        // -- Readable -------------------------------------------------------------\n        if (iconv.supportsStreams) {\n            var Readable = require('stream').Readable;\n\n            original.ReadableSetEncoding = Readable.prototype.setEncoding;\n            Readable.prototype.setEncoding = function setEncoding(enc, options) {\n                // Use our own decoder, it has the same interface.\n                // We cannot use original function as it doesn't handle BOM-s.\n                this._readableState.decoder = iconv.getDecoder(enc, options);\n                this._readableState.encoding = enc;\n            }\n\n            Readable.prototype.collect = iconv._collect;\n        }\n    }\n\n    // Remove iconv-lite Node primitive extensions.\n    iconv.undoExtendNodeEncodings = function undoExtendNodeEncodings() {\n        if (!iconv.supportsNodeEncodingsExtension)\n            return;\n        if (!original)\n            throw new Error(\"require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.\")\n\n        delete Buffer.isNativeEncoding;\n\n        var SlowBuffer = require('buffer').SlowBuffer;\n\n        SlowBuffer.prototype.toString = original.SlowBufferToString;\n        SlowBuffer.prototype.write = original.SlowBufferWrite;\n\n        Buffer.isEncoding = original.BufferIsEncoding;\n        Buffer.byteLength = original.BufferByteLength;\n        Buffer.prototype.toString = original.BufferToString;\n        Buffer.prototype.write = original.BufferWrite;\n\n        if (iconv.supportsStreams) {\n            var Readable = require('stream').Readable;\n\n            Readable.prototype.setEncoding = original.ReadableSetEncoding;\n            delete Readable.prototype.collect;\n        }\n\n        original = undefined;\n    }\n}\n","'use strict';\nimport { TextDocument, TextEditor, Uri } from 'vscode';\n\nabstract class Comparer<T> {\n    abstract equals(lhs: T, rhs: T): boolean;\n}\n\nclass UriComparer extends Comparer<Uri> {\n    equals(lhs: Uri | undefined, rhs: Uri | undefined, options: { exact?: boolean } = { exact: false }) {\n        if (lhs === rhs) return true;\n        if (lhs === undefined || rhs === undefined) return false;\n\n        if (options.exact) {\n            return lhs.toString(true) === rhs.toString(true);\n        }\n        return lhs.scheme === rhs.scheme && lhs.fsPath === rhs.fsPath;\n    }\n}\n\nclass TextDocumentComparer extends Comparer<TextDocument> {\n    equals(lhs: TextDocument | undefined, rhs: TextDocument | undefined) {\n        return lhs === rhs;\n        // if (lhs === rhs) return true;\n        // if (lhs === undefined || rhs === undefined) return false;\n\n        // return uriComparer.equals(lhs.uri, rhs.uri);\n    }\n}\n\nclass TextEditorComparer extends Comparer<TextEditor> {\n    equals(\n        lhs: TextEditor | undefined,\n        rhs: TextEditor | undefined,\n        options: { useId: boolean; usePosition: boolean } = { useId: false, usePosition: false }\n    ) {\n        if (lhs === rhs) return true;\n        if (lhs === undefined || rhs === undefined) return false;\n\n        if (options.usePosition && lhs.viewColumn !== rhs.viewColumn) return false;\n\n        if (options.useId && (!lhs.document || !rhs.document)) {\n            if ((lhs as any).id !== (rhs as any).id) return false;\n\n            return true;\n        }\n\n        return textDocumentComparer.equals(lhs.document, rhs.document);\n    }\n}\n\nconst textDocumentComparer = new TextDocumentComparer();\nconst textEditorComparer = new TextEditorComparer();\nconst uriComparer = new UriComparer();\nexport {\n    textDocumentComparer as TextDocumentComparer,\n    textEditorComparer as TextEditorComparer,\n    uriComparer as UriComparer\n};\n","'use strict';\nimport { TraceLevel } from './logger';\n\nexport interface Config {\n    blame: {\n        avatars: boolean;\n        compact: boolean;\n        dateFormat: string | null;\n        format: string;\n        heatmap: {\n            enabled: boolean;\n            location: 'left' | 'right';\n        };\n        highlight: {\n            enabled: boolean;\n            locations: HighlightLocations[];\n        };\n        ignoreWhitespace: boolean;\n        separateLines: boolean;\n        toggleMode: AnnotationsToggleMode;\n    };\n    currentLine: {\n        dateFormat: string | null;\n        enabled: boolean;\n        format: string;\n        scrollable: boolean;\n    };\n    codeLens: CodeLensConfig;\n    debug: boolean;\n    defaultDateFormat: string | null;\n    defaultDateShortFormat: string | null;\n    defaultDateStyle: DateStyle;\n    defaultGravatarsStyle: GravatarDefaultStyle;\n    heatmap: {\n        ageThreshold: number;\n        coldColor: string;\n        hotColor: string;\n        toggleMode: AnnotationsToggleMode;\n    };\n    hovers: {\n        annotations: {\n            changes: boolean;\n            details: boolean;\n            enabled: boolean;\n            over: 'line' | 'annotation';\n        };\n        currentLine: {\n            changes: boolean;\n            details: boolean;\n            enabled: boolean;\n            over: 'line' | 'annotation';\n        };\n        avatars: boolean;\n        detailsMarkdownFormat: string;\n        enabled: boolean;\n    };\n    insiders: boolean;\n    keymap: KeyMap;\n    liveshare: {\n        allowGuestAccess: boolean;\n    };\n    menus: boolean | MenuConfig;\n    mode: {\n        active: string;\n        statusBar: {\n            enabled: boolean;\n            alignment: 'left' | 'right';\n        };\n    };\n    modes: { [key: string]: ModeConfig };\n    outputLevel: TraceLevel;\n    recentChanges: {\n        highlight: {\n            locations: HighlightLocations[];\n        };\n        toggleMode: AnnotationsToggleMode;\n    };\n    remotes: RemotesConfig[];\n    showWhatsNewAfterUpgrades: boolean;\n    statusBar: {\n        alignment: 'left' | 'right';\n        command: StatusBarCommand;\n        dateFormat: string | null;\n        enabled: boolean;\n        format: string;\n        reduceFlicker: boolean;\n    };\n    strings: {\n        codeLens: {\n            unsavedChanges: {\n                recentChangeAndAuthors: string;\n                recentChangeOnly: string;\n                authorsOnly: string;\n            };\n        };\n    };\n    views: ViewsConfig;\n    advanced: AdvancedConfig;\n}\n\nexport enum AnnotationsToggleMode {\n    File = 'file',\n    Window = 'window'\n}\n\nexport enum CodeLensCommand {\n    DiffWithPrevious = 'gitlens.diffWithPrevious',\n    ShowQuickCommitDetails = 'gitlens.showQuickCommitDetails',\n    ShowQuickCommitFileDetails = 'gitlens.showQuickCommitFileDetails',\n    ShowQuickCurrentBranchHistory = 'gitlens.showQuickRepoHistory',\n    ShowQuickFileHistory = 'gitlens.showQuickFileHistory',\n    ToggleFileBlame = 'gitlens.toggleFileBlame'\n}\n\nexport enum CodeLensScopes {\n    Document = 'document',\n    Containers = 'containers',\n    Blocks = 'blocks'\n}\n\nexport enum CustomRemoteType {\n    Bitbucket = 'Bitbucket',\n    BitbucketServer = 'BitbucketServer',\n    Custom = 'Custom',\n    GitHub = 'GitHub',\n    GitLab = 'GitLab'\n}\n\nexport enum DateStyle {\n    Absolute = 'absolute',\n    Relative = 'relative'\n}\n\nexport enum FileAnnotationType {\n    Blame = 'blame',\n    Heatmap = 'heatmap',\n    RecentChanges = 'recentChanges'\n}\n\nexport enum GravatarDefaultStyle {\n    Faces = 'wavatar',\n    Geometric = 'identicon',\n    Monster = 'monsterid',\n    MysteryPerson = 'mp',\n    Retro = 'retro',\n    Robot = 'robohash'\n}\n\nexport enum HighlightLocations {\n    Gutter = 'gutter',\n    Line = 'line',\n    Overview = 'overview'\n}\n\nexport enum KeyMap {\n    Alternate = 'alternate',\n    Chorded = 'chorded',\n    None = 'none'\n}\n\nexport enum StatusBarCommand {\n    DiffWithPrevious = 'gitlens.diffWithPrevious',\n    DiffWithWorking = 'gitlens.diffWithWorking',\n    ShowQuickCommitDetails = 'gitlens.showQuickCommitDetails',\n    ShowQuickCommitFileDetails = 'gitlens.showQuickCommitFileDetails',\n    ShowQuickCurrentBranchHistory = 'gitlens.showQuickRepoHistory',\n    ShowQuickFileHistory = 'gitlens.showQuickFileHistory',\n    ToggleCodeLens = 'gitlens.toggleCodeLens',\n    ToggleFileBlame = 'gitlens.toggleFileBlame'\n}\n\nexport enum ViewBranchesLayout {\n    List = 'list',\n    Tree = 'tree'\n}\n\nexport enum ViewFilesLayout {\n    Auto = 'auto',\n    List = 'list',\n    Tree = 'tree'\n}\n\nexport interface AdvancedConfig {\n    abbreviatedShaLength: number;\n    blame: {\n        customArguments: string[] | null;\n        delayAfterEdit: number;\n        sizeThresholdAfterEdit: number;\n    };\n    caching: {\n        enabled: boolean;\n    };\n    fileHistoryFollowsRenames: boolean;\n    maxListItems: number;\n    messages: {\n        suppressCommitHasNoPreviousCommitWarning: boolean;\n        suppressCommitNotFoundWarning: boolean;\n        suppressFileNotUnderSourceControlWarning: boolean;\n        suppressGitDisabledWarning: boolean;\n        suppressGitVersionWarning: boolean;\n        suppressLineUncommittedWarning: boolean;\n        suppressNoRepositoryWarning: boolean;\n        suppressSupportGitLensNotification: boolean;\n    };\n    quickPick: {\n        closeOnFocusOut: boolean;\n    };\n    repositorySearchDepth: number;\n    telemetry: {\n        enabled: boolean;\n    };\n}\n\nexport interface CodeLensConfig {\n    authors: {\n        enabled: boolean;\n        command: CodeLensCommand;\n    };\n    enabled: boolean;\n    includeSingleLineSymbols: boolean;\n    recentChange: {\n        enabled: boolean;\n        command: CodeLensCommand;\n    };\n    scopes: CodeLensScopes[];\n    scopesByLanguage: CodeLensLanguageScope[];\n    symbolScopes: string[];\n}\n\nexport interface CodeLensLanguageScope {\n    language: string | undefined;\n    scopes?: CodeLensScopes[];\n    symbolScopes?: string[];\n}\n\nexport interface CompareViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    files: ViewsFilesConfig;\n    location: 'explorer' | 'gitlens' | 'scm';\n}\n\nexport interface FileHistoryViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    location: 'explorer' | 'gitlens' | 'scm';\n}\n\nexport interface LineHistoryViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    location: 'explorer' | 'gitlens' | 'scm';\n}\n\nexport interface MenuConfig {\n    editor:\n        | false\n        | {\n              blame: boolean;\n              clipboard: boolean;\n              compare: boolean;\n              details: boolean;\n              history: boolean;\n              remote: boolean;\n          };\n    editorGroup:\n        | false\n        | {\n              compare: boolean;\n              history: boolean;\n          };\n    editorTab:\n        | false\n        | {\n              clipboard: boolean;\n              compare: boolean;\n              history: boolean;\n              remote: boolean;\n          };\n    explorer:\n        | false\n        | {\n              clipboard: boolean;\n              compare: boolean;\n              history: boolean;\n              remote: boolean;\n          };\n    scmGroup:\n        | false\n        | {\n              compare: boolean;\n              openClose: boolean;\n              stash: boolean;\n              stashInline: boolean;\n          };\n    scmItem:\n        | false\n        | {\n              clipboard: boolean;\n              compare: boolean;\n              history: boolean;\n              remote: boolean;\n              stash: boolean;\n          };\n}\n\nexport interface ModeConfig {\n    name: string;\n    statusBarItemName?: string;\n    description?: string;\n    annotations?: 'blame' | 'heatmap' | 'recentChanges';\n    codeLens?: boolean;\n    currentLine?: boolean;\n    hovers?: boolean;\n    statusBar?: boolean;\n    views?: boolean;\n}\n\nexport interface RemotesConfig {\n    domain: string;\n    name?: string;\n    protocol?: string;\n    type: CustomRemoteType;\n    urls?: RemotesUrlsConfig;\n}\n\nexport interface RemotesUrlsConfig {\n    repository: string;\n    branches: string;\n    branch: string;\n    commit: string;\n    file: string;\n    fileInBranch: string;\n    fileInCommit: string;\n    fileLine: string;\n    fileRange: string;\n}\n\nexport interface RepositoriesViewConfig {\n    autoRefresh: boolean;\n    autoReveal: boolean;\n    avatars: boolean;\n    branches: {\n        layout: ViewBranchesLayout;\n    };\n    compact: boolean;\n    enabled: boolean;\n    files: ViewsFilesConfig;\n    includeWorkingTree: boolean;\n    location: 'explorer' | 'gitlens' | 'scm';\n    showTrackingBranch: boolean;\n}\n\nexport interface SearchViewConfig {\n    avatars: boolean;\n    enabled: boolean;\n    files: ViewsFilesConfig;\n    location: 'explorer' | 'gitlens' | 'scm';\n}\n\nexport interface ViewsConfig {\n    fileHistory: FileHistoryViewConfig;\n    commitFileDescriptionFormat: string;\n    commitFileFormat: string;\n    commitDescriptionFormat: string;\n    commitFormat: string;\n    compare: CompareViewConfig;\n    defaultItemLimit: number;\n    lineHistory: LineHistoryViewConfig;\n    pageItemLimit: number;\n    repositories: RepositoriesViewConfig;\n    search: SearchViewConfig;\n    showRelativeDateMarkers: boolean;\n    stashFileDescriptionFormat: string;\n    stashFileFormat: string;\n    stashDescriptionFormat: string;\n    stashFormat: string;\n    statusFileDescriptionFormat: string;\n    statusFileFormat: string;\n}\n\nexport interface ViewsFilesConfig {\n    compact: boolean;\n    layout: ViewFilesLayout;\n    threshold: number;\n}\n","'use strict';\nimport { commands, TextDocument, TextEditor, window } from 'vscode';\n\nexport const applicationInsightsKey = 'a9c302f8-6483-4d01-b92c-c159c799c679';\nexport const extensionId = 'gitlens';\nexport const extensionOutputChannelName = 'GitLens';\nexport const extensionQualifiedId = `eamodio.${extensionId}`;\nexport const extensionTerminalName = 'GitLens';\n\nexport enum BuiltInCommands {\n    CloseActiveEditor = 'workbench.action.closeActiveEditor',\n    CloseAllEditors = 'workbench.action.closeAllEditors',\n    CursorMove = 'cursorMove',\n    Diff = 'vscode.diff',\n    EditorScroll = 'editorScroll',\n    ExecuteDocumentSymbolProvider = 'vscode.executeDocumentSymbolProvider',\n    ExecuteCodeLensProvider = 'vscode.executeCodeLensProvider',\n    FocusFilesExplorer = 'workbench.files.action.focusFilesExplorer',\n    Open = 'vscode.open',\n    OpenFolder = 'vscode.openFolder',\n    OpenInTerminal = 'openInTerminal',\n    NextEditor = 'workbench.action.nextEditor',\n    PreviewHtml = 'vscode.previewHtml',\n    RevealLine = 'revealLine',\n    SetContext = 'setContext',\n    ShowExplorerActivity = 'workbench.view.explorer',\n    ShowReferences = 'editor.action.showReferences'\n}\n\nexport enum CommandContext {\n    ActiveFileStatus = 'gitlens:activeFileStatus',\n    AnnotationStatus = 'gitlens:annotationStatus',\n    CanToggleCodeLens = 'gitlens:canToggleCodeLens',\n    Enabled = 'gitlens:enabled',\n    HasRemotes = 'gitlens:hasRemotes',\n    Key = 'gitlens:key',\n    Readonly = 'gitlens:readonly',\n    ViewsCanCompare = 'gitlens:views:canCompare',\n    ViewsCanCompareFile = 'gitlens:views:canCompare:file',\n    ViewsCompareKeepResults = 'gitlens:views:compare:keepResults',\n    ViewsHideSupportGitLens = 'gitlens:views:supportGitLens:hide',\n    ViewsFileHistoryEditorFollowing = 'gitlens:views:fileHistory:editorFollowing',\n    ViewsLineHistoryEditorFollowing = 'gitlens:views:lineHistory:editorFollowing',\n    ViewsRepositoriesAutoRefresh = 'gitlens:views:repositories:autoRefresh',\n    ViewsSearchKeepResults = 'gitlens:views:search:keepResults'\n}\n\nexport function setCommandContext(key: CommandContext | string, value: any) {\n    return commands.executeCommand(BuiltInCommands.SetContext, key, value);\n}\n\nexport enum DocumentSchemes {\n    DebugConsole = 'debug',\n    File = 'file',\n    Git = 'git',\n    GitLens = 'gitlens',\n    Output = 'output',\n    Vsls = 'vsls'\n}\n\nexport function getEditorIfActive(document: TextDocument): TextEditor | undefined {\n    const editor = window.activeTextEditor;\n    return editor != null && editor.document === document ? editor : undefined;\n}\n\nexport function isActiveDocument(document: TextDocument): boolean {\n    const editor = window.activeTextEditor;\n    return editor != null && editor.document === document;\n}\n\nexport function isTextEditor(editor: TextEditor): boolean {\n    const scheme = editor.document.uri.scheme;\n    return scheme !== DocumentSchemes.Output && scheme !== DocumentSchemes.DebugConsole;\n}\n\nexport enum GlyphChars {\n    AngleBracketLeftHeavy = '\\u2770',\n    AngleBracketRightHeavy = '\\u2771',\n    ArrowBack = '\\u21a9',\n    ArrowDown = '\\u2193',\n    ArrowDropRight = '\\u2937',\n    ArrowHeadRight = '\\u27A4',\n    ArrowLeft = '\\u2190',\n    ArrowLeftDouble = '\\u21d0',\n    ArrowLeftRight = '\\u2194',\n    ArrowLeftRightDouble = '\\u21d4',\n    ArrowLeftRightDoubleStrike = '\\u21ce',\n    ArrowLeftRightLong = '\\u27f7',\n    ArrowRight = '\\u2192',\n    ArrowRightDouble = '\\u21d2',\n    ArrowRightHollow = '\\u21e8',\n    ArrowUp = '\\u2191',\n    ArrowUpRight = '\\u2197',\n    ArrowsHalfLeftRight = '\\u21cb',\n    ArrowsHalfRightLeft = '\\u21cc',\n    ArrowsLeftRight = '\\u21c6',\n    ArrowsRightLeft = '\\u21c4',\n    Asterisk = '\\u2217',\n    Check = '\\u2713',\n    Dash = '\\u2014',\n    Dot = '\\u2022',\n    Ellipsis = '\\u2026',\n    EnDash = '\\u2013',\n    MiddleEllipsis = '\\u22EF',\n    MuchGreaterThan = '\\u226A',\n    MuchLessThan = '\\u22D8',\n    Pencil = '\\u270E',\n    Space = '\\u00a0',\n    SpaceThin = '\\u2009',\n    SpaceThinnest = '\\u200A',\n    SquareWithBottomShadow = '\\u274F',\n    SquareWithTopShadow = '\\u2750',\n    ZeroWidthSpace = '\\u200b'\n}\n\nexport enum GlobalState {\n    GitLensVersion = 'gitlensVersion'\n}\n\nexport const ImageMimetypes: { [key: string]: string } = {\n    '.png': 'image/png',\n    '.gif': 'image/gif',\n    '.jpg': 'image/jpeg',\n    '.jpeg': 'image/jpeg',\n    '.jpe': 'image/jpeg',\n    '.webp': 'image/webp',\n    '.tif': 'image/tiff',\n    '.tiff': 'image/tiff',\n    '.bmp': 'image/bmp'\n};\n\nexport interface NamedRef {\n    label?: string;\n    ref: string;\n}\n\nexport interface PinnedComparison {\n    path: string;\n    ref1: NamedRef;\n    ref2: NamedRef;\n}\n\nexport interface PinnedComparisons {\n    [id: string]: PinnedComparison;\n}\n\nexport interface StarredBranches {\n    [id: string]: boolean;\n}\n\nexport interface StarredRepositories {\n    [id: string]: boolean;\n}\n\nexport enum WorkspaceState {\n    DefaultRemote = 'gitlens:remote:default',\n    PinnedComparisons = 'gitlens:pinned:comparisons',\n    StarredBranches = 'gitlens:starred:branches',\n    StarredRepositories = 'gitlens:starred:repositories',\n    ViewsCompareKeepResults = 'gitlens:views:compare:keepResults',\n    ViewsRepositoriesAutoRefresh = 'gitlens:views:repositories:autoRefresh',\n    ViewsSearchKeepResults = 'gitlens:views:search:keepResults'\n}\n","'use strict';\n\nexport namespace Arrays {\n    export function countUniques<T>(source: T[], accessor: (item: T) => string): { [key: string]: number } {\n        const uniqueCounts = Object.create(null);\n        for (const item of source) {\n            const value = accessor(item);\n            uniqueCounts[value] = (uniqueCounts[value] || 0) + 1;\n        }\n        return uniqueCounts;\n    }\n\n    export function filterMap<T, TMapped>(\n        source: T[],\n        predicateMapper: (item: T) => TMapped | null | undefined\n    ): TMapped[] {\n        return source.reduce(\n            (accumulator, current) => {\n                const mapped = predicateMapper(current);\n                if (mapped != null) {\n                    accumulator.push(mapped);\n                }\n                return accumulator;\n            },\n            [] as TMapped[]\n        );\n    }\n\n    export function filterMapAsync<T, TMapped>(\n        source: T[],\n        predicateMapper: (item: T) => Promise<TMapped | null | undefined>\n    ): Promise<TMapped[]> {\n        return source.reduce(\n            async (accumulator, current) => {\n                const mapped = await predicateMapper(current);\n                if (mapped != null) {\n                    accumulator.push(mapped);\n                }\n                return accumulator;\n            },\n            [] as any\n        );\n    }\n\n    export function groupBy<T>(source: T[], accessor: (item: T) => string): { [key: string]: T[] } {\n        return source.reduce((groupings, current) => {\n            const value = accessor(current);\n            groupings[value] = groupings[value] || [];\n            groupings[value].push(current);\n            return groupings;\n        }, Object.create(null));\n    }\n\n    export function groupByMap<TKey, TValue>(source: TValue[], accessor: (item: TValue) => TKey): Map<TKey, TValue[]> {\n        return source.reduce((groupings, current) => {\n            const value = accessor(current);\n            const group = groupings.get(value) || [];\n            groupings.set(value, group);\n            group.push(current);\n            return groupings;\n        }, new Map<TKey, TValue[]>());\n    }\n\n    export function groupByFilterMap<TKey, TValue, TMapped>(\n        source: TValue[],\n        accessor: (item: TValue) => TKey,\n        predicateMapper: (item: TValue) => TMapped | null | undefined\n    ): Map<TKey, TMapped[]> {\n        return source.reduce((groupings, current) => {\n            const mapped = predicateMapper(current);\n            if (mapped != null) {\n                const value = accessor(current);\n                const group = groupings.get(value) || [];\n                groupings.set(value, group);\n                group.push(mapped);\n            }\n            return groupings;\n        }, new Map<TKey, TMapped[]>());\n    }\n\n    export interface HierarchicalItem<T> {\n        name: string;\n        relativePath: string;\n        value?: T;\n\n        // parent?: HierarchicalItem<T>;\n        children: Map<string, HierarchicalItem<T>> | undefined;\n        descendants: T[] | undefined;\n    }\n\n    export function makeHierarchical<T>(\n        values: T[],\n        splitPath: (i: T) => string[],\n        joinPath: (...paths: string[]) => string,\n        compact: boolean = false\n    ): HierarchicalItem<T> {\n        const seed = {\n            name: '',\n            relativePath: '',\n            children: new Map(),\n            descendants: []\n        };\n\n        const hierarchy = values.reduce((root: HierarchicalItem<T>, value) => {\n            let folder = root;\n\n            let relativePath = '';\n            for (const folderName of splitPath(value)) {\n                relativePath = joinPath(relativePath, folderName);\n\n                if (folder.children === undefined) {\n                    folder.children = new Map();\n                }\n\n                let f = folder.children!.get(folderName);\n                if (f === undefined) {\n                    f = {\n                        name: folderName,\n                        relativePath: relativePath,\n                        // parent: folder,\n                        children: undefined,\n                        descendants: undefined\n                    };\n                    folder.children.set(folderName, f);\n                }\n\n                if (folder.descendants === undefined) {\n                    folder.descendants = [];\n                }\n                folder.descendants.push(value);\n                folder = f;\n            }\n\n            folder.value = value;\n\n            return root;\n        }, seed);\n\n        if (compact) return compactHierarchy(hierarchy, joinPath, true);\n        return hierarchy;\n    }\n\n    export function compactHierarchy<T>(\n        root: HierarchicalItem<T>,\n        joinPath: (...paths: string[]) => string,\n        isRoot: boolean = true\n    ): HierarchicalItem<T> {\n        if (root.children === undefined) return root;\n\n        const children = [...root.children.values()];\n\n        // // Attempts less nesting but duplicate roots\n        // if (!isRoot && children.every(c => c.value === undefined)) {\n        //     const parentSiblings = root.parent!.children!;\n        //     if (parentSiblings[root.name] !== undefined) {\n        //         delete parentSiblings[root.name];\n\n        //         for (const child of children) {\n        //             child.name = joinPath(root.name, child.name);\n        //             parentSiblings[child.name] = child;\n        //         }\n        //     }\n        // }\n\n        for (const child of children) {\n            compactHierarchy(child, joinPath, false);\n        }\n\n        if (!isRoot && children.length === 1) {\n            const child = children[0];\n            if (child.value === undefined) {\n                root.name = joinPath(root.name, child.name);\n                root.relativePath = child.relativePath;\n                root.children = child.children;\n            }\n        }\n\n        return root;\n    }\n\n    export function uniqueBy<T>(source: T[], accessor: (item: T) => any, predicate?: (item: T) => boolean): T[] {\n        const uniqueValues = Object.create(null);\n        return source.filter(item => {\n            const value = accessor(item);\n            if (uniqueValues[value]) return false;\n\n            uniqueValues[value] = accessor;\n            return predicate ? predicate(item) : true;\n        });\n    }\n}\n","'use strict';\nimport * as dayjs from 'dayjs';\nimport * as advancedFormat from 'dayjs/plugin/advancedFormat';\nimport * as relativeTime from 'dayjs/plugin/relativeTime';\n\ndayjs.extend(advancedFormat);\ndayjs.extend(relativeTime);\n\nexport namespace Dates {\n    export const MillisecondsPerMinute = 60000; // 60 * 1000\n    export const MillisecondsPerHour = 3600000; // 60 * 60 * 1000\n    export const MillisecondsPerDay = 86400000; // 24 * 60 * 60 * 1000\n\n    export interface DateFormatter {\n        fromNow(): string;\n        format(format: string): string;\n    }\n\n    export function toFormatter(date: Date): DateFormatter {\n        const wrappedDate = dayjs(date);\n        return {\n            fromNow: () => wrappedDate.fromNow(),\n            format: (format: string) => wrappedDate.format(format)\n        };\n    }\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","import toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\nexport default before;\n","import before from './before.js';\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\nexport default once;\n","'use strict';\nimport { debounce as _debounce, once as _once } from 'lodash-es';\nimport { CancellationToken, Disposable } from 'vscode';\n\nexport interface Deferrable {\n    cancel(): void;\n    flush(...args: any[]): void;\n    pending?(): boolean;\n}\n\ninterface PropOfValue {\n    (): any;\n    value: string | undefined;\n}\n\nexport namespace Functions {\n    export function cachedOnce<T>(fn: (...args: any[]) => Promise<T>, seed: T): (...args: any[]) => Promise<T> {\n        let cached: T | undefined = seed;\n        return (...args: any[]) => {\n            if (cached !== undefined) {\n                const promise = Promise.resolve(cached);\n                cached = undefined;\n\n                return promise;\n            }\n            return fn(...args);\n        };\n    }\n\n    export function cancellable<T>(promise: Promise<T>, token: CancellationToken): Promise<T | undefined> {\n        return new Promise<T | undefined>((resolve, reject) => {\n            token.onCancellationRequested(() => resolve(undefined));\n\n            promise.then(resolve, reject);\n        });\n    }\n\n    export interface DebounceOptions {\n        leading?: boolean;\n        maxWait?: number;\n        track?: boolean;\n        trailing?: boolean;\n    }\n\n    export function debounce<T extends (...args: any[]) => any>(\n        fn: T,\n        wait?: number,\n        options?: DebounceOptions\n    ): T & Deferrable {\n        const { track, ...opts }: DebounceOptions = {\n            track: false,\n            ...(options || {})\n        };\n\n        if (track !== true) return _debounce(fn, wait, opts);\n\n        let pending = false;\n\n        const debounced = _debounce(\n            (function(this: any, ...args: any[]) {\n                pending = false;\n                return fn.apply(this, args);\n            } as any) as T,\n            wait,\n            options\n        ) as T & Deferrable;\n\n        const tracked = (function(this: any, ...args: any[]) {\n            pending = true;\n            return debounced.apply(this, args);\n        } as any) as T & Deferrable;\n\n        tracked.pending = function() {\n            return pending;\n        };\n        tracked.cancel = function() {\n            return debounced.cancel.apply(debounced);\n        };\n        tracked.flush = function(...args: any[]) {\n            // eslint-disable-next-line prefer-spread\n            return debounced.flush.apply(debounced, args);\n        };\n\n        return tracked;\n    }\n\n    const comma = ',';\n    const emptyStr = '';\n    const equals = '=';\n    const openBrace = '{';\n    const openParen = '(';\n    const closeParen = ')';\n\n    const fnBodyRegex = /\\(([\\s\\S]*)\\)/;\n    const fnBodyStripCommentsRegex = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/gm;\n    const fnBodyStripParamDefaultValueRegex = /\\s?=.*$/;\n\n    export function getParameters(fn: Function): string[] {\n        if (typeof fn !== 'function') throw new Error('Not supported');\n\n        if (fn.length === 0) return [];\n\n        let fnBody: string = Function.prototype.toString.call(fn);\n        fnBody = fnBody.replace(fnBodyStripCommentsRegex, emptyStr) || fnBody;\n        fnBody = fnBody.slice(0, fnBody.indexOf(openBrace));\n\n        let open = fnBody.indexOf(openParen);\n        let close = fnBody.indexOf(closeParen);\n\n        open = open >= 0 ? open + 1 : 0;\n        close = close > 0 ? close : fnBody.indexOf(equals);\n\n        fnBody = fnBody.slice(open, close);\n        fnBody = `(${fnBody})`;\n\n        const match = fnBody.match(fnBodyRegex);\n        return match != null\n            ? match[1].split(comma).map(param => param.trim().replace(fnBodyStripParamDefaultValueRegex, emptyStr))\n            : [];\n    }\n\n    export function is<T extends object>(o: object, prop: keyof T, value?: any): o is T;\n    export function is<T extends object>(o: object, matcher: (o: object) => boolean): o is T;\n    export function is<T extends object>(\n        o: object,\n        propOrMatcher: keyof T | ((o: any) => boolean),\n        value?: any\n    ): o is T {\n        if (typeof propOrMatcher === 'function') {\n            return propOrMatcher(o);\n        }\n\n        return value === undefined ? (o as any)[propOrMatcher] !== undefined : (o as any)[propOrMatcher] === value;\n    }\n\n    export function isPromise<T>(obj: T | Promise<T>): obj is Promise<T> {\n        return obj && typeof (obj as Promise<T>).then === 'function';\n    }\n\n    export function once<T extends (...args: any[]) => any>(fn: T): T {\n        return _once(fn);\n    }\n\n    export function propOf<T, K extends Extract<keyof T, string>>(o: T, key: K) {\n        const propOfCore = <T, K extends Extract<keyof T, string>>(o: T, key: K) => {\n            const value: string =\n                (propOfCore as PropOfValue).value === undefined ? key : `${(propOfCore as PropOfValue).value}.${key}`;\n            (propOfCore as PropOfValue).value = value;\n            const fn = <Y extends Extract<keyof T[K], string>>(k: Y) => propOfCore(o[key], k);\n            return Object.assign(fn, { value: value });\n        };\n        return propOfCore(o, key);\n    }\n\n    export function interval(fn: (...args: any[]) => void, ms: number): Disposable {\n        let timer: NodeJS.Timer | undefined;\n        const disposable = {\n            dispose: () => {\n                if (timer !== undefined) {\n                    clearInterval(timer);\n                    timer = undefined;\n                }\n            }\n        };\n        timer = setInterval(fn, ms);\n\n        return disposable;\n    }\n\n    export async function wait(ms: number) {\n        await new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    export async function waitUntil(fn: (...args: any[]) => boolean, timeout: number): Promise<boolean> {\n        const max = Math.round(timeout / 100);\n        let counter = 0;\n        while (true) {\n            if (fn()) return true;\n            if (counter > max) return false;\n\n            await wait(100);\n            counter++;\n        }\n    }\n}\n","'use strict';\nimport { Functions } from '../function';\n\nexport function gate() {\n    return (target: any, key: string, descriptor: PropertyDescriptor) => {\n        let fn: Function | undefined;\n        if (typeof descriptor.value === 'function') {\n            fn = descriptor.value;\n        }\n        else if (typeof descriptor.get === 'function') {\n            fn = descriptor.get;\n        }\n        if (fn == null) throw new Error('Not supported');\n\n        const gateKey = `$gate$${key}`;\n\n        descriptor.value = function(this: any, ...args: any[]) {\n            if (!this.hasOwnProperty(gateKey)) {\n                Object.defineProperty(this, gateKey, {\n                    configurable: false,\n                    enumerable: false,\n                    writable: true,\n                    value: undefined\n                });\n            }\n\n            let promise = this[gateKey];\n            if (promise === undefined) {\n                const result = fn!.apply(this, args);\n                if (result == null || !Functions.isPromise(result)) {\n                    return result;\n                }\n\n                this[gateKey] = promise = result.then((r: any) => {\n                    this[gateKey] = undefined;\n                    return r;\n                });\n            }\n\n            return promise;\n        };\n    };\n}\n","'use strict';\nimport { ExtensionContext, OutputChannel, Uri, window } from 'vscode';\nimport { extensionOutputChannelName } from './constants';\nimport { getCorrelationContext } from './system';\n// import { Telemetry } from './telemetry';\n\nconst emptyStr = '';\n\nexport enum TraceLevel {\n    Silent = 'silent',\n    Errors = 'errors',\n    Verbose = 'verbose',\n    Debug = 'debug'\n}\n\nconst ConsolePrefix = `[${extensionOutputChannelName}]`;\n\nconst isDebuggingRegex = /\\bgitlens\\b/i;\n\nexport interface LogCorrelationContext {\n    readonly correlationId?: number;\n    readonly prefix: string;\n    exitDetails?: string;\n}\n\nexport class Logger {\n    static output: OutputChannel | undefined;\n    static customLoggableFn: ((o: object) => string | undefined) | undefined;\n\n    static configure(context: ExtensionContext, level: TraceLevel, loggableFn?: (o: any) => string | undefined) {\n        this.customLoggableFn = loggableFn;\n\n        this.level = level;\n    }\n\n    private static _level: TraceLevel = TraceLevel.Silent;\n    static get level() {\n        return this._level;\n    }\n    static set level(value: TraceLevel) {\n        this._level = value;\n        if (value === TraceLevel.Silent) {\n            if (this.output !== undefined) {\n                this.output.dispose();\n                this.output = undefined;\n            }\n        }\n        else {\n            this.output = this.output || window.createOutputChannel(extensionOutputChannelName);\n        }\n    }\n\n    static debug(message: string, ...params: any[]): void;\n    static debug(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static debug(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level !== TraceLevel.Debug && !Logger.isDebugging) return;\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.log(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && this.level === TraceLevel.Debug) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(true, params)}`);\n        }\n    }\n\n    static error(ex: Error, message?: string, ...params: any[]): void;\n    static error(ex: Error, context?: LogCorrelationContext, message?: string, ...params: any[]): void;\n    static error(ex: Error, contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level === TraceLevel.Silent && !Logger.isDebugging) return;\n\n        let message;\n        if (contextOrMessage === undefined || typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (message === undefined) {\n            const stack = ex.stack;\n            if (stack) {\n                const match = /.*\\s*?at\\s(.+?)\\s/.exec(stack);\n                if (match != null) {\n                    message = match[1];\n                }\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.error(this.timestamp, ConsolePrefix, message || emptyStr, ...params, ex);\n        }\n\n        if (this.output !== undefined && this.level !== TraceLevel.Silent) {\n            this.output.appendLine(\n                `${this.timestamp} ${message || emptyStr}${this.toLoggableParams(false, params)}\\n${ex}`\n            );\n        }\n\n        // Telemetry.trackException(ex);\n    }\n\n    static getCorrelationContext() {\n        return getCorrelationContext();\n    }\n\n    static log(message: string, ...params: any[]): void;\n    static log(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static log(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level !== TraceLevel.Verbose && this.level !== TraceLevel.Debug && !Logger.isDebugging) {\n            return;\n        }\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.log(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && (this.level === TraceLevel.Verbose || this.level === TraceLevel.Debug)) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(false, params)}`);\n        }\n    }\n\n    static logWithDebugParams(message: string, ...params: any[]): void;\n    static logWithDebugParams(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static logWithDebugParams(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level !== TraceLevel.Verbose && this.level !== TraceLevel.Debug && !Logger.isDebugging) {\n            return;\n        }\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.log(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && (this.level === TraceLevel.Verbose || this.level === TraceLevel.Debug)) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(true, params)}`);\n        }\n    }\n\n    static warn(message: string, ...params: any[]): void;\n    static warn(context: LogCorrelationContext | undefined, message: string, ...params: any[]): void;\n    static warn(contextOrMessage: LogCorrelationContext | string | undefined, ...params: any[]): void {\n        if (this.level === TraceLevel.Silent && !Logger.isDebugging) return;\n\n        let message;\n        if (typeof contextOrMessage === 'string') {\n            message = contextOrMessage;\n        }\n        else {\n            message = params.shift();\n\n            if (contextOrMessage !== undefined) {\n                message = `${contextOrMessage.prefix} ${message || emptyStr}`;\n            }\n        }\n\n        if (Logger.isDebugging) {\n            console.warn(this.timestamp, ConsolePrefix, message || emptyStr, ...params);\n        }\n\n        if (this.output !== undefined && this.level !== TraceLevel.Silent) {\n            this.output.appendLine(`${this.timestamp} ${message || emptyStr}${this.toLoggableParams(false, params)}`);\n        }\n    }\n\n    static showOutputChannel() {\n        if (this.output === undefined) return;\n\n        this.output.show();\n    }\n\n    static toLoggable(p: any, sanitize?: ((key: string, value: any) => any) | undefined) {\n        if (typeof p !== 'object') return String(p);\n        if (this.customLoggableFn !== undefined) {\n            const loggable = this.customLoggableFn(p);\n            if (loggable != null) return loggable;\n        }\n        if (p instanceof Uri) return `Uri(${p.toString(true)})`;\n\n        try {\n            return JSON.stringify(p, sanitize);\n        }\n        catch {\n            return '<error>';\n        }\n    }\n\n    static toLoggableName(instance: Function | object) {\n        let name;\n        if (typeof instance === 'function') {\n            if (instance.prototype == null || instance.prototype.constructor == null) {\n                return instance.name;\n            }\n\n            name = instance.prototype.constructor.name;\n        }\n        else {\n            name = instance.constructor != null ? instance.constructor.name : emptyStr;\n        }\n\n        // Strip webpack module name (since I never name classes with an _)\n        const index = name.indexOf('_');\n        return index === -1 ? name : name.substr(index + 1);\n    }\n\n    private static get timestamp(): string {\n        const now = new Date();\n        return `[${now\n            .toISOString()\n            .replace(/T/, ' ')\n            .replace(/\\..+/, emptyStr)}:${`00${now.getUTCMilliseconds()}`.slice(-3)}]`;\n    }\n\n    private static toLoggableParams(debugOnly: boolean, params: any[]) {\n        if (params.length === 0 || (debugOnly && this.level !== TraceLevel.Debug && !Logger.isDebugging)) {\n            return emptyStr;\n        }\n\n        const loggableParams = params.map(p => this.toLoggable(p)).join(', ');\n        return ` \\u2014 ${loggableParams}` || emptyStr;\n    }\n\n    private static _isDebugging: boolean | undefined;\n    static get isDebugging() {\n        if (this._isDebugging === undefined) {\n            const env = process.env;\n            this._isDebugging =\n                env && env.VSCODE_DEBUGGING_EXTENSION ? isDebuggingRegex.test(env.VSCODE_DEBUGGING_EXTENSION) : false;\n        }\n\n        return this._isDebugging;\n    }\n\n    static gitOutput: OutputChannel | undefined;\n\n    static logGitCommand(command: string, ex?: Error): void {\n        if (this.level !== TraceLevel.Debug) return;\n\n        if (this.gitOutput === undefined) {\n            this.gitOutput = window.createOutputChannel(`${extensionOutputChannelName} (Git)`);\n        }\n        this.gitOutput.appendLine(`${this.timestamp} ${command}${ex != null ? `\\n\\n${ex.toString()}` : emptyStr}`);\n    }\n}\n","'use strict';\nimport { LogCorrelationContext, Logger, TraceLevel } from '../../logger';\nimport { Functions } from '../function';\nimport { Strings } from '../string';\n\nconst emptyStr = '';\n\nconst correlationContext = new Map<number, LogCorrelationContext>();\nlet correlationCounter = 0;\n\nexport function getCorrelationContext() {\n    return correlationContext.get(correlationCounter);\n}\n\nexport function getCorrelationId() {\n    return correlationCounter;\n}\n\nfunction getNextCorrelationId() {\n    if (correlationCounter === Number.MAX_SAFE_INTEGER) {\n        correlationCounter = 0;\n    }\n    return ++correlationCounter;\n}\n\nfunction clearCorrelationContext(correlationId: number) {\n    correlationContext.delete(correlationId);\n}\n\nfunction setCorrelationContext(correlationId: number, context: LogCorrelationContext) {\n    correlationContext.set(correlationId, context);\n}\n\nexport interface LogContext<T> {\n    id: number;\n    instance: T;\n    instanceName: string;\n    name: string;\n    prefix: string;\n}\n\nexport const LogInstanceNameFn = Symbol('logInstanceNameFn');\n\nexport function logName<T>(fn: (c: T, name: string) => string) {\n    return (target: Function) => {\n        (target as any)[LogInstanceNameFn] = fn;\n    };\n}\n\nexport function debug<T extends (...arg: any) => any>(\n    options: {\n        args?: false | { [arg: string]: (arg: any) => string | false };\n        condition?(...args: Parameters<T>): boolean;\n        correlate?: boolean;\n        enter?(...args: Parameters<T>): string;\n        exit?(result: PromiseType<ReturnType<T>>): string;\n        prefix?(context: LogContext<T>, ...args: Parameters<T>): string;\n        sanitize?(key: string, value: any): any;\n        singleLine?: boolean;\n        timed?: boolean;\n    } = { timed: true }\n) {\n    return log<T>({ debug: true, ...options });\n}\n\ntype PromiseType<T> = T extends Promise<infer U> ? U : T;\n\nexport function log<T extends (...arg: any) => any>(\n    options: {\n        args?: false | { [arg: number]: (arg: any) => string | false };\n        condition?(...args: Parameters<T>): boolean;\n        correlate?: boolean;\n        debug?: boolean;\n        enter?(...args: Parameters<T>): string;\n        exit?(result: PromiseType<ReturnType<T>>): string;\n        prefix?(context: LogContext<T>, ...args: Parameters<T>): string;\n        sanitize?(key: string, value: any): any;\n        singleLine?: boolean;\n        timed?: boolean;\n    } = { timed: true }\n) {\n    options = { timed: true, ...options };\n\n    const logFn = (options.debug ? Logger.debug.bind(Logger) : Logger.log.bind(Logger)) as\n        | typeof Logger.debug\n        | typeof Logger.log;\n\n    return (target: any, key: string, descriptor: PropertyDescriptor) => {\n        let fn: Function | undefined;\n        if (typeof descriptor.value === 'function') {\n            fn = descriptor.value;\n        }\n        else if (typeof descriptor.get === 'function') {\n            fn = descriptor.get;\n        }\n        if (fn == null) throw new Error('Not supported');\n\n        const parameters = Functions.getParameters(fn);\n\n        descriptor.value = function(this: any, ...args: Parameters<T>) {\n            const correlationId = getNextCorrelationId();\n\n            if (\n                (!Logger.isDebugging &&\n                    Logger.level !== TraceLevel.Debug &&\n                    !(Logger.level === TraceLevel.Verbose && !options.debug)) ||\n                (typeof options.condition === 'function' && !options.condition(...args))\n            ) {\n                return fn!.apply(this, args);\n            }\n\n            let instanceName: string;\n            if (this != null) {\n                instanceName = Logger.toLoggableName(this);\n                if (this.constructor != null && this.constructor[LogInstanceNameFn]) {\n                    instanceName = target.constructor[LogInstanceNameFn](this, instanceName);\n                }\n            }\n            else {\n                instanceName = emptyStr;\n            }\n\n            let { correlate } = options;\n            if (!correlate && options.timed) {\n                correlate = true;\n            }\n\n            let prefix = `${correlate ? `[${correlationId.toString(16)}] ` : emptyStr}${\n                instanceName ? `${instanceName}.` : emptyStr\n            }${key}`;\n\n            if (options.prefix != null) {\n                prefix = options.prefix(\n                    {\n                        id: correlationId,\n                        instance: this,\n                        instanceName: instanceName,\n                        name: key,\n                        prefix: prefix\n                    },\n                    ...args\n                );\n            }\n\n            let correlationContext: LogCorrelationContext | undefined;\n            if (correlate) {\n                correlationContext = { correlationId: correlationId, prefix: prefix };\n                setCorrelationContext(correlationId, correlationContext);\n            }\n\n            const enter = options.enter != null ? options.enter(...args) : emptyStr;\n\n            let loggableParams: string;\n            if (options.args === false || args.length === 0) {\n                loggableParams = emptyStr;\n\n                if (!options.singleLine) {\n                    logFn(`${prefix}${enter}`);\n                }\n            }\n            else {\n                const argFns = typeof options.args === 'object' ? options.args : undefined;\n                let argFn;\n                let loggable;\n                loggableParams = args\n                    .map((v: any, index: number) => {\n                        const p = parameters[index];\n\n                        argFn = argFns !== undefined ? argFns[index] : undefined;\n                        if (argFn !== undefined) {\n                            loggable = argFn(v);\n                            if (loggable === false) return undefined;\n                        }\n                        else {\n                            loggable = Logger.toLoggable(v, options.sanitize);\n                        }\n\n                        return p ? `${p}=${loggable}` : loggable;\n                    })\n                    .filter(Boolean)\n                    .join(', ');\n\n                if (!options.singleLine) {\n                    if (!options.debug) {\n                        Logger.logWithDebugParams(`${prefix}${enter}`, loggableParams);\n                    }\n                    else {\n                        logFn(`${prefix}${enter}`, loggableParams);\n                    }\n                }\n            }\n\n            if (options.timed || options.exit != null) {\n                const start = options.timed ? process.hrtime() : undefined;\n\n                const logError = (ex: Error) => {\n                    const timing =\n                        start !== undefined ? ` \\u2022 ${Strings.getDurationMilliseconds(start)} ms` : emptyStr;\n                    if (options.singleLine) {\n                        Logger.error(\n                            ex,\n                            `${prefix}${enter}`,\n                            `failed${\n                                correlationContext !== undefined && correlationContext.exitDetails\n                                    ? correlationContext.exitDetails\n                                    : emptyStr\n                            }${timing}`,\n                            loggableParams\n                        );\n                    }\n                    else {\n                        Logger.error(\n                            ex,\n                            prefix,\n                            `failed${\n                                correlationContext !== undefined && correlationContext.exitDetails\n                                    ? correlationContext.exitDetails\n                                    : emptyStr\n                            }${timing}`\n                        );\n                    }\n\n                    if (correlate) {\n                        clearCorrelationContext(correlationId);\n                    }\n                };\n\n                let result;\n                try {\n                    result = fn!.apply(this, args);\n                }\n                catch (ex) {\n                    logError(ex);\n                    throw ex;\n                }\n\n                const logResult = (r: any) => {\n                    const timing =\n                        start !== undefined ? ` \\u2022 ${Strings.getDurationMilliseconds(start)} ms` : emptyStr;\n                    let exit;\n                    if (options.exit != null) {\n                        try {\n                            exit = options.exit(r);\n                        }\n                        catch (ex) {\n                            exit = `@log.exit error: ${ex}`;\n                        }\n                    }\n                    else {\n                        exit = 'completed';\n                    }\n\n                    if (options.singleLine) {\n                        if (!options.debug) {\n                            Logger.logWithDebugParams(\n                                `${prefix}${enter} ${exit}${\n                                    correlationContext !== undefined && correlationContext.exitDetails\n                                        ? correlationContext.exitDetails\n                                        : emptyStr\n                                }${timing}`,\n                                loggableParams\n                            );\n                        }\n                        else {\n                            logFn(\n                                `${prefix}${enter} ${exit}${\n                                    correlationContext !== undefined && correlationContext.exitDetails\n                                        ? correlationContext.exitDetails\n                                        : emptyStr\n                                }${timing}`,\n                                loggableParams\n                            );\n                        }\n                    }\n                    else {\n                        logFn(\n                            `${prefix} ${exit}${\n                                correlationContext !== undefined && correlationContext.exitDetails\n                                    ? correlationContext.exitDetails\n                                    : emptyStr\n                            }${timing}`\n                        );\n                    }\n\n                    if (correlate) {\n                        clearCorrelationContext(correlationId);\n                    }\n                };\n\n                if (result != null && Functions.isPromise(result)) {\n                    const promise = result.then(logResult);\n                    promise.catch(logError);\n                }\n                else {\n                    logResult(result);\n                }\n\n                return result;\n            }\n\n            return fn!.apply(this, args);\n        };\n    };\n}\n","'use strict';\nimport { createHash, HexBase64Latin1Encoding } from 'crypto';\n\nconst emptyStr = '';\n\nexport namespace Strings {\n    export const enum CharCode {\n        /**\n         * The `/` character.\n         */\n        Slash = 47,\n        /**\n         * The `\\` character.\n         */\n        Backslash = 92\n    }\n\n    export function getDurationMilliseconds(start: [number, number]) {\n        const [secs, nanosecs] = process.hrtime(start);\n        return secs * 1000 + Math.floor(nanosecs / 1000000);\n    }\n\n    const pathNormalizeRegex = /\\\\/g;\n    const pathStripTrailingSlashRegex = /\\/$/g;\n    const tokenRegex = /\\$\\{(\\W*)?([^|]*?)(?:\\|(\\d+)(-|\\?)?)?(\\W*)?\\}/g;\n    const tokenSanitizeRegex = /\\$\\{(?:\\W*)?(\\w*?)(?:[\\W\\d]*)\\}/g;\n\n    export interface TokenOptions {\n        collapseWhitespace: boolean;\n        padDirection: 'left' | 'right';\n        prefix: string | undefined;\n        suffix: string | undefined;\n        truncateTo: number | undefined;\n    }\n\n    export function getTokensFromTemplate(template: string) {\n        const tokens: { key: string; options: TokenOptions }[] = [];\n\n        let match = tokenRegex.exec(template);\n        while (match != null) {\n            const [, prefix, key, truncateTo, option, suffix] = match;\n            tokens.push({\n                key: key,\n                options: {\n                    collapseWhitespace: option === '?',\n                    padDirection: option === '-' ? 'left' : 'right',\n                    prefix: prefix,\n                    suffix: suffix,\n                    truncateTo: truncateTo == null ? undefined : parseInt(truncateTo, 10)\n                }\n            });\n            match = tokenRegex.exec(template);\n        }\n\n        return tokens;\n    }\n\n    export function interpolate(template: string, context: object | undefined): string {\n        if (!template) return template;\n        if (context === undefined) return template.replace(tokenSanitizeRegex, emptyStr);\n\n        // eslint-disable-next-line no-template-curly-in-string\n        template = template.replace(tokenSanitizeRegex, '$${this.$1}');\n        return new Function(`return \\`${template}\\`;`).call(context);\n    }\n\n    export function* lines(s: string): IterableIterator<string> {\n        let i = 0;\n        while (i < s.length) {\n            let j = s.indexOf('\\n', i);\n            if (j === -1) {\n                j = s.length;\n            }\n\n            yield s.substring(i, j);\n            i = j + 1;\n        }\n    }\n\n    export function md5(s: string, encoding: HexBase64Latin1Encoding = 'base64'): string {\n        return createHash('md5')\n            .update(s)\n            .digest(encoding);\n    }\n\n    export function normalizePath(\n        fileName: string,\n        options: { addLeadingSlash?: boolean; stripTrailingSlash?: boolean } = { stripTrailingSlash: true }\n    ) {\n        if (fileName == null || fileName.length === 0) return fileName;\n\n        let normalized = fileName.replace(pathNormalizeRegex, '/');\n\n        const { addLeadingSlash, stripTrailingSlash } = { stripTrailingSlash: true, ...options };\n\n        if (stripTrailingSlash) {\n            normalized = normalized.replace(pathStripTrailingSlashRegex, emptyStr);\n        }\n\n        if (addLeadingSlash && normalized.charCodeAt(0) !== CharCode.Slash) {\n            normalized = `/${normalized}`;\n        }\n\n        return normalized;\n    }\n\n    export function pad(s: string, before: number = 0, after: number = 0, padding: string = '\\u00a0') {\n        if (before === 0 && after === 0) return s;\n\n        return `${before === 0 ? emptyStr : padding.repeat(before)}${s}${\n            after === 0 ? emptyStr : padding.repeat(after)\n        }`;\n    }\n\n    export function padLeft(s: string, padTo: number, padding: string = '\\u00a0', width?: number) {\n        const diff = padTo - (width || getWidth(s));\n        return diff <= 0 ? s : padding.repeat(diff) + s;\n    }\n\n    export function padLeftOrTruncate(s: string, max: number, padding?: string, width?: number) {\n        width = width || getWidth(s);\n        if (width < max) return padLeft(s, max, padding, width);\n        if (width > max) return truncate(s, max, undefined, width);\n        return s;\n    }\n\n    export function padRight(s: string, padTo: number, padding: string = '\\u00a0', width?: number) {\n        const diff = padTo - (width || getWidth(s));\n        return diff <= 0 ? s : s + padding.repeat(diff);\n    }\n\n    export function padOrTruncate(s: string, max: number, padding?: string, width?: number) {\n        const left = max < 0;\n        max = Math.abs(max);\n\n        width = width || getWidth(s);\n        if (width < max) return left ? padLeft(s, max, padding, width) : padRight(s, max, padding, width);\n        if (width > max) return truncate(s, max, undefined, width);\n        return s;\n    }\n\n    export function padRightOrTruncate(s: string, max: number, padding?: string, width?: number) {\n        width = width || getWidth(s);\n        if (width < max) return padRight(s, max, padding, width);\n        if (width > max) return truncate(s, max);\n        return s;\n    }\n\n    export function pluralize(\n        s: string,\n        count: number,\n        options?: { number?: string; plural?: string; suffix?: string; zero?: string }\n    ) {\n        if (options === undefined) return `${count} ${s}${count === 1 ? emptyStr : 's'}`;\n\n        return `${count === 0 ? options.zero || count : options.number || count} ${\n            count === 1 ? s : options.plural || `${s}${options.suffix || 's'}`\n        }`;\n    }\n\n    // Removes \\ / : * ? \" < > | and C0 and C1 control codes\n    // eslint-disable-next-line no-control-regex\n    const illegalCharsForFSRegex = /[\\\\/:*?\"<>|\\x00-\\x1f\\x80-\\x9f]/g;\n\n    export function sanitizeForFileSystem(s: string, replacement: string = '_') {\n        if (!s) return s;\n        return s.replace(illegalCharsForFSRegex, replacement);\n    }\n\n    export function sha1(s: string, encoding: HexBase64Latin1Encoding = 'base64'): string {\n        return createHash('sha1')\n            .update(s)\n            .digest(encoding);\n    }\n\n    export function splitSingle(s: string, splitter: string) {\n        const parts = s.split(splitter, 1);\n        const first = parts[0];\n        return first.length === s.length ? parts : [first, s.substr(first.length + 1)];\n    }\n\n    export function truncate(s: string, truncateTo: number, ellipsis: string = '\\u2026', width?: number) {\n        if (!s) return s;\n\n        width = width || getWidth(s);\n        if (width <= truncateTo) return s;\n        if (width === s.length) return `${s.substring(0, truncateTo - 1)}${ellipsis}`;\n\n        // Skip ahead to start as far as we can by assuming all the double-width characters won't be truncated\n        let chars = Math.floor(truncateTo / (width / s.length));\n        let count = getWidth(s.substring(0, chars));\n        while (count < truncateTo) {\n            count += getWidth(s[chars++]);\n        }\n\n        if (count >= truncateTo) {\n            chars--;\n        }\n\n        return `${s.substring(0, chars)}${ellipsis}`;\n    }\n\n    const ansiRegex = /[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:[a-zA-Z\\\\d]*(?:;[a-zA-Z\\\\d]*)*)?\\\\u0007)|(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PRZcf-ntqry=><~]))/g;\n    const containsNonAsciiRegex = /[^\\x20-\\x7F\\u00a0\\u2026]/;\n\n    export function getWidth(s: string): number {\n        if (s == null || s.length === 0) return 0;\n\n        // Shortcut to avoid needless string `RegExp`s, replacements, and allocations\n        if (!containsNonAsciiRegex.test(s)) return s.length;\n\n        s = s.replace(ansiRegex, emptyStr);\n\n        let count = 0;\n        let emoji = 0;\n        let joiners = 0;\n\n        const graphemes = [...s];\n        for (let i = 0; i < graphemes.length; i++) {\n            const code = graphemes[i].codePointAt(0)!;\n\n            // Ignore control characters\n            if (code <= 0x1f || (code >= 0x7f && code <= 0x9f)) continue;\n\n            // Ignore combining characters\n            if (code >= 0x300 && code <= 0x36f) continue;\n\n            // https://stackoverflow.com/questions/30757193/find-out-if-character-in-string-is-emoji\n            if (\n                (code >= 0x1f600 && code <= 0x1f64f) || // Emoticons\n                (code >= 0x1f300 && code <= 0x1f5ff) || // Misc Symbols and Pictographs\n                (code >= 0x1f680 && code <= 0x1f6ff) || // Transport and Map\n                (code >= 0x2600 && code <= 0x26ff) || // Misc symbols\n                (code >= 0x2700 && code <= 0x27bf) || // Dingbats\n                (code >= 0xfe00 && code <= 0xfe0f) || // Variation Selectors\n                (code >= 0x1f900 && code <= 0x1f9ff) || // Supplemental Symbols and Pictographs\n                (code >= 65024 && code <= 65039) || // Variation selector\n                (code >= 8400 && code <= 8447) // Combining Diacritical Marks for Symbols\n            ) {\n                if (code >= 0x1f3fb && code <= 0x1f3ff) continue; // emoji modifier fitzpatrick type\n\n                emoji++;\n                count += 2;\n                continue;\n            }\n\n            // Ignore zero-width joiners '\\u200d'\n            if (code === 8205) {\n                joiners++;\n                count -= 2;\n                continue;\n            }\n\n            // Surrogates\n            if (code > 0xffff) {\n                i++;\n            }\n\n            count += isFullwidthCodePoint(code) ? 2 : 1;\n        }\n\n        const offset = emoji - joiners;\n        if (offset > 1) {\n            count += offset - 1;\n        }\n        return count;\n    }\n\n    function isFullwidthCodePoint(cp: number) {\n        // code points are derived from:\n        // http://www.unix.org/Public/UNIDATA/EastAsianWidth.txt\n        if (\n            cp >= 0x1100 &&\n            (cp <= 0x115f || // Hangul Jamo\n            cp === 0x2329 || // LEFT-POINTING ANGLE BRACKET\n            cp === 0x232a || // RIGHT-POINTING ANGLE BRACKET\n                // CJK Radicals Supplement .. Enclosed CJK Letters and Months\n                (cp >= 0x2e80 && cp <= 0x3247 && cp !== 0x303f) ||\n                // Enclosed CJK Letters and Months .. CJK Unified Ideographs Extension A\n                (cp >= 0x3250 && cp <= 0x4dbf) ||\n                // CJK Unified Ideographs .. Yi Radicals\n                (cp >= 0x4e00 && cp <= 0xa4c6) ||\n                // Hangul Jamo Extended-A\n                (cp >= 0xa960 && cp <= 0xa97c) ||\n                // Hangul Syllables\n                (cp >= 0xac00 && cp <= 0xd7a3) ||\n                // CJK Compatibility Ideographs\n                (cp >= 0xf900 && cp <= 0xfaff) ||\n                // Vertical Forms\n                (cp >= 0xfe10 && cp <= 0xfe19) ||\n                // CJK Compatibility Forms .. Small Form Variants\n                (cp >= 0xfe30 && cp <= 0xfe6b) ||\n                // Halfwidth and Fullwidth Forms\n                (cp >= 0xff01 && cp <= 0xff60) ||\n                (cp >= 0xffe0 && cp <= 0xffe6) ||\n                // Kana Supplement\n                (cp >= 0x1b000 && cp <= 0x1b001) ||\n                // Enclosed Ideographic Supplement\n                (cp >= 0x1f200 && cp <= 0x1f251) ||\n                // CJK Unified Ideographs Extension B .. Tertiary Ideographic Plane\n                (cp >= 0x20000 && cp <= 0x3fffd))\n        ) {\n            return true;\n        }\n\n        return false;\n    }\n}\n","'use strict';\n\nexport namespace Iterables {\n    export function count<T>(source: Iterable<T> | IterableIterator<T>, predicate?: (item: T) => boolean): number {\n        let count = 0;\n        let next: IteratorResult<T>;\n\n        while (true) {\n            next = (source as IterableIterator<T>).next();\n            if (next.done) break;\n\n            if (predicate === undefined || predicate(next.value)) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    export function every<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): boolean {\n        for (const item of source) {\n            if (!predicate(item)) return false;\n        }\n        return true;\n    }\n\n    export function filter<T>(\n        source: Iterable<T | undefined | null> | IterableIterator<T | undefined | null>\n    ): Iterable<T>;\n    export function filter<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): Iterable<T>;\n    export function* filter<T>(\n        source: Iterable<T> | IterableIterator<T>,\n        predicate?: (item: T) => boolean\n    ): Iterable<T> {\n        if (predicate === undefined) {\n            for (const item of source) {\n                if (item != null) yield item;\n            }\n        }\n        else {\n            for (const item of source) {\n                if (predicate(item)) yield item;\n            }\n        }\n    }\n\n    export function* filterMap<T, TMapped>(\n        source: Iterable<T> | IterableIterator<T>,\n        predicateMapper: (item: T) => TMapped | undefined | null\n    ): Iterable<TMapped> {\n        for (const item of source) {\n            const mapped = predicateMapper(item);\n            if (mapped != null) yield mapped;\n        }\n    }\n\n    export function forEach<T>(source: Iterable<T> | IterableIterator<T>, fn: (item: T, index: number) => void): void {\n        let i = 0;\n        for (const item of source) {\n            fn(item, i);\n            i++;\n        }\n    }\n\n    export function find<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): T | null {\n        for (const item of source) {\n            if (predicate(item)) return item;\n        }\n        return null;\n    }\n\n    export function first<T>(source: Iterable<T>): T {\n        return source[Symbol.iterator]().next().value;\n    }\n\n    export function* flatMap<T, TMapped>(\n        source: Iterable<T> | IterableIterator<T>,\n        mapper: (item: T) => Iterable<TMapped>\n    ): Iterable<TMapped> {\n        for (const item of source) {\n            yield* mapper(item);\n        }\n    }\n\n    export function has<T>(source: Iterable<T> | IterableIterator<T>, item: T): boolean {\n        return some(source, i => i === item);\n    }\n\n    export function isIterable(source: Iterable<any>): boolean {\n        return typeof source[Symbol.iterator] === 'function';\n    }\n\n    export function join(source: Iterable<any>, separator: string): string {\n        let value = '';\n\n        const iterator = source[Symbol.iterator]();\n        let next = iterator.next();\n        if (next.done) return value;\n\n        while (true) {\n            const s = next.value.toString();\n\n            next = iterator.next();\n            if (next.done) {\n                value += s;\n                break;\n            }\n\n            value += `${s}${separator}`;\n        }\n\n        return value;\n    }\n\n    export function last<T>(source: Iterable<T>): T | null {\n        let item: T | null = null;\n        for (item of source) {\n            /* noop */\n        }\n        return item;\n    }\n\n    export function* map<T, TMapped>(\n        source: Iterable<T> | IterableIterator<T>,\n        mapper: (item: T) => TMapped\n    ): Iterable<TMapped> {\n        for (const item of source) {\n            yield mapper(item);\n        }\n    }\n\n    export function next<T>(source: IterableIterator<T>): T {\n        return source.next().value;\n    }\n\n    export function* skip<T>(source: Iterable<T> | IterableIterator<T>, count: number): IterableIterator<T> {\n        let i = 0;\n        for (const item of source) {\n            if (i >= count) yield item;\n            i++;\n        }\n    }\n\n    export function some<T>(source: Iterable<T> | IterableIterator<T>, predicate: (item: T) => boolean): boolean {\n        for (const item of source) {\n            if (predicate(item)) return true;\n        }\n        return false;\n    }\n\n    export function* take<T>(source: Iterable<T> | IterableIterator<T>, count: number): Iterable<T> {\n        if (count > 0) {\n            let i = 0;\n            for (const item of source) {\n                yield item;\n                i++;\n                if (i >= count) break;\n            }\n        }\n    }\n\n    export function* union<T>(...sources: (Iterable<T> | IterableIterator<T>)[]): Iterable<T> {\n        for (const source of sources) {\n            for (const item of source) {\n                yield item;\n            }\n        }\n    }\n}\n","'use strict';\n\nexport namespace Objects {\n    export function entries<T>(o: { [key: string]: T }): IterableIterator<[string, T]>;\n    export function entries<T>(o: { [key: number]: T }): IterableIterator<[string, T]>;\n    export function* entries<T>(o: any): IterableIterator<[string, T]> {\n        for (const key in o) {\n            yield [key, o[key]];\n        }\n    }\n\n    export function flatten(o: any, prefix: string = '', stringify: boolean = false): { [key: string]: any } {\n        const flattened = Object.create(null);\n        _flatten(flattened, prefix, o, stringify);\n        return flattened;\n    }\n\n    function _flatten(flattened: { [key: string]: any }, key: string, value: any, stringify: boolean = false) {\n        if (Object(value) !== value) {\n            if (stringify) {\n                if (value == null) {\n                    flattened[key] = null;\n                }\n                else if (typeof value === 'string') {\n                    flattened[key] = value;\n                }\n                else {\n                    flattened[key] = JSON.stringify(value);\n                }\n            }\n            else {\n                flattened[key] = value;\n            }\n        }\n        else if (Array.isArray(value)) {\n            const len = value.length;\n            for (let i = 0; i < len; i++) {\n                _flatten(flattened, `${key}[${i}]`, value[i], stringify);\n            }\n            if (len === 0) {\n                flattened[key] = null;\n            }\n        }\n        else {\n            let isEmpty = true;\n            for (const p in value) {\n                isEmpty = false;\n                _flatten(flattened, key ? `${key}.${p}` : p, value[p], stringify);\n            }\n            if (isEmpty && key) {\n                flattened[key] = null;\n            }\n        }\n    }\n\n    export function paths(o: { [key: string]: any }, path?: string): string[] {\n        const results = [];\n\n        for (const key in o) {\n            const child = o[key];\n            if (typeof child === 'object') {\n                results.push(...paths(child, path === undefined ? key : `${path}.${key}`));\n            }\n            else {\n                results.push(path === undefined ? key : `${path}.${key}`);\n            }\n        }\n\n        return results;\n    }\n\n    export function values<T>(o: { [key: string]: T }): IterableIterator<T>;\n    export function values<T>(o: { [key: number]: T }): IterableIterator<T>;\n    export function* values<T>(o: any): IterableIterator<T> {\n        for (const key in o) {\n            yield o[key];\n        }\n    }\n}\n","'use strict';\nimport { Iterables } from './iterable';\nimport { Strings } from './string';\n\n// Code stolen from https://github.com/Microsoft/vscode/blob/b3e6d5bb039a4a9362b52a2c8726267ca68cf64e/src/vs/base/common/map.ts#L352\n\nconst FIN = { done: true, value: undefined };\n\n// eslint-disable-next-line @typescript-eslint/interface-name-prefix\nexport interface IKeyIterator {\n    reset(key: string): this;\n    next(): this;\n\n    hasNext(): boolean;\n    cmp(a: string): number;\n    value(): string;\n}\n\nexport class StringIterator implements IKeyIterator {\n    private _value: string = '';\n    private _pos: number = 0;\n\n    reset(key: string): this {\n        this._value = key;\n        this._pos = 0;\n        return this;\n    }\n\n    next(): this {\n        this._pos += 1;\n        return this;\n    }\n\n    hasNext(): boolean {\n        return this._pos < this._value.length - 1;\n    }\n\n    cmp(a: string): number {\n        const aCode = a.charCodeAt(0);\n        const thisCode = this._value.charCodeAt(this._pos);\n        return aCode - thisCode;\n    }\n\n    value(): string {\n        return this._value[this._pos];\n    }\n}\n\nexport class PathIterator implements IKeyIterator {\n    private _value!: string;\n    private _from!: number;\n    private _to!: number;\n\n    reset(key: string): this {\n        this._value = key.replace(/\\\\$|\\/$/, '');\n        this._from = 0;\n        this._to = 0;\n        return this.next();\n    }\n\n    hasNext(): boolean {\n        return this._to < this._value.length;\n    }\n\n    next(): this {\n        // this._data = key.split(/[\\\\/]/).filter(s => !!s);\n        this._from = this._to;\n        let justSeps = true;\n        for (; this._to < this._value.length; this._to++) {\n            const ch = this._value.charCodeAt(this._to);\n            if (ch === Strings.CharCode.Slash || ch === Strings.CharCode.Backslash) {\n                if (justSeps) {\n                    this._from++;\n                }\n                else {\n                    break;\n                }\n            }\n            else {\n                justSeps = false;\n            }\n        }\n        return this;\n    }\n\n    cmp(a: string): number {\n        let aPos = 0;\n        const aLen = a.length;\n        let thisPos = this._from;\n\n        while (aPos < aLen && thisPos < this._to) {\n            const cmp = a.charCodeAt(aPos) - this._value.charCodeAt(thisPos);\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            aPos += 1;\n            thisPos += 1;\n        }\n\n        if (aLen === this._to - this._from) {\n            return 0;\n        }\n\n        if (aPos < aLen) {\n            return -1;\n        }\n\n        return 1;\n    }\n\n    value(): string {\n        return this._value.substring(this._from, this._to);\n    }\n}\n\nclass TernarySearchTreeNode<E> {\n    segment!: string;\n    value: E | undefined;\n    key!: string;\n    left: TernarySearchTreeNode<E> | undefined;\n    mid: TernarySearchTreeNode<E> | undefined;\n    right: TernarySearchTreeNode<E> | undefined;\n\n    isEmpty(): boolean {\n        return !this.left && !this.mid && !this.right && !this.value;\n    }\n}\n\nexport class TernarySearchTree<E> {\n    static forPaths<E>(): TernarySearchTree<E> {\n        return new TernarySearchTree<E>(new PathIterator());\n    }\n\n    static forStrings<E>(): TernarySearchTree<E> {\n        return new TernarySearchTree<E>(new StringIterator());\n    }\n\n    private _iter: IKeyIterator;\n    private _root: TernarySearchTreeNode<E> | undefined;\n\n    constructor(segments: IKeyIterator) {\n        this._iter = segments;\n    }\n\n    clear(): void {\n        this._root = undefined;\n    }\n\n    set(key: string, element: E): E | undefined {\n        const iter = this._iter.reset(key);\n        let node: TernarySearchTreeNode<E>;\n\n        if (!this._root) {\n            this._root = new TernarySearchTreeNode<E>();\n            this._root.segment = iter.value();\n        }\n\n        node = this._root;\n        while (true) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                if (!node.left) {\n                    node.left = new TernarySearchTreeNode<E>();\n                    node.left.segment = iter.value();\n                }\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                if (!node.right) {\n                    node.right = new TernarySearchTreeNode<E>();\n                    node.right.segment = iter.value();\n                }\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                if (!node.mid) {\n                    node.mid = new TernarySearchTreeNode<E>();\n                    node.mid.segment = iter.value();\n                }\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        const oldElement = node.value;\n        node.value = element;\n        node.key = key;\n        return oldElement;\n    }\n\n    get(key: string): E | undefined {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        return node ? node.value : undefined;\n    }\n\n    delete(key: string): void {\n        const iter = this._iter.reset(key);\n        const stack: [-1 | 0 | 1, TernarySearchTreeNode<E>][] = [];\n        let node = this._root;\n\n        // find and unset node\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                stack.push([1, node]);\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                stack.push([-1, node]);\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                stack.push([0, node]);\n                node = node.mid;\n            }\n            else {\n                // remove element\n                node.value = undefined;\n\n                // clean up empty nodes\n                while (stack.length > 0 && node.isEmpty()) {\n                    const [dir, parent] = stack.pop()!;\n                    switch (dir) {\n                        case 1:\n                            parent.left = undefined;\n                            break;\n                        case 0:\n                            parent.mid = undefined;\n                            break;\n                        case -1:\n                            parent.right = undefined;\n                            break;\n                    }\n                    node = parent;\n                }\n                break;\n            }\n        }\n    }\n\n    findSubstr(key: string): E | undefined {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        let candidate: E | undefined;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                candidate = node.value || candidate;\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        return (node && node.value) || candidate;\n    }\n\n    findSuperstr(key: string, limit: boolean = false): Iterable<E> | undefined {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                node = node.mid;\n            }\n            else {\n                // collect\n                if (!node.mid) {\n                    return undefined;\n                }\n\n                node = node.mid;\n                return {\n                    // eslint-disable-next-line no-loop-func\n                    [Symbol.iterator]: () => this._nodeIterator(node!, limit)\n                };\n            }\n        }\n        return undefined;\n    }\n\n    private _nodeIterator(node: TernarySearchTreeNode<E>, limit: boolean = false): Iterator<E> {\n        let res: { done: false; value: E };\n        let idx: number;\n        let data: E[];\n        const next = (): IteratorResult<E> => {\n            if (!data) {\n                // lazy till first invocation\n                data = [];\n                idx = 0;\n                this._forEach(node, value => data.push(value), limit);\n            }\n            if (idx >= data.length) {\n                return (FIN as unknown) as IteratorResult<E>;\n            }\n\n            if (!res) {\n                res = { done: false, value: data[idx++] };\n            }\n            else {\n                res.value = data[idx++];\n            }\n            return res;\n        };\n        return { next: next };\n    }\n\n    forEach(callback: (value: E, index: string) => any) {\n        this._forEach(this._root, callback);\n    }\n\n    private _forEach(\n        node: TernarySearchTreeNode<E> | undefined,\n        callback: (value: E, index: string) => any,\n        limit: boolean = false\n    ) {\n        if (node === undefined) return;\n\n        // left\n        this._forEach(node.left, callback, limit);\n\n        // node\n        if (node.value) {\n            callback(node.value, node.key);\n        }\n\n        if (!limit) {\n            // mid\n            this._forEach(node.mid, callback, limit);\n        }\n\n        // right\n        this._forEach(node.right, callback, limit);\n    }\n\n    any(): boolean {\n        return this._root !== undefined && !this._root.isEmpty();\n    }\n\n    count(predicate?: (entry: E) => boolean): number {\n        if (this._root === undefined || this._root.isEmpty()) return 0;\n\n        return Iterables.count(this.entries(), predicate === undefined ? undefined : ([e]) => predicate(e));\n    }\n\n    entries(): Iterable<[E, string]> {\n        return this._iterator(this._root);\n    }\n\n    values(): Iterable<E> {\n        return Iterables.map(this.entries(), ([e]) => e);\n    }\n\n    highlander(): [E, string] | undefined {\n        if (this._root === undefined || this._root.isEmpty()) return undefined;\n\n        const entries = this.entries() as IterableIterator<[E, string]>;\n\n        let count = 0;\n        let next: IteratorResult<[E, string]>;\n        let value: [E, string] | undefined;\n\n        while (true) {\n            next = entries.next();\n            if (next.done) break;\n\n            value = next.value;\n\n            count++;\n            if (count > 1) return undefined;\n        }\n\n        return value;\n    }\n\n    some(predicate: (entry: E) => boolean): boolean {\n        if (this._root === undefined || this._root.isEmpty()) return false;\n\n        return Iterables.some(this.entries(), ([e]) => predicate(e));\n    }\n\n    private *_iterator(node: TernarySearchTreeNode<E> | undefined): IterableIterator<[E, string]> {\n        if (node !== undefined) {\n            // left\n            yield* this._iterator(node.left);\n\n            // node\n            if (node.value) {\n                yield [node.value, node.key];\n            }\n\n            // mid\n            yield* this._iterator(node.mid);\n\n            // right\n            yield* this._iterator(node.right);\n        }\n    }\n}\n","'use strict';\n\nexport namespace Versions {\n    declare type VersionComparisonResult = -1 | 0 | 1;\n\n    export interface Version {\n        major: number;\n        minor: number;\n        patch: number;\n        pre?: string;\n    }\n\n    export function compare(v1: Version, v2: Version): VersionComparisonResult {\n        if (v1.major > v2.major) return 1;\n        if (v1.major < v2.major) return -1;\n\n        if (v1.minor > v2.minor) return 1;\n        if (v1.minor < v2.minor) return -1;\n\n        if (v1.patch > v2.patch) return 1;\n        if (v1.patch < v2.patch) return -1;\n\n        if (v1.pre === undefined && v2.pre !== undefined) return 1;\n        if (v1.pre !== undefined && v2.pre === undefined) return -1;\n\n        if (v1.pre !== undefined && v2.pre !== undefined) {\n            return v1.pre.localeCompare(v2.pre) as VersionComparisonResult;\n        }\n\n        return 0;\n    }\n\n    export function from(\n        major: string | number,\n        minor: string | number,\n        patch: string | number,\n        pre?: string\n    ): Version {\n        return {\n            major: typeof major === 'string' ? parseInt(major, 10) : major,\n            minor: typeof minor === 'string' ? parseInt(minor, 10) : minor,\n            patch: typeof patch === 'string' ? parseInt(patch, 10) : patch,\n            pre: pre\n        };\n    }\n\n    export function fromString(version: string): Version {\n        const [ver, pre] = version.split('-');\n        const [major, minor, patch] = ver.split('.');\n        return from(major, minor, patch, pre);\n    }\n}\n","'use strict';\nexport * from './config';\n\nimport {\n    ConfigurationChangeEvent,\n    ConfigurationTarget,\n    Event,\n    EventEmitter,\n    ExtensionContext,\n    Uri,\n    workspace\n} from 'vscode';\nimport { Config } from './config';\nimport { extensionId } from './constants';\nimport { Functions } from './system';\n\n// eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\nconst emptyConfig: Config = new Proxy<Config>({} as Config, {\n    get: function() {\n        return emptyConfig;\n    }\n});\n\nexport interface ConfigurationWillChangeEvent {\n    change: ConfigurationChangeEvent;\n    transform?(e: ConfigurationChangeEvent): ConfigurationChangeEvent;\n}\n\nexport class Configuration {\n    static configure(context: ExtensionContext) {\n        context.subscriptions.push(\n            workspace.onDidChangeConfiguration(configuration.onConfigurationChanged, configuration)\n        );\n    }\n\n    private _onDidChange = new EventEmitter<ConfigurationChangeEvent>();\n    get onDidChange(): Event<ConfigurationChangeEvent> {\n        return this._onDidChange.event;\n    }\n\n    private _onWillChange = new EventEmitter<ConfigurationWillChangeEvent>();\n    get onWillChange(): Event<ConfigurationWillChangeEvent> {\n        return this._onWillChange.event;\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (!e.affectsConfiguration(extensionId, null!)) return;\n\n        const evt: ConfigurationWillChangeEvent = {\n            change: e\n        };\n        this._onWillChange.fire(evt);\n\n        if (evt.transform !== undefined) {\n            e = evt.transform(e);\n        }\n\n        this._onDidChange.fire(e);\n    }\n\n    readonly initializingChangeEvent: ConfigurationChangeEvent = {\n        affectsConfiguration: (section: string, resource?: Uri) => true\n    };\n\n    get<T>(section?: string, resource?: Uri | null, defaultValue?: T) {\n        return defaultValue === undefined\n            ? workspace\n                  .getConfiguration(section === undefined ? undefined : extensionId, resource!)\n                  .get<T>(section === undefined ? extensionId : section)!\n            : workspace\n                  .getConfiguration(section === undefined ? undefined : extensionId, resource!)\n                  .get<T>(section === undefined ? extensionId : section, defaultValue)!;\n    }\n\n    changed(e: ConfigurationChangeEvent, section: string, resource?: Uri | null) {\n        return e.affectsConfiguration(`${extensionId}.${section}`, resource!);\n    }\n\n    initializing(e: ConfigurationChangeEvent) {\n        return e === this.initializingChangeEvent;\n    }\n\n    inspect(section?: string, resource?: Uri | null) {\n        return workspace\n            .getConfiguration(section === undefined ? undefined : extensionId, resource!)\n            .inspect(section === undefined ? extensionId : section);\n    }\n\n    async migrate<TFrom, TTo>(\n        from: string,\n        to: string,\n        options: { fallbackValue?: TTo; migrationFn?(value: TFrom): TTo } = {}\n    ): Promise<boolean> {\n        const inspection = configuration.inspect(from);\n        if (inspection === undefined) return false;\n\n        let migrated = false;\n        if (inspection.globalValue !== undefined) {\n            await this.update(\n                to,\n                options.migrationFn ? options.migrationFn(inspection.globalValue as TFrom) : inspection.globalValue,\n                ConfigurationTarget.Global\n            );\n            migrated = true;\n            // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n            // if (from !== to) {\n            //     try {\n            //         await this.update(from, undefined, ConfigurationTarget.Global);\n            //     }\n            //     catch { }\n            // }\n        }\n\n        if (inspection.workspaceValue !== undefined) {\n            await this.update(\n                to,\n                options.migrationFn\n                    ? options.migrationFn(inspection.workspaceValue as TFrom)\n                    : inspection.workspaceValue,\n                ConfigurationTarget.Workspace\n            );\n            migrated = true;\n            // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n            // if (from !== to) {\n            //     try {\n            //         await this.update(from, undefined, ConfigurationTarget.Workspace);\n            //     }\n            //     catch { }\n            // }\n        }\n\n        if (inspection.workspaceFolderValue !== undefined) {\n            await this.update(\n                to,\n                options.migrationFn\n                    ? options.migrationFn(inspection.workspaceFolderValue as TFrom)\n                    : inspection.workspaceFolderValue,\n                ConfigurationTarget.WorkspaceFolder\n            );\n            migrated = true;\n            // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n            // if (from !== to) {\n            //     try {\n            //         await this.update(from, undefined, ConfigurationTarget.WorkspaceFolder);\n            //     }\n            //     catch { }\n            // }\n        }\n\n        if (!migrated && options.fallbackValue !== undefined) {\n            await this.update(to, options.fallbackValue, ConfigurationTarget.Global);\n            migrated = true;\n        }\n\n        return migrated;\n    }\n\n    async migrateIfMissing<TFrom, TTo>(from: string, to: string, options: { migrationFn?(value: TFrom): TTo } = {}) {\n        const fromInspection = configuration.inspect(from);\n        if (fromInspection === undefined) return;\n\n        const toInspection = configuration.inspect(to);\n        if (fromInspection.globalValue !== undefined) {\n            if (toInspection === undefined || toInspection.globalValue === undefined) {\n                await this.update(\n                    to,\n                    options.migrationFn\n                        ? options.migrationFn(fromInspection.globalValue as TFrom)\n                        : fromInspection.globalValue,\n                    ConfigurationTarget.Global\n                );\n                // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n                // if (from !== to) {\n                //     try {\n                //         await this.update(from, undefined, ConfigurationTarget.Global);\n                //     }\n                //     catch { }\n                // }\n            }\n        }\n\n        if (fromInspection.workspaceValue !== undefined) {\n            if (toInspection === undefined || toInspection.workspaceValue === undefined) {\n                await this.update(\n                    to,\n                    options.migrationFn\n                        ? options.migrationFn(fromInspection.workspaceValue as TFrom)\n                        : fromInspection.workspaceValue,\n                    ConfigurationTarget.Workspace\n                );\n                // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n                // if (from !== to) {\n                //     try {\n                //         await this.update(from, undefined, ConfigurationTarget.Workspace);\n                //     }\n                //     catch { }\n                // }\n            }\n        }\n\n        if (fromInspection.workspaceFolderValue !== undefined) {\n            if (toInspection === undefined || toInspection.workspaceFolderValue === undefined) {\n                await this.update(\n                    to,\n                    options.migrationFn\n                        ? options.migrationFn(fromInspection.workspaceFolderValue as TFrom)\n                        : fromInspection.workspaceFolderValue,\n                    ConfigurationTarget.WorkspaceFolder\n                );\n                // Can't delete the old setting currently because it errors with `Unable to write to User Settings because <setting name> is not a registered configuration`\n                // if (from !== to) {\n                //     try {\n                //         await this.update(from, undefined, ConfigurationTarget.WorkspaceFolder);\n                //     }\n                //     catch { }\n                // }\n            }\n        }\n    }\n\n    name<K extends keyof Config>(name: K) {\n        return Functions.propOf(emptyConfig as Config, name);\n    }\n\n    update(section: string, value: any, target: ConfigurationTarget, resource?: Uri | null) {\n        return workspace\n            .getConfiguration(extensionId, target === ConfigurationTarget.Global ? undefined : resource!)\n            .update(section, value, target);\n    }\n\n    async updateEffective(section: string, value: any, resource: Uri | null = null) {\n        const inspect = await configuration.inspect(section, resource)!;\n        if (inspect.workspaceFolderValue !== undefined) {\n            if (value === inspect.workspaceFolderValue) return undefined;\n\n            return void configuration.update(section, value, ConfigurationTarget.WorkspaceFolder, resource);\n        }\n\n        if (inspect.workspaceValue !== undefined) {\n            if (value === inspect.workspaceValue) return undefined;\n\n            return void configuration.update(section, value, ConfigurationTarget.Workspace);\n        }\n\n        if (inspect.globalValue === value || (inspect.globalValue === undefined && value === inspect.defaultValue)) {\n            return undefined;\n        }\n\n        return void configuration.update(\n            section,\n            value === inspect.defaultValue ? undefined : value,\n            ConfigurationTarget.Global\n        );\n    }\n}\n\nexport const configuration = new Configuration();\n","'use strict';\nimport {\n    DecorationOptions,\n    Disposable,\n    Range,\n    TextDocument,\n    TextEditor,\n    TextEditorDecorationType,\n    TextEditorSelectionChangeEvent,\n    Uri,\n    window\n} from 'vscode';\nimport { TextDocumentComparer } from '../comparers';\nimport { FileAnnotationType } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Functions } from '../system';\nimport { GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\n\nexport enum AnnotationStatus {\n    Computing = 'computing',\n    Computed = 'computed'\n}\n\nexport type TextEditorCorrelationKey = string;\n\nexport abstract class AnnotationProviderBase implements Disposable {\n    static getCorrelationKey(editor: TextEditor | undefined): TextEditorCorrelationKey {\n        return editor !== undefined ? (editor as any).id : '';\n    }\n\n    annotationType: FileAnnotationType | undefined;\n    correlationKey: TextEditorCorrelationKey;\n    document: TextDocument;\n    status: AnnotationStatus | undefined;\n\n    protected decorations: DecorationOptions[] | undefined;\n    protected disposable: Disposable;\n\n    constructor(\n        public editor: TextEditor,\n        protected readonly trackedDocument: TrackedDocument<GitDocumentState>,\n        protected decoration: TextEditorDecorationType,\n        protected highlightDecoration: TextEditorDecorationType | undefined\n    ) {\n        this.correlationKey = AnnotationProviderBase.getCorrelationKey(this.editor);\n        this.document = this.editor.document;\n\n        this.disposable = Disposable.from(\n            window.onDidChangeTextEditorSelection(this.onTextEditorSelectionChanged, this)\n        );\n    }\n\n    dispose() {\n        this.clear();\n\n        this.disposable && this.disposable.dispose();\n    }\n\n    private onTextEditorSelectionChanged(e: TextEditorSelectionChangeEvent) {\n        if (!TextDocumentComparer.equals(this.document, e.textEditor && e.textEditor.document)) return;\n\n        this.selection(e.selections[0].active.line);\n    }\n\n    get editorId(): string {\n        if (this.editor === undefined || this.editor.document === undefined) return '';\n        return (this.editor as any).id;\n    }\n\n    get editorUri(): Uri | undefined {\n        if (this.editor === undefined || this.editor.document === undefined) return undefined;\n        return this.editor.document.uri;\n    }\n\n    protected additionalDecorations: { decoration: TextEditorDecorationType; ranges: Range[] }[] | undefined;\n\n    clear() {\n        this.status = undefined;\n        if (this.editor === undefined) return;\n\n        if (this.decoration !== undefined) {\n            try {\n                this.editor.setDecorations(this.decoration, []);\n            }\n            catch {}\n        }\n\n        if (this.additionalDecorations !== undefined && this.additionalDecorations.length > 0) {\n            for (const d of this.additionalDecorations) {\n                try {\n                    this.editor.setDecorations(d.decoration, []);\n                }\n                catch {}\n            }\n\n            this.additionalDecorations = undefined;\n        }\n\n        if (this.highlightDecoration !== undefined) {\n            try {\n                this.editor.setDecorations(this.highlightDecoration, []);\n            }\n            catch {}\n        }\n    }\n\n    private _resetDebounced:\n        | ((changes?: {\n              decoration: TextEditorDecorationType;\n              highlightDecoration: TextEditorDecorationType | undefined;\n          }) => void)\n        | undefined;\n\n    reset(changes?: {\n        decoration: TextEditorDecorationType;\n        highlightDecoration: TextEditorDecorationType | undefined;\n    }) {\n        if (this._resetDebounced === undefined) {\n            this._resetDebounced = Functions.debounce(this.onReset, 250);\n        }\n\n        this._resetDebounced(changes);\n    }\n\n    async onReset(changes?: {\n        decoration: TextEditorDecorationType;\n        highlightDecoration: TextEditorDecorationType | undefined;\n    }) {\n        if (changes !== undefined) {\n            this.clear();\n\n            this.decoration = changes.decoration;\n            this.highlightDecoration = changes.highlightDecoration;\n        }\n\n        await this.provideAnnotation(this.editor === undefined ? undefined : this.editor.selection.active.line);\n    }\n\n    async restore(editor: TextEditor) {\n        // If the editor isn't disposed then we don't need to do anything\n        // Explicitly check for `false`\n        if ((this.editor as any)._disposed === false) return;\n\n        this.status = AnnotationStatus.Computing;\n        if (editor === window.activeTextEditor) {\n            await setCommandContext(CommandContext.AnnotationStatus, this.status);\n        }\n\n        this.editor = editor;\n        this.correlationKey = AnnotationProviderBase.getCorrelationKey(editor);\n        this.document = editor.document;\n\n        if (this.decorations !== undefined && this.decorations.length) {\n            this.editor.setDecorations(this.decoration, this.decorations);\n\n            if (this.additionalDecorations !== undefined && this.additionalDecorations.length) {\n                for (const d of this.additionalDecorations) {\n                    this.editor.setDecorations(d.decoration, d.ranges);\n                }\n            }\n        }\n\n        this.status = AnnotationStatus.Computed;\n        if (editor === window.activeTextEditor) {\n            await setCommandContext(CommandContext.AnnotationStatus, this.status);\n        }\n    }\n\n    async provideAnnotation(shaOrLine?: string | number): Promise<boolean> {\n        this.status = AnnotationStatus.Computing;\n        if (await this.onProvideAnnotation(shaOrLine)) {\n            this.status = AnnotationStatus.Computed;\n            return true;\n        }\n\n        this.status = undefined;\n        return false;\n    }\n\n    abstract onProvideAnnotation(shaOrLine?: string | number): Promise<boolean>;\n    abstract selection(shaOrLine?: string | number): Promise<void>;\n    abstract validate(): Promise<boolean>;\n}\n","'use strict';\nimport { commands, ConfigurationTarget, MessageItem, Uri, window } from 'vscode';\nimport { Commands } from './commands';\nimport { configuration } from './configuration';\nimport { BuiltInCommands, CommandContext, setCommandContext } from './constants';\nimport { GitCommit } from './git/gitService';\nimport { Logger } from './logger';\n\nexport enum SuppressedMessages {\n    CommitHasNoPreviousCommitWarning = 'suppressCommitHasNoPreviousCommitWarning',\n    CommitNotFoundWarning = 'suppressCommitNotFoundWarning',\n    FileNotUnderSourceControlWarning = 'suppressFileNotUnderSourceControlWarning',\n    GitDisabledWarning = 'suppressGitDisabledWarning',\n    GitVersionWarning = 'suppressGitVersionWarning',\n    LineUncommittedWarning = 'suppressLineUncommittedWarning',\n    NoRepositoryWarning = 'suppressNoRepositoryWarning',\n    SupportGitLensNotification = 'suppressSupportGitLensNotification'\n}\n\nexport class Messages {\n    static showCommitHasNoPreviousCommitWarningMessage(commit?: GitCommit): Promise<MessageItem | undefined> {\n        if (commit === undefined) {\n            return Messages.showMessage(\n                'info',\n                'Commit has no previous commit.',\n                SuppressedMessages.CommitHasNoPreviousCommitWarning\n            );\n        }\n        return Messages.showMessage(\n            'info',\n            `Commit ${commit.shortSha} (${commit.author}, ${commit.formattedDate}) has no previous commit.`,\n            SuppressedMessages.CommitHasNoPreviousCommitWarning\n        );\n    }\n\n    static showCommitNotFoundWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. The commit could not be found.`,\n            SuppressedMessages.CommitNotFoundWarning\n        );\n    }\n\n    static async showGenericErrorMessage(message: string): Promise<MessageItem | undefined> {\n        const actions: MessageItem[] = [{ title: 'Open Output Channel' }];\n        const result = await Messages.showMessage(\n            'error',\n            `${message}. See output channel for more details`,\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result !== undefined) {\n            Logger.showOutputChannel();\n        }\n        return result;\n    }\n\n    static showFileNotUnderSourceControlWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. The file is probably not under source control.`,\n            SuppressedMessages.FileNotUnderSourceControlWarning\n        );\n    }\n\n    static showGitDisabledErrorMessage() {\n        return Messages.showMessage(\n            'error',\n            'GitLens requires Git to be enabled. Please re-enable Git \\u2014 set `git.enabled` to true and reload',\n            SuppressedMessages.GitDisabledWarning\n        );\n    }\n\n    static showGitVersionUnsupportedErrorMessage(version: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'error',\n            `GitLens requires a newer version of Git (>= 2.2.0) than is currently installed (${version}). Please install a more recent version of Git.`,\n            SuppressedMessages.GitVersionWarning\n        );\n    }\n\n    static showLineUncommittedWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. The line has uncommitted changes.`,\n            SuppressedMessages.LineUncommittedWarning\n        );\n    }\n\n    static showNoRepositoryWarningMessage(message: string): Promise<MessageItem | undefined> {\n        return Messages.showMessage(\n            'warn',\n            `${message}. No repository could be found.`,\n            SuppressedMessages.NoRepositoryWarning\n        );\n    }\n\n    static async showSupportGitLensMessage() {\n        const actions: MessageItem[] = [\n            { title: 'Become a Sponsor' },\n            { title: 'Donate via PayPal' },\n            { title: 'Donate via Cash App' }\n        ];\n\n        const result = await Messages.showMessage(\n            'info',\n            'While GitLens is offered to everyone for free, if you find it useful, please consider [supporting](https://gitlens.amod.io/#support-gitlens) it. Thank you! ❤',\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result != null) {\n            let uri;\n            if (result === actions[0]) {\n                uri = Uri.parse('https://www.patreon.com/eamodio');\n            }\n            else if (result === actions[1]) {\n                uri = Uri.parse('https://www.paypal.me/eamodio');\n            }\n            else if (result === actions[2]) {\n                uri = Uri.parse('https://cash.me/$eamodio');\n            }\n\n            if (uri !== undefined) {\n                await setCommandContext(CommandContext.ViewsHideSupportGitLens, true);\n                await this.suppressedMessage(SuppressedMessages.SupportGitLensNotification!);\n                await commands.executeCommand(BuiltInCommands.Open, uri);\n            }\n        }\n    }\n\n    static async showWhatsNewMessage(version: string) {\n        const actions: MessageItem[] = [{ title: \"What's New\" }, { title: 'Release Notes' }, { title: '❤' }];\n\n        const result = await Messages.showMessage(\n            'info',\n            `GitLens has been updated to v${version} — check out what's new!`,\n            undefined,\n            null,\n            ...actions\n        );\n\n        if (result != null) {\n            if (result === actions[0]) {\n                await commands.executeCommand(Commands.ShowWelcomePage);\n            }\n            else if (result === actions[1]) {\n                await commands.executeCommand(\n                    BuiltInCommands.Open,\n                    Uri.parse('https://github.com/eamodio/vscode-gitlens/blob/master/CHANGELOG.md')\n                );\n            }\n            else if (result === actions[2]) {\n                await commands.executeCommand(\n                    BuiltInCommands.Open,\n                    Uri.parse('https://gitlens.amod.io/#support-gitlens')\n                );\n            }\n        }\n    }\n\n    private static async showMessage(\n        type: 'info' | 'warn' | 'error',\n        message: string,\n        suppressionKey?: SuppressedMessages,\n        dontShowAgain: MessageItem | null = { title: \"Don't Show Again\" },\n        ...actions: MessageItem[]\n    ): Promise<MessageItem | undefined> {\n        Logger.log(`ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain})`);\n\n        if (\n            suppressionKey !== undefined &&\n            configuration.get<boolean>(configuration.name('advanced')('messages')(suppressionKey).value)\n        ) {\n            Logger.log(`ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain}) skipped`);\n            return undefined;\n        }\n\n        if (suppressionKey !== undefined && dontShowAgain !== null) {\n            actions.push(dontShowAgain);\n        }\n\n        let result: MessageItem | undefined = undefined;\n        switch (type) {\n            case 'info':\n                result = await window.showInformationMessage(message, ...actions);\n                break;\n\n            case 'warn':\n                result = await window.showWarningMessage(message, ...actions);\n                break;\n\n            case 'error':\n                result = await window.showErrorMessage(message, ...actions);\n                break;\n        }\n\n        if ((suppressionKey !== undefined && dontShowAgain === null) || result === dontShowAgain) {\n            Logger.log(\n                `ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain}) don't show again requested`\n            );\n            await this.suppressedMessage(suppressionKey!);\n\n            if (result === dontShowAgain) return undefined;\n        }\n\n        Logger.log(\n            `ShowMessage(${type}, '${message}', ${suppressionKey}, ${dontShowAgain}) returned ${\n                result ? result.title : result\n            }`\n        );\n        return result;\n    }\n\n    private static suppressedMessage(suppressionKey: SuppressedMessages) {\n        const section = configuration.name('advanced')('messages').value;\n        const messages: { [key: string]: boolean | undefined } = configuration.get<{}>(section);\n\n        messages[suppressionKey] = true;\n\n        for (const [key, value] of Object.entries(messages)) {\n            if (value !== true) {\n                messages[key] = undefined;\n            }\n        }\n\n        return configuration.update(section, messages, ConfigurationTarget.Global);\n    }\n}\n","'use strict';\nimport { Disposable, Event, EventEmitter, TextDocument, TextEditor, Uri } from 'vscode';\nimport { CommandContext, getEditorIfActive, isActiveDocument, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, Repository, RepositoryChange, RepositoryChangeEvent } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Functions } from '../system';\n\nexport interface DocumentBlameStateChangeEvent<T> {\n    readonly editor: TextEditor;\n    readonly document: TrackedDocument<T>;\n    readonly blameable: boolean;\n}\n\nexport class TrackedDocument<T> implements Disposable {\n    private _onDidBlameStateChange = new EventEmitter<DocumentBlameStateChangeEvent<T>>();\n    get onDidBlameStateChange(): Event<DocumentBlameStateChangeEvent<T>> {\n        return this._onDidBlameStateChange.event;\n    }\n\n    state: T | undefined;\n\n    private _disposable: Disposable | undefined;\n    private _disposed: boolean = false;\n    private _repo: Promise<Repository | undefined>;\n    private _uri!: GitUri;\n\n    constructor(\n        private readonly _document: TextDocument,\n        public readonly key: string,\n        public dirty: boolean,\n        private _eventDelegates: { onDidBlameStateChange(e: DocumentBlameStateChangeEvent<T>): void }\n    ) {\n        this._repo = this.initialize(_document.uri);\n    }\n\n    dispose() {\n        this._disposed = true;\n        this.reset('dispose');\n        this._disposable && this._disposable.dispose();\n    }\n\n    private async initialize(uri: Uri): Promise<Repository | undefined> {\n        // Since there is a bit of a chicken & egg problem with the DocumentTracker and the GitService, wait for the GitService to load if it isn't\n        if (Container.git === undefined) {\n            if (!(await Functions.waitUntil(() => Container.git !== undefined, 2000))) {\n                Logger.log(\n                    `TrackedDocument.initialize(${uri.toString(true)})`,\n                    'Timed out waiting for the GitService to start'\n                );\n                throw new Error('TrackedDocument timed out waiting for the GitService to start');\n            }\n        }\n\n        this._uri = await GitUri.fromUri(uri);\n        if (this._disposed) return undefined;\n\n        const repo = await Container.git.getRepository(this._uri);\n        if (this._disposed) return undefined;\n\n        if (repo !== undefined) {\n            this._disposable = repo.onDidChange(this.onRepositoryChanged, this);\n        }\n\n        await this.update({ initializing: true, repo: repo });\n\n        return repo;\n    }\n\n    private onRepositoryChanged(e: RepositoryChangeEvent) {\n        if (!e.changed(RepositoryChange.Repository)) return;\n\n        // Reset any cached state\n        this.reset('repository');\n        void this.update();\n    }\n\n    private _forceDirtyStateChangeOnNextDocumentChange: boolean = false;\n    get forceDirtyStateChangeOnNextDocumentChange() {\n        return this._forceDirtyStateChangeOnNextDocumentChange;\n    }\n\n    private _hasRemotes: boolean = false;\n    get hasRemotes() {\n        return this._hasRemotes;\n    }\n\n    get isBlameable() {\n        if (this._blameFailed) return false;\n\n        return this._isTracked;\n    }\n\n    private _isDirtyIdle: boolean = false;\n    get isDirtyIdle() {\n        return this._isDirtyIdle;\n    }\n    set isDirtyIdle(value: boolean) {\n        this._isDirtyIdle = value;\n    }\n\n    get isRevision() {\n        return this._uri !== undefined ? Boolean(this._uri.sha) : false;\n    }\n\n    private _isTracked: boolean = false;\n    get isTracked() {\n        return this._isTracked;\n    }\n\n    get lineCount(): number {\n        return this._document.lineCount;\n    }\n\n    get uri() {\n        return this._uri;\n    }\n\n    activate() {\n        setCommandContext(CommandContext.ActiveFileStatus, this.getStatus());\n    }\n\n    async ensureInitialized() {\n        await this._repo;\n    }\n\n    is(document: TextDocument) {\n        return document === this._document;\n    }\n\n    reset(reason: 'config' | 'dispose' | 'document' | 'repository') {\n        this._blameFailed = false;\n        this._isDirtyIdle = false;\n\n        if (this.state === undefined) return;\n\n        // // Don't remove broken blame on change (since otherwise we'll have to run the broken blame again)\n        // if (!this.state.hasErrors) {\n\n        this.state = undefined;\n        Logger.log(`Reset state for '${this.key}', reason=${reason}`);\n\n        // }\n    }\n\n    private _blameFailed: boolean = false;\n    setBlameFailure() {\n        const wasBlameable = this.isBlameable;\n\n        this._blameFailed = true;\n\n        if (wasBlameable && isActiveDocument(this._document)) {\n            void this.update({ forceBlameChange: true });\n        }\n    }\n\n    resetForceDirtyStateChangeOnNextDocumentChange() {\n        this._forceDirtyStateChangeOnNextDocumentChange = false;\n    }\n\n    setForceDirtyStateChangeOnNextDocumentChange() {\n        this._forceDirtyStateChangeOnNextDocumentChange = true;\n    }\n\n    async update(options: { forceBlameChange?: boolean; initializing?: boolean; repo?: Repository } = {}) {\n        if (this._disposed || this._uri === undefined) {\n            this._hasRemotes = false;\n            this._isTracked = false;\n\n            return;\n        }\n\n        this._isDirtyIdle = false;\n\n        const active = getEditorIfActive(this._document);\n        const wasBlameable = options.forceBlameChange ? undefined : this.isBlameable;\n\n        this._isTracked = await Container.git.isTracked(this._uri);\n\n        let repo = undefined;\n        if (this._isTracked) {\n            repo = options.repo;\n            if (repo === undefined) {\n                repo = await this._repo;\n            }\n        }\n\n        if (repo !== undefined) {\n            this._hasRemotes = await repo.hasRemotes();\n        }\n        else {\n            this._hasRemotes = false;\n        }\n\n        if (active !== undefined) {\n            const blameable = this.isBlameable;\n\n            setCommandContext(CommandContext.ActiveFileStatus, this.getStatus());\n\n            if (!options.initializing && wasBlameable !== blameable) {\n                const e: DocumentBlameStateChangeEvent<T> = { editor: active, document: this, blameable: blameable };\n                this._onDidBlameStateChange.fire(e);\n                this._eventDelegates.onDidBlameStateChange(e);\n            }\n        }\n    }\n\n    private getStatus() {\n        let status = '';\n        if (this.isTracked) {\n            status += 'tracked|';\n        }\n        if (this.isBlameable) {\n            status += 'blameable|';\n        }\n        if (this.isRevision) {\n            status += 'revision|';\n        }\n        if (this.hasRemotes) {\n            status += 'remotes|';\n        }\n\n        return status ? status : undefined;\n    }\n}\n","'use strict';\nimport {\n    ConfigurationChangeEvent,\n    Disposable,\n    EndOfLine,\n    Event,\n    EventEmitter,\n    Position,\n    Range,\n    TextDocument,\n    TextDocumentChangeEvent,\n    TextEditor,\n    TextLine,\n    Uri,\n    window,\n    workspace\n} from 'vscode';\nimport { configuration } from '../configuration';\nimport { CommandContext, DocumentSchemes, isActiveDocument, isTextEditor, setCommandContext } from '../constants';\nimport { GitUri } from '../git/gitService';\nimport { Deferrable, Functions } from '../system';\nimport { DocumentBlameStateChangeEvent, TrackedDocument } from './trackedDocument';\n\nexport * from './trackedDocument';\n\nexport interface DocumentDirtyStateChangeEvent<T> {\n    readonly editor: TextEditor;\n    readonly document: TrackedDocument<T>;\n    readonly dirty: boolean;\n}\n\nexport interface DocumentDirtyIdleTriggerEvent<T> {\n    readonly editor: TextEditor;\n    readonly document: TrackedDocument<T>;\n}\n\nexport class DocumentTracker<T> implements Disposable {\n    private _onDidChangeBlameState = new EventEmitter<DocumentBlameStateChangeEvent<T>>();\n    get onDidChangeBlameState(): Event<DocumentBlameStateChangeEvent<T>> {\n        return this._onDidChangeBlameState.event;\n    }\n\n    private _onDidChangeDirtyState = new EventEmitter<DocumentDirtyStateChangeEvent<T>>();\n    get onDidChangeDirtyState(): Event<DocumentDirtyStateChangeEvent<T>> {\n        return this._onDidChangeDirtyState.event;\n    }\n\n    private _onDidTriggerDirtyIdle = new EventEmitter<DocumentDirtyIdleTriggerEvent<T>>();\n    get onDidTriggerDirtyIdle(): Event<DocumentDirtyIdleTriggerEvent<T>> {\n        return this._onDidTriggerDirtyIdle.event;\n    }\n\n    private _dirtyIdleTriggerDelay!: number;\n    private readonly _disposable: Disposable | undefined;\n    private readonly _documentMap: Map<TextDocument | string, TrackedDocument<T>> = new Map();\n\n    constructor() {\n        this._disposable = Disposable.from(\n            configuration.onDidChange(this.onConfigurationChanged, this),\n            window.onDidChangeActiveTextEditor(this.onActiveTextEditorChanged, this),\n            // window.onDidChangeVisibleTextEditors(Functions.debounce(this.onVisibleEditorsChanged, 5000), this),\n            workspace.onDidChangeTextDocument(Functions.debounce(this.onTextDocumentChanged, 50), this),\n            workspace.onDidCloseTextDocument(this.onTextDocumentClosed, this),\n            workspace.onDidSaveTextDocument(this.onTextDocumentSaved, this)\n        );\n\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n\n        this.clear();\n    }\n\n    initialize() {\n        this.onActiveTextEditorChanged(window.activeTextEditor);\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        // Only rest the cached state if we aren't initializing\n        if (\n            !configuration.initializing(e) &&\n            (configuration.changed(e, configuration.name('blame')('ignoreWhitespace').value, null) ||\n                configuration.changed(e, configuration.name('advanced')('caching')('enabled').value))\n        ) {\n            for (const d of this._documentMap.values()) {\n                d.reset('config');\n            }\n        }\n\n        const section = configuration.name('advanced')('blame')('delayAfterEdit').value;\n        if (configuration.changed(e, section)) {\n            this._dirtyIdleTriggerDelay = configuration.get<number>(section);\n            this._dirtyIdleTriggeredDebounced = undefined;\n        }\n    }\n\n    private _timer: NodeJS.Timer | undefined;\n    private onActiveTextEditorChanged(editor: TextEditor | undefined) {\n        if (editor !== undefined && !isTextEditor(editor)) return;\n\n        if (this._timer !== undefined) {\n            clearTimeout(this._timer);\n            this._timer = undefined;\n        }\n\n        if (editor === undefined) {\n            this._timer = setTimeout(() => {\n                this._timer = undefined;\n\n                setCommandContext(CommandContext.ActiveFileStatus, undefined);\n            }, 250);\n\n            return;\n        }\n\n        const doc = this._documentMap.get(editor.document);\n        if (doc !== undefined) {\n            doc.activate();\n\n            return;\n        }\n\n        // No need to activate this, as it is implicit in initialization if currently active\n        this.addCore(editor.document);\n    }\n\n    private onTextDocumentChanged(e: TextDocumentChangeEvent) {\n        const { scheme } = e.document.uri;\n        if (scheme !== DocumentSchemes.File && scheme !== DocumentSchemes.Vsls) return;\n\n        let doc = this._documentMap.get(e.document);\n        if (doc === undefined) {\n            doc = this.addCore(e.document);\n        }\n\n        doc.reset('document');\n\n        const dirty = e.document.isDirty;\n        const editor = window.activeTextEditor;\n\n        // If we have an idle tracker, either reset or cancel it\n        if (this._dirtyIdleTriggeredDebounced !== undefined) {\n            if (dirty) {\n                this._dirtyIdleTriggeredDebounced({ editor: editor!, document: doc });\n            }\n            else {\n                this._dirtyIdleTriggeredDebounced.cancel();\n            }\n        }\n\n        if (!doc.forceDirtyStateChangeOnNextDocumentChange && doc.dirty === dirty) return;\n\n        doc.resetForceDirtyStateChangeOnNextDocumentChange();\n        doc.dirty = dirty;\n\n        // Only fire state change events for the active document\n        if (editor === undefined || editor.document !== e.document) return;\n\n        this.fireDocumentDirtyStateChanged({ editor: editor, document: doc, dirty: doc.dirty });\n    }\n\n    private onTextDocumentClosed(document: TextDocument) {\n        const doc = this._documentMap.get(document);\n        if (doc === undefined) return;\n\n        doc.dispose();\n        this._documentMap.delete(document);\n        this._documentMap.delete(doc.key);\n    }\n\n    private onTextDocumentSaved(document: TextDocument) {\n        const doc = this._documentMap.get(document);\n        if (doc !== undefined) {\n            void doc.update({ forceBlameChange: true });\n\n            return;\n        }\n\n        // If we are saving the active document make sure we are tracking it\n        if (isActiveDocument(document)) {\n            void this.addCore(document);\n        }\n    }\n\n    // private onVisibleEditorsChanged(editors: TextEditor[]) {\n    //     if (this._documentMap.size === 0) return;\n\n    //     // If we have no visible editors, or no \"real\" visible editors reset our cache\n    //     if (editors.length === 0 || editors.every(e => !isTextEditor(e))) {\n    //         this.clear();\n    //     }\n    // }\n\n    add(document: TextDocument): Promise<TrackedDocument<T>>;\n    add(uri: Uri): Promise<TrackedDocument<T>>;\n    add(documentOrId: TextDocument | Uri): Promise<TrackedDocument<T>> {\n        return this._add(documentOrId);\n    }\n\n    clear() {\n        for (const d of this._documentMap.values()) {\n            d.dispose();\n        }\n\n        this._documentMap.clear();\n    }\n\n    get(fileName: string): Promise<TrackedDocument<T> | undefined>;\n    get(document: TextDocument): Promise<TrackedDocument<T> | undefined>;\n    get(uri: Uri): Promise<TrackedDocument<T> | undefined>;\n    get(documentOrId: string | TextDocument | Uri): Promise<TrackedDocument<T> | undefined> {\n        return this._get(documentOrId);\n    }\n\n    async getOrAdd(document: TextDocument): Promise<TrackedDocument<T>>;\n    async getOrAdd(uri: Uri): Promise<TrackedDocument<T>>;\n    async getOrAdd(documentOrId: TextDocument | Uri): Promise<TrackedDocument<T>> {\n        let doc = await this._get(documentOrId);\n        if (doc === undefined) {\n            doc = await this._add(documentOrId);\n        }\n        return doc;\n    }\n\n    has(fileName: string): boolean;\n    has(document: TextDocument): boolean;\n    has(uri: Uri): boolean;\n    has(key: string | TextDocument | Uri): boolean {\n        if (typeof key === 'string' || key instanceof Uri) {\n            key = GitUri.toKey(key);\n        }\n        return this._documentMap.has(key);\n    }\n\n    private async _add(documentOrId: TextDocument | Uri): Promise<TrackedDocument<T>> {\n        let document;\n        if (documentOrId instanceof GitUri) {\n            try {\n                document = await workspace.openTextDocument(documentOrId.documentUri({ useVersionedPath: true }));\n            }\n            catch (ex) {\n                const msg = ex.toString();\n                if (msg.includes('File seems to be binary and cannot be opened as text')) {\n                    document = new BinaryTextDocument(documentOrId);\n                }\n                else if (msg.includes('File not found')) {\n                    // If we can't find the file, assume it is because the file has been renamed or deleted at some point\n                    document = new MissingRevisionTextDocument(documentOrId);\n\n                    // const [fileName, repoPath] = await Container.git.findWorkingFileName(documentOrId, undefined, ref);\n                    // if (fileName === undefined) throw new Error(`Failed to add tracking for document: ${documentOrId}`);\n\n                    // documentOrId = await workspace.openTextDocument(path.resolve(repoPath!, fileName));\n                }\n                else {\n                    throw ex;\n                }\n            }\n        }\n        else if (documentOrId instanceof Uri) {\n            document = await workspace.openTextDocument(documentOrId);\n        }\n        else {\n            document = documentOrId;\n        }\n\n        const doc = await this.addCore(document);\n        await doc.ensureInitialized();\n\n        return doc;\n    }\n\n    private async _get(documentOrId: string | TextDocument | Uri) {\n        if (documentOrId instanceof GitUri) {\n            documentOrId = GitUri.toKey(documentOrId.documentUri({ useVersionedPath: true }));\n        }\n        else if (typeof documentOrId === 'string' || documentOrId instanceof Uri) {\n            documentOrId = GitUri.toKey(documentOrId);\n        }\n\n        const doc = this._documentMap.get(documentOrId);\n        if (doc === undefined) return undefined;\n\n        await doc.ensureInitialized();\n        return doc;\n    }\n\n    private addCore(document: TextDocument): TrackedDocument<T> {\n        const key = GitUri.toKey(document.uri);\n\n        // Always start out false, so we will fire the event if needed\n        const doc = new TrackedDocument<T>(document, key, false, {\n            onDidBlameStateChange: (e: DocumentBlameStateChangeEvent<T>) => this._onDidChangeBlameState.fire(e)\n        });\n        this._documentMap.set(document, doc);\n        this._documentMap.set(key, doc);\n\n        return doc;\n    }\n\n    private _dirtyIdleTriggeredDebounced: (((e: DocumentDirtyIdleTriggerEvent<T>) => void) & Deferrable) | undefined;\n    private _dirtyStateChangedDebounced: (((e: DocumentDirtyStateChangeEvent<T>) => void) & Deferrable) | undefined;\n    private fireDocumentDirtyStateChanged(e: DocumentDirtyStateChangeEvent<T>) {\n        if (e.dirty) {\n            setImmediate(async () => {\n                if (this._dirtyStateChangedDebounced !== undefined) {\n                    this._dirtyStateChangedDebounced.cancel();\n                }\n\n                if (window.activeTextEditor !== e.editor) return;\n\n                await e.document.ensureInitialized();\n                this._onDidChangeDirtyState.fire(e);\n            });\n\n            if (this._dirtyIdleTriggerDelay > 0) {\n                if (this._dirtyIdleTriggeredDebounced === undefined) {\n                    this._dirtyIdleTriggeredDebounced = Functions.debounce(\n                        async (e: DocumentDirtyIdleTriggerEvent<T>) => {\n                            if (\n                                this._dirtyIdleTriggeredDebounced !== undefined &&\n                                this._dirtyIdleTriggeredDebounced.pending!()\n                            ) {\n                                return;\n                            }\n\n                            await e.document.ensureInitialized();\n\n                            e.document.isDirtyIdle = true;\n                            this._onDidTriggerDirtyIdle.fire(e);\n                        },\n                        this._dirtyIdleTriggerDelay,\n                        { track: true }\n                    );\n                }\n\n                this._dirtyIdleTriggeredDebounced({ editor: e.editor, document: e.document });\n            }\n\n            return;\n        }\n\n        if (this._dirtyStateChangedDebounced === undefined) {\n            this._dirtyStateChangedDebounced = Functions.debounce(async (e: DocumentDirtyStateChangeEvent<T>) => {\n                if (window.activeTextEditor !== e.editor) return;\n\n                await e.document.ensureInitialized();\n                this._onDidChangeDirtyState.fire(e);\n            }, 250);\n        }\n\n        this._dirtyStateChangedDebounced(e);\n    }\n}\n\nclass EmptyTextDocument implements TextDocument {\n    readonly eol: EndOfLine;\n    readonly fileName: string;\n    readonly isClosed: boolean;\n    readonly isDirty: boolean;\n    readonly isUntitled: boolean;\n    readonly languageId: string;\n    readonly lineCount: number;\n    readonly uri: Uri;\n    readonly version: number;\n\n    constructor(public readonly gitUri: GitUri) {\n        this.uri = gitUri.documentUri({ useVersionedPath: true });\n\n        this.eol = EndOfLine.LF;\n        this.fileName = this.uri.fsPath;\n        this.isClosed = false;\n        this.isDirty = false;\n        this.isUntitled = false;\n        this.languageId = '';\n        this.lineCount = 0;\n        this.version = 0;\n    }\n\n    getText(range?: Range | undefined): string {\n        throw new Error('Method not supported.');\n    }\n\n    getWordRangeAtPosition(position: Position, regex?: RegExp | undefined): Range | undefined {\n        throw new Error('Method not supported.');\n    }\n\n    lineAt(line: number): TextLine;\n    lineAt(position: Position): TextLine;\n    lineAt(position: any): TextLine {\n        throw new Error('Method not supported.');\n    }\n\n    offsetAt(position: Position): number {\n        throw new Error('Method not supported.');\n    }\n\n    positionAt(offset: number): Position {\n        throw new Error('Method not supported.');\n    }\n\n    save(): Thenable<boolean> {\n        throw new Error('Method not supported.');\n    }\n\n    validatePosition(position: Position): Position {\n        throw new Error('Method not supported.');\n    }\n\n    validateRange(range: Range): Range {\n        throw new Error('Method not supported.');\n    }\n}\n\nclass BinaryTextDocument extends EmptyTextDocument {}\nclass MissingRevisionTextDocument extends EmptyTextDocument {}\n","'use strict';\nimport { GitBlame, GitDiff, GitLog } from '../git/git';\nimport { DocumentTracker } from './documentTracker';\n\nexport * from './documentTracker';\n\ninterface CachedItem<T> {\n    item: Promise<T>;\n    errorMessage?: string;\n}\n\nexport type CachedBlame = CachedItem<GitBlame>;\nexport type CachedDiff = CachedItem<GitDiff>;\nexport type CachedLog = CachedItem<GitLog>;\n\nexport class GitDocumentState {\n    private cache: Map<string, CachedBlame | CachedDiff | CachedLog> = new Map();\n\n    constructor(public readonly key: string) {}\n\n    get<T extends CachedBlame | CachedDiff | CachedLog>(key: string): T | undefined {\n        return this.cache.get(key) as T;\n    }\n\n    set<T extends CachedBlame | CachedDiff | CachedLog>(key: string, value: T) {\n        this.cache.set(key, value);\n    }\n}\n\nexport class GitDocumentTracker extends DocumentTracker<GitDocumentState> {}\n","'use strict';\nimport { execFile } from 'child_process';\nimport * as fs from 'fs';\nimport * as paths from 'path';\nimport * as iconv from 'iconv-lite';\nimport { Logger } from '../logger';\n\nconst isWindows = process.platform === 'win32';\n\n/**\n * Search PATH to see if a file exists in any of the path folders.\n *\n * @param  {string} exe The file to search for\n * @return {string}     A fully qualified path, or the original path if nothing\n *                      is found\n *\n * @private\n */\nfunction runDownPath(exe: string): string {\n    // NB: Windows won't search PATH looking for executables in spawn like\n    // Posix does\n\n    // Files with any directory path don't get this applied\n    if (exe.match(/[\\\\/]/)) return exe;\n\n    const target = paths.join('.', exe);\n    try {\n        if (fs.statSync(target)) return target;\n    }\n    catch {}\n\n    const path = process.env.PATH;\n    if (path != null && path.length !== 0) {\n        const haystack = path.split(isWindows ? ';' : ':');\n        for (const p of haystack) {\n            const needle = paths.join(p, exe);\n            try {\n                if (fs.statSync(needle)) return needle;\n            }\n            catch {}\n        }\n    }\n\n    return exe;\n}\n\n/**\n * Finds the executable and parameters to run on Windows. This method\n * mimics the POSIX behavior of being able to run scripts as executables by\n * replacing the passed-in executable with the script runner, for PowerShell,\n * CMD, and node scripts.\n *\n * This method also does the work of running down PATH, which spawn on Windows\n * also doesn't do, unlike on POSIX.\n */\nexport function findExecutable(exe: string, args: string[]): { cmd: string; args: string[] } {\n    // POSIX can just execute scripts directly, no need for silly goosery\n    if (!isWindows) return { cmd: runDownPath(exe), args: args };\n\n    if (!fs.existsSync(exe)) {\n        // NB: When you write something like `surf-client ... -- surf-build` on Windows,\n        // a shell would normally convert that to surf-build.cmd, but since it's passed\n        // in as an argument, it doesn't happen\n        const possibleExts = ['.exe', '.bat', '.cmd', '.ps1'];\n        for (const ext of possibleExts) {\n            const possibleFullPath = runDownPath(`${exe}${ext}`);\n\n            if (fs.existsSync(possibleFullPath)) return findExecutable(possibleFullPath, args);\n        }\n    }\n\n    if (exe.match(/\\.ps1$/i)) {\n        const cmd = paths.join(\n            process.env.SYSTEMROOT || 'C:\\\\WINDOWS',\n            'System32',\n            'WindowsPowerShell',\n            'v1.0',\n            'PowerShell.exe'\n        );\n        const psargs = ['-ExecutionPolicy', 'Unrestricted', '-NoLogo', '-NonInteractive', '-File', exe];\n\n        return { cmd: cmd, args: psargs.concat(args) };\n    }\n\n    if (exe.match(/\\.(bat|cmd)$/i)) {\n        const cmd = paths.join(process.env.SYSTEMROOT || 'C:\\\\WINDOWS', 'System32', 'cmd.exe');\n        const cmdArgs = ['/C', exe, ...args];\n\n        return { cmd: cmd, args: cmdArgs };\n    }\n\n    if (exe.match(/\\.(js)$/i)) {\n        const cmd = process.execPath;\n        const nodeArgs = [exe];\n\n        return { cmd: cmd, args: nodeArgs.concat(args) };\n    }\n\n    return { cmd: exe, args: args };\n}\n\nexport class RunError extends Error {\n    constructor(public readonly exitCode: number, ...args: any[]) {\n        super(...args);\n\n        Error.captureStackTrace(this, RunError);\n    }\n}\n\nexport interface RunOptions {\n    cwd?: string;\n    readonly env?: Record<string, any>;\n    readonly encoding?: BufferEncoding | 'buffer';\n    /**\n     * The size the output buffer to allocate to the spawned process. Set this\n     * if you are anticipating a large amount of output.\n     *\n     * If not specified, this will be 10MB (10485760 bytes) which should be\n     * enough for most Git operations.\n     */\n    readonly maxBuffer?: number;\n    /**\n     * An optional string or buffer which will be written to\n     * the child process stdin stream immediately immediately\n     * after spawning the process.\n     */\n    readonly stdin?: string | Buffer;\n    /**\n     * The encoding to use when writing to stdin, if the stdin\n     * parameter is a string.\n     */\n    readonly stdinEncoding?: string;\n}\n\nexport function run<TOut extends string | Buffer>(\n    command: string,\n    args: any[],\n    encoding: BufferEncoding | 'buffer',\n    options: RunOptions = {}\n): Promise<TOut> {\n    const { stdin, stdinEncoding, ...opts }: RunOptions = { maxBuffer: 100 * 1024 * 1024, ...options };\n\n    return new Promise<TOut>((resolve, reject) => {\n        const proc = execFile(\n            command,\n            args,\n            opts,\n            (err: (Error & { code?: string | number }) | null, stdout, stderr) => {\n                if (err != null) {\n                    reject(\n                        new RunError(\n                            err.code ? Number(err.code) : 0,\n                            err.message === 'stdout maxBuffer exceeded'\n                                ? `Command output exceeded the allocated stdout buffer. Set 'options.maxBuffer' to a larger value than ${\n                                      opts.maxBuffer\n                                  } bytes`\n                                : stderr || stdout\n                        )\n                    );\n\n                    return;\n                }\n\n                if (stderr) {\n                    Logger.warn(`Warning(${command} ${args.join(' ')}): ${stderr}`);\n                }\n\n                resolve(\n                    encoding === 'utf8' || encoding === 'binary' || encoding === 'buffer'\n                        ? (stdout as TOut)\n                        : (iconv.decode(Buffer.from(stdout, 'binary'), encoding) as TOut)\n                );\n            }\n        );\n\n        if (stdin) {\n            proc.stdin.end(stdin, stdinEncoding || 'utf8');\n        }\n    });\n}\n","'use strict';\nimport * as paths from 'path';\nimport { findExecutable, run } from './shell';\n\nexport interface GitLocation {\n    path: string;\n    version: string;\n}\n\nfunction parseVersion(raw: string): string {\n    return raw.replace(/^git version /, '');\n}\n\nasync function findSpecificGit(path: string): Promise<GitLocation> {\n    const version = await run<string>(path, ['--version'], 'utf8');\n    // If needed, let's update our path to avoid the search on every command\n    if (!path || path === 'git') {\n        path = findExecutable(path, ['--version']).cmd;\n    }\n\n    return {\n        path: path,\n        version: parseVersion(version.trim())\n    };\n}\n\nasync function findGitDarwin(): Promise<GitLocation> {\n    try {\n        let path = await run<string>('which', ['git'], 'utf8');\n        path = path.replace(/^\\s+|\\s+$/g, '');\n\n        if (path !== '/usr/bin/git') {\n            return findSpecificGit(path);\n        }\n\n        try {\n            await run<string>('xcode-select', ['-p'], 'utf8');\n            return findSpecificGit(path);\n        }\n        catch (ex) {\n            if (ex.code === 2) {\n                return Promise.reject(new Error('Unable to find git'));\n            }\n            return findSpecificGit(path);\n        }\n    }\n    catch (ex) {\n        return Promise.reject(new Error('Unable to find git'));\n    }\n}\n\nfunction findSystemGitWin32(basePath: string | null | undefined): Promise<GitLocation> {\n    if (basePath == null || basePath.length === 0) return Promise.reject(new Error('Unable to find git'));\n    return findSpecificGit(paths.join(basePath, 'Git', 'cmd', 'git.exe'));\n}\n\nfunction findGitWin32(): Promise<GitLocation> {\n    return findSystemGitWin32(process.env['ProgramW6432'])\n        .then(null, () => findSystemGitWin32(process.env['ProgramFiles(x86)']))\n        .then(null, () => findSystemGitWin32(process.env['ProgramFiles']))\n        .then(null, () => findSpecificGit('git'));\n}\n\nexport async function findGitPath(path?: string): Promise<GitLocation> {\n    try {\n        return await findSpecificGit(path || 'git');\n    }\n    catch (ex) {\n        try {\n            switch (process.platform) {\n                case 'darwin':\n                    return await findGitDarwin();\n                case 'win32':\n                    return await findGitWin32();\n                default:\n                    return Promise.reject('Unable to find git');\n            }\n        }\n        catch (ex) {\n            return Promise.reject(new Error('Unable to find git'));\n        }\n    }\n}\n","'use strict';\n/* eslint-disable constructor-super */\nimport * as paths from 'path';\nimport { Uri } from 'vscode';\nimport { UriComparer } from '../comparers';\nimport { DocumentSchemes, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitFile, GitService } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { debug, Strings } from '../system';\n\nconst emptyStr = '';\nconst slash = '/';\n\nexport interface GitCommitish {\n    fileName?: string;\n    repoPath: string;\n    sha?: string;\n    versionedPath?: string;\n}\n\n// Taken from https://github.com/Microsoft/vscode/blob/master/src/vs/base/common/uri.ts#L331-L337\ninterface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n}\n\ninterface UriEx {\n    new (): Uri;\n    new (scheme: string, authority: string, path: string, query: string, fragment: string): Uri;\n    // Use this ctor, because vscode doesn't validate it\n    new (components: UriComponents): Uri;\n}\n\nexport class GitUri extends ((Uri as any) as UriEx) {\n    repoPath?: string;\n    sha?: string;\n    versionedPath?: string;\n\n    constructor(uri?: Uri);\n    constructor(uri: Uri, commit: GitCommitish);\n    constructor(uri: Uri, repoPath: string | undefined);\n    constructor(uri?: Uri, commitOrRepoPath?: GitCommitish | string) {\n        if (uri == null) {\n            super('unknown', emptyStr, emptyStr, emptyStr, emptyStr);\n\n            return;\n        }\n\n        if (uri.scheme === DocumentSchemes.GitLens) {\n            const data = JSON.parse(uri.query) as UriRevisionData;\n\n            // When Uri's come from the FileSystemProvider, the uri.query only contains the root repo info (not the actual file path), so fix that here\n            const index = uri.path.indexOf(data.path);\n            if (index + data.path.length < uri.path.length) {\n                data.path = uri.path.substr(index);\n            }\n\n            super({\n                scheme: uri.scheme,\n                authority: uri.authority,\n                path: data.path,\n                query: JSON.stringify(data),\n                fragment: uri.fragment\n            });\n\n            this.repoPath = data.repoPath;\n            if (GitService.isStagedUncommitted(data.ref) || !GitService.isUncommitted(data.ref)) {\n                this.sha = data.ref;\n            }\n\n            return;\n        }\n\n        if (commitOrRepoPath === undefined) {\n            super(uri);\n\n            return;\n        }\n\n        if (typeof commitOrRepoPath === 'string') {\n            super(uri);\n\n            this.repoPath = commitOrRepoPath;\n\n            return;\n        }\n\n        const [authority, fsPath] = GitUri.ensureValidUNCPath(\n            uri.authority,\n            GitUri.resolve(commitOrRepoPath.fileName || uri.fsPath, commitOrRepoPath.repoPath)\n        );\n\n        let path;\n        switch (uri.scheme) {\n            case 'https':\n            case 'http':\n            case 'file':\n                if (!fsPath) {\n                    path = slash;\n                }\n                else if (fsPath[0] !== slash) {\n                    path = `/${fsPath}`;\n                }\n                else {\n                    path = fsPath;\n                }\n                break;\n            default:\n                path = fsPath;\n                break;\n        }\n\n        super({\n            scheme: uri.scheme,\n            authority: authority,\n            path: path,\n            query: uri.query,\n            fragment: uri.fragment\n        });\n        this.repoPath = commitOrRepoPath.repoPath;\n        this.versionedPath = commitOrRepoPath.versionedPath;\n        if (GitService.isStagedUncommitted(commitOrRepoPath.sha) || !GitService.isUncommitted(commitOrRepoPath.sha)) {\n            this.sha = commitOrRepoPath.sha;\n        }\n    }\n\n    get shortSha() {\n        return this.sha && GitService.shortenSha(this.sha);\n    }\n\n    documentUri(options: { useVersionedPath?: boolean } = {}) {\n        if (options.useVersionedPath && this.versionedPath !== undefined) return GitUri.file(this.versionedPath);\n        if (this.scheme !== 'file') return this;\n\n        return GitUri.file(this.fsPath);\n    }\n\n    equals(uri: Uri | undefined) {\n        if (!UriComparer.equals(this, uri)) return false;\n\n        return this.sha === (uri instanceof GitUri ? uri.sha : undefined);\n    }\n\n    getDirectory(relativeTo?: string): string {\n        return GitUri.getDirectory(\n            this.repoPath ? paths.relative(this.repoPath, this.fsPath) : this.fsPath,\n            relativeTo\n        );\n    }\n\n    getFilename(relativeTo?: string): string {\n        return paths.basename(this.repoPath ? paths.relative(this.repoPath, this.fsPath) : this.fsPath, relativeTo);\n    }\n\n    getFormattedPath(options: { relativeTo?: string; separator?: string; suffix?: string } = {}): string {\n        const {\n            relativeTo = this.repoPath,\n            separator = Strings.pad(GlyphChars.Dot, 2, 2),\n            suffix = emptyStr\n        } = options;\n\n        const directory = GitUri.getDirectory(this.fsPath, relativeTo);\n        return `${paths.basename(this.fsPath)}${suffix}${directory ? `${separator}${directory}` : emptyStr}`;\n    }\n\n    getRelativePath(relativeTo?: string): string {\n        let relativePath = this.repoPath ? paths.relative(this.repoPath, this.fsPath) : this.fsPath;\n        if (relativeTo !== undefined) {\n            relativePath = paths.relative(relativeTo, relativePath);\n        }\n        return Strings.normalizePath(relativePath);\n    }\n\n    toFileUri() {\n        return GitUri.file(this.fsPath);\n    }\n\n    private static ensureValidUNCPath(authority: string, fsPath: string): [string, string] {\n        // Taken from https://github.com/Microsoft/vscode/blob/e444eaa768a1e8bd8315f2cee265d725e96a8162/src/vs/base/common/uri.ts#L300-L325\n        // check for authority as used in UNC shares or use the path as given\n        if (fsPath[0] === slash && fsPath[1] === slash) {\n            const index = fsPath.indexOf(slash, 2);\n            if (index === -1) {\n                authority = fsPath.substring(2);\n                fsPath = slash;\n            }\n            else {\n                authority = fsPath.substring(2, index);\n                fsPath = fsPath.substring(index) || slash;\n            }\n        }\n\n        return [authority, fsPath];\n    }\n\n    static file(path: string, useVslsScheme?: boolean) {\n        const uri = Uri.file(path);\n        if (Container.vsls.isMaybeGuest && useVslsScheme !== false) {\n            return uri.with({ scheme: DocumentSchemes.Vsls });\n        }\n\n        return uri;\n    }\n\n    static fromCommit(commit: GitCommit, previous: boolean = false) {\n        if (!previous) return new GitUri(commit.uri, commit);\n\n        return new GitUri(commit.previousUri, {\n            repoPath: commit.repoPath,\n            sha: commit.previousSha\n        });\n    }\n\n    static fromFile(fileName: string, repoPath: string, ref?: string): GitUri;\n    static fromFile(file: GitFile, repoPath: string, ref?: string, original?: boolean): GitUri;\n    static fromFile(fileOrName: GitFile | string, repoPath: string, ref?: string, original: boolean = false): GitUri {\n        const uri = GitUri.resolveToUri(\n            typeof fileOrName === 'string'\n                ? fileOrName\n                : (original && fileOrName.originalFileName) || fileOrName.fileName,\n            repoPath\n        );\n        return ref === undefined ? new GitUri(uri, repoPath) : new GitUri(uri, { repoPath: repoPath, sha: ref });\n    }\n\n    static fromRepoPath(repoPath: string, ref?: string) {\n        return ref === undefined\n            ? new GitUri(GitUri.file(repoPath), repoPath)\n            : new GitUri(GitUri.file(repoPath), { repoPath: repoPath, sha: ref });\n    }\n\n    static fromRevisionUri(uri: Uri): GitUri {\n        return new GitUri(uri);\n    }\n\n    @debug({\n        exit: uri => `returned ${Logger.toLoggable(uri)}`\n    })\n    static async fromUri(uri: Uri) {\n        if (uri instanceof GitUri) return uri;\n\n        if (!Container.git.isTrackable(uri)) return new GitUri(uri);\n\n        if (uri.scheme === DocumentSchemes.GitLens) return new GitUri(uri);\n\n        // If this is a git uri, find its repoPath\n        if (uri.scheme === DocumentSchemes.Git) {\n            const data: { path: string; ref: string } = JSON.parse(uri.query);\n\n            const repoPath = await Container.git.getRepoPath(data.path);\n\n            let ref;\n            switch (data.ref) {\n                case emptyStr:\n                case '~':\n                    ref = GitService.stagedUncommittedSha;\n                    break;\n\n                case null:\n                    ref = undefined;\n                    break;\n\n                default:\n                    ref = data.ref;\n                    break;\n            }\n\n            const commitish: GitCommitish = {\n                fileName: data.path,\n                repoPath: repoPath!,\n                sha: ref\n            };\n            return new GitUri(uri, commitish);\n        }\n\n        return new GitUri(uri, await Container.git.getRepoPath(uri));\n    }\n\n    static getDirectory(fileName: string, relativeTo?: string): string {\n        let directory: string | undefined = paths.dirname(fileName);\n        if (relativeTo !== undefined) {\n            directory = paths.relative(relativeTo, directory);\n        }\n        directory = Strings.normalizePath(directory);\n        return !directory || directory === '.' ? emptyStr : directory;\n    }\n\n    static getFormattedPath(\n        fileNameOrUri: string | Uri,\n        options: { relativeTo?: string; separator?: string; suffix?: string } = {}\n    ): string {\n        const { relativeTo, separator = Strings.pad(GlyphChars.Dot, 2, 2), suffix = emptyStr } = options;\n\n        let fileName: string;\n        if (fileNameOrUri instanceof Uri) {\n            if (fileNameOrUri instanceof GitUri) return fileNameOrUri.getFormattedPath(options);\n\n            fileName = fileNameOrUri.fsPath;\n        }\n        else {\n            fileName = fileNameOrUri;\n        }\n\n        const directory = GitUri.getDirectory(fileName, relativeTo);\n        return !directory\n            ? `${paths.basename(fileName)}${suffix}`\n            : `${paths.basename(fileName)}${suffix}${separator}${directory}`;\n    }\n\n    static getRelativePath(fileNameOrUri: string | Uri, relativeTo?: string, repoPath?: string): string {\n        let fileName: string;\n        if (fileNameOrUri instanceof Uri) {\n            if (fileNameOrUri instanceof GitUri) return fileNameOrUri.getRelativePath(relativeTo);\n\n            fileName = fileNameOrUri.fsPath;\n        }\n        else {\n            fileName = fileNameOrUri;\n        }\n\n        let relativePath = repoPath ? paths.relative(repoPath, fileName) : fileName;\n        if (relativeTo !== undefined) {\n            relativePath = paths.relative(relativeTo, relativePath);\n        }\n        return Strings.normalizePath(relativePath);\n    }\n\n    static git(fileName: string, repoPath?: string) {\n        const path = GitUri.resolve(fileName, repoPath);\n        return Uri.parse(\n            // Change encoded / back to / otherwise uri parsing won't work properly\n            `git:${encodeURIComponent(path).replace(/%2F/g, slash)}?${encodeURIComponent(\n                JSON.stringify({\n                    // Ensure we use the fsPath here, otherwise the url won't open properly\n                    path: Uri.file(path).fsPath,\n                    ref: '~'\n                })\n            )}`\n        );\n    }\n\n    static resolve(fileName: string, repoPath?: string) {\n        const normalizedFileName = Strings.normalizePath(fileName);\n        if (repoPath === undefined) return normalizedFileName;\n\n        const normalizedRepoPath = Strings.normalizePath(repoPath);\n        if (normalizedFileName == null || normalizedFileName.length === 0) return normalizedRepoPath;\n\n        if (normalizedFileName.startsWith(normalizedRepoPath)) return normalizedFileName;\n\n        return Strings.normalizePath(paths.join(normalizedRepoPath, normalizedFileName));\n    }\n\n    static resolveToUri(fileName: string, repoPath?: string) {\n        return GitUri.file(this.resolve(fileName, repoPath));\n    }\n\n    static toKey(fileName: string): string;\n    static toKey(uri: Uri): string;\n    static toKey(fileNameOrUri: string | Uri): string;\n    static toKey(fileNameOrUri: string | Uri): string {\n        return Strings.normalizePath(typeof fileNameOrUri === 'string' ? fileNameOrUri : fileNameOrUri.fsPath);\n\n        // return typeof fileNameOrUri === 'string'\n        //     ? GitUri.file(fileNameOrUri).toString(true)\n        //     : fileNameOrUri.toString(true);\n    }\n\n    static toRevisionUri(uri: GitUri): Uri;\n    static toRevisionUri(ref: string, fileName: string, repoPath: string): Uri;\n    static toRevisionUri(ref: string, file: GitFile, repoPath: string): Uri;\n    static toRevisionUri(uriOrRef: string | GitUri, fileNameOrFile?: string | GitFile, repoPath?: string): Uri {\n        let fileName: string;\n        let ref: string | undefined;\n        let shortSha: string | undefined;\n\n        if (typeof uriOrRef === 'string') {\n            if (typeof fileNameOrFile === 'string') {\n                fileName = fileNameOrFile;\n            }\n            else {\n                fileName = GitUri.resolve(fileNameOrFile!.fileName, repoPath);\n            }\n\n            ref = uriOrRef;\n            shortSha = GitService.shortenSha(ref);\n        }\n        else {\n            fileName = uriOrRef.fsPath!;\n            repoPath = uriOrRef.repoPath!;\n            ref = uriOrRef.sha;\n            shortSha = uriOrRef.shortSha;\n        }\n\n        const filePath = Strings.normalizePath(fileName, { addLeadingSlash: true });\n        const data: UriRevisionData = {\n            path: filePath,\n            ref: ref,\n            repoPath: Strings.normalizePath(repoPath!)\n        };\n\n        const uri = Uri.parse(\n            // Replace / in the authority with a similar unicode characters otherwise parsing will be wrong\n            `${DocumentSchemes.GitLens}://${encodeURIComponent(shortSha!.replace(/\\//g, '\\u200A\\u2215\\u200A'))}${\n                // Change encoded / back to / otherwise uri parsing won't work properly\n                filePath === slash ? emptyStr : encodeURIComponent(filePath).replace(/%2F/g, slash)\n            }?${encodeURIComponent(JSON.stringify(data))}`\n        );\n        return uri;\n    }\n}\n\ninterface UriRevisionData {\n    path: string;\n    ref?: string;\n    repoPath: string;\n}\n","'use strict';\nimport { Strings } from '../../system';\n\nconst emptyStr = '';\n\nexport interface FormatOptions {\n    dateFormat?: string | null;\n    tokenOptions?: { [id: string]: Strings.TokenOptions | undefined };\n}\n\ntype Constructor<T = {}> = new (...args: any[]) => T;\n\nconst spaceReplacementRegex = / /g;\n\ndeclare type RequiredTokenOptions<TOptions extends FormatOptions> = TOptions & Required<Pick<TOptions, 'tokenOptions'>>;\n\nexport abstract class Formatter<TItem = any, TOptions extends FormatOptions = FormatOptions> {\n    protected _item!: TItem;\n    protected _options!: RequiredTokenOptions<TOptions>;\n\n    constructor(item: TItem, options?: TOptions) {\n        this.reset(item, options);\n    }\n\n    reset(item: TItem, options?: TOptions) {\n        this._item = item;\n\n        if (options === undefined && this._options !== undefined) return;\n\n        if (options === undefined) {\n            // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n            options = {} as TOptions;\n        }\n\n        if (options.dateFormat == null) {\n            options.dateFormat = 'MMMM Do, YYYY h:mma';\n        }\n\n        if (options.tokenOptions == null) {\n            options.tokenOptions = {};\n        }\n\n        this._options = options as RequiredTokenOptions<TOptions>;\n    }\n\n    private collapsableWhitespace: number = 0;\n\n    protected _padOrTruncate(s: string, options: Strings.TokenOptions | undefined) {\n        if (s == null || s.length === 0) return s;\n\n        // NOTE: the collapsable whitespace logic relies on the javascript template evaluation to be left to right\n        if (options === undefined) {\n            options = {\n                collapseWhitespace: false,\n                padDirection: 'left',\n                prefix: undefined,\n                suffix: undefined,\n                truncateTo: undefined\n            };\n        }\n\n        let max = options.truncateTo;\n        if (max === undefined) {\n            this.collapsableWhitespace = 0;\n        }\n        else {\n            max += this.collapsableWhitespace;\n            this.collapsableWhitespace = 0;\n\n            const width = Strings.getWidth(s);\n            const diff = max - width;\n            if (diff > 0) {\n                if (options.collapseWhitespace) {\n                    this.collapsableWhitespace = diff;\n                }\n\n                if (options.padDirection === 'left') {\n                    s = Strings.padLeft(s, max, undefined, width);\n                }\n                else {\n                    if (options.collapseWhitespace) {\n                        max -= diff;\n                    }\n                    s = Strings.padRight(s, max, undefined, width);\n                }\n            }\n            else if (diff < 0) {\n                s = Strings.truncate(s, max, undefined, width);\n            }\n        }\n\n        if (options.prefix || options.suffix) {\n            s = `${options.prefix || emptyStr}${s}${options.suffix || emptyStr}`;\n        }\n\n        return s;\n    }\n\n    private static _formatter: Formatter | undefined = undefined;\n\n    protected static fromTemplateCore<\n        TFormatter extends Formatter<TItem, TOptions>,\n        TItem,\n        TOptions extends FormatOptions\n    >(\n        formatter: TFormatter | Constructor<TFormatter>,\n        template: string,\n        item: TItem,\n        dateFormatOrOptions?: string | null | TOptions\n    ): string {\n        // Preserve spaces\n        template = template.replace(spaceReplacementRegex, '\\u00a0');\n        if (formatter instanceof Formatter) return Strings.interpolate(template, formatter);\n\n        let options: TOptions | undefined = undefined;\n        if (dateFormatOrOptions == null || typeof dateFormatOrOptions === 'string') {\n            // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n            options = {\n                dateFormat: dateFormatOrOptions\n            } as TOptions;\n        }\n        else {\n            options = dateFormatOrOptions;\n        }\n\n        if (options.tokenOptions == null) {\n            const tokenOptions = Strings.getTokensFromTemplate(template).reduce<{\n                [token: string]: Strings.TokenOptions | undefined;\n            }>((map, token) => {\n                map[token.key] = token.options;\n                return map;\n            }, Object.create(null));\n\n            options.tokenOptions = tokenOptions;\n        }\n\n        if (this._formatter === undefined) {\n            this._formatter = new formatter(item, options);\n        }\n        else {\n            this._formatter.reset(item, options);\n        }\n\n        return Strings.interpolate(template, this._formatter);\n    }\n}\n","'use strict';\nimport {\n    DiffWithCommand,\n    OpenCommitInRemoteCommand,\n    OpenFileRevisionCommand,\n    ShowQuickCommitDetailsCommand,\n    ShowQuickCommitFileDetailsCommand\n} from '../../commands';\nimport { DateStyle, FileAnnotationType } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { Strings } from '../../system';\nimport { GitUri } from '../gitUri';\nimport { GitCommit, GitCommitType } from '../models/commit';\nimport { GitLogCommit, GitRemote } from '../models/models';\nimport { FormatOptions, Formatter } from './formatter';\nimport * as emojis from '../../emojis.json';\n\nconst emptyStr = '';\nconst emojiMap: { [key: string]: string } = emojis;\nconst emojiRegex = /:([-+_a-z0-9]+):/g;\n\nconst escapeMarkdownRegex = /[`>#*_\\-+.]/g;\n// const sampleMarkdown = '## message `not code` *not important* _no underline_ \\n> don\\'t quote me \\n- don\\'t list me \\n+ don\\'t list me \\n1. don\\'t list me \\nnot h1 \\n=== \\nnot h2 \\n---\\n***\\n---\\n___';\nconst markdownHeaderReplacement = `${GlyphChars.ZeroWidthSpace}===`;\n\nexport interface CommitFormatOptions extends FormatOptions {\n    annotationType?: FileAnnotationType;\n    dateStyle?: DateStyle;\n    line?: number;\n    markdown?: boolean;\n    remotes?: GitRemote[];\n    truncateMessageAtNewLine?: boolean;\n\n    tokenOptions?: {\n        ago?: Strings.TokenOptions;\n        agoOrDate?: Strings.TokenOptions;\n        author?: Strings.TokenOptions;\n        authorAgo?: Strings.TokenOptions;\n        authorAgoOrDate?: Strings.TokenOptions;\n        changes?: Strings.TokenOptions;\n        changesShort?: Strings.TokenOptions;\n        date?: Strings.TokenOptions;\n        email?: Strings.TokenOptions;\n        id?: Strings.TokenOptions;\n        message?: Strings.TokenOptions;\n    };\n}\n\nexport class CommitFormatter extends Formatter<GitCommit, CommitFormatOptions> {\n    private get _ago() {\n        return this._item.fromNow();\n    }\n\n    private get _date() {\n        return this._item.formatDate(this._options.dateFormat);\n    }\n\n    private get _agoOrDate() {\n        const dateStyle =\n            this._options.dateStyle !== undefined ? this._options.dateStyle : Container.config.defaultDateStyle;\n        return dateStyle === DateStyle.Absolute ? this._date : this._ago;\n    }\n\n    get ago() {\n        return this._padOrTruncate(this._ago, this._options.tokenOptions.ago);\n    }\n\n    get agoOrDate() {\n        return this._padOrTruncate(this._agoOrDate, this._options.tokenOptions.agoOrDate);\n    }\n\n    get author() {\n        return this._padOrTruncate(this._item.author, this._options.tokenOptions.author);\n    }\n\n    get authorAgo() {\n        const authorAgo = `${this._item.author}, ${this._ago}`;\n        return this._padOrTruncate(authorAgo, this._options.tokenOptions.authorAgo);\n    }\n\n    get authorAgoOrDate() {\n        const authorAgo = `${this._item.author}, ${this._agoOrDate}`;\n        return this._padOrTruncate(authorAgo, this._options.tokenOptions.authorAgoOrDate);\n    }\n\n    get avatar() {\n        if (!this._options.markdown || !Container.config.hovers.avatars) {\n            return emptyStr;\n        }\n\n        return `![](${this._item.getGravatarUri(Container.config.defaultGravatarsStyle).toString(true)})`;\n    }\n\n    get changes() {\n        if (!(this._item instanceof GitLogCommit) || this._item.type === GitCommitType.File) {\n            return this._padOrTruncate(emptyStr, this._options.tokenOptions.changes);\n        }\n\n        return this._padOrTruncate(this._item.getFormattedDiffStatus(), this._options.tokenOptions.changes);\n    }\n\n    get changesShort() {\n        if (!(this._item instanceof GitLogCommit) || this._item.type === GitCommitType.File) {\n            return this._padOrTruncate(emptyStr, this._options.tokenOptions.changesShort);\n        }\n\n        return this._padOrTruncate(\n            this._item.getFormattedDiffStatus({ compact: true, separator: emptyStr }),\n            this._options.tokenOptions.changesShort\n        );\n    }\n\n    get commands() {\n        if (this._item.isUncommitted) {\n            return `\\`${\n                this._item.shortSha === 'Working Tree'\n                    ? this._padOrTruncate('00000000', this._options.tokenOptions.id)\n                    : this.id\n            }\\``;\n        }\n\n        let commands = `[\\`${this.id}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n            this._item.sha\n        )} \"Show Commit Details\") [\\`${GlyphChars.MuchGreaterThan}\\`](${DiffWithCommand.getMarkdownCommandArgs(\n            this._item\n        )} \"Open Changes\") `;\n\n        if (this._item.previousSha !== undefined) {\n            let annotationType = this._options.annotationType;\n            if (annotationType === FileAnnotationType.RecentChanges) {\n                annotationType = FileAnnotationType.Blame;\n            }\n\n            const uri = GitUri.toRevisionUri(\n                this._item.previousSha,\n                this._item.previousUri.fsPath,\n                this._item.repoPath\n            );\n            commands += `[\\`${GlyphChars.SquareWithTopShadow}\\`](${OpenFileRevisionCommand.getMarkdownCommandArgs(\n                uri,\n                annotationType || FileAnnotationType.Blame,\n                this._options.line\n            )} \"Blame Previous Revision\") `;\n        }\n\n        if (this._options.remotes !== undefined && this._options.remotes.length !== 0) {\n            commands += `[\\`${GlyphChars.ArrowUpRight}\\`](${OpenCommitInRemoteCommand.getMarkdownCommandArgs(\n                this._item.sha\n            )} \"Open in Remote\") `;\n        }\n\n        commands += `[\\`${GlyphChars.MiddleEllipsis}\\`](${ShowQuickCommitFileDetailsCommand.getMarkdownCommandArgs(\n            this._item.sha\n        )} \"Show More Actions\")`;\n\n        return commands;\n    }\n\n    get date() {\n        return this._padOrTruncate(this._date, this._options.tokenOptions.date);\n    }\n\n    get email() {\n        return this._padOrTruncate(this._item.email || emptyStr, this._options.tokenOptions.email);\n    }\n\n    get id() {\n        return this._padOrTruncate(this._item.shortSha || emptyStr, this._options.tokenOptions.id);\n    }\n\n    get message() {\n        let message: string;\n        if (this._item.isStagedUncommitted) {\n            message = 'Staged changes';\n        }\n        else if (this._item.isUncommitted) {\n            message = 'Uncommitted changes';\n        }\n        else {\n            if (this._options.truncateMessageAtNewLine) {\n                const index = this._item.message.indexOf('\\n');\n                message =\n                    index === -1\n                        ? this._item.message\n                        : `${this._item.message.substring(0, index)}${GlyphChars.Space}${GlyphChars.Ellipsis}`;\n            }\n            else {\n                message = this._item.message;\n            }\n\n            message = message.replace(emojiRegex, (s, code) => emojiMap[code] || s);\n        }\n\n        message = this._padOrTruncate(message, this._options.tokenOptions.message);\n\n        if (!this._options.markdown) {\n            return message;\n        }\n\n        if (this._options.remotes !== undefined) {\n            this._options.remotes.sort(\n                (a, b) =>\n                    (a.default ? -1 : 1) - (b.default ? -1 : 1) ||\n                    a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n            );\n\n            for (const r of this._options.remotes) {\n                if (r.provider === undefined) continue;\n\n                message = r.provider.enrichMessage(message);\n                break;\n            }\n        }\n\n        return `\\n\\n> ${message\n            // Escape markdown\n            .replace(escapeMarkdownRegex, '\\\\$&')\n            // Escape markdown header (since the above regex won't match it)\n            .replace(/^===/gm, markdownHeaderReplacement)\n            // Keep under the same block-quote but with line breaks\n            .replace(/\\n/g, '\\t\\n>  ')}`;\n    }\n\n    get sha() {\n        return this.id;\n    }\n\n    static fromTemplate(template: string, commit: GitCommit, dateFormat: string | null): string;\n    static fromTemplate(template: string, commit: GitCommit, options?: CommitFormatOptions): string;\n    static fromTemplate(\n        template: string,\n        commit: GitCommit,\n        dateFormatOrOptions?: string | null | CommitFormatOptions\n    ): string;\n    static fromTemplate(\n        template: string,\n        commit: GitCommit,\n        dateFormatOrOptions?: string | null | CommitFormatOptions\n    ): string {\n        return super.fromTemplateCore(this, template, commit, dateFormatOrOptions);\n    }\n}\n","'use strict';\nimport { GlyphChars } from '../../constants';\nimport { Strings } from '../../system';\nimport { GitUri } from '../gitUri';\nimport { GitLogCommit } from './logCommit';\n\nexport declare type GitFileStatus = '!' | '?' | 'A' | 'C' | 'D' | 'M' | 'R' | 'T' | 'U' | 'X' | 'B';\n\nexport interface GitFile {\n    status: GitFileStatus;\n    readonly repoPath?: string;\n    readonly indexStatus?: GitFileStatus;\n    readonly workingTreeStatus?: GitFileStatus;\n    readonly fileName: string;\n    readonly originalFileName?: string;\n}\n\nexport interface GitFileWithCommit extends GitFile {\n    readonly commit: GitLogCommit;\n}\n\nexport namespace GitFile {\n    export function getFormattedDirectory(\n        file: GitFile,\n        includeOriginal: boolean = false,\n        relativeTo?: string\n    ): string {\n        const directory = GitUri.getDirectory(file.fileName, relativeTo);\n        return includeOriginal && file.status === 'R' && file.originalFileName\n            ? `${directory} ${Strings.pad(GlyphChars.ArrowLeft, 1, 1)} ${file.originalFileName}`\n            : directory;\n    }\n\n    export function getFormattedPath(\n        file: GitFile,\n        options: { relativeTo?: string; separator?: string; suffix?: string } = {}\n    ): string {\n        return GitUri.getFormattedPath(file.fileName, options);\n    }\n\n    export function getRelativePath(file: GitFile, relativeTo?: string): string {\n        return GitUri.getRelativePath(file.fileName, relativeTo);\n    }\n\n    const statusIconsMap = {\n        '!': 'icon-status-ignored.svg',\n        '?': 'icon-status-untracked.svg',\n        A: 'icon-status-added.svg',\n        C: 'icon-status-copied.svg',\n        D: 'icon-status-deleted.svg',\n        M: 'icon-status-modified.svg',\n        R: 'icon-status-renamed.svg',\n        T: 'icon-status-modified.svg',\n        U: 'icon-status-conflict.svg',\n        X: 'icon-status-unknown.svg',\n        B: 'icon-status-unknown.svg'\n    };\n\n    export function getStatusIcon(status: GitFileStatus): string {\n        return statusIconsMap[status] || statusIconsMap['X'];\n    }\n\n    const statusOcticonsMap = {\n        '!': '$(diff-ignored)',\n        '?': '$(diff-added)',\n        A: '$(diff-added)',\n        C: '$(diff-added)',\n        D: '$(diff-removed)',\n        M: '$(diff-modified)',\n        R: '$(diff-renamed)',\n        T: '$(diff-modified)',\n        U: '$(alert)',\n        X: '$(question)',\n        B: '$(question)'\n    };\n\n    export function getStatusOcticon(status: GitFileStatus, missing: string = GlyphChars.Space.repeat(4)): string {\n        return statusOcticonsMap[status] || missing;\n    }\n\n    const statusTextMap = {\n        '!': 'Ignored',\n        '?': 'Untracked',\n        A: 'Added',\n        C: 'Copied',\n        D: 'Deleted',\n        M: 'Modified',\n        R: 'Renamed',\n        T: 'Modified',\n        U: 'Conflict',\n        X: 'Unknown',\n        B: 'Unknown'\n    };\n\n    export function getStatusText(status: GitFileStatus): string {\n        return statusTextMap[status] || statusTextMap['X'];\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { GlyphChars } from '../../constants';\nimport { Strings } from '../../system';\nimport { GitFile, GitFileWithCommit } from '../models/file';\nimport { FormatOptions, Formatter } from './formatter';\n\nexport interface StatusFormatOptions extends FormatOptions {\n    relativePath?: string;\n\n    tokenOptions?: {\n        directory?: Strings.TokenOptions;\n        file?: Strings.TokenOptions;\n        filePath?: Strings.TokenOptions;\n        path?: Strings.TokenOptions;\n        status?: Strings.TokenOptions;\n        working?: Strings.TokenOptions;\n    };\n}\n\nexport class StatusFileFormatter extends Formatter<GitFile, StatusFormatOptions> {\n    get directory() {\n        const directory = GitFile.getFormattedDirectory(this._item, false, this._options.relativePath);\n        return this._padOrTruncate(directory, this._options.tokenOptions.directory);\n    }\n\n    get file() {\n        const file = paths.basename(this._item.fileName);\n        return this._padOrTruncate(file, this._options.tokenOptions.file);\n    }\n\n    get filePath() {\n        const filePath = GitFile.getFormattedPath(this._item, { relativeTo: this._options.relativePath });\n        return this._padOrTruncate(filePath, this._options.tokenOptions.filePath);\n    }\n\n    get path() {\n        const directory = GitFile.getRelativePath(this._item, this._options.relativePath);\n        return this._padOrTruncate(directory, this._options.tokenOptions.path);\n    }\n\n    get status() {\n        const status = GitFile.getStatusText(this._item.status);\n        return this._padOrTruncate(status, this._options.tokenOptions.status);\n    }\n\n    get working() {\n        const commit = (this._item as GitFileWithCommit).commit;\n        const statusFile = commit === undefined ? this._item : commit.files[0];\n\n        let icon;\n        if (statusFile.workingTreeStatus !== undefined && statusFile.indexStatus !== undefined) {\n            icon = `${GlyphChars.Pencil}${GlyphChars.Space}${GlyphChars.SpaceThinnest}${GlyphChars.Check}`;\n        }\n        else if (statusFile.workingTreeStatus !== undefined) {\n            icon = `${GlyphChars.Pencil}${GlyphChars.SpaceThin}${GlyphChars.SpaceThinnest}${GlyphChars.EnDash}${\n                GlyphChars.Space\n            }`;\n        }\n        else if (statusFile.indexStatus !== undefined) {\n            icon = `${GlyphChars.Space}${GlyphChars.EnDash}${GlyphChars.Space.repeat(2)}${GlyphChars.Check}`;\n        }\n        else {\n            icon = '';\n        }\n        return this._padOrTruncate(icon, this._options.tokenOptions.working);\n    }\n\n    static fromTemplate(template: string, file: GitFile | GitFileWithCommit, dateFormat: string | null): string;\n    static fromTemplate(template: string, file: GitFile | GitFileWithCommit, options?: StatusFormatOptions): string;\n    static fromTemplate(\n        template: string,\n        file: GitFile,\n        dateFormatOrOptions?: string | null | StatusFormatOptions\n    ): string;\n    static fromTemplate(\n        template: string,\n        file: GitFile,\n        dateFormatOrOptions?: string | null | StatusFormatOptions\n    ): string {\n        return super.fromTemplateCore(this, template, file, dateFormatOrOptions);\n    }\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { GravatarDefaultStyle } from './config';\nimport { Strings } from './system';\n\nconst gravatarCache: Map<string, Uri> = new Map();\nconst missingGravatarHash = '00000000000000000000000000000000';\n\nexport function clearGravatarCache() {\n    gravatarCache.clear();\n}\n\nexport function getGravatarUri(email: string | undefined, fallback: GravatarDefaultStyle, size: number = 16): Uri {\n    const hash =\n        email != null && email.length !== 0 ? Strings.md5(email.trim().toLowerCase(), 'hex') : missingGravatarHash;\n\n    const key = `${hash}:${size}`;\n    let gravatar = gravatarCache.get(key);\n    if (gravatar !== undefined) return gravatar;\n\n    gravatar = Uri.parse(`https://www.gravatar.com/avatar/${hash}.jpg?s=${size}&d=${fallback}`);\n    gravatarCache.set(key, gravatar);\n\n    return gravatar;\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { configuration, DateStyle, GravatarDefaultStyle } from '../../configuration';\nimport { Container } from '../../container';\nimport { Dates } from '../../system';\nimport { CommitFormatter } from '../formatters/formatters';\nimport { Git } from '../git';\nimport { GitUri } from '../gitUri';\nimport { getGravatarUri } from '../../gravatar';\n\nexport interface GitAuthor {\n    name: string;\n    lineCount: number;\n}\n\nexport interface GitCommitLine {\n    sha: string;\n    previousSha?: string;\n    line: number;\n    originalLine: number;\n    code?: string;\n}\n\nexport enum GitCommitType {\n    Blame = 'blame',\n    Branch = 'branch',\n    File = 'file',\n    Stash = 'stash',\n    StashFile = 'stash-file'\n}\n\nexport const CommitFormatting = {\n    dateFormat: undefined! as string | null,\n    dateStyle: undefined! as DateStyle,\n\n    reset: () => {\n        CommitFormatting.dateStyle = configuration.get<DateStyle>(configuration.name('defaultDateStyle').value);\n        CommitFormatting.dateFormat = configuration.get<string | null>(configuration.name('defaultDateFormat').value);\n    }\n};\n\nexport abstract class GitCommit {\n    readonly type: GitCommitType;\n    readonly originalFileName: string | undefined;\n    previousFileName: string | undefined;\n    workingFileName?: string;\n\n    protected readonly _fileName: string;\n    protected _previousSha: string | undefined;\n\n    private _isStagedUncommitted: boolean | undefined;\n    private _isUncommitted: boolean | undefined;\n    private _shortSha: string | undefined;\n\n    constructor(\n        type: GitCommitType,\n        public readonly repoPath: string,\n        public readonly sha: string,\n        public readonly author: string,\n        public readonly email: string | undefined,\n        public readonly date: Date,\n        public readonly message: string,\n        fileName: string,\n        originalFileName?: string,\n        previousSha?: string,\n        previousFileName?: string\n    ) {\n        this.type = type;\n        this._fileName = fileName || '';\n        this.originalFileName = originalFileName;\n        this._previousSha = previousSha;\n        this.previousFileName = previousFileName;\n    }\n\n    get fileName() {\n        // If we aren't a single-file commit, return an empty file name (makes it default to the repoPath)\n        return this.isFile ? this._fileName : '';\n    }\n\n    get formattedDate(): string {\n        return CommitFormatting.dateStyle === DateStyle.Absolute\n            ? this.formatDate(CommitFormatting.dateFormat)\n            : this.fromNow();\n    }\n\n    get shortSha() {\n        if (this._shortSha === undefined) {\n            this._shortSha = Git.shortenSha(this.sha);\n        }\n        return this._shortSha;\n    }\n\n    get isFile() {\n        return (\n            this.type === GitCommitType.Blame ||\n            this.type === GitCommitType.File ||\n            this.type === GitCommitType.StashFile\n        );\n    }\n\n    get isStash() {\n        return this.type === GitCommitType.Stash || this.type === GitCommitType.StashFile;\n    }\n\n    get isStagedUncommitted(): boolean {\n        if (this._isStagedUncommitted === undefined) {\n            this._isStagedUncommitted = Git.isStagedUncommitted(this.sha);\n        }\n        return this._isStagedUncommitted;\n    }\n\n    get isUncommitted(): boolean {\n        if (this._isUncommitted === undefined) {\n            this._isUncommitted = Git.isUncommitted(this.sha);\n        }\n        return this._isUncommitted;\n    }\n\n    abstract get previousFileSha(): string;\n    protected _resolvedPreviousFileSha: string | undefined;\n\n    get previousFileShortSha(): string {\n        return Git.shortenSha(this.previousFileSha)!;\n    }\n\n    get previousSha(): string | undefined {\n        return this._previousSha;\n    }\n    set previousSha(value: string | undefined) {\n        if (value === this._previousSha) return;\n\n        this._previousSha = value;\n        this._resolvedPreviousFileSha = undefined;\n    }\n\n    get previousShortSha() {\n        return this.previousSha && Git.shortenSha(this.previousSha);\n    }\n\n    get previousUri(): Uri {\n        return this.previousFileName ? GitUri.resolveToUri(this.previousFileName, this.repoPath) : this.uri;\n    }\n\n    get uri(): Uri {\n        return GitUri.resolveToUri(this.fileName, this.repoPath);\n    }\n\n    get workingUri(): Uri {\n        return this.workingFileName ? GitUri.resolveToUri(this.workingFileName, this.repoPath) : this.uri;\n    }\n\n    private _dateFormatter?: Dates.DateFormatter;\n\n    formatDate(format?: string | null) {\n        if (format == null) {\n            format = 'MMMM Do, YYYY h:mma';\n        }\n\n        if (this._dateFormatter === undefined) {\n            this._dateFormatter = Dates.toFormatter(this.date);\n        }\n        return this._dateFormatter.format(format);\n    }\n\n    fromNow() {\n        if (this._dateFormatter === undefined) {\n            this._dateFormatter = Dates.toFormatter(this.date);\n        }\n        return this._dateFormatter.fromNow();\n    }\n\n    getFormattedPath(options: { relativeTo?: string; separator?: string; suffix?: string } = {}): string {\n        return GitUri.getFormattedPath(this.fileName, options);\n    }\n\n    getGravatarUri(fallback: GravatarDefaultStyle, size: number = 16): Uri {\n        return getGravatarUri(this.email, fallback, size);\n    }\n\n    getShortMessage() {\n        // eslint-disable-next-line no-template-curly-in-string\n        return CommitFormatter.fromTemplate('${message}', this, { truncateMessageAtNewLine: true });\n    }\n\n    async resolvePreviousFileSha(): Promise<void> {\n        if (this._resolvedPreviousFileSha !== undefined) return;\n\n        this._resolvedPreviousFileSha = await Container.git.resolveReference(\n            this.repoPath,\n            this.previousFileSha,\n            this.fileName ? this.previousUri : undefined\n        );\n    }\n\n    toGitUri(previous: boolean = false): GitUri {\n        return GitUri.fromCommit(this, previous);\n    }\n\n    abstract with(changes: {\n        type?: GitCommitType;\n        sha?: string;\n        fileName?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n    }): GitCommit;\n\n    protected getChangedValue<T>(change: T | null | undefined, original: T | undefined): T | undefined {\n        if (change === undefined) return original;\n        return change !== null ? change : undefined;\n    }\n}\n","'use strict';\nimport { GitCommit, GitCommitLine, GitCommitType } from './commit';\n\nexport class GitBlameCommit extends GitCommit {\n    constructor(\n        repoPath: string,\n        sha: string,\n        author: string,\n        email: string | undefined,\n        date: Date,\n        message: string,\n        fileName: string,\n        originalFileName: string | undefined,\n        previousSha: string | undefined,\n        previousFileName: string | undefined,\n        public readonly lines: GitCommitLine[]\n    ) {\n        super(\n            GitCommitType.Blame,\n            repoPath,\n            sha,\n            author,\n            email,\n            date,\n            message,\n            fileName,\n            originalFileName,\n            previousSha,\n            previousFileName\n        );\n    }\n\n    get previousFileSha(): string {\n        if (this._resolvedPreviousFileSha !== undefined) return this._resolvedPreviousFileSha;\n\n        return `${this.sha}^`;\n    }\n\n    with(changes: {\n        sha?: string;\n        fileName?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n        lines?: GitCommitLine[] | null;\n    }): GitBlameCommit {\n        return new GitBlameCommit(\n            this.repoPath,\n            changes.sha || this.sha,\n            this.author,\n            this.email,\n            this.date,\n            this.message,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.originalFileName, this.originalFileName),\n            this.getChangedValue(changes.previousSha, this.previousSha),\n            this.getChangedValue(changes.previousFileName, this.previousFileName),\n            this.getChangedValue(changes.lines, changes.sha || changes.fileName ? [] : this.lines) || []\n        );\n    }\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Strings } from '../../system';\nimport { GitUri } from '../gitUri';\nimport { GitBranch, GitTrackingState } from './branch';\nimport { GitFile, GitFileStatus } from './file';\n\nexport class GitStatus {\n    readonly detached: boolean;\n\n    constructor(\n        public readonly repoPath: string,\n        public readonly branch: string,\n        public readonly sha: string,\n        public readonly files: GitStatusFile[],\n        public readonly state: GitTrackingState,\n        public readonly upstream?: string\n    ) {\n        this.detached = GitBranch.isDetached(branch);\n        if (this.detached) {\n            this.branch = GitBranch.formatDetached(this.sha);\n        }\n    }\n\n    get ref() {\n        return this.detached ? this.sha : this.branch;\n    }\n\n    private _diff?: {\n        added: number;\n        deleted: number;\n        changed: number;\n    };\n\n    getDiffStatus() {\n        if (this._diff === undefined) {\n            this._diff = {\n                added: 0,\n                deleted: 0,\n                changed: 0\n            };\n\n            if (this.files.length !== 0) {\n                for (const f of this.files) {\n                    switch (f.status) {\n                        case 'A':\n                        case '?':\n                            this._diff.added++;\n                            break;\n                        case 'D':\n                            this._diff.deleted++;\n                            break;\n                        default:\n                            this._diff.changed++;\n                            break;\n                    }\n                }\n            }\n        }\n\n        return this._diff;\n    }\n\n    getFormattedDiffStatus(\n        options: {\n            compact?: boolean;\n            empty?: string;\n            expand?: boolean;\n            prefix?: string;\n            separator?: string;\n            suffix?: string;\n        } = {}\n    ): string {\n        const { added, changed, deleted } = this.getDiffStatus();\n        if (added === 0 && changed === 0 && deleted === 0) return options.empty || '';\n\n        const { compact, expand, prefix = '', separator = ' ', suffix = '' } = options;\n        if (expand) {\n            let status = '';\n            if (added) {\n                status += `${Strings.pluralize('file', added)} added`;\n            }\n            if (changed) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('file', changed)} changed`;\n            }\n            if (deleted) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('file', deleted)} deleted`;\n            }\n            return `${prefix}${status}${suffix}`;\n        }\n\n        let status = '';\n        if (compact) {\n            if (added !== 0) {\n                status += `+${added}`;\n            }\n            if (changed !== 0) {\n                status += `${status.length === 0 ? '' : separator}~${changed}`;\n            }\n            if (deleted !== 0) {\n                status += `${status.length === 0 ? '' : separator}-${deleted}`;\n            }\n        }\n        else {\n            status += `+${added}${separator}~${changed}${separator}-${deleted}`;\n        }\n\n        return `${prefix}${status}${suffix}`;\n    }\n\n    getUpstreamStatus(options: {\n        empty?: string;\n        expand?: boolean;\n        prefix?: string;\n        separator?: string;\n        suffix?: string;\n    }): string {\n        return GitStatus.getUpstreamStatus(this.upstream, this.state, options);\n    }\n\n    static getUpstreamStatus(\n        upstream: string | undefined,\n        state: { ahead: number; behind: number },\n        options: { empty?: string; expand?: boolean; prefix?: string; separator?: string; suffix?: string } = {}\n    ): string {\n        if (upstream === undefined || (state.behind === 0 && state.ahead === 0)) return options.empty || '';\n\n        const { expand, prefix = '', separator = ' ', suffix = '' } = options;\n        if (expand) {\n            let status = '';\n            if (state.behind) {\n                status += `${Strings.pluralize('commit', state.behind)} behind`;\n            }\n            if (state.ahead) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('commit', state.ahead)} ahead`;\n            }\n            return `${prefix}${status}${suffix}`;\n        }\n\n        return `${prefix}${state.behind}${GlyphChars.ArrowDown}${separator}${state.ahead}${\n            GlyphChars.ArrowUp\n        }${suffix}`;\n    }\n}\n\nexport class GitStatusFile implements GitFile {\n    constructor(\n        public readonly repoPath: string,\n        public readonly indexStatus: GitFileStatus | undefined,\n        public readonly workingTreeStatus: GitFileStatus | undefined,\n        public readonly fileName: string,\n        public readonly originalFileName?: string\n    ) {}\n\n    get status(): GitFileStatus {\n        return (this.indexStatus || this.workingTreeStatus || '?') as GitFileStatus;\n    }\n\n    get staged() {\n        return this.indexStatus !== undefined;\n    }\n\n    get uri(): Uri {\n        return GitUri.resolveToUri(this.fileName, this.repoPath);\n    }\n\n    getFormattedDirectory(includeOriginal: boolean = false): string {\n        return GitFile.getFormattedDirectory(this, includeOriginal);\n    }\n\n    getFormattedPath(options: { relativeTo?: string; separator?: string; suffix?: string } = {}): string {\n        return GitFile.getFormattedPath(this, options);\n    }\n\n    getOcticon() {\n        return GitFile.getStatusOcticon(this.status);\n    }\n\n    getStatusText(): string {\n        return GitFile.getStatusText(this.status);\n    }\n\n    with(changes: {\n        indexStatus?: GitFileStatus | null;\n        workTreeStatus?: GitFileStatus | null;\n        fileName?: string;\n        originalFileName?: string | null;\n    }): GitStatusFile {\n        return new GitStatusFile(\n            this.repoPath,\n            this.getChangedValue(changes.indexStatus, this.indexStatus) as GitFileStatus,\n            this.getChangedValue(changes.workTreeStatus, this.workingTreeStatus) as GitFileStatus,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.originalFileName, this.originalFileName)\n        );\n    }\n\n    protected getChangedValue<T>(change: T | null | undefined, original: T | undefined): T | undefined {\n        if (change === undefined) return original;\n        return change !== null ? change : undefined;\n    }\n}\n","'use strict';\nimport { StarredBranches, WorkspaceState } from '../../constants';\nimport { Container } from '../../container';\nimport { Git } from '../git';\nimport { GitStatus } from './status';\n\nexport interface GitTrackingState {\n    ahead: number;\n    behind: number;\n}\n\nexport class GitBranch {\n    readonly detached: boolean;\n    readonly id: string;\n    readonly name: string;\n    readonly remote: boolean;\n    readonly tracking?: string;\n    readonly state: GitTrackingState;\n\n    constructor(\n        public readonly repoPath: string,\n        name: string,\n        public readonly current: boolean = false,\n        public readonly sha?: string,\n        tracking?: string,\n        ahead: number = 0,\n        behind: number = 0,\n        detached: boolean = false\n    ) {\n        this.id = `${repoPath}|${name}`;\n\n        if (name.startsWith('remotes/')) {\n            name = name.substring(8);\n            this.remote = true;\n        }\n        else {\n            this.remote = false;\n        }\n\n        this.detached = detached || (this.current ? GitBranch.isDetached(name) : false);\n        if (this.detached) {\n            this.name = GitBranch.formatDetached(this.sha!);\n        }\n        else {\n            this.name = name;\n        }\n\n        this.tracking = tracking == null || tracking.length === 0 ? undefined : tracking;\n        this.state = {\n            ahead: ahead,\n            behind: behind\n        };\n    }\n\n    get ref() {\n        return this.detached ? this.sha! : this.name;\n    }\n\n    private _basename: string | undefined;\n    getBasename(): string {\n        if (this._basename === undefined) {\n            const name = this.getName();\n            const index = name.lastIndexOf('/');\n            this._basename = index !== -1 ? name.substring(index + 1) : name;\n        }\n\n        return this._basename;\n    }\n\n    private _name: string | undefined;\n    getName(): string {\n        if (this._name === undefined) {\n            this._name = this.remote ? this.name.substring(this.name.indexOf('/') + 1) : this.name;\n        }\n\n        return this._name;\n    }\n\n    getRemote(): string | undefined {\n        if (this.remote) return GitBranch.getRemote(this.name);\n        if (this.tracking !== undefined) return GitBranch.getRemote(this.tracking);\n\n        return undefined;\n    }\n\n    getTrackingStatus(options?: {\n        empty?: string;\n        expand?: boolean;\n        prefix?: string;\n        separator?: string;\n        suffix?: string;\n    }): string {\n        return GitStatus.getUpstreamStatus(this.tracking, this.state, options);\n    }\n\n    get starred() {\n        const starred = Container.context.workspaceState.get<StarredBranches>(WorkspaceState.StarredBranches);\n        return starred !== undefined && starred[this.id] === true;\n    }\n\n    star() {\n        return this.updateStarred(true);\n    }\n\n    unstar() {\n        return this.updateStarred(false);\n    }\n\n    private async updateStarred(star: boolean) {\n        let starred = Container.context.workspaceState.get<StarredBranches>(WorkspaceState.StarredBranches);\n        if (starred === undefined) {\n            starred = Object.create(null);\n        }\n\n        if (star) {\n            starred![this.id] = true;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [this.id]: _, ...rest } = starred!;\n            starred = rest;\n        }\n        await Container.context.workspaceState.update(WorkspaceState.StarredBranches, starred);\n    }\n\n    static getRemote(branch: string): string {\n        return branch.substring(0, branch.indexOf('/'));\n    }\n\n    static formatDetached(sha: string): string {\n        return `(${Git.shortenSha(sha)}...)`;\n    }\n\n    static isDetached(name: string): boolean {\n        // If there is whitespace in the name assume this is not a valid branch name\n        // Deals with detached HEAD states\n        return name.match(/\\s/) !== null || name.match(/\\(detached\\)/) !== null;\n    }\n}\n","'use strict';\nimport { Uri } from 'vscode';\nimport { GravatarDefaultStyle } from '../../configuration';\nimport { getGravatarUri } from '../../gravatar';\n\nexport class GitContributor {\n    constructor(\n        public readonly repoPath: string,\n        public readonly name: string,\n        public readonly email: string,\n        public readonly count: number\n    ) {}\n\n    getGravatarUri(fallback: GravatarDefaultStyle, size: number = 16): Uri {\n        return getGravatarUri(this.email, fallback, size);\n    }\n}\n","'use strict';\nimport { Iterables, Strings } from '../../system';\nimport { GitDiff, GitDiffChunk, GitDiffChunkLine, GitDiffLine, GitDiffShortStat, GitFile, GitFileStatus } from '../git';\n\nconst nameStatusDiffRegex = /^(.*?)\\t(.*?)(?:\\t(.*?))?$/gm;\nconst shortStatDiffRegex = /^\\s*(\\d+)\\sfiles? changed(?:,\\s+(\\d+)\\s+insertions?\\(\\+\\))?(?:,\\s+(\\d+)\\s+deletions?\\(-\\))?/;\nconst unifiedDiffRegex = /^@@ -([\\d]+),([\\d]+) [+]([\\d]+),([\\d]+) @@([\\s\\S]*?)(?=^@@)/gm;\n\nexport class GitDiffParser {\n    static parse(data: string, debug: boolean = false): GitDiff | undefined {\n        if (!data) return undefined;\n\n        const chunks: GitDiffChunk[] = [];\n\n        let match: RegExpExecArray | null;\n        let chunk;\n        let currentStart;\n        let previousStart;\n\n        do {\n            match = unifiedDiffRegex.exec(`${data}\\n@@`);\n            if (match == null) break;\n\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            chunk = ` ${match[5]}`.substr(1);\n            currentStart = parseInt(match[3], 10);\n            previousStart = parseInt(match[1], 10);\n\n            chunks.push(\n                new GitDiffChunk(\n                    chunk,\n                    {\n                        start: currentStart,\n                        end: currentStart + parseInt(match[4], 10)\n                    },\n                    {\n                        start: previousStart,\n                        end: previousStart + parseInt(match[2], 10)\n                    }\n                )\n            );\n        } while (match != null);\n\n        if (!chunks.length) return undefined;\n\n        const diff: GitDiff = {\n            diff: debug ? data : undefined,\n            chunks: chunks\n        };\n        return diff;\n    }\n\n    static parseChunk(chunk: string): GitDiffChunkLine[] {\n        const lines = Iterables.skip(Strings.lines(chunk), 1);\n\n        const currentLines: (GitDiffLine | undefined)[] = [];\n        const previousLines: (GitDiffLine | undefined)[] = [];\n\n        let removed = 0;\n        for (const l of lines) {\n            switch (l[0]) {\n                case '+':\n                    currentLines.push({\n                        line: ` ${l.substring(1)}`,\n                        state: 'added'\n                    });\n\n                    if (removed > 0) {\n                        removed--;\n                    }\n                    else {\n                        previousLines.push(undefined);\n                    }\n\n                    break;\n\n                case '-':\n                    removed++;\n\n                    previousLines.push({\n                        line: ` ${l.substring(1)}`,\n                        state: 'removed'\n                    });\n\n                    break;\n\n                default:\n                    while (removed > 0) {\n                        removed--;\n                        currentLines.push(undefined);\n                    }\n\n                    currentLines.push({ line: l, state: 'unchanged' });\n                    previousLines.push({ line: l, state: 'unchanged' });\n\n                    break;\n            }\n        }\n\n        const chunkLines: GitDiffChunkLine[] = [];\n\n        let chunkLine: GitDiffChunkLine | undefined = undefined;\n        let current: GitDiffLine | undefined = undefined;\n\n        for (let i = 0; i < currentLines.length; i++) {\n            current = currentLines[i];\n            if (current === undefined) {\n                // Don't think we need to worry about this case because the diff will always have \"padding\" (i.e. unchanged lines) around each chunk\n                if (chunkLine === undefined) continue;\n\n                if (chunkLine.previous === undefined) {\n                    chunkLine.previous = [previousLines[i]];\n                    continue;\n                }\n\n                chunkLine.previous.push(previousLines[i]);\n                continue;\n            }\n\n            chunkLine = {\n                line: current.line,\n                state: current.state,\n                previous: [previousLines[i]]\n            };\n            chunkLines.push(chunkLine);\n        }\n\n        return chunkLines;\n    }\n\n    static parseNameStatus(data: string, repoPath: string): GitFile[] | undefined {\n        if (!data) return undefined;\n\n        const files: GitFile[] = [];\n\n        let rawStatus: string;\n        let fileName: string;\n        let originalFileName: string;\n        let match: RegExpExecArray | null = null;\n        do {\n            match = nameStatusDiffRegex.exec(data);\n            if (match == null) break;\n\n            [, rawStatus, fileName, originalFileName] = match;\n\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            const status = ` ${rawStatus}`.substr(1);\n            files.push({\n                repoPath: repoPath,\n                status: (status[0] !== '.' ? status[0].trim() : '?') as GitFileStatus,\n                indexStatus: undefined,\n                workingTreeStatus: undefined,\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                fileName: ` ${fileName}`.substr(1),\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                originalFileName: originalFileName === undefined ? undefined : ` ${originalFileName}`.substr(1)\n            });\n        } while (match != null);\n\n        if (!files.length) return undefined;\n\n        return files;\n    }\n\n    static parseShortStat(data: string): GitDiffShortStat | undefined {\n        if (!data) return undefined;\n\n        const match = shortStatDiffRegex.exec(data);\n        if (match == null) return undefined;\n\n        const [, files, insertions, deletions] = match;\n\n        const diffShortStat: GitDiffShortStat = {\n            files: files == null ? 0 : parseInt(files, 10),\n            insertions: insertions == null ? 0 : parseInt(insertions, 10),\n            deletions: deletions == null ? 0 : parseInt(deletions, 10)\n        };\n        return diffShortStat;\n    }\n}\n","'use strict';\nimport { GitDiffParser } from '../parsers/diffParser';\n\nexport interface GitDiffLine {\n    line: string;\n    state: 'added' | 'removed' | 'unchanged';\n}\n\nexport interface GitDiffChunkLine extends GitDiffLine {\n    previous?: (GitDiffLine | undefined)[];\n}\n\nexport class GitDiffChunk {\n    private _chunk: string | undefined;\n    private _lines: GitDiffChunkLine[] | undefined;\n\n    constructor(\n        chunk: string,\n        public currentPosition: { start: number; end: number },\n        public previousPosition: { start: number; end: number }\n    ) {\n        this._chunk = chunk;\n    }\n\n    get lines(): GitDiffChunkLine[] {\n        if (this._lines === undefined) {\n            this._lines = GitDiffParser.parseChunk(this._chunk!);\n            this._chunk = undefined;\n        }\n\n        return this._lines;\n    }\n}\n\nexport interface GitDiff {\n    readonly chunks: GitDiffChunk[];\n\n    readonly diff?: string;\n}\n\nexport interface GitDiffShortStat {\n    readonly files: number;\n    readonly insertions: number;\n    readonly deletions: number;\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Uri } from 'vscode';\nimport { Strings } from '../../system';\nimport { Git } from '../git';\nimport { GitUri } from '../gitUri';\nimport { GitCommit, GitCommitType } from './commit';\nimport { GitFile, GitFileStatus } from './file';\n\nexport class GitLogCommit extends GitCommit {\n    nextSha?: string;\n    nextFileName?: string;\n\n    constructor(\n        type: GitCommitType,\n        repoPath: string,\n        sha: string,\n        author: string,\n        email: string | undefined,\n        date: Date,\n        public readonly committedDate: Date,\n        message: string,\n        fileName: string,\n        public readonly files: GitFile[],\n        public readonly status: GitFileStatus | undefined,\n        originalFileName: string | undefined,\n        previousSha: string | undefined,\n        previousFileName: string | undefined,\n        public readonly parentShas?: string[]\n    ) {\n        super(\n            type,\n            repoPath,\n            sha,\n            author,\n            email,\n            date,\n            message,\n            fileName,\n            originalFileName,\n            previousSha,\n            previousFileName\n        );\n    }\n\n    get isMerge() {\n        return this.parentShas && this.parentShas.length > 1;\n    }\n\n    get nextShortSha() {\n        return this.nextSha && Git.shortenSha(this.nextSha);\n    }\n\n    get nextUri(): Uri {\n        return this.nextFileName ? GitUri.resolveToUri(this.nextFileName, this.repoPath) : this.uri;\n    }\n\n    get previousFileSha(): string {\n        if (this._resolvedPreviousFileSha !== undefined) return this._resolvedPreviousFileSha;\n\n        return this.isFile && this.previousSha ? this.previousSha : `${this.sha}^`;\n    }\n\n    private _diff?: {\n        added: number;\n        deleted: number;\n        changed: number;\n    };\n\n    getDiffStatus() {\n        if (this._diff === undefined) {\n            this._diff = {\n                added: 0,\n                deleted: 0,\n                changed: 0\n            };\n\n            if (this.files.length !== 0) {\n                for (const f of this.files) {\n                    switch (f.status) {\n                        case 'A':\n                        case '?':\n                            this._diff.added++;\n                            break;\n                        case 'D':\n                            this._diff.deleted++;\n                            break;\n                        default:\n                            this._diff.changed++;\n                            break;\n                    }\n                }\n            }\n        }\n\n        return this._diff;\n    }\n\n    getFormattedDiffStatus(\n        options: {\n            compact?: boolean;\n            empty?: string;\n            expand?: boolean;\n            prefix?: string;\n            separator?: string;\n            suffix?: string;\n        } = {}\n    ): string {\n        const { added, changed, deleted } = this.getDiffStatus();\n        if (added === 0 && changed === 0 && deleted === 0) return options.empty || '';\n\n        const { compact, expand, prefix = '', separator = ' ', suffix = '' } = options;\n        if (expand) {\n            let status = '';\n            if (added) {\n                status += `${Strings.pluralize('file', added)} added`;\n            }\n            if (changed) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('file', changed)} changed`;\n            }\n            if (deleted) {\n                status += `${status.length === 0 ? '' : separator}${Strings.pluralize('file', deleted)} deleted`;\n            }\n            return `${prefix}${status}${suffix}`;\n        }\n\n        return `${prefix}${compact && added === 0 ? '' : `+${added}${separator}`}${\n            compact && changed === 0 ? '' : `~${changed}${separator}`\n        }${compact && deleted === 0 ? '' : `-${deleted}`}${suffix}`;\n    }\n\n    toFileCommit(fileName: string): GitLogCommit | undefined;\n    toFileCommit(file: GitFile): GitLogCommit;\n    toFileCommit(fileNameOrFile: string | GitFile): GitLogCommit | undefined {\n        let file: GitFile | undefined;\n        if (typeof fileNameOrFile === 'string') {\n            const fileName = Strings.normalizePath(paths.relative(this.repoPath, fileNameOrFile));\n            file = this.files.find(f => f.fileName === fileName);\n            if (file === undefined) return undefined;\n        }\n        else {\n            file = fileNameOrFile;\n        }\n\n        let sha;\n        // If this is a stash commit with an untracked file\n        if (this.type === GitCommitType.Stash && file.status === '?') {\n            sha = `${this.sha}^3`;\n        }\n\n        // If this isn't a single-file commit, we can't trust the previousSha\n        const previousSha = this.isFile ? this.previousSha : `${this.sha}^`;\n\n        return this.with({\n            type: this.isStash ? GitCommitType.StashFile : GitCommitType.File,\n            sha: sha,\n            fileName: file.fileName,\n            originalFileName: file.originalFileName,\n            previousSha: previousSha,\n            previousFileName: file.originalFileName || file.fileName,\n            status: file.status,\n            files: [file]\n        });\n    }\n\n    with(changes: {\n        type?: GitCommitType;\n        sha?: string | null;\n        fileName?: string;\n        author?: string;\n        email?: string;\n        date?: Date;\n        committedDate?: Date;\n        message?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n        status?: GitFileStatus;\n        files?: GitFile[] | null;\n    }): GitLogCommit {\n        return new GitLogCommit(\n            changes.type || this.type,\n            this.repoPath,\n            this.getChangedValue(changes.sha, this.sha)!,\n            changes.author || this.author,\n            changes.email || this.email,\n            changes.date || this.date,\n            changes.committedDate || this.committedDate,\n            changes.message || this.message,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.files, this.files) || [],\n            changes.status || this.status,\n            this.getChangedValue(changes.originalFileName, this.originalFileName),\n            this.getChangedValue(changes.previousSha, this.previousSha),\n            this.getChangedValue(changes.previousFileName, this.previousFileName),\n            undefined\n        );\n    }\n}\n","'use strict';\nimport { WorkspaceState } from '../../constants';\nimport { Container } from '../../container';\nimport { RemoteProvider } from '../remotes/factory';\n\nexport enum GitRemoteType {\n    Fetch = 'fetch',\n    Push = 'push'\n}\n\nexport class GitRemote {\n    constructor(\n        public readonly repoPath: string,\n        public readonly id: string,\n        public readonly name: string,\n        public readonly scheme: string,\n        public readonly domain: string,\n        public readonly path: string,\n        public readonly provider: RemoteProvider | undefined,\n        public readonly types: { type: GitRemoteType; url: string }[]\n    ) {}\n\n    get default() {\n        const defaultRemote = Container.context.workspaceState.get<string>(WorkspaceState.DefaultRemote);\n        return this.id === defaultRemote;\n    }\n\n    setAsDefault(state: boolean = true) {\n        return Container.context.workspaceState.update(WorkspaceState.DefaultRemote, state ? this.id : undefined);\n    }\n}\n","'use strict';\nimport { commands, env, Range, Uri, window } from 'vscode';\nimport { BuiltInCommands } from '../../constants';\nimport { Logger } from '../../logger';\nimport { Messages } from '../../messages';\nimport { GitLogCommit } from '../models/logCommit';\n\nexport enum RemoteResourceType {\n    Branch = 'branch',\n    Branches = 'branches',\n    Commit = 'commit',\n    File = 'file',\n    Repo = 'repo',\n    Revision = 'revision'\n}\n\nexport type RemoteResource =\n    | {\n          type: RemoteResourceType.Branch;\n          branch: string;\n      }\n    | {\n          type: RemoteResourceType.Branches;\n      }\n    | {\n          type: RemoteResourceType.Commit;\n          sha: string;\n      }\n    | {\n          type: RemoteResourceType.File;\n          branch?: string;\n          fileName: string;\n          range?: Range;\n      }\n    | {\n          type: RemoteResourceType.Repo;\n      }\n    | {\n          type: RemoteResourceType.Revision;\n          branch?: string;\n          commit?: GitLogCommit;\n          fileName: string;\n          range?: Range;\n          sha?: string;\n      };\n\nexport function getNameFromRemoteResource(resource: RemoteResource) {\n    switch (resource.type) {\n        case RemoteResourceType.Branch:\n            return 'Branch';\n        case RemoteResourceType.Branches:\n            return 'Branches';\n        case RemoteResourceType.Commit:\n            return 'Commit';\n        case RemoteResourceType.File:\n            return 'File';\n        case RemoteResourceType.Repo:\n            return 'Repository';\n        case RemoteResourceType.Revision:\n            return 'Revision';\n        default:\n            return '';\n    }\n}\n\nexport abstract class RemoteProvider {\n    private _name: string | undefined;\n\n    constructor(\n        public readonly domain: string,\n        public readonly path: string,\n        public readonly protocol: string = 'https',\n        name?: string,\n        public readonly custom: boolean = false\n    ) {\n        this._name = name;\n    }\n\n    get icon(): string {\n        return 'remote';\n    }\n\n    get displayPath(): string {\n        return this.path;\n    }\n\n    abstract get name(): string;\n\n    protected get baseUrl() {\n        return `${this.protocol}://${this.domain}/${this.path}`;\n    }\n\n    enrichMessage(message: string): string {\n        return message;\n    }\n\n    protected formatName(name: string) {\n        if (this._name !== undefined) return this._name;\n        return `${name}${this.custom ? ` (${this.domain})` : ''}`;\n    }\n\n    protected splitPath(): [string, string] {\n        const index = this.path.indexOf('/');\n        return [this.path.substring(0, index), this.path.substring(index + 1)];\n    }\n\n    protected getUrlForRepository(): string {\n        return this.baseUrl;\n    }\n    protected abstract getUrlForBranches(): string;\n    protected abstract getUrlForBranch(branch: string): string;\n    protected abstract getUrlForCommit(sha: string): string;\n    protected abstract getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string;\n\n    private openUrl(url?: string): Thenable<{} | undefined> {\n        if (url === undefined) return Promise.resolve(undefined);\n\n        return commands.executeCommand(BuiltInCommands.Open, Uri.parse(url));\n    }\n\n    async copy(resource: RemoteResource): Promise<{} | undefined> {\n        const url = this.url(resource);\n        if (url === undefined) return undefined;\n\n        try {\n            void (await env.clipboard.writeText(url));\n\n            return undefined;\n        }\n        catch (ex) {\n            if (ex.message.includes(\"Couldn't find the required `xsel` binary\")) {\n                window.showErrorMessage(\n                    'Unable to copy remote url, xsel is not installed. Please install it via your package manager, e.g. `sudo apt install xsel`'\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, 'CopyRemoteUrlToClipboardCommand');\n            return Messages.showGenericErrorMessage('Unable to copy remote url');\n        }\n    }\n\n    open(resource: RemoteResource): Thenable<{} | undefined> {\n        return this.openUrl(this.url(resource));\n    }\n\n    url(resource: RemoteResource): string | undefined {\n        switch (resource.type) {\n            case RemoteResourceType.Branch:\n                return this.getUrlForBranch(encodeURIComponent(resource.branch));\n            case RemoteResourceType.Branches:\n                return this.getUrlForBranches();\n            case RemoteResourceType.Commit:\n                return this.getUrlForCommit(encodeURIComponent(resource.sha));\n            case RemoteResourceType.File:\n                return this.getUrlForFile(\n                    resource.fileName,\n                    resource.branch !== undefined ? encodeURIComponent(resource.branch) : undefined,\n                    undefined,\n                    resource.range\n                );\n            case RemoteResourceType.Repo:\n                return this.getUrlForRepository();\n            case RemoteResourceType.Revision:\n                return this.getUrlForFile(\n                    resource.fileName,\n                    resource.branch !== undefined ? encodeURIComponent(resource.branch) : undefined,\n                    resource.sha !== undefined ? encodeURIComponent(resource.sha) : undefined,\n                    resource.range\n                );\n        }\n\n        return undefined;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(#([0-9]+))\\b/gi;\n\nconst gitRegex = /\\/_git\\/?/i;\nconst legacyDefaultCollectionRegex = /^DefaultCollection\\//i;\nconst orgAndProjectRegex = /^(.*?)\\/(.*?)\\/(.*)/;\nconst sshDomainRegex = /^(ssh|vs-ssh)\\./i;\nconst sshPathRegex = /^\\/?v\\d\\//i;\n\nexport class AzureDevOpsRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, legacy: boolean = false) {\n        if (sshDomainRegex.test(domain)) {\n            path = path.replace(sshPathRegex, '');\n            domain = domain.replace(sshDomainRegex, '');\n\n            // Add in /_git/ into ssh urls\n            const match = orgAndProjectRegex.exec(path);\n            if (match != null) {\n                const [, org, project, rest] = match;\n\n                // Handle legacy vsts urls\n                if (legacy) {\n                    domain = `${org}.${domain}`;\n                    path = `${project}/_git/${rest}`;\n                }\n                else {\n                    path = `${org}/${project}/_git/${rest}`;\n                }\n            }\n        }\n\n        super(domain, path, protocol, name);\n    }\n\n    get icon() {\n        return 'vsts';\n    }\n\n    get name() {\n        return 'Azure DevOps';\n    }\n\n    private _displayPath: string | undefined;\n    get displayPath(): string {\n        if (this._displayPath === undefined) {\n            this._displayPath = this.path.replace(gitRegex, '/').replace(legacyDefaultCollectionRegex, '');\n        }\n        return this._displayPath;\n    }\n\n    enrichMessage(message: string): string {\n        // Strip off any `_git` part from the repo url\n        const baseUrl = this.baseUrl.replace(gitRegex, '/');\n        // Matches #123\n        return message.replace(issueEnricherRegex, `$1[$2](${baseUrl}/_workitems/edit/$3 \"Open Work Item $2\")`);\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/?version=GB${branch}&_a=history`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commit/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `&line=${range.start.line}`;\n            }\n            else {\n                line = `&line=${range.start.line}&lineEnd=${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/commit/${sha}/?_a=contents&path=%2F${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/?path=%2F${fileName}&version=GB${branch}&_a=contents${line}`;\n        return `${this.baseUrl}?path=%2F${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(issue #([0-9]+))\\b/gi;\nconst prEnricherRegex = /(^|\\s)(pull request #([0-9]+))\\b/gi;\n\nexport class BitbucketRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    get icon() {\n        return 'bitbucket';\n    }\n\n    get name() {\n        return this.formatName('Bitbucket');\n    }\n\n    enrichMessage(message: string): string {\n        return (\n            message\n                // Matches issue #123\n                .replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`)\n                // Matches pull request #123\n                .replace(prEnricherRegex, `$1[$2](${this.baseUrl}/pull-requests/$3 \"Open PR $2\")`)\n        );\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits/branch/${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commits/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#${fileName}-${range.start.line}`;\n            }\n            else {\n                line = `#${fileName}-${range.start.line}:${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/src/${sha}/${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/src/${branch}/${fileName}${line}`;\n        return `${this.baseUrl}?path=${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(issue #([0-9]+))\\b/gi;\nconst prEnricherRegex = /(^|\\s)(pull request #([0-9]+))\\b/gi;\n\nexport class BitbucketServerRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    protected get baseUrl() {\n        const [project, repo] = this.splitPath();\n        return `https://${this.domain}/projects/${project}/repos/${repo}`;\n    }\n\n    get icon() {\n        return 'bitbucket';\n    }\n\n    get name() {\n        return this.formatName('Bitbucket Server');\n    }\n\n    enrichMessage(message: string): string {\n        return (\n            message\n                // Matches issue #123\n                .replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`)\n                // Matches pull request #123\n                .replace(prEnricherRegex, `$1[$2](${this.baseUrl}/pull-requests/$3 \"Open PR $2\")`)\n        );\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits?until=${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commits/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#${range.start.line}`;\n            }\n            else {\n                line = `#${range.start.line}-${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n        if (sha) return `${this.baseUrl}/browse/${fileName}?at=${sha}${line}`;\n        if (branch) return `${this.baseUrl}/browse/${fileName}?at=${branch}${line}`;\n        return `${this.baseUrl}/browse/${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemotesUrlsConfig } from '../../configuration';\nimport { Strings } from '../../system';\nimport { RemoteProvider } from './provider';\n\nexport class CustomRemote extends RemoteProvider {\n    private readonly urls: RemotesUrlsConfig;\n\n    constructor(domain: string, path: string, urls: RemotesUrlsConfig, protocol?: string, name?: string) {\n        super(domain, path, protocol, name, true);\n        this.urls = urls;\n    }\n\n    get name() {\n        return this.formatName('Custom');\n    }\n\n    protected getUrlForRepository(): string {\n        return Strings.interpolate(this.urls.repository, this.getContext());\n    }\n\n    protected getUrlForBranches(): string {\n        return Strings.interpolate(this.urls.branches, this.getContext());\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return Strings.interpolate(this.urls.branch, this.getContext({ branch: branch }));\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return Strings.interpolate(this.urls.commit, this.getContext({ id: sha }));\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = Strings.interpolate(this.urls.fileLine, { line: range.start.line });\n            }\n            else {\n                line = Strings.interpolate(this.urls.fileRange, { start: range.start.line, end: range.end.line });\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) {\n            return Strings.interpolate(\n                this.urls.fileInCommit,\n                this.getContext({ id: sha, file: fileName, line: line })\n            );\n        }\n        if (branch) {\n            return Strings.interpolate(\n                this.urls.fileInBranch,\n                this.getContext({ branch: branch, file: fileName, line: line })\n            );\n        }\n        return Strings.interpolate(this.urls.file, this.getContext({ file: fileName, line: line }));\n    }\n\n    private getContext(context?: {}) {\n        const [repoBase, repoPath] = this.splitPath();\n        return {\n            repo: this.path,\n            repoBase: repoBase,\n            repoPath: repoPath,\n            ...(context || {})\n        };\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)((?:#|gh-)([0-9]+))\\b/gi;\nconst issueEnricher3rdParyRegex = /\\b((\\w+-?\\w+(?!-)\\/\\w+-?\\w+(?!-))#([0-9]+))\\b/g;\n\nexport class GitHubRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    get icon() {\n        return 'github';\n    }\n\n    get name() {\n        return this.formatName('GitHub');\n    }\n\n    enrichMessage(message: string): string {\n        return (\n            message\n                // Matches #123 or gh-123 or GH-123\n                .replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`)\n                // Matches eamodio/vscode-gitlens#123\n                .replace(\n                    issueEnricher3rdParyRegex,\n                    `[$1](${this.protocol}://${this.domain}/$2/issues/$3 \"Open Issue #$3 from $2\")`\n                )\n        );\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits/${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commit/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#L${range.start.line}`;\n            }\n            else {\n                line = `#L${range.start.line}-L${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/blob/${sha}/${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/blob/${branch}/${fileName}${line}`;\n        return `${this.baseUrl}?path=${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { Range } from 'vscode';\nimport { RemoteProvider } from './provider';\n\nconst issueEnricherRegex = /(^|\\s)(#([0-9]+))\\b/gi;\n\nexport class GitLabRemote extends RemoteProvider {\n    constructor(domain: string, path: string, protocol?: string, name?: string, custom: boolean = false) {\n        super(domain, path, protocol, name, custom);\n    }\n\n    get icon() {\n        return 'gitlab';\n    }\n\n    get name() {\n        return this.formatName('GitLab');\n    }\n\n    enrichMessage(message: string): string {\n        // Matches #123\n        return message.replace(issueEnricherRegex, `$1[$2](${this.baseUrl}/issues/$3 \"Open Issue $2\")`);\n    }\n\n    protected getUrlForBranches(): string {\n        return `${this.baseUrl}/branches`;\n    }\n\n    protected getUrlForBranch(branch: string): string {\n        return `${this.baseUrl}/commits/${branch}`;\n    }\n\n    protected getUrlForCommit(sha: string): string {\n        return `${this.baseUrl}/commit/${sha}`;\n    }\n\n    protected getUrlForFile(fileName: string, branch?: string, sha?: string, range?: Range): string {\n        let line;\n        if (range) {\n            if (range.start.line === range.end.line) {\n                line = `#L${range.start.line}`;\n            }\n            else {\n                line = `#L${range.start.line}-${range.end.line}`;\n            }\n        }\n        else {\n            line = '';\n        }\n\n        if (sha) return `${this.baseUrl}/blob/${sha}/${fileName}${line}`;\n        if (branch) return `${this.baseUrl}/blob/${branch}/${fileName}${line}`;\n        return `${this.baseUrl}?path=${fileName}${line}`;\n    }\n}\n","'use strict';\nimport { CustomRemoteType, RemotesConfig } from '../../configuration';\nimport { Logger } from '../../logger';\nimport { AzureDevOpsRemote } from './azure-devops';\nimport { BitbucketRemote } from './bitbucket';\nimport { BitbucketServerRemote } from './bitbucket-server';\nimport { CustomRemote } from './custom';\nimport { GitHubRemote } from './github';\nimport { GitLabRemote } from './gitlab';\nimport { RemoteProvider } from './provider';\n\nexport { RemoteProvider };\nexport type RemoteProviders = [string | RegExp, ((domain: string, path: string) => RemoteProvider)][];\n\nconst defaultProviders: RemoteProviders = [\n    ['bitbucket.org', (domain: string, path: string) => new BitbucketRemote(domain, path)],\n    ['github.com', (domain: string, path: string) => new GitHubRemote(domain, path)],\n    ['gitlab.com', (domain: string, path: string) => new GitLabRemote(domain, path)],\n    [/\\bdev\\.azure\\.com$/i, (domain: string, path: string) => new AzureDevOpsRemote(domain, path)],\n    [/\\bbitbucket\\b/i, (domain: string, path: string) => new BitbucketServerRemote(domain, path)],\n    [/\\bgitlab\\b/i, (domain: string, path: string) => new GitLabRemote(domain, path)],\n    [\n        /\\bvisualstudio\\.com$/i,\n        (domain: string, path: string) => new AzureDevOpsRemote(domain, path, undefined, undefined, true)\n    ]\n];\n\nexport class RemoteProviderFactory {\n    static factory(providers: RemoteProviders): (domain: string, path: string) => RemoteProvider | undefined {\n        return (domain: string, path: string) => this.create(providers, domain, path);\n    }\n\n    static create(providers: RemoteProviders, domain: string, path: string): RemoteProvider | undefined {\n        try {\n            const key = domain.toLowerCase();\n            for (const [matcher, creator] of providers) {\n                if (\n                    (typeof matcher === 'string' && matcher === key) ||\n                    (typeof matcher !== 'string' && matcher.test(key))\n                ) {\n                    return creator(domain, path);\n                }\n            }\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'RemoteProviderFactory');\n            return undefined;\n        }\n    }\n\n    static loadProviders(cfg: RemotesConfig[] | null | undefined): RemoteProviders {\n        const providers: RemoteProviders = [];\n\n        if (cfg != null && cfg.length > 0) {\n            for (const rc of cfg) {\n                const provider = this.getCustomProvider(rc);\n                if (provider === undefined) continue;\n\n                providers.push([rc.domain.toLowerCase(), provider]);\n            }\n        }\n\n        providers.push(...defaultProviders);\n        return providers;\n    }\n\n    private static getCustomProvider(cfg: RemotesConfig) {\n        switch (cfg.type) {\n            case CustomRemoteType.Bitbucket:\n                return (domain: string, path: string) =>\n                    new BitbucketRemote(domain, path, cfg.protocol, cfg.name, true);\n            case CustomRemoteType.BitbucketServer:\n                return (domain: string, path: string) =>\n                    new BitbucketServerRemote(domain, path, cfg.protocol, cfg.name, true);\n            case CustomRemoteType.Custom:\n                return (domain: string, path: string) =>\n                    new CustomRemote(domain, path, cfg.urls!, cfg.protocol, cfg.name);\n            case CustomRemoteType.GitHub:\n                return (domain: string, path: string) => new GitHubRemote(domain, path, cfg.protocol, cfg.name, true);\n            case CustomRemoteType.GitLab:\n                return (domain: string, path: string) => new GitLabRemote(domain, path, cfg.protocol, cfg.name, true);\n        }\n        return undefined;\n    }\n}\n","'use strict';\nimport * as fs from 'fs';\nimport * as paths from 'path';\nimport {\n    commands,\n    ConfigurationChangeEvent,\n    Disposable,\n    Event,\n    EventEmitter,\n    ProgressLocation,\n    RelativePattern,\n    Uri,\n    window,\n    workspace,\n    WorkspaceFolder\n} from 'vscode';\nimport { configuration, RemotesConfig } from '../../configuration';\nimport { StarredRepositories, WorkspaceState } from '../../constants';\nimport { Container } from '../../container';\nimport { Functions, gate, log } from '../../system';\nimport { GitBranch, GitContributor, GitDiffShortStat, GitRemote, GitStash, GitStatus, GitTag } from '../git';\nimport { GitUri } from '../gitUri';\nimport { RemoteProviderFactory, RemoteProviders } from '../remotes/factory';\n\nexport enum RepositoryChange {\n    Config = 'config',\n    Closed = 'closed',\n    // FileSystem = 'file-system',\n    Remotes = 'remotes',\n    Repository = 'repository',\n    Stashes = 'stashes',\n    Tags = 'tags'\n}\n\nexport class RepositoryChangeEvent {\n    readonly changes: RepositoryChange[] = [];\n\n    constructor(public readonly repository?: Repository) {}\n\n    changed(change: RepositoryChange, solely: boolean = false) {\n        if (solely) return this.changes.length === 1 && this.changes[0] === change;\n\n        return this.changes.includes(change);\n\n        // const changed = this.changes.includes(change);\n        // if (changed) return true;\n\n        // if (change === RepositoryChange.Repository) {\n        //     return this.changes.includes(RepositoryChange.Stashes);\n        // }\n\n        // return false;\n    }\n}\n\nexport interface RepositoryFileSystemChangeEvent {\n    readonly repository?: Repository;\n    readonly uris: Uri[];\n}\n\nexport class Repository implements Disposable {\n    private _onDidChange = new EventEmitter<RepositoryChangeEvent>();\n    get onDidChange(): Event<RepositoryChangeEvent> {\n        return this._onDidChange.event;\n    }\n\n    private _onDidChangeFileSystem = new EventEmitter<RepositoryFileSystemChangeEvent>();\n    get onDidChangeFileSystem(): Event<RepositoryFileSystemChangeEvent> {\n        return this._onDidChangeFileSystem.event;\n    }\n\n    readonly formattedName: string;\n    readonly id: string;\n    readonly index: number;\n    readonly name: string;\n    readonly normalizedPath: string;\n    readonly supportsChangeEvents: boolean = true;\n\n    private _branch: Promise<GitBranch | undefined> | undefined;\n    private readonly _disposable: Disposable;\n    private _fireChangeDebounced: ((e: RepositoryChangeEvent) => void) | undefined = undefined;\n    private _fireFileSystemChangeDebounced: ((e: RepositoryFileSystemChangeEvent) => void) | undefined = undefined;\n    private _fsWatchCounter = 0;\n    private _fsWatcherDisposable: Disposable | undefined;\n    private _pendingChanges: { repo?: RepositoryChangeEvent; fs?: RepositoryFileSystemChangeEvent } = {};\n    private _providers: RemoteProviders | undefined;\n    private _remotes: Promise<GitRemote[]> | undefined;\n    private _suspended: boolean;\n\n    constructor(\n        public readonly folder: WorkspaceFolder,\n        public readonly path: string,\n        public readonly root: boolean,\n        private readonly onAnyRepositoryChanged: (repo: Repository, reason: RepositoryChange) => void,\n        suspended: boolean,\n        closed: boolean = false\n    ) {\n        const relativePath = paths.relative(folder.uri.fsPath, path);\n        if (root) {\n            // Check if the repository is not contained by a workspace folder\n            const repoFolder = workspace.getWorkspaceFolder(GitUri.fromRepoPath(path));\n            if (repoFolder === undefined) {\n                // If it isn't within a workspace folder we can't get change events, see: https://github.com/Microsoft/vscode/issues/3025\n                this.supportsChangeEvents = false;\n                this.formattedName = this.name = paths.basename(path);\n            }\n            else {\n                this.formattedName = this.name = folder.name;\n            }\n        }\n        else {\n            this.formattedName = relativePath ? `${folder.name} (${relativePath})` : folder.name;\n            this.name = folder.name;\n        }\n        this.index = folder.index;\n\n        this.normalizedPath = (path.endsWith('/') ? path : `${path}/`).toLowerCase();\n        this.id = this.normalizedPath;\n\n        this._suspended = suspended;\n        this._closed = closed;\n\n        // TODO: createFileSystemWatcher doesn't work unless the folder is part of the workspaceFolders\n        // https://github.com/Microsoft/vscode/issues/3025\n        const watcher = workspace.createFileSystemWatcher(\n            new RelativePattern(\n                folder,\n                '{\\\n**/.git/config,\\\n**/.git/index,\\\n**/.git/HEAD,\\\n**/.git/refs/stash,\\\n**/.git/refs/heads/**,\\\n**/.git/refs/remotes/**,\\\n**/.git/refs/tags/**,\\\n**/.gitignore\\\n}'\n            )\n        );\n        this._disposable = Disposable.from(\n            watcher,\n            watcher.onDidChange(this.onRepositoryChanged, this),\n            watcher.onDidCreate(this.onRepositoryChanged, this),\n            watcher.onDidDelete(this.onRepositoryChanged, this),\n            configuration.onDidChange(this.onConfigurationChanged, this)\n        );\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.stopWatchingFileSystem();\n\n        // // Clean up any disposables in storage\n        // for (const item of this.storage.values()) {\n        //     if (item != null && typeof item.dispose === 'function') {\n        //         item.dispose();\n        //     }\n        // }\n\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        const section = configuration.name('remotes').value;\n        if (configuration.changed(e, section, this.folder.uri)) {\n            this._providers = RemoteProviderFactory.loadProviders(\n                configuration.get<RemotesConfig[] | null | undefined>(section, this.folder.uri)\n            );\n\n            if (!configuration.initializing(e)) {\n                this._remotes = undefined;\n                this.fireChange(RepositoryChange.Remotes);\n            }\n        }\n    }\n\n    private onFileSystemChanged(uri: Uri) {\n        // Ignore .git changes\n        if (/\\.git(?:\\/|\\\\|$)/.test(uri.fsPath)) return;\n\n        this.fireFileSystemChange(uri);\n    }\n\n    private onRepositoryChanged(uri: Uri) {\n        if (uri !== undefined && uri.path.endsWith('refs/stash')) {\n            this.fireChange(RepositoryChange.Stashes);\n\n            return;\n        }\n\n        this._branch = undefined;\n\n        if (uri !== undefined && uri.path.endsWith('refs/remotes')) {\n            this._remotes = undefined;\n            this.fireChange(RepositoryChange.Remotes);\n\n            return;\n        }\n\n        if (uri !== undefined && uri.path.endsWith('refs/tags')) {\n            this.fireChange(RepositoryChange.Tags);\n\n            return;\n        }\n\n        if (uri !== undefined && uri.path.endsWith('config')) {\n            this._remotes = undefined;\n            this.fireChange(RepositoryChange.Config, RepositoryChange.Remotes);\n\n            return;\n        }\n\n        this.onAnyRepositoryChanged(this, RepositoryChange.Repository);\n        this.fireChange(RepositoryChange.Repository);\n    }\n\n    private _closed: boolean = false;\n    get closed(): boolean {\n        return this._closed;\n    }\n    set closed(value: boolean) {\n        const changed = this._closed !== value;\n        this._closed = value;\n        if (changed) {\n            this.onAnyRepositoryChanged(this, RepositoryChange.Closed);\n            this.fireChange(RepositoryChange.Closed);\n        }\n    }\n\n    containsUri(uri: Uri) {\n        if (uri instanceof GitUri) {\n            uri = uri.repoPath !== undefined ? GitUri.file(uri.repoPath) : uri.documentUri();\n        }\n\n        return this.folder === workspace.getWorkspaceFolder(uri);\n    }\n\n    @gate()\n    @log()\n    async fetch(options: { progress?: boolean; remote?: string } = {}) {\n        const { progress, ...opts } = { progress: true, ...options };\n        if (!progress) return this.fetchCore(opts);\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Fetching ${opts.remote ? `${opts.remote} of ` : ''}${this.formattedName}...`,\n                cancellable: false\n            },\n            () => this.fetchCore(opts)\n        ));\n    }\n\n    private async fetchCore(options: { remote?: string } = {}) {\n        void (await Container.git.fetch(this.path, options.remote));\n\n        this.fireChange(RepositoryChange.Repository);\n    }\n\n    getBranch(): Promise<GitBranch | undefined> {\n        if (this._branch === undefined || !this.supportsChangeEvents) {\n            this._branch = Container.git.getBranch(this.path);\n        }\n        return this._branch;\n    }\n\n    getBranches(): Promise<GitBranch[]> {\n        return Container.git.getBranches(this.path);\n    }\n\n    getChangedFilesCount(sha?: string): Promise<GitDiffShortStat | undefined> {\n        return Container.git.getChangedFilesCount(this.path, sha);\n    }\n\n    getContributors(): Promise<GitContributor[]> {\n        return Container.git.getContributors(this.path);\n    }\n\n    async getLastFetched(): Promise<number> {\n        const hasRemotes = await this.hasRemotes();\n        if (!hasRemotes || Container.vsls.isMaybeGuest) return 0;\n\n        return new Promise<number>((resolve, reject) =>\n            fs.stat(paths.join(this.path, '.git/FETCH_HEAD'), (err, stat) => resolve(err ? 0 : stat.mtime.getTime()))\n        );\n    }\n\n    getRemotes(): Promise<GitRemote[]> {\n        if (this._remotes === undefined || !this.supportsChangeEvents) {\n            if (this._providers === undefined) {\n                const remotesCfg = configuration.get<RemotesConfig[] | null | undefined>(\n                    configuration.name('remotes').value,\n                    this.folder.uri\n                );\n                this._providers = RemoteProviderFactory.loadProviders(remotesCfg);\n            }\n\n            this._remotes = Container.git.getRemotesCore(this.path, this._providers);\n        }\n\n        return this._remotes;\n    }\n\n    getStashList(): Promise<GitStash | undefined> {\n        return Container.git.getStashList(this.path);\n    }\n\n    getStatus(): Promise<GitStatus | undefined> {\n        return Container.git.getStatusForRepo(this.path);\n    }\n\n    getTags(options?: { includeRefs?: boolean }): Promise<GitTag[]> {\n        return Container.git.getTags(this.path, options);\n    }\n\n    async hasRemotes(): Promise<boolean> {\n        const remotes = await this.getRemotes();\n        return remotes !== undefined && remotes.length > 0;\n    }\n\n    async hasTrackingBranch(): Promise<boolean> {\n        const branch = await this.getBranch();\n        return branch !== undefined && branch.tracking !== undefined;\n    }\n\n    @gate()\n    @log()\n    async pull(options: { progress?: boolean } = {}) {\n        const { progress } = { progress: true, ...options };\n        if (!progress) return this.pullCore();\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Pulling ${this.formattedName}...`,\n                cancellable: false\n            },\n            () => this.pullCore()\n        ));\n    }\n\n    private async pullCore() {\n        void (await commands.executeCommand('git.pull', this.path));\n\n        this.fireChange(RepositoryChange.Repository);\n    }\n\n    @gate()\n    @log()\n    async push(options: { force?: boolean; progress?: boolean } = {}) {\n        const { force, progress } = { progress: true, ...options };\n        if (!progress) return this.pushCore(force);\n\n        return void (await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: `Pushing ${this.formattedName}...`,\n                cancellable: false\n            },\n            () => this.pushCore(force)\n        ));\n    }\n\n    private async pushCore(force: boolean = false) {\n        void (await commands.executeCommand(force ? 'git.pushForce' : 'git.push', this.path));\n\n        this.fireChange(RepositoryChange.Repository);\n    }\n\n    resume() {\n        if (!this._suspended) return;\n\n        this._suspended = false;\n\n        // If we've come back into focus and we are dirty, fire the change events\n\n        if (this._pendingChanges.repo !== undefined) {\n            this._fireChangeDebounced!(this._pendingChanges.repo);\n        }\n\n        if (this._pendingChanges.fs !== undefined) {\n            this._fireFileSystemChangeDebounced!(this._pendingChanges.fs);\n        }\n    }\n\n    get starred() {\n        const starred = Container.context.workspaceState.get<StarredRepositories>(WorkspaceState.StarredRepositories);\n        return starred !== undefined && starred[this.id] === true;\n    }\n\n    star() {\n        return this.updateStarred(true);\n    }\n\n    unstar() {\n        return this.updateStarred(false);\n    }\n\n    private async updateStarred(star: boolean) {\n        let starred = Container.context.workspaceState.get<StarredRepositories>(WorkspaceState.StarredRepositories);\n        if (starred === undefined) {\n            starred = Object.create(null);\n        }\n\n        if (star) {\n            starred![this.id] = true;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [this.id]: _, ...rest } = starred!;\n            starred = rest;\n        }\n        await Container.context.workspaceState.update(WorkspaceState.StarredRepositories, starred);\n    }\n\n    startWatchingFileSystem() {\n        this._fsWatchCounter++;\n        if (this._fsWatcherDisposable !== undefined) return;\n\n        // TODO: createFileSystemWatcher doesn't work unless the folder is part of the workspaceFolders\n        // https://github.com/Microsoft/vscode/issues/3025\n        const watcher = workspace.createFileSystemWatcher(new RelativePattern(this.folder, '**'));\n        this._fsWatcherDisposable = Disposable.from(\n            watcher,\n            watcher.onDidChange(this.onFileSystemChanged, this),\n            watcher.onDidCreate(this.onFileSystemChanged, this),\n            watcher.onDidDelete(this.onFileSystemChanged, this)\n        );\n    }\n\n    stopWatchingFileSystem() {\n        if (this._fsWatcherDisposable === undefined) return;\n        if (--this._fsWatchCounter > 0) return;\n\n        this._fsWatcherDisposable.dispose();\n        this._fsWatcherDisposable = undefined;\n    }\n\n    suspend() {\n        this._suspended = true;\n    }\n\n    private fireChange(...reasons: RepositoryChange[]) {\n        if (this._fireChangeDebounced === undefined) {\n            this._fireChangeDebounced = Functions.debounce(this.fireChangeCore, 250);\n        }\n\n        if (this._pendingChanges.repo === undefined) {\n            this._pendingChanges.repo = new RepositoryChangeEvent(this);\n        }\n\n        const e = this._pendingChanges.repo;\n\n        for (const reason of reasons) {\n            if (!e.changes.includes(reason)) {\n                e.changes.push(reason);\n            }\n        }\n\n        if (this._suspended) return;\n\n        this._fireChangeDebounced(e);\n    }\n\n    private fireChangeCore(e: RepositoryChangeEvent) {\n        this._pendingChanges.repo = undefined;\n\n        this._onDidChange.fire(e);\n    }\n\n    private fireFileSystemChange(uri: Uri) {\n        if (this._fireFileSystemChangeDebounced === undefined) {\n            this._fireFileSystemChangeDebounced = Functions.debounce(this.fireFileSystemChangeCore, 2500);\n        }\n\n        if (this._pendingChanges.fs === undefined) {\n            this._pendingChanges.fs = { repository: this, uris: [] };\n        }\n\n        const e = this._pendingChanges.fs;\n        e.uris.push(uri);\n\n        if (this._suspended) return;\n\n        this._fireFileSystemChangeDebounced(e);\n    }\n\n    private fireFileSystemChangeCore(e: RepositoryFileSystemChangeEvent) {\n        this._pendingChanges.fs = undefined;\n\n        this._onDidChangeFileSystem.fire(e);\n    }\n}\n","'use strict';\nimport { GitCommitType } from './commit';\nimport { GitFile, GitFileStatus } from './file';\nimport { GitLogCommit } from './logCommit';\n\nexport class GitStashCommit extends GitLogCommit {\n    static is(commit: GitLogCommit): commit is GitStashCommit {\n        return commit.isStash;\n    }\n\n    constructor(\n        type: GitCommitType,\n        public readonly stashName: string,\n        repoPath: string,\n        sha: string,\n        date: Date,\n        committedDate: Date,\n        message: string,\n        fileName: string,\n        files: GitFile[],\n        status?: GitFileStatus | undefined,\n        originalFileName?: string | undefined,\n        previousSha?: string | undefined,\n        previousFileName?: string | undefined\n    ) {\n        super(\n            type,\n            repoPath,\n            sha,\n            'You',\n            undefined,\n            date,\n            committedDate,\n            message,\n            fileName,\n            files,\n            status,\n            originalFileName,\n            previousSha === undefined ? `${sha}^` : previousSha,\n            previousFileName\n        );\n    }\n\n    get shortSha() {\n        return this.stashName;\n    }\n\n    with(changes: {\n        type?: GitCommitType;\n        sha?: string | null;\n        fileName?: string;\n        date?: Date;\n        committedDate?: Date;\n        message?: string;\n        originalFileName?: string | null;\n        previousFileName?: string | null;\n        previousSha?: string | null;\n        status?: GitFileStatus;\n        files?: GitFile[] | null;\n    }): GitLogCommit {\n        return new GitStashCommit(\n            changes.type || this.type,\n            this.stashName,\n            this.repoPath,\n            this.getChangedValue(changes.sha, this.sha)!,\n            changes.date || this.date,\n            changes.committedDate || this.committedDate,\n            changes.message || this.message,\n            changes.fileName || this.fileName,\n            this.getChangedValue(changes.files, this.files) || [],\n            changes.status || this.status,\n            this.getChangedValue(changes.originalFileName, this.originalFileName),\n            this.getChangedValue(changes.previousSha, this.previousSha),\n            this.getChangedValue(changes.previousFileName, this.previousFileName)\n        );\n    }\n}\n","'use strict';\n\nexport class GitTag {\n    constructor(\n        public readonly repoPath: string,\n        public readonly name: string,\n        public readonly sha?: string,\n        public readonly annotation?: string\n    ) {}\n\n    get ref() {\n        return this.name;\n    }\n\n    private _basename: string | undefined;\n    getBasename(): string {\n        if (this._basename === undefined) {\n            const index = this.name.lastIndexOf('/');\n            this._basename = index !== -1 ? this.name.substring(index + 1) : this.name;\n        }\n\n        return this._basename;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Strings } from '../../system';\nimport { Git, GitAuthor, GitBlame, GitBlameCommit, GitCommitLine } from '../git';\n\nconst emptyStr = '';\nconst slash = '/';\n\ninterface BlameEntry {\n    sha: string;\n\n    line: number;\n    originalLine: number;\n    lineCount: number;\n\n    author: string;\n    authorDate?: string;\n    authorTimeZone?: string;\n    authorEmail?: string;\n\n    previousSha?: string;\n    previousFileName?: string;\n\n    fileName?: string;\n\n    summary?: string;\n}\n\nexport class GitBlameParser {\n    static parse(\n        data: string,\n        repoPath: string | undefined,\n        fileName: string,\n        currentUser: { name?: string; email?: string } | undefined\n    ): GitBlame | undefined {\n        if (!data) return undefined;\n\n        const authors: Map<string, GitAuthor> = new Map();\n        const commits: Map<string, GitBlameCommit> = new Map();\n        const lines: GitCommitLine[] = [];\n\n        let relativeFileName = repoPath && fileName;\n\n        let entry: BlameEntry | undefined = undefined;\n        let line: string;\n        let lineParts: string[];\n\n        let first = true;\n\n        for (line of Strings.lines(data)) {\n            lineParts = line.split(' ');\n            if (lineParts.length < 2) continue;\n\n            if (entry === undefined) {\n                entry = {\n                    author: undefined!,\n                    sha: lineParts[0],\n                    originalLine: parseInt(lineParts[1], 10) - 1,\n                    line: parseInt(lineParts[2], 10) - 1,\n                    lineCount: parseInt(lineParts[3], 10)\n                };\n\n                continue;\n            }\n\n            switch (lineParts[0]) {\n                case 'author':\n                    if (Git.isUncommitted(entry.sha)) {\n                        entry.author = 'You';\n                    }\n                    else {\n                        entry.author = lineParts\n                            .slice(1)\n                            .join(' ')\n                            .trim();\n                    }\n                    break;\n\n                case 'author-mail': {\n                    if (Git.isUncommitted(entry.sha)) {\n                        entry.authorEmail = currentUser !== undefined ? currentUser.email : undefined;\n                        continue;\n                    }\n\n                    entry.authorEmail = lineParts\n                        .slice(1)\n                        .join(' ')\n                        .trim();\n                    const start = entry.authorEmail.indexOf('<');\n                    if (start >= 0) {\n                        const end = entry.authorEmail.indexOf('>', start);\n                        if (end > start) {\n                            entry.authorEmail = entry.authorEmail.substring(start + 1, end);\n                        }\n                        else {\n                            entry.authorEmail = entry.authorEmail.substring(start + 1);\n                        }\n                    }\n\n                    break;\n                }\n                case 'author-time':\n                    entry.authorDate = lineParts[1];\n                    break;\n\n                case 'author-tz':\n                    entry.authorTimeZone = lineParts[1];\n                    break;\n\n                case 'summary':\n                    entry.summary = lineParts\n                        .slice(1)\n                        .join(' ')\n                        .trim();\n                    break;\n\n                case 'previous':\n                    entry.previousSha = lineParts[1];\n                    entry.previousFileName = lineParts.slice(2).join(' ');\n                    break;\n\n                case 'filename':\n                    entry.fileName = lineParts.slice(1).join(' ');\n\n                    if (first && repoPath === undefined) {\n                        // Try to get the repoPath from the most recent commit\n                        repoPath = Strings.normalizePath(\n                            fileName.replace(\n                                fileName.startsWith(slash) ? `/${entry.fileName}` : entry.fileName!,\n                                emptyStr\n                            )\n                        );\n                        relativeFileName = Strings.normalizePath(paths.relative(repoPath, fileName));\n                    }\n                    else {\n                        relativeFileName = entry.fileName!;\n                    }\n                    first = false;\n\n                    GitBlameParser.parseEntry(entry, repoPath, relativeFileName, commits, authors, lines, currentUser);\n\n                    entry = undefined;\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        for (const [, c] of commits) {\n            if (c.author === undefined) return undefined;\n\n            const author = authors.get(c.author);\n            if (author === undefined) return undefined;\n\n            author.lineCount += c.lines.length;\n        }\n\n        const sortedAuthors = new Map([...authors.entries()].sort((a, b) => b[1].lineCount - a[1].lineCount));\n\n        const blame: GitBlame = {\n            repoPath: repoPath!,\n            authors: sortedAuthors,\n            commits: commits,\n            lines: lines\n        };\n        return blame;\n    }\n\n    private static parseEntry(\n        entry: BlameEntry,\n        repoPath: string | undefined,\n        relativeFileName: string,\n        commits: Map<string, GitBlameCommit>,\n        authors: Map<string, GitAuthor>,\n        lines: GitCommitLine[],\n        currentUser: { name?: string; email?: string } | undefined\n    ) {\n        let commit = commits.get(entry.sha);\n        if (commit === undefined) {\n            if (entry.author !== undefined) {\n                if (\n                    currentUser !== undefined &&\n                    // Name or e-mail is configured\n                    (currentUser.name !== undefined || currentUser.email !== undefined) &&\n                    // Match on name if configured\n                    (currentUser.name === undefined || currentUser.name === entry.author) &&\n                    // Match on email if configured\n                    (currentUser.email === undefined || currentUser.email === entry.authorEmail)\n                ) {\n                    entry.author = 'You';\n                }\n\n                let author = authors.get(entry.author);\n                if (author === undefined) {\n                    author = {\n                        name: entry.author,\n                        lineCount: 0\n                    };\n                    authors.set(entry.author, author);\n                }\n            }\n\n            commit = new GitBlameCommit(\n                repoPath!,\n                entry.sha,\n                entry.author,\n                entry.authorEmail,\n                new Date((entry.authorDate as any) * 1000),\n                entry.summary!,\n                relativeFileName,\n                relativeFileName !== entry.fileName ? entry.fileName : undefined,\n                entry.previousSha,\n                entry.previousSha && entry.previousFileName,\n                []\n            );\n\n            commits.set(entry.sha, commit);\n        }\n\n        for (let i = 0, len = entry.lineCount; i < len; i++) {\n            const line: GitCommitLine = {\n                sha: entry.sha,\n                line: entry.line + i,\n                originalLine: entry.originalLine + i\n            };\n\n            if (commit.previousSha) {\n                line.previousSha = commit.previousSha;\n            }\n\n            commit.lines.push(line);\n            lines[line.line] = line;\n        }\n    }\n}\n","'use strict';\nimport { GitBranch } from '../git';\n\nconst branchWithTrackingRegex = /^(\\*?)\\s+(.+?)\\s+([0-9,a-f]+)\\s+(?:\\[(.*?\\/.*?)(?::\\s(.*)\\]|\\]))?/gm;\nconst branchWithTrackingStateRegex = /^(?:ahead\\s([0-9]+))?[,\\s]*(?:behind\\s([0-9]+))?/;\n\nexport class GitBranchParser {\n    static parse(data: string, repoPath: string): GitBranch[] | undefined {\n        if (!data) return undefined;\n\n        const branches: GitBranch[] = [];\n\n        let match: RegExpExecArray | null;\n        let ahead;\n        let behind;\n        let current;\n        let name;\n        let sha;\n        let state;\n        let tracking;\n        do {\n            match = branchWithTrackingRegex.exec(data);\n            if (match == null) break;\n\n            [, current, name, sha, tracking, state] = match;\n            [ahead, behind] = this.parseState(state);\n            branches.push(\n                new GitBranch(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    current === '*',\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    sha === undefined ? undefined : ` ${sha}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    tracking === undefined ? undefined : ` ${tracking}`.substr(1),\n                    ahead,\n                    behind\n                )\n            );\n        } while (match != null);\n\n        if (!branches.length) return undefined;\n\n        return branches;\n    }\n\n    static parseState(state: string): [number, number] {\n        if (state == null) return [0, 0];\n\n        const match = branchWithTrackingStateRegex.exec(state);\n        if (match == null) return [0, 0];\n\n        const ahead = parseInt(match[1], 10);\n        const behind = parseInt(match[2], 10);\n        return [isNaN(ahead) ? 0 : ahead, isNaN(behind) ? 0 : behind];\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Range } from 'vscode';\nimport { Arrays, Strings } from '../../system';\nimport { Git, GitAuthor, GitCommitType, GitFile, GitFileStatus, GitLog, GitLogCommit } from '../git';\n\nconst emptyStr = '';\nconst slash = '/';\n\ninterface LogEntry {\n    ref?: string;\n\n    author?: string;\n    date?: string;\n    committedDate?: string;\n    email?: string;\n\n    parentShas?: string[];\n\n    fileName?: string;\n    originalFileName?: string;\n    files?: GitFile[];\n\n    status?: GitFileStatus;\n\n    summary?: string;\n}\n\nconst diffRegex = /diff --git a\\/(.*) b\\/(.*)/;\nconst emptyEntry: LogEntry = {};\n\nexport class GitLogParser {\n    static parse(\n        data: string,\n        type: GitCommitType,\n        repoPath: string | undefined,\n        fileName: string | undefined,\n        sha: string | undefined,\n        currentUser: { name?: string; email?: string } | undefined,\n        maxCount: number | undefined,\n        reverse: boolean,\n        range: Range | undefined\n    ): GitLog | undefined {\n        if (!data) return undefined;\n\n        let relativeFileName: string;\n        let recentCommit: GitLogCommit | undefined = undefined;\n\n        let entry: LogEntry = emptyEntry;\n        let line: string | undefined = undefined;\n        let token: number;\n\n        let i = 0;\n        let first = true;\n\n        const lines = Strings.lines(`${data}</f>`);\n        // Skip the first line since it will always be </f>\n        let next = lines.next();\n        if (next.done) return undefined;\n\n        if (repoPath !== undefined) {\n            repoPath = Strings.normalizePath(repoPath);\n        }\n\n        const authors: Map<string, GitAuthor> = new Map();\n        const commits: Map<string, GitLogCommit> = new Map();\n        let truncationCount = maxCount;\n\n        while (true) {\n            next = lines.next();\n            if (next.done) break;\n\n            line = next.value;\n\n            // Since log --reverse doesn't properly honor a max count -- enforce it here\n            if (reverse && maxCount && i >= maxCount) break;\n\n            // <<1-char token>> <data>\n            // e.g. <r> bd1452a2dc\n            token = line.charCodeAt(1);\n\n            switch (token) {\n                case 114: // 'r': // ref\n                    entry = {\n                        ref: line.substring(4)\n                    };\n                    break;\n\n                case 97: // 'a': // author\n                    if (Git.isUncommitted(entry.ref)) {\n                        entry.author = 'You';\n                    }\n                    else {\n                        entry.author = line.substring(4);\n                    }\n                    break;\n\n                case 101: // 'e': // author-mail\n                    entry.email = line.substring(4);\n                    break;\n\n                case 100: // 'd': // author-date\n                    entry.date = line.substring(4);\n                    break;\n\n                case 99: // 'c': // committer-date\n                    entry.committedDate = line.substring(4);\n                    break;\n\n                case 112: // 'p': // parents\n                    entry.parentShas = line.substring(4).split(' ');\n                    break;\n\n                case 115: // 's': // summary\n                    while (true) {\n                        next = lines.next();\n                        if (next.done) break;\n\n                        line = next.value;\n                        if (line === '</s>') break;\n\n                        if (entry.summary === undefined) {\n                            entry.summary = line;\n                        }\n                        else {\n                            entry.summary += `\\n${line}`;\n                        }\n                    }\n\n                    // Remove the trailing newline\n                    if (entry.summary != null && entry.summary.charCodeAt(entry.summary.length - 1) === 10) {\n                        entry.summary = entry.summary.slice(0, -1);\n                    }\n                    break;\n\n                case 102: {\n                    // 'f': // files\n                    // Skip the blank line git adds before the files\n                    next = lines.next();\n                    if (next.done || next.value === '</f>') break;\n\n                    while (true) {\n                        next = lines.next();\n                        if (next.done) break;\n\n                        line = next.value;\n                        if (line === '</f>') break;\n\n                        if (line.startsWith('warning:')) continue;\n\n                        if (type === GitCommitType.Branch) {\n                            const status = {\n                                status: line[0] as GitFileStatus,\n                                fileName: line.substring(1),\n                                originalFileName: undefined\n                            };\n                            this.parseFileName(status);\n\n                            if (status.fileName) {\n                                if (entry.files === undefined) {\n                                    entry.files = [];\n                                }\n                                entry.files.push(status);\n                            }\n                        }\n                        else if (line.startsWith('diff')) {\n                            const matches = diffRegex.exec(line);\n                            if (matches != null) {\n                                let originalFileName;\n                                [, entry.fileName, originalFileName] = matches;\n                                if (entry.fileName !== originalFileName) {\n                                    entry.originalFileName = originalFileName;\n                                    entry.status = 'R';\n                                }\n                                else {\n                                    entry.status = 'M';\n                                }\n                            }\n\n                            while (true) {\n                                next = lines.next();\n                                if (next.done || next.value === '</f>') break;\n                            }\n                            break;\n                        }\n                        else {\n                            entry.status = line[0] as GitFileStatus;\n                            entry.fileName = line.substring(1);\n                            this.parseFileName(entry);\n                        }\n                    }\n\n                    if (entry.files !== undefined) {\n                        entry.fileName = Arrays.filterMap(entry.files, f => (f.fileName ? f.fileName : undefined)).join(\n                            ', '\n                        );\n                    }\n\n                    if (first && repoPath === undefined && type === GitCommitType.File && fileName !== undefined) {\n                        // Try to get the repoPath from the most recent commit\n                        repoPath = Strings.normalizePath(\n                            fileName.replace(\n                                fileName.startsWith(slash) ? `/${entry.fileName}` : entry.fileName!,\n                                emptyStr\n                            )\n                        );\n                        relativeFileName = Strings.normalizePath(paths.relative(repoPath, fileName));\n                    }\n                    else {\n                        relativeFileName = entry.fileName!;\n                    }\n                    first = false;\n\n                    const commit = commits.get(entry.ref!);\n                    if (commit === undefined) {\n                        i++;\n                    }\n                    else if (truncationCount) {\n                        // Since this matches an existing commit it will be skipped, so reduce our truncationCount to ensure accurate truncation detection\n                        truncationCount--;\n                    }\n\n                    recentCommit = GitLogParser.parseEntry(\n                        entry,\n                        commit,\n                        type,\n                        repoPath,\n                        relativeFileName,\n                        commits,\n                        authors,\n                        recentCommit,\n                        currentUser\n                    );\n\n                    break;\n                }\n            }\n        }\n\n        const log: GitLog = {\n            repoPath: repoPath!,\n            authors: authors,\n            commits: commits,\n            sha: sha,\n            count: i,\n            maxCount: maxCount,\n            range: range,\n            truncated: Boolean(truncationCount && i >= truncationCount && truncationCount !== 1)\n        };\n        return log;\n    }\n\n    private static parseEntry(\n        entry: LogEntry,\n        commit: GitLogCommit | undefined,\n        type: GitCommitType,\n        repoPath: string | undefined,\n        relativeFileName: string,\n        commits: Map<string, GitLogCommit>,\n        authors: Map<string, GitAuthor>,\n        recentCommit: GitLogCommit | undefined,\n        currentUser: { name?: string; email?: string } | undefined\n    ): GitLogCommit | undefined {\n        if (commit === undefined) {\n            if (entry.author !== undefined) {\n                if (\n                    currentUser !== undefined &&\n                    // Name or e-mail is configured\n                    (currentUser.name !== undefined || currentUser.email !== undefined) &&\n                    // Match on name if configured\n                    (currentUser.name === undefined || currentUser.name === entry.author) &&\n                    // Match on email if configured\n                    (currentUser.email === undefined || currentUser.email === entry.email)\n                ) {\n                    entry.author = 'You';\n                }\n\n                let author = authors.get(entry.author);\n                if (author === undefined) {\n                    author = {\n                        name: entry.author,\n                        lineCount: 0\n                    };\n                    authors.set(entry.author, author);\n                }\n            }\n\n            const originalFileName = relativeFileName !== entry.fileName ? entry.fileName : undefined;\n            if (type === GitCommitType.File) {\n                entry.files = [\n                    {\n                        status: entry.status!,\n                        fileName: relativeFileName,\n                        originalFileName: originalFileName\n                    }\n                ];\n            }\n\n            commit = new GitLogCommit(\n                type,\n                repoPath!,\n                entry.ref!,\n                entry.author!,\n                entry.email,\n                new Date((entry.date! as any) * 1000),\n                new Date((entry.committedDate! as any) * 1000),\n                entry.summary === undefined ? emptyStr : entry.summary,\n                relativeFileName,\n                entry.files || [],\n                entry.status,\n                originalFileName,\n                `${entry.ref!}^`,\n                undefined,\n                entry.parentShas!\n            );\n\n            commits.set(entry.ref!, commit);\n        }\n        // else {\n        //     Logger.log(`merge commit? ${entry.sha}`);\n        // }\n\n        if (recentCommit !== undefined) {\n            // If the commit sha's match (merge commit), just forward it along\n            commit.nextSha = commit.sha !== recentCommit.sha ? recentCommit.sha : recentCommit.nextSha;\n\n            // Only add a filename if this is a file log\n            if (type === GitCommitType.File) {\n                recentCommit.previousFileName = commit.originalFileName || commit.fileName;\n                commit.nextFileName = recentCommit.originalFileName || recentCommit.fileName;\n            }\n        }\n        return commit;\n    }\n\n    static parseFileName(entry: { fileName?: string; originalFileName?: string }) {\n        if (entry.fileName === undefined) return;\n\n        const index = entry.fileName.indexOf('\\t') + 1;\n        if (index > 0) {\n            const next = entry.fileName.indexOf('\\t', index) + 1;\n            if (next > 0) {\n                entry.originalFileName = entry.fileName.substring(index, next - 1);\n                entry.fileName = entry.fileName.substring(next);\n            }\n            else {\n                entry.fileName = entry.fileName.substring(index);\n            }\n        }\n    }\n}\n","'use strict';\nimport { GitRemoteType } from '../models/remote';\nimport { RemoteProvider } from '../remotes/factory';\nimport { GitRemote } from '../git';\n\nconst emptyStr = '';\n\nconst remoteRegex = /^(.*)\\t(.*)\\s\\((.*)\\)$/gm;\nconst urlRegex = /^(?:(git:\\/\\/)(.*?)\\/|(https?:\\/\\/)(?:.*?@)?(.*?)\\/|git@(.*):|(ssh:\\/\\/)(?:.*@)?(.*?)(?::.*?)?(?:\\/|(?=~))|(?:.*?@)(.*?):)(.*)$/;\n\n// Test git urls\n/*\nhttp://host.xz/user/project.git\nhttp://host.xz/path/to/repo.git\nhttp://host.xz/path/to/repo.git/\nhttp://username@host.xz/user/project.git\nhttp://username:password@host.xz/user/project.git\nhttps://host.xz/user/project.git\nhttps://host.xz/path/to/repo.git\nhttps://host.xz/path/to/repo.git/\nhttps://username@host.xz/user/project.git\nhttps://username:password@host.xz/user/project.git\n\ngit@host.xz:user/project.git\ngit://host.xz/path/to/repo.git/\ngit://host.xz/~user/path/to/repo.git/\n\nssh://host.xz/project.git\nssh://host.xz/path/to/repo.git\nssh://host.xz/path/to/repo.git/\nssh://host.xz:~project.git\nssh://host.xz:port/path/to/repo.git/\nssh://user@host.xz/project.git\nssh://user@host.xz/path/to/repo.git\nssh://user@host.xz/path/to/repo.git/\nssh://user@host.xz:port/path/to/repo.git/\nssh://user:password@host.xz/project.git\nssh://user:password@host.xz/path/to/repo.git\nssh://user:password@host.xz/path/to/repo.git/\n\nuser@host.xz:project.git\nuser@host.xz:path/to/repo.git\nuser@host.xz:/path/to/repo.git/\nuser:password@host.xz:project.git\nuser:password@host.xz:/path/to/repo.git\nuser:password@host.xz:/path/to/repo.git/\n*/\n\nexport class GitRemoteParser {\n    static parse(\n        data: string,\n        repoPath: string,\n        providerFactory: (domain: string, path: string) => RemoteProvider | undefined\n    ): GitRemote[] {\n        if (!data) return [];\n\n        const remotes: GitRemote[] = [];\n        const groups = Object.create(null);\n\n        let url: string;\n        let scheme: string;\n        let domain: string;\n        let path: string;\n        let uniqueness: string;\n        let remote: GitRemote | undefined;\n        let match: RegExpExecArray | null = null;\n        do {\n            match = remoteRegex.exec(data);\n            if (match == null) break;\n\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            url = ` ${match[2]}`.substr(1);\n\n            [scheme, domain, path] = this.parseGitUrl(url);\n\n            uniqueness = `${domain}/${path}`;\n            remote = groups[uniqueness];\n            if (remote === undefined) {\n                const provider = providerFactory(domain, path);\n\n                remote = new GitRemote(\n                    repoPath,\n                    uniqueness,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${match[1]}`.substr(1),\n                    scheme,\n                    provider !== undefined ? provider.domain : domain,\n                    provider !== undefined ? provider.path : path,\n                    provider,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    [{ url: url, type: ` ${match[3]}`.substr(1) as GitRemoteType }]\n                );\n                remotes.push(remote);\n                groups[uniqueness] = remote;\n            }\n            else {\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                remote.types.push({ url: url, type: ` ${match[3]}`.substr(1) as GitRemoteType });\n            }\n        } while (match != null);\n\n        if (!remotes.length) return [];\n\n        return remotes;\n    }\n\n    static parseGitUrl(url: string): [string, string, string] {\n        const match = urlRegex.exec(url);\n        if (match == null) return [emptyStr, emptyStr, emptyStr];\n\n        return [\n            match[1] || match[3] || match[6],\n            match[2] || match[4] || match[5] || match[7] || match[8],\n            match[9].replace(/\\.git\\/?$/, emptyStr)\n        ];\n    }\n}\n","'use strict';\nimport { GitContributor, GitShortLog } from '../git';\n\nconst shortlogRegex = /^(.*?)\\t(.*?) <(.*?)>$/gm;\n\nexport class GitShortLogParser {\n    static parse(data: string, repoPath: string): GitShortLog | undefined {\n        if (!data) return undefined;\n\n        const contributors: GitContributor[] = [];\n\n        let count;\n        let name;\n        let email;\n        let match: RegExpExecArray | null = null;\n        do {\n            match = shortlogRegex.exec(data);\n            if (match == null) break;\n\n            [, count, name, email] = match;\n            contributors.push(\n                new GitContributor(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${email}`.substr(1),\n                    parseInt(count, 10)\n                )\n            );\n        } while (match != null);\n\n        if (!contributors.length) return undefined;\n\n        return { repoPath: repoPath, contributors: contributors };\n    }\n}\n","'use strict';\nimport { Arrays, Strings } from '../../system';\nimport { GitCommitType, GitFile, GitFileStatus, GitLogParser, GitStash, GitStashCommit } from '../git';\n// import { Logger } from './logger';\n\nconst emptyStr = '';\n\ninterface StashEntry {\n    ref?: string;\n    date?: string;\n    committedDate?: string;\n    fileNames?: string;\n    files?: GitFile[];\n    summary?: string;\n    stashName?: string;\n}\n\nconst emptyEntry: StashEntry = {};\n\nexport class GitStashParser {\n    static parse(data: string, repoPath: string): GitStash | undefined {\n        if (!data) return undefined;\n\n        const lines = Strings.lines(`${data}</f>`);\n        // Skip the first line since it will always be </f>\n        let next = lines.next();\n        if (next.done) return undefined;\n\n        if (repoPath !== undefined) {\n            repoPath = Strings.normalizePath(repoPath);\n        }\n\n        const commits: Map<string, GitStashCommit> = new Map();\n\n        let entry: StashEntry = emptyEntry;\n        let line: string | undefined = undefined;\n        let token: number;\n\n        while (true) {\n            next = lines.next();\n            if (next.done) break;\n\n            line = next.value;\n\n            // <<1-char token>> <data>\n            // e.g. <r> bd1452a2dc\n            token = line.charCodeAt(1);\n\n            switch (token) {\n                case 114: // 'r': // ref\n                    entry = {\n                        ref: line.substring(4)\n                    };\n                    break;\n\n                case 100: // 'd': // author-date\n                    entry.date = line.substring(4);\n                    break;\n\n                case 99: // 'c': // committer-date\n                    entry.committedDate = line.substring(4);\n                    break;\n\n                case 108: // 'l': // reflog-selector\n                    entry.stashName = line.substring(4);\n                    break;\n\n                case 115: // 's': // summary\n                    while (true) {\n                        next = lines.next();\n                        if (next.done) break;\n\n                        line = next.value;\n                        if (line === '</s>') break;\n\n                        if (entry.summary === undefined) {\n                            entry.summary = line;\n                        }\n                        else {\n                            entry.summary += `\\n${line}`;\n                        }\n                    }\n\n                    // Remove the trailing newline\n                    if (entry.summary != null && entry.summary.charCodeAt(entry.summary.length - 1) === 10) {\n                        entry.summary = entry.summary.slice(0, -1);\n                    }\n                    break;\n\n                case 102: // 'f': // files\n                    // Skip the blank line git adds before the files\n                    next = lines.next();\n                    if (!next.done && next.value !== '</f>') {\n                        while (true) {\n                            next = lines.next();\n                            if (next.done) break;\n\n                            line = next.value;\n                            if (line === '</f>') break;\n\n                            if (line.startsWith('warning:')) continue;\n\n                            const status = {\n                                status: line[0] as GitFileStatus,\n                                fileName: line.substring(1),\n                                originalFileName: undefined\n                            };\n                            GitLogParser.parseFileName(status);\n\n                            if (status.fileName) {\n                                if (entry.files === undefined) {\n                                    entry.files = [];\n                                }\n                                entry.files.push(status);\n                            }\n                        }\n\n                        if (entry.files !== undefined) {\n                            entry.fileNames = Arrays.filterMap(entry.files, f =>\n                                f.fileName ? f.fileName : undefined\n                            ).join(', ');\n                        }\n                    }\n\n                    GitStashParser.parseEntry(entry, repoPath, commits);\n            }\n        }\n\n        const stash: GitStash = {\n            repoPath: repoPath,\n            commits: commits\n        };\n        return stash;\n    }\n\n    private static parseEntry(entry: StashEntry, repoPath: string, commits: Map<string, GitStashCommit>) {\n        let commit = commits.get(entry.ref!);\n        if (commit === undefined) {\n            commit = new GitStashCommit(\n                GitCommitType.Stash,\n                entry.stashName!,\n                repoPath,\n                entry.ref!,\n                new Date((entry.date! as any) * 1000),\n                new Date((entry.committedDate! as any) * 1000),\n                entry.summary === undefined ? emptyStr : entry.summary,\n                entry.fileNames!,\n                entry.files || []\n            );\n        }\n\n        commits.set(entry.ref!, commit);\n    }\n}\n","'use strict';\nimport { Strings } from '../../system';\nimport { GitFileStatus, GitStatus, GitStatusFile } from '../git';\n\nconst emptyStr = '';\n\nconst aheadStatusV1Regex = /(?:ahead ([0-9]+))/;\nconst behindStatusV1Regex = /(?:behind ([0-9]+))/;\n\nexport class GitStatusParser {\n    static parse(data: string, repoPath: string, porcelainVersion: number): GitStatus | undefined {\n        if (!data) return undefined;\n\n        const lines = data.split('\\n').filter(Boolean);\n        if (lines.length === 0) return undefined;\n\n        if (porcelainVersion < 2) return this.parseV1(lines, repoPath);\n\n        return this.parseV2(lines, repoPath);\n    }\n\n    private static parseV1(lines: string[], repoPath: string): GitStatus {\n        let branch: string | undefined;\n        const files = [];\n        const state = {\n            ahead: 0,\n            behind: 0\n        };\n        let upstream;\n\n        let position = -1;\n        while (++position < lines.length) {\n            const line = lines[position];\n            // Header\n            if (line.startsWith('##')) {\n                const lineParts = line.split(' ');\n                [branch, upstream] = lineParts[1].split('...');\n                if (lineParts.length > 2) {\n                    const upstreamStatus = lineParts.slice(2).join(' ');\n\n                    const aheadStatus = aheadStatusV1Regex.exec(upstreamStatus);\n                    state.ahead = aheadStatus == null ? 0 : Number(aheadStatus[1]) || 0;\n\n                    const behindStatus = behindStatusV1Regex.exec(upstreamStatus);\n                    state.behind = behindStatus == null ? 0 : Number(behindStatus[1]) || 0;\n                }\n            }\n            else {\n                const rawStatus = line.substring(0, 2);\n                const fileName = line.substring(3);\n                if (rawStatus[0] === 'R') {\n                    const [file1, file2] = fileName.replace(/\"/g, emptyStr).split('->');\n                    files.push(this.parseStatusFile(repoPath, rawStatus, file2.trim(), file1.trim()));\n                }\n                else {\n                    files.push(this.parseStatusFile(repoPath, rawStatus, fileName));\n                }\n            }\n        }\n\n        return new GitStatus(Strings.normalizePath(repoPath), branch || emptyStr, emptyStr, files, state, upstream);\n    }\n\n    private static parseV2(lines: string[], repoPath: string): GitStatus {\n        let branch: string | undefined;\n        const files = [];\n        let sha: string | undefined;\n        const state = {\n            ahead: 0,\n            behind: 0\n        };\n        let upstream;\n\n        let position = -1;\n        while (++position < lines.length) {\n            const line = lines[position];\n            // Headers\n            if (line.startsWith('#')) {\n                const lineParts = line.split(' ');\n                switch (lineParts[1]) {\n                    case 'branch.oid':\n                        sha = lineParts[2];\n                        break;\n                    case 'branch.head':\n                        branch = lineParts[2];\n                        break;\n                    case 'branch.upstream':\n                        upstream = lineParts[2];\n                        break;\n                    case 'branch.ab':\n                        state.ahead = Number(lineParts[2].substring(1));\n                        state.behind = Number(lineParts[3].substring(1));\n                        break;\n                }\n            }\n            else {\n                const lineParts = line.split(' ');\n                switch (lineParts[0][0]) {\n                    case '1': // normal\n                        files.push(this.parseStatusFile(repoPath, lineParts[1], lineParts.slice(8).join(' ')));\n                        break;\n                    case '2': {\n                        // rename\n                        const file = lineParts\n                            .slice(9)\n                            .join(' ')\n                            .split('\\t');\n                        files.push(this.parseStatusFile(repoPath, lineParts[1], file[0], file[1]));\n                        break;\n                    }\n                    case 'u': // unmerged\n                        files.push(this.parseStatusFile(repoPath, lineParts[1], lineParts.slice(10).join(' ')));\n                        break;\n                    case '?': // untracked\n                        files.push(this.parseStatusFile(repoPath, ' ?', lineParts.slice(1).join(' ')));\n                        break;\n                }\n            }\n        }\n\n        return new GitStatus(\n            Strings.normalizePath(repoPath),\n            branch || emptyStr,\n            sha || emptyStr,\n            files,\n            state,\n            upstream\n        );\n    }\n\n    static parseStatusFile(\n        repoPath: string,\n        rawStatus: string,\n        fileName: string,\n        originalFileName?: string\n    ): GitStatusFile {\n        let indexStatus = rawStatus[0] !== '.' ? rawStatus[0].trim() : undefined;\n        if (indexStatus == null || indexStatus.length === 0) {\n            indexStatus = undefined;\n        }\n\n        let workTreeStatus = undefined;\n        if (rawStatus.length > 1) {\n            workTreeStatus = rawStatus[1] !== '.' ? rawStatus[1].trim() : undefined;\n            if (workTreeStatus == null || workTreeStatus.length === 0) {\n                workTreeStatus = undefined;\n            }\n        }\n\n        return new GitStatusFile(\n            repoPath,\n            indexStatus as GitFileStatus | undefined,\n            workTreeStatus as GitFileStatus | undefined,\n            fileName,\n            originalFileName\n        );\n    }\n}\n","'use strict';\nimport { GitTag } from '../git';\n\nconst tagWithRefRegex = /([0-9,a-f]+)\\srefs\\/tags\\/(.*)/gm;\nconst tagWithAnnotationRegex = /^(.+?)(?:$|(?:\\s+)(.*)$)/gm;\n\nexport class GitTagParser {\n    static parse(data: string, repoPath: string): GitTag[] | undefined {\n        if (!data) return undefined;\n\n        const tags: GitTag[] = [];\n\n        let annotation;\n        let name;\n        let match: RegExpExecArray | null = null;\n        do {\n            match = tagWithAnnotationRegex.exec(data);\n            if (match == null) break;\n\n            [, name, annotation] = match;\n            tags.push(\n                new GitTag(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    undefined,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    annotation === undefined ? undefined : ` ${annotation}`.substr(1)\n                )\n            );\n        } while (match != null);\n\n        if (!tags.length) return undefined;\n\n        return tags;\n    }\n\n    static parseWithRef(data: string, repoPath: string): GitTag[] | undefined {\n        if (!data) return undefined;\n\n        const tags: GitTag[] = [];\n\n        let name;\n        let sha;\n        let match: RegExpExecArray | null = null;\n        do {\n            match = tagWithRefRegex.exec(data);\n            if (match == null) break;\n\n            [, sha, name] = match;\n            tags.push(\n                new GitTag(\n                    repoPath,\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${name}`.substr(1),\n                    // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    ` ${sha}`.substr(1)\n                )\n            );\n        } while (match != null);\n\n        if (!tags.length) return undefined;\n\n        return tags;\n    }\n}\n","'use strict';\nimport { GitTree } from '../git';\n\nconst emptyStr = '';\nconst treeRegex = /(?:.+?)\\s+(.+?)\\s+(.+?)\\s+(.+?)\\s+(.+)/gm;\n\nexport class GitTreeParser {\n    static parse(data: string | undefined): GitTree[] | undefined {\n        if (!data) return undefined;\n\n        const trees: GitTree[] = [];\n\n        let match: RegExpExecArray | null = null;\n        do {\n            match = treeRegex.exec(data);\n            if (match == null) break;\n\n            const [, type, commitSha, size, filePath] = match;\n            trees.push({\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                commitSha: commitSha === undefined ? emptyStr : ` ${commitSha}`.substr(1),\n                path: filePath === undefined ? emptyStr : filePath,\n                size: size === '-' ? 0 : Number(size || 0),\n                // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                type: (type === undefined ? emptyStr : ` ${type}`.substr(1)) as 'blob' | 'tree'\n            });\n        } while (match != null);\n\n        if (!trees.length) return undefined;\n\n        return trees;\n    }\n}\n","'use strict';\n/* eslint-disable @typescript-eslint/camelcase */\nimport * as paths from 'path';\nimport * as iconv from 'iconv-lite';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Objects, Strings } from '../system';\nimport { findGitPath, GitLocation } from './locator';\nimport { run, RunOptions } from './shell';\n\nexport { GitLocation } from './locator';\nexport * from './models/models';\nexport * from './parsers/parsers';\nexport * from './remotes/provider';\n\nconst emptyArray = (Object.freeze([]) as any) as any[];\nconst emptyObj = Object.freeze({});\nconst emptyStr = '';\nconst slash = '/';\n\n// This is a root sha of all git repo's if using sha1\nconst rootSha = '4b825dc642cb6eb9a060e54bf8d69288fbee4904';\n\nconst defaultBlameParams = ['blame', '--root', '--incremental'];\n\n// Using %x00 codes because some shells seem to try to expand things if not\nconst lb = '%x3c'; // `%x${'<'.charCodeAt(0).toString(16)}`;\nconst rb = '%x3e'; // `%x${'>'.charCodeAt(0).toString(16)}`;\nconst sl = '%x2f'; // `%x${'/'.charCodeAt(0).toString(16)}`;\nconst sp = '%x20'; // `%x${' '.charCodeAt(0).toString(16)}`;\n\nconst logFormat = [\n    `${lb}${sl}f${rb}`,\n    `${lb}r${rb}${sp}%H`, // ref\n    `${lb}a${rb}${sp}%aN`, // author\n    `${lb}e${rb}${sp}%aE`, // email\n    `${lb}d${rb}${sp}%at`, // date\n    `${lb}c${rb}${sp}%ct`, // committed date\n    `${lb}p${rb}${sp}%P`, // parents\n    `${lb}s${rb}`,\n    '%B', // summary\n    `${lb}${sl}s${rb}`,\n    `${lb}f${rb}`\n].join('%n');\n\nconst defaultLogParams = ['log', '--name-status', `--format=${logFormat}`];\n\nconst stashFormat = [\n    `${lb}${sl}f${rb}`,\n    `${lb}r${rb}${sp}%H`, // ref\n    `${lb}d${rb}${sp}%at`, // date\n    `${lb}c${rb}${sp}%ct`, // committed date\n    `${lb}l${rb}${sp}%gd`, // reflog-selector\n    `${lb}s${rb}`,\n    '%B', // summary\n    `${lb}${sl}s${rb}`,\n    `${lb}f${rb}`\n].join('%n');\n\nconst defaultStashParams = ['stash', 'list', '--name-status', '-M', `--format=${stashFormat}`];\n\nconst GitErrors = {\n    badRevision: /bad revision '(.*?)'/i,\n    notAValidObjectName: /Not a valid object name/i\n};\n\nconst GitWarnings = {\n    notARepository: /Not a git repository/i,\n    outsideRepository: /is outside repository/i,\n    noPath: /no such path/i,\n    noCommits: /does not have any commits/i,\n    notFound: /Path '.*?' does not exist in/i,\n    foundButNotInRevision: /Path '.*?' exists on disk, but not in/i,\n    headNotABranch: /HEAD does not point to a branch/i,\n    noUpstream: /no upstream configured for branch '(.*?)'/i,\n    unknownRevision: /ambiguous argument '.*?': unknown revision or path not in the working tree|not stored as a remote-tracking branch/i,\n    mustRunInWorkTree: /this operation must be run in a work tree/i,\n    patchWithConflicts: /Applied patch to '.*?' with conflicts/i,\n    noRemoteRepositorySpecified: /No remote repository specified\\./i,\n    remoteConnectionError: /Could not read from remote repository/i,\n    notAGitCommand: /'.+' is not a git command/i\n};\n\nexport enum GitErrorHandling {\n    Ignore = 'ignore',\n    Throw = 'throw'\n}\n\nexport interface GitCommandOptions extends RunOptions {\n    configs?: string[];\n    readonly correlationKey?: string;\n    errors?: GitErrorHandling;\n    // Specifies that this command should always be executed locally if possible\n    local?: boolean;\n}\n\n// A map of running git commands -- avoids running duplicate overlaping commands\nconst pendingCommands: Map<string, Promise<string | Buffer>> = new Map();\n\nexport async function git<TOut extends string | Buffer>(options: GitCommandOptions, ...args: any[]): Promise<TOut> {\n    if (Container.vsls.isMaybeGuest) {\n        if (options.local !== true) {\n            const guest = await Container.vsls.guest();\n            if (guest !== undefined) {\n                return guest.git<TOut>(options, ...args);\n            }\n        }\n        else {\n            // Since we will have a live share path here, just blank it out\n            options.cwd = emptyStr;\n        }\n    }\n\n    const start = process.hrtime();\n\n    const { configs, correlationKey, errors: errorHandling, ...opts } = options;\n\n    const encoding = options.encoding || 'utf8';\n    const runOpts: RunOptions = {\n        ...opts,\n        encoding: encoding === 'utf8' ? 'utf8' : encoding === 'buffer' ? 'buffer' : 'binary',\n        // Adds GCM environment variables to avoid any possible credential issues -- from https://github.com/Microsoft/vscode/issues/26573#issuecomment-338686581\n        // Shouldn't *really* be needed but better safe than sorry\n        env: {\n            ...process.env,\n            ...(options.env || emptyObj),\n            GCM_INTERACTIVE: 'NEVER',\n            GCM_PRESERVE_CREDS: 'TRUE',\n            LC_ALL: 'C'\n        }\n    };\n\n    const gitCommand = `[${runOpts.cwd}] git ${args.join(' ')}`;\n\n    const command = `${correlationKey !== undefined ? `${correlationKey}:` : emptyStr}${gitCommand}`;\n\n    let waiting;\n    let promise = pendingCommands.get(command);\n    if (promise === undefined) {\n        waiting = false;\n\n        // Fixes https://github.com/eamodio/vscode-gitlens/issues/73 & https://github.com/eamodio/vscode-gitlens/issues/161\n        // See https://stackoverflow.com/questions/4144417/how-to-handle-asian-characters-in-file-names-in-git-on-os-x\n        args.splice(\n            0,\n            0,\n            '-c',\n            'core.quotepath=false',\n            '-c',\n            'color.ui=false',\n            ...(configs !== undefined ? configs : emptyArray)\n        );\n\n        promise = run<TOut>(gitInfo.path, args, encoding, runOpts);\n\n        pendingCommands.set(command, promise);\n    }\n    else {\n        waiting = true;\n    }\n\n    let exception: Error | undefined;\n    try {\n        return (await promise) as TOut;\n    }\n    catch (ex) {\n        exception = ex;\n\n        switch (errorHandling) {\n            case GitErrorHandling.Ignore:\n                exception = undefined;\n                return emptyStr as TOut;\n\n            case GitErrorHandling.Throw:\n                throw ex;\n\n            default: {\n                const result = defaultExceptionHandler(ex, options, ...args);\n                exception = undefined;\n                return result as TOut;\n            }\n        }\n    }\n    finally {\n        pendingCommands.delete(command);\n\n        const duration = `${Strings.getDurationMilliseconds(start)} ms ${waiting ? '(await) ' : emptyStr}`;\n        Logger.log(\n            `${gitCommand} ${GlyphChars.Dot} ${\n                exception !== undefined\n                    ? `FAILED(${(exception.message || emptyStr).trim().split('\\n', 1)[0]}) `\n                    : emptyStr\n            }${duration}`\n        );\n        Logger.logGitCommand(\n            `${gitCommand} ${GlyphChars.Dot} ${exception !== undefined ? 'FAILED ' : emptyStr}${duration}`,\n            exception\n        );\n    }\n}\n\nfunction defaultExceptionHandler(ex: Error, options: GitCommandOptions, ...args: any[]): string {\n    const msg = ex && ex.toString();\n    if (msg) {\n        for (const warning of Objects.values(GitWarnings)) {\n            if (warning.test(msg)) {\n                Logger.warn('git', ...args, `  cwd='${options.cwd}'\\n\\n  `, msg.replace(/\\r?\\n|\\r/g, ' '));\n                return emptyStr;\n            }\n        }\n    }\n\n    const match = GitErrors.badRevision.exec(msg);\n    if (match != null && match) {\n        const [, ref] = match;\n\n        // Since looking up a ref with ^3 (e.g. looking for untracked files in a stash) can error on some versions of git just ignore it\n        if (ref != null && ref.endsWith('^3')) return emptyStr;\n    }\n\n    Logger.error(ex, 'git', ...args, `  cwd='${options.cwd}'\\n\\n  `);\n    throw ex;\n}\n\nlet gitInfo: GitLocation;\n\nexport class Git {\n    static deletedOrMissingSha = '0000000000000000000000000000000000000000-';\n    static shaLikeRegex = /(^[0-9a-f]{40}([\\^@~:]\\S*)?$)|(^[0]{40}(:|-)$)/;\n    static shaRegex = /(^[0-9a-f]{40}$)|(^[0]{40}(:|-)$)/;\n    static shaShortenRegex = /^(.*?)([\\^@~:].*)?$/;\n    static stagedUncommittedRegex = /^[0]{40}([\\^@~]\\S*)?:$/;\n    static stagedUncommittedSha = '0000000000000000000000000000000000000000:';\n    static uncommittedRegex = /^[0]{40}(?:[\\^@~:]\\S*)?:?$/;\n    static uncommittedSha = '0000000000000000000000000000000000000000';\n\n    static getEncoding(encoding: string | undefined) {\n        return encoding !== undefined && iconv.encodingExists(encoding) ? encoding : 'utf8';\n    }\n\n    static getGitPath(): string {\n        return gitInfo.path;\n    }\n\n    static getGitVersion(): string {\n        return gitInfo.version;\n    }\n\n    static async setOrFindGitPath(gitPath?: string): Promise<void> {\n        const start = process.hrtime();\n\n        gitInfo = await findGitPath(gitPath);\n\n        Logger.log(\n            `Git found: ${gitInfo.version} @ ${gitInfo.path === 'git' ? 'PATH' : gitInfo.path} ${\n                GlyphChars.Dot\n            } ${Strings.getDurationMilliseconds(start)} ms`\n        );\n    }\n\n    static isSha(ref: string) {\n        return Git.shaRegex.test(ref);\n    }\n\n    static isShaLike(ref: string) {\n        return Git.shaLikeRegex.test(ref);\n    }\n\n    static isStagedUncommitted(ref: string | undefined): boolean {\n        return ref ? Git.stagedUncommittedRegex.test(ref) : false;\n    }\n\n    static isUncommitted(ref: string | undefined) {\n        return ref ? Git.uncommittedRegex.test(ref) : false;\n    }\n\n    static shortenSha(\n        ref: string,\n        strings: { stagedUncommitted?: string; uncommitted?: string; working?: string } = {}\n    ) {\n        strings = { stagedUncommitted: 'Index', uncommitted: 'Working Tree', working: emptyStr, ...strings };\n\n        if (ref == null || ref.length === 0) return strings.working;\n        if (Git.isUncommitted(ref)) {\n            if (Git.isStagedUncommitted(ref)) return strings.stagedUncommitted;\n\n            return strings.uncommitted;\n        }\n\n        // Don't allow shas to be shortened to less than 5 characters\n        const len = Math.max(5, Container.config.advanced.abbreviatedShaLength);\n\n        // If we have a suffix, append it\n        const match = Git.shaShortenRegex.exec(ref);\n        if (match != null) {\n            const [, rev, suffix] = match;\n\n            if (suffix != null) {\n                return `${rev.substr(0, len)}${suffix}`;\n            }\n        }\n\n        return ref.substr(0, len);\n    }\n\n    static splitPath(fileName: string, repoPath: string | undefined, extract: boolean = true): [string, string] {\n        if (repoPath) {\n            fileName = Strings.normalizePath(fileName);\n            repoPath = Strings.normalizePath(repoPath);\n\n            const normalizedRepoPath = (repoPath.endsWith(slash) ? repoPath : `${repoPath}/`).toLowerCase();\n            if (fileName.toLowerCase().startsWith(normalizedRepoPath)) {\n                fileName = fileName.substring(normalizedRepoPath.length);\n            }\n        }\n        else {\n            repoPath = Strings.normalizePath(extract ? paths.dirname(fileName) : repoPath!);\n            fileName = Strings.normalizePath(extract ? paths.basename(fileName) : fileName);\n        }\n\n        return [fileName, repoPath];\n    }\n\n    static validateVersion(major: number, minor: number): boolean {\n        const [gitMajor, gitMinor] = gitInfo.version.split('.');\n        return parseInt(gitMajor, 10) >= major && parseInt(gitMinor, 10) >= minor;\n    }\n\n    // Git commands\n\n    static add(repoPath: string | undefined, pathspec: string) {\n        return git<string>({ cwd: repoPath }, 'add', '-A', '--', pathspec);\n    }\n\n    static apply(repoPath: string | undefined, patch: string, options: { allowConflicts?: boolean } = {}) {\n        const params = ['apply', '--whitespace=warn'];\n        if (options.allowConflicts) {\n            params.push('-3');\n        }\n        return git<string>({ cwd: repoPath, stdin: patch }, ...params);\n    }\n\n    static async blame(\n        repoPath: string | undefined,\n        fileName: string,\n        ref?: string,\n        options: { args?: string[] | null; ignoreWhitespace?: boolean; startLine?: number; endLine?: number } = {}\n    ) {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = [...defaultBlameParams];\n\n        if (options.ignoreWhitespace) {\n            params.push('-w');\n        }\n        if (options.startLine != null && options.endLine != null) {\n            params.push(`-L ${options.startLine},${options.endLine}`);\n        }\n        if (options.args != null) {\n            params.push(...options.args);\n        }\n\n        let stdin;\n        if (ref) {\n            if (Git.isStagedUncommitted(ref)) {\n                // Pipe the blame contents to stdin\n                params.push('--contents', '-');\n\n                // Get the file contents for the staged version using `:`\n                stdin = await Git.show<string>(repoPath, fileName, ':');\n            }\n            else {\n                params.push(ref);\n            }\n        }\n\n        return git<string>({ cwd: root, stdin: stdin }, ...params, '--', file);\n    }\n\n    static blame_contents(\n        repoPath: string | undefined,\n        fileName: string,\n        contents: string,\n        options: {\n            args?: string[] | null;\n            correlationKey?: string;\n            ignoreWhitespace?: boolean;\n            startLine?: number;\n            endLine?: number;\n        } = {}\n    ) {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = [...defaultBlameParams];\n\n        if (options.ignoreWhitespace) {\n            params.push('-w');\n        }\n        if (options.startLine != null && options.endLine != null) {\n            params.push(`-L ${options.startLine},${options.endLine}`);\n        }\n        if (options.args != null) {\n            params.push(...options.args);\n        }\n\n        // Pipe the blame contents to stdin\n        params.push('--contents', '-');\n\n        return git<string>(\n            { cwd: root, stdin: contents, correlationKey: options.correlationKey },\n            ...params,\n            '--',\n            file\n        );\n    }\n\n    static branch(repoPath: string, options: { all: boolean } = { all: false }) {\n        const params = ['branch', '-vv', '--abbrev=40'];\n        if (options.all) {\n            params.push('-a');\n        }\n\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.branch=false'] }, ...params);\n    }\n\n    static branch_contains(repoPath: string, ref: string, options: { remote: boolean } = { remote: false }) {\n        const params = ['branch', '--contains'];\n        if (options.remote) {\n            params.push('-r');\n        }\n\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.branch=false'] }, ...params, ref);\n    }\n\n    static async cat_validate(repoPath: string, ref: string) {\n        if (Git.isUncommitted(ref)) return true;\n\n        try {\n            await git<string>({ cwd: repoPath, errors: GitErrorHandling.Throw }, 'cat-file', '-t', ref);\n            return true;\n        }\n        catch (ex) {\n            return false;\n        }\n    }\n\n    static async cat_file_validate(repoPath: string, fileName: string, ref: string) {\n        if (Git.isUncommitted(ref)) return ref;\n\n        try {\n            await git<string>(\n                { cwd: repoPath, errors: GitErrorHandling.Throw },\n                'cat-file',\n                '-e',\n                `${ref}:./${fileName}`\n            );\n            return ref;\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (GitErrors.notAValidObjectName.test(msg)) {\n                return Git.deletedOrMissingSha;\n            }\n\n            return undefined;\n        }\n    }\n\n    static check_mailmap(repoPath: string, author: string) {\n        return git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore, local: true }, 'check-mailmap', author);\n    }\n\n    static checkout(repoPath: string, ref: string, fileName?: string) {\n        const params = ['checkout', ref, '--'];\n        if (fileName) {\n            [fileName, repoPath] = Git.splitPath(fileName, repoPath);\n\n            params.push(fileName);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static async config_get(key: string, repoPath?: string, options: { local?: boolean } = {}) {\n        const data = await git<string>(\n            { cwd: repoPath || emptyStr, errors: GitErrorHandling.Ignore, local: options.local },\n            'config',\n            '--get',\n            key\n        );\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async config_getRegex(pattern: string, repoPath?: string, options: { local?: boolean } = {}) {\n        const data = await git<string>(\n            { cwd: repoPath || emptyStr, errors: GitErrorHandling.Ignore, local: options.local },\n            'config',\n            '--get-regex',\n            pattern\n        );\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async diff(\n        repoPath: string,\n        fileName: string,\n        ref1?: string,\n        ref2?: string,\n        options: { encoding?: string; filter?: string } = {}\n    ): Promise<string> {\n        const params = ['diff', '-M', '--no-ext-diff', '--minimal'];\n        if (options.filter) {\n            params.push(`--diff-filter=${options.filter}`);\n        }\n\n        if (ref1) {\n            // <sha>^3 signals an untracked file in a stash and if we are trying to find its parent, use the root sha\n            if (ref1.endsWith('^3^')) {\n                ref1 = rootSha;\n            }\n            params.push(Git.isStagedUncommitted(ref1) ? '--staged' : ref1);\n        }\n        if (ref2) {\n            params.push(Git.isStagedUncommitted(ref2) ? '--staged' : ref2);\n        }\n\n        const encoding: BufferEncoding = options.encoding === 'utf8' ? 'utf8' : 'binary';\n\n        try {\n            return await git<string>(\n                { cwd: repoPath, configs: ['-c', 'color.diff=false'], encoding: encoding },\n                ...params,\n                '--',\n                fileName\n            );\n        }\n        catch (ex) {\n            const match = GitErrors.badRevision.exec(ex.message);\n            if (match !== null) {\n                const [, ref] = match;\n\n                // If the bad ref is trying to find a parent ref, assume we hit to the last commit, so try again using the root sha\n                if (ref === ref1 && ref != null && ref.endsWith('^')) {\n                    return Git.diff(repoPath, fileName, rootSha, ref2, options);\n                }\n            }\n\n            throw ex;\n        }\n    }\n\n    static diff_nameStatus(repoPath: string, ref1?: string, ref2?: string, options: { filter?: string } = {}) {\n        const params = ['diff', '--name-status', '-M', '--no-ext-diff'];\n        if (options && options.filter) {\n            params.push(`--diff-filter=${options.filter}`);\n        }\n        if (ref1) {\n            params.push(ref1);\n        }\n        if (ref2) {\n            params.push(ref2);\n        }\n\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.diff=false'] }, ...params);\n    }\n\n    static diff_shortstat(repoPath: string, ref?: string) {\n        const params = ['diff', '--shortstat', '--no-ext-diff'];\n        if (ref) {\n            params.push(ref);\n        }\n        return git<string>({ cwd: repoPath, configs: ['-c', 'color.diff=false'] }, ...params);\n    }\n\n    static difftool_dirDiff(repoPath: string, tool: string, ref1: string, ref2?: string) {\n        const params = ['difftool', '--dir-diff', `--tool=${tool}`, ref1];\n        if (ref2) {\n            params.push(ref2);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static difftool_fileDiff(\n        repoPath: string,\n        fileName: string,\n        tool: string,\n        options: { ref1?: string; ref2?: string; staged?: boolean } = {}\n    ) {\n        const params = ['difftool', '--no-prompt', `--tool=${tool}`];\n        if (options.staged) {\n            params.push('--staged');\n        }\n        if (options.ref1) {\n            params.push(options.ref1);\n        }\n        if (options.ref2) {\n            params.push(options.ref2);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, '--', fileName);\n    }\n\n    static fetch(repoPath: string, options: { all?: boolean; remote?: string } = {}) {\n        const params = ['fetch'];\n        if (options.remote) {\n            params.push(options.remote);\n        }\n        else if (options.all) {\n            params.push('--all');\n        }\n\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static log(repoPath: string, options: { authors?: string[]; maxCount?: number; ref?: string; reverse?: boolean }) {\n        const params = [...defaultLogParams, '--full-history', '-M', '-m'];\n        if (options.authors) {\n            params.push(...options.authors.map(a => `--author=${a}`));\n        }\n        if (options.maxCount && !options.reverse) {\n            params.push(`-n${options.maxCount}`);\n        }\n        if (options.ref && !Git.isStagedUncommitted(options.ref)) {\n            if (options.reverse) {\n                params.push('--reverse', '--ancestry-path', `${options.ref}..HEAD`);\n            }\n            else {\n                params.push(options.ref);\n            }\n        }\n        return git<string>(\n            { cwd: repoPath, configs: ['-c', 'diff.renameLimit=0', '-c', 'log.showSignature=false'] },\n            ...params,\n            '--'\n        );\n    }\n\n    static log_file(\n        repoPath: string,\n        fileName: string,\n        options: {\n            maxCount?: number;\n            ref?: string;\n            renames?: boolean;\n            reverse?: boolean;\n            startLine?: number;\n            endLine?: number;\n        } = { renames: true, reverse: false }\n    ) {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const params = [...defaultLogParams, '-m'];\n        if (options.maxCount && !options.reverse) {\n            params.push(`-n${options.maxCount}`);\n        }\n\n        if (options.renames) {\n            params.push('--follow');\n        }\n\n        if (options.ref && !Git.isStagedUncommitted(options.ref)) {\n            if (options.reverse) {\n                params.push('--reverse', '--ancestry-path', `${options.ref}..HEAD`);\n            }\n            else {\n                params.push(options.ref);\n            }\n        }\n\n        if (options.startLine != null && options.endLine != null) {\n            params.push(`-L ${options.startLine},${options.endLine}:${file}`);\n        }\n\n        return git<string>({ cwd: root }, ...params, '--', file);\n    }\n\n    static async log_recent(repoPath: string, fileName: string) {\n        const data = await git<string>(\n            { cwd: repoPath, errors: GitErrorHandling.Ignore },\n            'log',\n            '-M',\n            '-n1',\n            '--format=%H',\n            '--',\n            fileName\n        );\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static log_search(repoPath: string, search: string[] = emptyArray, options: { maxCount?: number } = {}) {\n        const params = [...defaultLogParams];\n        if (options.maxCount) {\n            params.push(`-n${options.maxCount}`);\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, ...search);\n    }\n\n    static log_shortstat(repoPath: string, options: { ref?: string }) {\n        const params = ['log', '--shortstat', '--oneline'];\n        if (options.ref && !Git.isStagedUncommitted(options.ref)) {\n            params.push(options.ref);\n        }\n        return git<string>({ cwd: repoPath }, ...params, '--');\n    }\n\n    static async ls_files(\n        repoPath: string,\n        fileName: string,\n        options: { ref?: string } = {}\n    ): Promise<string | undefined> {\n        const params = ['ls-files'];\n        if (options.ref && !Git.isUncommitted(options.ref)) {\n            params.push(`--with-tree=${options.ref}`);\n        }\n\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, ...params, '--', fileName);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async ls_tree(repoPath: string, ref: string, options: { fileName?: string } = {}) {\n        const params = ['ls-tree'];\n        if (options.fileName) {\n            params.push('-l', ref, '--', options.fileName);\n        }\n        else {\n            params.push('-lrt', ref, '--');\n        }\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, ...params);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static merge_base(repoPath: string, ref1: string, ref2: string, options: { forkPoint?: boolean } = {}) {\n        const params = ['merge-base'];\n        if (options.forkPoint) {\n            params.push('--fork-point');\n        }\n\n        return git<string>({ cwd: repoPath }, ...params, ref1, ref2);\n    }\n\n    static remote(repoPath: string): Promise<string> {\n        return git<string>({ cwd: repoPath }, 'remote', '-v');\n    }\n\n    static remote_url(repoPath: string, remote: string): Promise<string> {\n        return git<string>({ cwd: repoPath }, 'remote', 'get-url', remote);\n    }\n\n    static reset(repoPath: string | undefined, fileName: string) {\n        return git<string>({ cwd: repoPath }, 'reset', '-q', '--', fileName);\n    }\n\n    static async revparse(repoPath: string, ref: string): Promise<string | undefined> {\n        const data = await git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, 'rev-parse', ref);\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static async revparse_currentBranch(repoPath: string): Promise<[string, string | undefined] | undefined> {\n        const params = ['rev-parse', '--abbrev-ref', '--symbolic-full-name', '@', '@{u}'];\n\n        const opts: GitCommandOptions = {\n            cwd: repoPath,\n            errors: GitErrorHandling.Throw\n        };\n\n        try {\n            const data = await git<string>(opts, ...params);\n            return [data, undefined];\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (GitWarnings.headNotABranch.test(msg)) {\n                const data = await git<string>(\n                    { ...opts, errors: GitErrorHandling.Ignore },\n                    'log',\n                    '-n1',\n                    '--format=%H',\n                    '--'\n                );\n                if (data.length === 0) return undefined;\n\n                // Matches output of `git branch -vv`\n                const sha = data.trim();\n                return [`(HEAD detached at ${this.shortenSha(sha)})`, sha];\n            }\n\n            const result = GitWarnings.noUpstream.exec(msg);\n            if (result !== null) return [result[1], undefined];\n\n            if (GitWarnings.unknownRevision.test(msg)) {\n                const data = await git<string>(\n                    { ...opts, errors: GitErrorHandling.Ignore },\n                    'symbolic-ref',\n                    '-q',\n                    '--short',\n                    'HEAD'\n                );\n                return data.length === 0 ? undefined : [data.trim(), undefined];\n            }\n\n            defaultExceptionHandler(ex, opts, ...params);\n            return undefined;\n        }\n    }\n\n    static async revparse_toplevel(cwd: string): Promise<string | undefined> {\n        const data = await git<string>({ cwd: cwd, errors: GitErrorHandling.Ignore }, 'rev-parse', '--show-toplevel');\n        return data.length === 0 ? undefined : data.trim();\n    }\n\n    static shortlog(repoPath: string) {\n        return git<string>({ cwd: repoPath }, 'shortlog', '-sne', '--all', '--no-merges');\n    }\n\n    static async show<TOut extends string | Buffer>(\n        repoPath: string | undefined,\n        fileName: string,\n        ref: string,\n        options: {\n            encoding?: 'binary' | 'ascii' | 'utf8' | 'utf16le' | 'ucs2' | 'base64' | 'latin1' | 'hex' | 'buffer';\n        } = {}\n    ): Promise<TOut | undefined> {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        if (Git.isStagedUncommitted(ref)) {\n            ref = ':';\n        }\n        if (Git.isUncommitted(ref)) throw new Error(`ref=${ref} is uncommitted`);\n\n        const opts: GitCommandOptions = {\n            configs: ['-c', 'log.showSignature=false'],\n            cwd: root,\n            encoding: options.encoding || 'utf8',\n            errors: GitErrorHandling.Throw\n        };\n        const args = ref.endsWith(':') ? `${ref}./${file}` : `${ref}:./${file}`;\n\n        try {\n            const data = await git<TOut>(opts, 'show', args, '--');\n            return data;\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (ref === ':' && GitErrors.badRevision.test(msg)) {\n                return Git.show<TOut>(repoPath, fileName, 'HEAD:', options);\n            }\n\n            if (\n                GitErrors.badRevision.test(msg) ||\n                GitWarnings.notFound.test(msg) ||\n                GitWarnings.foundButNotInRevision.test(msg)\n            ) {\n                return undefined;\n            }\n\n            return defaultExceptionHandler(ex, opts, args) as TOut;\n        }\n    }\n\n    static show_status(repoPath: string, fileName: string, ref: string) {\n        return git<string>({ cwd: repoPath }, 'show', '--name-status', '--format=', ref, '--', fileName);\n    }\n\n    static showref_tag(repoPath: string) {\n        return git<string>({ cwd: repoPath, errors: GitErrorHandling.Ignore }, 'show-ref', '--tags');\n    }\n\n    static stash_apply(repoPath: string, stashName: string, deleteAfter: boolean) {\n        if (!stashName) return undefined;\n        return git<string>({ cwd: repoPath }, 'stash', deleteAfter ? 'pop' : 'apply', stashName);\n    }\n\n    static stash_delete(repoPath: string, stashName: string) {\n        if (!stashName) return undefined;\n        return git<string>({ cwd: repoPath }, 'stash', 'drop', stashName);\n    }\n\n    static stash_list(repoPath: string) {\n        return git<string>({ cwd: repoPath }, ...defaultStashParams);\n    }\n\n    static stash_push(repoPath: string, pathspecs: string[], message?: string) {\n        const params = ['stash', 'push', '-u'];\n        if (message) {\n            params.push('-m', message);\n        }\n        return git<string>({ cwd: repoPath }, ...params, '--', ...pathspecs);\n    }\n\n    static stash_save(repoPath: string, message?: string) {\n        const params = ['stash', 'save', '-u'];\n        if (message) {\n            params.push(message);\n        }\n        return git<string>({ cwd: repoPath }, ...params);\n    }\n\n    static status(repoPath: string, porcelainVersion: number = 1): Promise<string> {\n        const porcelain = porcelainVersion >= 2 ? `--porcelain=v${porcelainVersion}` : '--porcelain';\n        return git<string>(\n            { cwd: repoPath, configs: ['-c', 'color.status=false'], env: { GIT_OPTIONAL_LOCKS: '0' } },\n            'status',\n            porcelain,\n            '--branch',\n            '-u'\n        );\n    }\n\n    static status_file(repoPath: string, fileName: string, porcelainVersion: number = 1): Promise<string> {\n        const [file, root] = Git.splitPath(fileName, repoPath);\n\n        const porcelain = porcelainVersion >= 2 ? `--porcelain=v${porcelainVersion}` : '--porcelain';\n        return git<string>(\n            { cwd: root, configs: ['-c', 'color.status=false'], env: { GIT_OPTIONAL_LOCKS: '0' } },\n            'status',\n            porcelain,\n            '--',\n            file\n        );\n    }\n\n    static tag(repoPath: string) {\n        return git<string>({ cwd: repoPath }, 'tag', '-l', '-n1');\n    }\n}\n","'use strict';\nimport { GitCommandOptions } from '../git/git';\n\nexport class RequestType<TRequest, TResponse> {\n    constructor(public readonly name: string) {}\n}\n\nexport interface GitCommandRequest {\n    options: GitCommandOptions;\n    args: any[];\n}\n\nexport interface GitCommandResponse {\n    data: string;\n    isBuffer?: boolean;\n}\n\nexport const GitCommandRequestType = new RequestType<GitCommandRequest, GitCommandResponse>('git');\n\nexport interface RepositoryProxy {\n    folderUri: string;\n    path: string;\n    root: boolean;\n    closed: boolean;\n}\n\nexport interface RepositoriesInFolderRequest {\n    folderUri: string;\n}\n\nexport interface RepositoriesInFolderResponse {\n    repositories: RepositoryProxy[];\n}\n\nexport const RepositoriesInFolderRequestType = new RequestType<\n    RepositoriesInFolderRequest,\n    RepositoriesInFolderResponse\n>('repositories/inFolder');\n\nexport interface WorkspaceFileExistsRequest {\n    fileName: string;\n    repoPath: string;\n    options: { ensureCase: boolean };\n}\n\nexport interface WorkspaceFileExistsResponse {\n    exists: boolean;\n}\n\nexport const WorkspaceFileExistsRequestType = new RequestType<WorkspaceFileExistsRequest, WorkspaceFileExistsResponse>(\n    'workspace/fileExists'\n);\n","'use strict';\nimport { CancellationToken, Disposable, Uri, workspace, WorkspaceFoldersChangeEvent } from 'vscode';\nimport { LiveShare, SharedService } from 'vsls';\nimport { Container } from '../container';\nimport { git } from '../git/git';\nimport { GitUri } from '../git/gitUri';\nimport { Logger } from '../logger';\nimport { debug, Iterables, log, Strings } from '../system';\nimport {\n    GitCommandRequest,\n    GitCommandRequestType,\n    GitCommandResponse,\n    RepositoriesInFolderRequest,\n    RepositoriesInFolderRequestType,\n    RepositoriesInFolderResponse,\n    RequestType,\n    WorkspaceFileExistsRequest,\n    WorkspaceFileExistsRequestType,\n    WorkspaceFileExistsResponse\n} from './protocol';\nimport { vslsUriRootRegex } from './vsls';\n\nconst defaultWhitelistFn = () => true;\nconst gitWhitelist = new Map<string, (args: any[]) => boolean>([\n    ['blame', defaultWhitelistFn],\n    ['branch', args => args[1] === '-vv' || args[1] === '--contains'],\n    ['cat-file', defaultWhitelistFn],\n    ['config', args => args[1] === '--get' || args[1] === '--get-regex'],\n    ['diff', defaultWhitelistFn],\n    ['difftool', defaultWhitelistFn],\n    ['log', defaultWhitelistFn],\n    ['ls-files', defaultWhitelistFn],\n    ['ls-tree', defaultWhitelistFn],\n    ['merge-base', defaultWhitelistFn],\n    ['remote', args => args[1] === '-v' || args[1] === 'get-url'],\n    ['rev-parse', defaultWhitelistFn],\n    ['shortlog', defaultWhitelistFn],\n    ['show', defaultWhitelistFn],\n    ['show-ref', defaultWhitelistFn],\n    ['stash', args => args[1] === 'list'],\n    ['status', defaultWhitelistFn],\n    ['symbolic-ref', defaultWhitelistFn],\n    ['tag', args => args[1] === '-l']\n]);\n\nconst leadingSlashRegex = /^[/|\\\\]/;\n\nexport class VslsHostService implements Disposable {\n    static ServiceId = 'proxy';\n\n    @log()\n    static async share(api: LiveShare) {\n        const service = await api.shareService(this.ServiceId);\n        if (service == null) {\n            throw new Error('Failed to share host service');\n        }\n\n        return new VslsHostService(api, service);\n    }\n\n    private readonly _disposable: Disposable;\n    private _localPathsRegex: RegExp | undefined;\n    private _localToSharedPaths = new Map<string, string>();\n    private _sharedPathsRegex: RegExp | undefined;\n    private _sharedToLocalPaths = new Map<string, string>();\n\n    constructor(private readonly _api: LiveShare, private readonly _service: SharedService) {\n        _service.onDidChangeIsServiceAvailable(this.onAvailabilityChanged.bind(this));\n\n        this._disposable = Disposable.from(workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged, this));\n\n        this.onRequest(GitCommandRequestType, this.onGitCommandRequest.bind(this));\n        this.onRequest(RepositoriesInFolderRequestType, this.onRepositoriesInFolderRequest.bind(this));\n        this.onRequest(WorkspaceFileExistsRequestType, this.onWorkspaceFileExistsRequest.bind(this));\n\n        void this.onWorkspaceFoldersChanged();\n    }\n\n    dispose() {\n        this._disposable.dispose();\n        void this._api.unshareService(VslsHostService.ServiceId);\n    }\n\n    private onRequest<TRequest, TResponse>(\n        requestType: RequestType<TRequest, TResponse>,\n        handler: (request: TRequest, cancellation: CancellationToken) => Promise<TResponse>\n    ) {\n        this._service.onRequest(requestType.name, (args: any[], cancellation: CancellationToken) =>\n            handler(args[0], cancellation)\n        );\n    }\n\n    @log()\n    private onAvailabilityChanged(available: boolean) {\n        // TODO\n    }\n\n    @debug()\n    private onWorkspaceFoldersChanged(e?: WorkspaceFoldersChangeEvent) {\n        if (workspace.workspaceFolders === undefined || workspace.workspaceFolders.length === 0) return;\n\n        const cc = Logger.getCorrelationContext();\n\n        this._localToSharedPaths.clear();\n        this._sharedToLocalPaths.clear();\n\n        let localPath;\n        let sharedPath;\n        for (const f of workspace.workspaceFolders) {\n            localPath = Strings.normalizePath(f.uri.fsPath);\n            sharedPath = Strings.normalizePath(this.convertLocalUriToShared(f.uri).fsPath);\n\n            Logger.debug(cc, `shared='${sharedPath}' \\u2194 local='${localPath}'`);\n            this._localToSharedPaths.set(localPath, sharedPath);\n            this._sharedToLocalPaths.set(sharedPath, localPath);\n        }\n\n        let localPaths = Iterables.join(this._sharedToLocalPaths.values(), '|');\n        localPaths = localPaths.replace(/(\\/|\\\\)/g, '[\\\\\\\\/|\\\\\\\\]');\n        this._localPathsRegex = new RegExp(`(${localPaths})`, 'gi');\n\n        let sharedPaths = Iterables.join(this._localToSharedPaths.values(), '|');\n        sharedPaths = sharedPaths.replace(/(\\/|\\\\)/g, '[\\\\\\\\/|\\\\\\\\]');\n        this._sharedPathsRegex = new RegExp(`^(${sharedPaths})`, 'i');\n    }\n\n    @log()\n    private async onGitCommandRequest(\n        request: GitCommandRequest,\n        cancellation: CancellationToken\n    ): Promise<GitCommandResponse> {\n        const { options, args } = request;\n\n        const fn = gitWhitelist.get(request.args[0]);\n        if (fn === undefined || !fn(request.args)) throw new Error(`Git ${request.args[0]} command is not allowed`);\n\n        let isRootWorkspace = false;\n        if (options.cwd !== undefined && options.cwd.length > 0 && this._sharedToLocalPaths !== undefined) {\n            // This is all so ugly, but basically we are converting shared paths to local paths\n            if (this._sharedPathsRegex !== undefined && this._sharedPathsRegex.test(options.cwd)) {\n                options.cwd = Strings.normalizePath(options.cwd).replace(this._sharedPathsRegex, (match, shared) => {\n                    if (!isRootWorkspace) {\n                        isRootWorkspace = shared === '/~0';\n                    }\n\n                    const local = this._sharedToLocalPaths.get(shared);\n                    return local != null ? local : shared;\n                });\n            }\n            else if (leadingSlashRegex.test(options.cwd)) {\n                const localCwd = this._sharedToLocalPaths.get('/~0');\n                if (localCwd !== undefined) {\n                    isRootWorkspace = true;\n                    options.cwd = GitUri.resolve(options.cwd, localCwd);\n                }\n            }\n        }\n\n        let files = false;\n        let i = -1;\n        for (const arg of args) {\n            i++;\n            if (arg === '--') {\n                files = true;\n                continue;\n            }\n\n            if (!files) continue;\n\n            if (typeof arg === 'string') {\n                // If we are the \"root\" workspace, then we need to remove the leading slash off the path (otherwise it will not be treated as a relative path)\n                if (isRootWorkspace && leadingSlashRegex.test(arg[0])) {\n                    args.splice(i, 1, arg.substr(1));\n                }\n\n                if (this._sharedPathsRegex !== undefined && this._sharedPathsRegex.test(arg)) {\n                    args.splice(\n                        i,\n                        1,\n                        Strings.normalizePath(arg).replace(this._sharedPathsRegex, (match, shared) => {\n                            const local = this._sharedToLocalPaths.get(shared);\n                            return local != null ? local : shared;\n                        })\n                    );\n                }\n            }\n        }\n\n        let data = await git(options, ...args);\n        if (typeof data === 'string') {\n            // And then we convert local paths to shared paths\n            if (this._localPathsRegex !== undefined && data.length > 0) {\n                data = data.replace(this._localPathsRegex, (match, local) => {\n                    const shared = this._localToSharedPaths.get(local);\n                    return shared != null ? shared : local;\n                });\n            }\n\n            return { data: data };\n        }\n\n        return { data: data.toString('binary'), isBuffer: true };\n    }\n\n    @log()\n    private async onRepositoriesInFolderRequest(\n        request: RepositoriesInFolderRequest,\n        cancellation: CancellationToken\n    ): Promise<RepositoriesInFolderResponse> {\n        const uri = this.convertSharedUriToLocal(Uri.parse(request.folderUri));\n        const normalized = Strings.normalizePath(uri.fsPath, { stripTrailingSlash: true }).toLowerCase();\n\n        const repos = [\n            ...Iterables.filterMap(await Container.git.getRepositories(), r => {\n                if (!r.normalizedPath.startsWith(normalized)) return undefined;\n\n                const vslsUri = this.convertLocalUriToShared(r.folder.uri);\n                return {\n                    folderUri: vslsUri.toString(true),\n                    path: vslsUri.path,\n                    root: r.root,\n                    closed: r.closed\n                };\n            })\n        ];\n\n        return {\n            repositories: repos\n        };\n    }\n\n    @log()\n    private async onWorkspaceFileExistsRequest(\n        request: WorkspaceFileExistsRequest,\n        cancellation: CancellationToken\n    ): Promise<WorkspaceFileExistsResponse> {\n        let { repoPath } = request;\n        if (this._sharedPathsRegex !== undefined && this._sharedPathsRegex.test(repoPath)) {\n            repoPath = Strings.normalizePath(repoPath).replace(this._sharedPathsRegex, (match, shared) => {\n                const local = this._sharedToLocalPaths!.get(shared);\n                return local != null ? local : shared;\n            });\n        }\n\n        // TODO: Lock this to be only in the contained workspaces\n\n        return { exists: await Container.git.fileExists(repoPath, request.fileName, request.options) };\n    }\n\n    @debug({\n        exit: result => `returned ${result.toString(true)}`\n    })\n    private convertLocalUriToShared(localUri: Uri) {\n        const cc = Logger.getCorrelationContext();\n\n        let sharedUri = this._api.convertLocalUriToShared(localUri);\n        Logger.debug(\n            cc,\n            `LiveShare.convertLocalUriToShared(${localUri.toString(true)}) returned ${sharedUri.toString(true)}`\n        );\n\n        const localPath = localUri.path;\n        let sharedPath = sharedUri.path;\n        if (sharedUri.authority.length > 0) {\n            sharedPath = `/${sharedUri.authority}${sharedPath}`;\n        }\n\n        if (new RegExp(`${localPath}$`, 'i').test(sharedPath)) {\n            if (sharedPath.length === localPath.length) {\n                const folder = workspace.getWorkspaceFolder(localUri)!;\n                sharedUri = sharedUri.with({ path: `/~${folder.index}` });\n            }\n            else {\n                sharedUri = sharedUri.with({ path: sharedPath.substr(0, sharedPath.length - localPath.length) });\n            }\n        }\n        else if (!sharedPath.startsWith('/~')) {\n            const folder = workspace.getWorkspaceFolder(localUri)!;\n            sharedUri = sharedUri.with({ path: `/~${folder.index}${sharedPath}` });\n        }\n\n        return sharedUri;\n    }\n\n    private convertSharedUriToLocal(sharedUri: Uri) {\n        if (vslsUriRootRegex.test(sharedUri.path)) {\n            sharedUri = sharedUri.with({ path: `${sharedUri.path}/` });\n        }\n\n        const localUri = this._api.convertSharedUriToLocal(sharedUri);\n\n        const localPath = localUri.path;\n        const sharedPath = sharedUri.path;\n        if (localPath.endsWith(sharedPath)) {\n            return localUri.with({ path: localPath.substr(0, localPath.length - sharedPath.length) });\n        }\n        return localUri;\n    }\n}\n","'use strict';\nimport { CancellationToken, Disposable, window, WorkspaceFolder } from 'vscode';\nimport { LiveShare, SharedServiceProxy } from 'vsls';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { GitCommandOptions, Repository, RepositoryChange } from '../git/git';\nimport { Logger } from '../logger';\nimport { debug, log } from '../system';\nimport { VslsHostService } from './host';\nimport {\n    GitCommandRequestType,\n    RepositoriesInFolderRequestType,\n    RepositoryProxy,\n    RequestType,\n    WorkspaceFileExistsRequestType\n} from './protocol';\n\nexport class VslsGuestService implements Disposable {\n    @log()\n    static async connect(api: LiveShare) {\n        const cc = Logger.getCorrelationContext();\n\n        try {\n            const service = await api.getSharedService(VslsHostService.ServiceId);\n            if (service == null) {\n                throw new Error('Failed to connect to host service');\n            }\n\n            return new VslsGuestService(api, service);\n        }\n        catch (ex) {\n            Logger.error(ex, cc);\n            return undefined;\n        }\n    }\n\n    constructor(private readonly _api: LiveShare, private readonly _service: SharedServiceProxy) {\n        _service.onDidChangeIsServiceAvailable(this.onAvailabilityChanged.bind(this));\n        this.onAvailabilityChanged(_service.isServiceAvailable);\n    }\n\n    dispose() {\n        // nothing to dispose\n    }\n\n    @log()\n    private onAvailabilityChanged(available: boolean) {\n        if (available) {\n            void setCommandContext(CommandContext.Enabled, true);\n            return;\n        }\n\n        void setCommandContext(CommandContext.Enabled, false);\n        void window.showWarningMessage(\n            'GitLens features will be unavailable. Unable to connect to the host GitLens service. The host may have disabled GitLens guest access or may not have GitLens installed.'\n        );\n    }\n\n    @log()\n    async git<TOut extends string | Buffer>(options: GitCommandOptions, ...args: any[]) {\n        const response = await this.sendRequest(GitCommandRequestType, { options: options, args: args });\n\n        if (response.isBuffer) {\n            return new Buffer(response.data, 'binary') as TOut;\n        }\n        return response.data as TOut;\n    }\n\n    @log()\n    async getRepositoriesInFolder(\n        folder: WorkspaceFolder,\n        onAnyRepositoryChanged: (repo: Repository, reason: RepositoryChange) => void\n    ): Promise<Repository[]> {\n        const response = await this.sendRequest(RepositoriesInFolderRequestType, {\n            folderUri: folder.uri.toString(true)\n        });\n\n        return response.repositories.map(\n            (r: RepositoryProxy) => new Repository(folder, r.path, r.root, onAnyRepositoryChanged, false, r.closed)\n        );\n    }\n\n    @log()\n    async fileExists(\n        repoPath: string,\n        fileName: string,\n        options: { ensureCase: boolean } = { ensureCase: false }\n    ): Promise<boolean> {\n        const response = await this.sendRequest(WorkspaceFileExistsRequestType, {\n            fileName: fileName,\n            repoPath: repoPath,\n            options: options\n        });\n\n        return response.exists;\n    }\n\n    @debug()\n    private sendRequest<TRequest, TResponse>(\n        requestType: RequestType<TRequest, TResponse>,\n        request: TRequest,\n        cancellation?: CancellationToken\n    ): Promise<TResponse> {\n        return this._service.request(requestType.name, [request]);\n    }\n}\n","'use strict';\nimport { Disposable, workspace } from 'vscode';\nimport { getApi, LiveShare, Role, SessionChangeEvent } from 'vsls';\nimport { CommandContext, DocumentSchemes, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { VslsGuestService } from './guest';\nimport { VslsHostService } from './host';\n\nexport const vslsUriPrefixRegex = /^[/|\\\\]~(?:\\d+?|external)(?:[/|\\\\]|$)/;\nexport const vslsUriRootRegex = /^[/|\\\\]~(?:\\d+?|external)$/;\n\nexport class VslsController implements Disposable {\n    private _disposable: Disposable | undefined;\n    private _guest: VslsGuestService | undefined;\n    private _host: VslsHostService | undefined;\n\n    private _onReady: (() => void) | undefined;\n    private _waitForReady: Promise<void> | undefined;\n\n    constructor() {\n        void this.initialize();\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n        if (this._host !== undefined) {\n            this._host.dispose();\n        }\n\n        if (this._guest !== undefined) {\n            this._guest.dispose();\n        }\n    }\n\n    private async initialize() {\n        try {\n            // If we have a vsls: workspace open, we might be a guest, so wait until live share transitions into a mode\n            if (\n                workspace.workspaceFolders !== undefined &&\n                workspace.workspaceFolders.some(f => f.uri.scheme === DocumentSchemes.Vsls)\n            ) {\n                setCommandContext(CommandContext.Readonly, true);\n                this._waitForReady = new Promise(resolve => (this._onReady = resolve));\n            }\n\n            const api = await getApi();\n            if (api == null) {\n                // Tear it down if we can't talk to live share\n                if (this._onReady !== undefined) {\n                    this._onReady();\n                    this._waitForReady = undefined;\n                }\n                return;\n            }\n\n            this._disposable = Disposable.from(\n                api.onDidChangeSession(e => this.onLiveShareSessionChanged(api, e), this)\n            );\n        }\n        catch (ex) {\n            Logger.error(ex);\n        }\n    }\n\n    get isMaybeGuest() {\n        return this._guest !== undefined || this._waitForReady !== undefined;\n    }\n\n    async guest() {\n        if (this._waitForReady !== undefined) {\n            await this._waitForReady;\n            this._waitForReady = undefined;\n        }\n\n        return this._guest;\n    }\n\n    host() {\n        return this._host;\n    }\n\n    private async onLiveShareSessionChanged(api: LiveShare, e: SessionChangeEvent) {\n        if (this._host !== undefined) {\n            this._host.dispose();\n        }\n\n        if (this._guest !== undefined) {\n            this._guest.dispose();\n        }\n\n        switch (e.session.role) {\n            case Role.Host:\n                setCommandContext(CommandContext.Readonly, undefined);\n                if (Container.config.liveshare.allowGuestAccess) {\n                    this._host = await VslsHostService.share(api);\n                }\n                break;\n            case Role.Guest:\n                setCommandContext(CommandContext.Readonly, true);\n                this._guest = await VslsGuestService.connect(api);\n                break;\n\n            default:\n                setCommandContext(CommandContext.Readonly, undefined);\n                break;\n        }\n\n        if (this._onReady !== undefined) {\n            this._onReady();\n            this._onReady = undefined;\n        }\n    }\n}\n","'use strict';\nimport * as fs from 'fs';\nimport * as paths from 'path';\nimport {\n    ConfigurationChangeEvent,\n    Disposable,\n    Event,\n    EventEmitter,\n    Extension,\n    extensions,\n    ProgressLocation,\n    Range,\n    TextEditor,\n    Uri,\n    window,\n    WindowState,\n    workspace,\n    WorkspaceFolder,\n    WorkspaceFoldersChangeEvent\n} from 'vscode';\n// eslint-disable-next-line import/no-unresolved\nimport { API as BuiltInGitApi, GitExtension } from '../@types/git';\nimport { configuration, RemotesConfig } from '../configuration';\nimport { CommandContext, DocumentSchemes, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { LogCorrelationContext, Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { gate, Iterables, log, Objects, Strings, TernarySearchTree, Versions } from '../system';\nimport { CachedBlame, CachedDiff, CachedLog, GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\nimport { vslsUriPrefixRegex } from '../vsls/vsls';\nimport {\n    CommitFormatting,\n    Git,\n    GitAuthor,\n    GitBlame,\n    GitBlameCommit,\n    GitBlameLine,\n    GitBlameLines,\n    GitBlameParser,\n    GitBranch,\n    GitBranchParser,\n    GitCommit,\n    GitCommitType,\n    GitContributor,\n    GitDiff,\n    GitDiffChunkLine,\n    GitDiffParser,\n    GitDiffShortStat,\n    GitFile,\n    GitLog,\n    GitLogCommit,\n    GitLogParser,\n    GitRemote,\n    GitRemoteParser,\n    GitStash,\n    GitStashParser,\n    GitStatus,\n    GitStatusFile,\n    GitStatusParser,\n    GitTag,\n    GitTagParser,\n    GitTree,\n    GitTreeParser,\n    Repository,\n    RepositoryChange\n} from './git';\nimport { GitUri } from './gitUri';\nimport { RemoteProviderFactory, RemoteProviders } from './remotes/factory';\nimport { GitShortLogParser } from './parsers/parsers';\n\nexport * from './gitUri';\nexport * from './models/models';\nexport * from './formatters/formatters';\nexport { getNameFromRemoteResource, RemoteProvider, RemoteResource, RemoteResourceType } from './remotes/provider';\nexport { RemoteProviderFactory } from './remotes/factory';\n\nconst emptyStr = '';\nconst slash = '/';\n\nconst RepoSearchWarnings = {\n    doesNotExist: /no such file or directory/i\n};\n\nconst userConfigRegex = /^user\\.(name|email) (.*)$/gm;\nconst mappedAuthorRegex = /(.+)\\s<(.+)>/;\n\nexport enum GitRepoSearchBy {\n    Author = 'author',\n    ChangedLines = 'changed-lines',\n    Changes = 'changes',\n    Files = 'files',\n    Message = 'message',\n    Sha = 'sha'\n}\n\nexport class GitService implements Disposable {\n    static emptyPromise: Promise<GitBlame | GitDiff | GitLog | undefined> = Promise.resolve(undefined);\n    static deletedOrMissingSha = Git.deletedOrMissingSha;\n    static stagedUncommittedSha = Git.stagedUncommittedSha;\n    static uncommittedSha = Git.uncommittedSha;\n\n    private _onDidChangeRepositories = new EventEmitter<void>();\n    get onDidChangeRepositories(): Event<void> {\n        return this._onDidChangeRepositories.event;\n    }\n\n    private readonly _disposable: Disposable;\n    private readonly _repositoryTree: TernarySearchTree<Repository>;\n    private _repositoriesLoadingPromise: Promise<void> | undefined;\n    private _suspended: boolean = false;\n\n    private readonly _branchesCache = new Map<string, GitBranch[]>();\n    private readonly _tagsCache = new Map<string, GitTag[]>();\n    private readonly _tagsWithRefsCache = new Map<string, GitTag[]>();\n    private readonly _trackedCache = new Map<string, boolean | Promise<boolean>>();\n    private readonly _userMapCache = new Map<string, { name?: string; email?: string } | null>();\n\n    constructor() {\n        this._repositoryTree = TernarySearchTree.forPaths();\n\n        this._disposable = Disposable.from(\n            window.onDidChangeWindowState(this.onWindowStateChanged, this),\n            workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged, this),\n            configuration.onDidChange(this.onConfigurationChanged, this)\n        );\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n\n        this._repositoriesLoadingPromise = this.onWorkspaceFoldersChanged();\n    }\n\n    dispose() {\n        this._repositoryTree.forEach(r => r.dispose());\n        this._branchesCache.clear();\n        this._tagsCache.clear();\n        this._tagsWithRefsCache.clear();\n        this._trackedCache.clear();\n        this._userMapCache.clear();\n\n        this._disposable && this._disposable.dispose();\n    }\n\n    get UseCaching() {\n        return Container.config.advanced.caching.enabled;\n    }\n\n    private onAnyRepositoryChanged(repo: Repository, reason: RepositoryChange) {\n        this._trackedCache.clear();\n\n        this._branchesCache.delete(repo.path);\n        this._tagsCache.delete(repo.path);\n        this._tagsWithRefsCache.clear();\n\n        if (reason === RepositoryChange.Config) {\n            this._userMapCache.delete(repo.path);\n        }\n\n        if (reason === RepositoryChange.Closed) {\n            // Send a notification that the repositories changed\n            setImmediate(async () => {\n                await this.updateContext(this._repositoryTree);\n\n                this.fireRepositoriesChanged();\n            });\n        }\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            configuration.changed(e, configuration.name('defaultDateStyle').value) ||\n            configuration.changed(e, configuration.name('defaultDateFormat').value)\n        ) {\n            CommitFormatting.reset();\n        }\n    }\n\n    private onWindowStateChanged(e: WindowState) {\n        if (e.focused) {\n            this._repositoryTree.forEach(r => r.resume());\n        }\n        else {\n            this._repositoryTree.forEach(r => r.suspend());\n        }\n\n        this._suspended = !e.focused;\n    }\n\n    private async onWorkspaceFoldersChanged(e?: WorkspaceFoldersChangeEvent) {\n        let initializing = false;\n        if (e === undefined) {\n            initializing = true;\n            e = {\n                added: workspace.workspaceFolders || [],\n                removed: []\n            };\n\n            Logger.log(`Starting repository search in ${e.added.length} folders`);\n        }\n\n        for (const f of e.added) {\n            const { scheme } = f.uri;\n            if (scheme !== DocumentSchemes.File && scheme !== DocumentSchemes.Vsls) continue;\n\n            if (scheme === DocumentSchemes.Vsls) {\n                if (Container.vsls.isMaybeGuest) {\n                    const guest = await Container.vsls.guest();\n                    if (guest !== undefined) {\n                        const repositories = await guest.getRepositoriesInFolder(\n                            f,\n                            this.onAnyRepositoryChanged.bind(this)\n                        );\n                        for (const r of repositories) {\n                            this._repositoryTree.set(r.path, r);\n                        }\n                    }\n                }\n            }\n            else {\n                // Search for and add all repositories (nested and/or submodules)\n                const repositories = await this.repositorySearch(f);\n                for (const r of repositories) {\n                    this._repositoryTree.set(r.path, r);\n                }\n            }\n        }\n\n        for (const f of e.removed) {\n            const { fsPath, scheme } = f.uri;\n            if (scheme !== DocumentSchemes.File && scheme !== DocumentSchemes.Vsls) continue;\n\n            const repos = this._repositoryTree.findSuperstr(fsPath);\n            const reposToDelete =\n                repos !== undefined\n                    ? // Since the filtered tree will have keys that are relative to the fsPath, normalize to the full path\n                      [...Iterables.map<Repository, [Repository, string]>(repos, r => [r, r.path])]\n                    : [];\n\n            // const filteredTree = this._repositoryTree.findSuperstr(fsPath);\n            // const reposToDelete =\n            //     filteredTree !== undefined\n            //         ? // Since the filtered tree will have keys that are relative to the fsPath, normalize to the full path\n            //           [\n            //               ...Iterables.map<[Repository, string], [Repository, string]>(\n            //                   filteredTree.entries(),\n            //                   ([r, k]) => [r, path.join(fsPath, k)]\n            //               )\n            //           ]\n            //         : [];\n\n            const repo = this._repositoryTree.get(fsPath);\n            if (repo !== undefined) {\n                reposToDelete.push([repo, fsPath]);\n            }\n\n            for (const [r, k] of reposToDelete) {\n                this._repositoryTree.delete(k);\n                r.dispose();\n            }\n        }\n\n        await this.updateContext(this._repositoryTree);\n\n        if (!initializing) {\n            // Defer the event trigger enough to let everything unwind\n            setImmediate(() => this.fireRepositoriesChanged());\n        }\n    }\n\n    @log<GitService['repositorySearch']>({\n        args: false,\n        singleLine: true,\n        prefix: (context, folder) => `${context.prefix}(${folder.uri.fsPath})`,\n        exit: result =>\n            `returned ${result.length} repositories${\n                result.length !== 0 ? ` (${result.map(r => r.path).join(', ')})` : emptyStr\n            }`\n    })\n    private async repositorySearch(folder: WorkspaceFolder): Promise<Repository[]> {\n        const cc = Logger.getCorrelationContext();\n        const { uri } = folder;\n        const depth = configuration.get<number>(configuration.name('advanced')('repositorySearchDepth').value, uri);\n\n        Logger.log(cc, `searching (depth=${depth})...`);\n\n        const repositories: Repository[] = [];\n        const anyRepoChangedFn = this.onAnyRepositoryChanged.bind(this);\n\n        const rootPath = await this.getRepoPathCore(uri.fsPath, true);\n        if (rootPath !== undefined) {\n            Logger.log(cc, `found root repository in '${rootPath}'`);\n            repositories.push(new Repository(folder, rootPath, true, anyRepoChangedFn, this._suspended));\n        }\n\n        if (depth <= 0) return repositories;\n\n        // Get any specified excludes -- this is a total hack, but works for some simple cases and something is better than nothing :)\n        let excludes = {\n            ...workspace.getConfiguration('files', uri).get<{ [key: string]: boolean }>('exclude', {}),\n            ...workspace.getConfiguration('search', uri).get<{ [key: string]: boolean }>('exclude', {})\n        };\n\n        const excludedPaths = [\n            ...Iterables.filterMap(Objects.entries(excludes), ([key, value]) => {\n                if (!value) return undefined;\n                if (key.startsWith('**/')) return key.substring(3);\n                return key;\n            })\n        ];\n\n        excludes = excludedPaths.reduce((accumulator, current) => {\n            accumulator[current] = true;\n            return accumulator;\n        }, Object.create(null));\n\n        let repoPaths;\n        try {\n            repoPaths = await this.repositorySearchCore(uri.fsPath, depth, excludes);\n        }\n        catch (ex) {\n            if (RepoSearchWarnings.doesNotExist.test(ex.message || emptyStr)) {\n                Logger.log(cc, `FAILED${ex.message ? ` Error: ${ex.message}` : emptyStr}`);\n            }\n            else {\n                Logger.error(ex, cc, 'FAILED');\n            }\n\n            return repositories;\n        }\n\n        for (let p of repoPaths) {\n            p = paths.dirname(p);\n            // If we are the same as the root, skip it\n            if (Strings.normalizePath(p) === rootPath) continue;\n\n            Logger.log(cc, `searching in '${p}'...`);\n\n            const rp = await this.getRepoPathCore(p, true);\n            if (rp === undefined) continue;\n\n            Logger.log(cc, `found repository in '${rp}'`);\n            repositories.push(new Repository(folder, rp, false, anyRepoChangedFn, this._suspended));\n        }\n\n        return repositories;\n    }\n\n    private repositorySearchCore(\n        root: string,\n        depth: number,\n        excludes: { [key: string]: boolean },\n        repositories: string[] = []\n    ): Promise<string[]> {\n        return new Promise<string[]>((resolve, reject) => {\n            fs.readdir(root, async (err, files) => {\n                if (err != null) {\n                    reject(err);\n                    return;\n                }\n\n                if (files.length === 0) {\n                    resolve(repositories);\n                    return;\n                }\n\n                const folders: string[] = [];\n\n                const promises = files.map(file => {\n                    const path = paths.resolve(root, file);\n\n                    return new Promise<void>((resolve2, reject2) => {\n                        fs.stat(path, (err, stat) => {\n                            if (file === '.git') {\n                                repositories.push(path);\n                            }\n                            else if (err == null && excludes[file] !== true && stat != null && stat.isDirectory()) {\n                                folders.push(path);\n                            }\n\n                            resolve2();\n                        });\n                    });\n                });\n\n                await Promise.all(promises);\n\n                if (depth-- > 0) {\n                    for (const folder of folders) {\n                        await this.repositorySearchCore(folder, depth, excludes, repositories);\n                    }\n                }\n\n                resolve(repositories);\n            });\n        });\n    }\n\n    private async updateContext(repositoryTree: TernarySearchTree<Repository>) {\n        const hasRepository = repositoryTree.any();\n        await setCommandContext(CommandContext.Enabled, hasRepository);\n\n        let hasRemotes = false;\n        if (hasRepository) {\n            for (const repo of repositoryTree.values()) {\n                hasRemotes = await repo.hasRemotes();\n                if (hasRemotes) break;\n            }\n        }\n\n        await setCommandContext(CommandContext.HasRemotes, hasRemotes);\n\n        // If we have no repositories setup a watcher in case one is initialized\n        if (!hasRepository) {\n            const watcher = workspace.createFileSystemWatcher('**/.git', false, true, true);\n            const disposable = Disposable.from(\n                watcher,\n                watcher.onDidCreate(async uri => {\n                    const f = workspace.getWorkspaceFolder(uri);\n                    if (f === undefined) return;\n\n                    // Search for and add all repositories (nested and/or submodules)\n                    const repositories = await this.repositorySearch(f);\n                    if (repositories.length === 0) return;\n\n                    disposable.dispose();\n\n                    for (const r of repositories) {\n                        this._repositoryTree.set(r.path, r);\n                    }\n\n                    await this.updateContext(this._repositoryTree);\n\n                    // Defer the event trigger enough to let everything unwind\n                    setImmediate(() => this.fireRepositoriesChanged());\n                }, this)\n            );\n        }\n    }\n\n    private fireRepositoriesChanged() {\n        this._onDidChangeRepositories.fire();\n    }\n\n    @log()\n    async applyChangesToWorkingFile(uri: GitUri, ref1?: string, ref2?: string) {\n        const cc = Logger.getCorrelationContext();\n\n        ref1 = ref1 || uri.sha;\n        if (ref1 === undefined || uri.repoPath === undefined) return;\n\n        if (ref2 === undefined) {\n            ref2 = ref1;\n            ref1 = `${ref1}^`;\n        }\n\n        let patch;\n        try {\n            patch = await Git.diff(uri.repoPath, uri.fsPath, ref1, ref2);\n            void (await Git.apply(uri.repoPath!, patch));\n        }\n        catch (ex) {\n            if (patch && /patch does not apply/i.test(ex.message)) {\n                const result = await window.showWarningMessage(\n                    'Unable to apply changes cleanly. Retry and allow conflicts?',\n                    { title: 'Yes' },\n                    { title: 'No', isCloseAffordance: true }\n                );\n\n                if (result === undefined || result.title !== 'Yes') return;\n\n                if (result.title === 'Yes') {\n                    try {\n                        void (await Git.apply(uri.repoPath!, patch, { allowConflicts: true }));\n                        return;\n                    }\n                    catch (e) {\n                        // eslint-disable-next-line no-ex-assign\n                        ex = e;\n                    }\n                }\n            }\n\n            Logger.error(ex, cc);\n            void Messages.showGenericErrorMessage('Unable to apply changes');\n        }\n    }\n\n    @log()\n    checkout(repoPath: string, ref: string, fileName?: string) {\n        return Git.checkout(repoPath, ref, fileName);\n    }\n\n    @gate()\n    @log()\n    fetch(repoPath: string, remote?: string) {\n        return Git.fetch(repoPath, { remote: remote });\n    }\n\n    @gate()\n    @log()\n    async fetchAll() {\n        const repositories = await this.getOrderedRepositories();\n        if (repositories.length === 0) return;\n\n        await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: 'Fetching repositories',\n                cancellable: true\n            },\n            async (progress, token) => {\n                const total = repositories.length;\n                for (const repo of repositories) {\n                    progress.report({\n                        message: `${repo.formattedName}...`,\n                        increment: 100 / total\n                    });\n\n                    if (token.isCancellationRequested) break;\n\n                    await repo.fetch({ progress: false });\n                }\n            }\n        );\n    }\n\n    @gate()\n    @log()\n    async pullAll() {\n        const repositories = await this.getOrderedRepositories();\n        if (repositories.length === 0) return;\n\n        await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: 'Pulling repositories',\n                cancellable: true\n            },\n            async (progress, token) => {\n                const total = repositories.length;\n                for (const repo of repositories) {\n                    progress.report({\n                        message: `${repo.formattedName}...`,\n                        increment: 100 / total\n                    });\n\n                    if (token.isCancellationRequested) break;\n\n                    await repo.pull({ progress: false });\n                }\n            }\n        );\n    }\n\n    @gate()\n    @log()\n    async pushAll() {\n        const repositories = await this.getOrderedRepositories();\n        if (repositories.length === 0) return;\n\n        await window.withProgress(\n            {\n                location: ProgressLocation.Notification,\n                title: 'Pushing repositories',\n                cancellable: true\n            },\n            async (progress, token) => {\n                const total = repositories.length;\n                for (const repo of repositories) {\n                    progress.report({\n                        message: `${repo.formattedName}...`,\n                        increment: 100 / total\n                    });\n\n                    if (token.isCancellationRequested) break;\n\n                    await repo.push({ progress: false });\n                }\n            }\n        );\n    }\n\n    async fileExists(\n        repoPath: string,\n        fileName: string,\n        options: { ensureCase: boolean } = { ensureCase: false }\n    ): Promise<boolean> {\n        if (Container.vsls.isMaybeGuest) {\n            const guest = await Container.vsls.guest();\n            if (guest !== undefined) {\n                return guest.fileExists(repoPath, fileName, options);\n            }\n        }\n\n        const path = paths.resolve(repoPath, fileName);\n        const exists = await new Promise<boolean>((resolve, reject) => fs.exists(path, resolve));\n        if (!options.ensureCase || !exists) return exists;\n\n        // Deal with renames in case only on case-insensative file systems\n        const normalizedRepoPath = paths.normalize(repoPath);\n        return this.fileExistsWithCase(path, normalizedRepoPath, normalizedRepoPath.length);\n    }\n\n    private async fileExistsWithCase(path: string, repoPath: string, repoPathLength: number): Promise<boolean> {\n        const dir = paths.dirname(path);\n        if (dir.length < repoPathLength) return false;\n        if (dir === repoPath) return true;\n\n        const filenames = await new Promise<string[]>((resolve, reject) =>\n            fs.readdir(dir, (err: NodeJS.ErrnoException, files: string[]) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(files);\n                }\n            })\n        );\n        if (filenames.indexOf(paths.basename(path)) === -1) {\n            return false;\n        }\n        return this.fileExistsWithCase(dir, repoPath, repoPathLength);\n    }\n\n    @log()\n    async findNextCommit(repoPath: string, fileName: string, ref?: string): Promise<GitLogCommit | undefined> {\n        let log = await this.getLogForFile(repoPath, fileName, { maxCount: 1, ref: ref, renames: true, reverse: true });\n        let commit = log && Iterables.first(log.commits.values());\n        if (commit) return commit;\n\n        const nextFileName = await this.findNextFileName(repoPath, fileName, ref);\n        if (nextFileName) {\n            log = await this.getLogForFile(repoPath, nextFileName, {\n                maxCount: 1,\n                ref: ref,\n                renames: true,\n                reverse: true\n            });\n            commit = log && Iterables.first(log.commits.values());\n        }\n\n        return commit;\n    }\n\n    @log()\n    async findNextFileName(repoPath: string | undefined, fileName: string, ref?: string): Promise<string | undefined> {\n        [fileName, repoPath] = Git.splitPath(fileName, repoPath);\n\n        return (await this.fileExists(repoPath, fileName, { ensureCase: true }))\n            ? fileName\n            : this.findNextFileNameCore(repoPath, fileName, ref);\n    }\n\n    private async findNextFileNameCore(repoPath: string, fileName: string, ref?: string): Promise<string | undefined> {\n        if (ref === undefined) {\n            // Get the most recent commit for this file name\n            ref = await this.getRecentShaForFile(repoPath, fileName);\n            if (ref === undefined) return undefined;\n        }\n\n        // Get the full commit (so we can see if there are any matching renames in the files)\n        const log = await this.getLog(repoPath, { maxCount: 1, ref: ref });\n        if (log === undefined) return undefined;\n\n        const c = Iterables.first(log.commits.values());\n        const file = c.files.find(f => f.originalFileName === fileName);\n        if (file === undefined) return undefined;\n\n        return file.fileName;\n    }\n\n    async findWorkingFileName(commit: GitCommit): Promise<[string | undefined, string | undefined]>;\n    async findWorkingFileName(\n        fileName: string,\n        repoPath?: string,\n        ref?: string\n    ): Promise<[string | undefined, string | undefined]>;\n    @log()\n    async findWorkingFileName(\n        commitOrFileName: GitCommit | string,\n        repoPath?: string,\n        ref?: string\n    ): Promise<[string | undefined, string | undefined]> {\n        let fileName;\n        if (typeof commitOrFileName === 'string') {\n            fileName = commitOrFileName;\n            if (repoPath === undefined) {\n                repoPath = await this.getRepoPath(fileName, { ref: ref });\n                [fileName, repoPath] = Git.splitPath(fileName, repoPath);\n            }\n            else {\n                fileName = Strings.normalizePath(paths.relative(repoPath, fileName));\n            }\n        }\n        else {\n            const c = commitOrFileName;\n            repoPath = c.repoPath;\n            if (c.workingFileName && (await this.fileExists(repoPath, c.workingFileName, { ensureCase: true }))) {\n                return [c.workingFileName, repoPath];\n            }\n            fileName = c.fileName;\n        }\n\n        // Keep walking up to the most recent commit for a given filename, until it exists on disk\n        while (true) {\n            if (await this.fileExists(repoPath, fileName, { ensureCase: true })) return [fileName, repoPath];\n\n            fileName = await this.findNextFileNameCore(repoPath, fileName);\n            if (fileName === undefined) return [undefined, undefined];\n        }\n    }\n\n    @log({\n        args: {\n            0: (editor: TextEditor) =>\n                editor !== undefined ? `TextEditor(${Logger.toLoggable(editor.document.uri)})` : 'undefined'\n        }\n    })\n    async getActiveRepoPath(editor?: TextEditor): Promise<string | undefined> {\n        editor = editor || window.activeTextEditor;\n\n        let repoPath;\n        if (editor != null) {\n            const doc = await Container.tracker.getOrAdd(editor.document.uri);\n            if (doc !== undefined) {\n                repoPath = doc.uri.repoPath;\n            }\n        }\n\n        if (repoPath != null) return repoPath;\n\n        return this.getHighlanderRepoPath();\n    }\n\n    @log()\n    getHighlanderRepoPath(): string | undefined {\n        const entry = this._repositoryTree.highlander();\n        if (entry === undefined) return undefined;\n\n        const [repo] = entry;\n        return repo.path;\n    }\n\n    @log()\n    async getBlameForFile(uri: GitUri): Promise<GitBlame | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        let key = 'blame';\n        if (uri.sha !== undefined) {\n            key += `:${uri.sha}`;\n        }\n\n        const doc = await Container.tracker.getOrAdd(uri);\n        if (this.UseCaching) {\n            if (doc.state !== undefined) {\n                const cachedBlame = doc.state.get<CachedBlame>(key);\n                if (cachedBlame !== undefined) {\n                    Logger.debug(cc, `Cache hit: '${key}'`);\n                    return cachedBlame.item;\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: '${key}'`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getBlameForFileCore(uri, doc, key, cc);\n\n        if (doc.state !== undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedBlame = {\n                item: promise as Promise<GitBlame>\n            };\n            doc.state.set<CachedBlame>(key, value);\n        }\n\n        return promise;\n    }\n\n    private async getBlameForFileCore(\n        uri: GitUri,\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitBlame | undefined> {\n        if (!(await this.isTracked(uri))) {\n            Logger.log(cc, `Skipping blame; '${uri.fsPath}' is not tracked`);\n            return GitService.emptyPromise as Promise<GitBlame>;\n        }\n\n        const [file, root] = Git.splitPath(uri.fsPath, uri.repoPath, false);\n\n        try {\n            const data = await Git.blame(root, file, uri.sha, {\n                args: Container.config.advanced.blame.customArguments,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace\n            });\n            const blame = GitBlameParser.parse(data, root, file, await this.getCurrentUser(root));\n            return blame;\n        }\n        catch (ex) {\n            // Trap and cache expected blame errors\n            if (document.state !== undefined) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedBlame = {\n                    item: GitService.emptyPromise as Promise<GitBlame>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedBlame>(key, value);\n\n                document.setBlameFailure();\n\n                return GitService.emptyPromise as Promise<GitBlame>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log({\n        args: {\n            1: contents => '<contents>'\n        }\n    })\n    async getBlameForFileContents(uri: GitUri, contents: string): Promise<GitBlame | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        const key = `blame:${Strings.sha1(contents)}`;\n\n        const doc = await Container.tracker.getOrAdd(uri);\n        if (this.UseCaching) {\n            if (doc.state !== undefined) {\n                const cachedBlame = doc.state.get<CachedBlame>(key);\n                if (cachedBlame !== undefined) {\n                    Logger.debug(cc, `Cache hit: ${key}`);\n                    return cachedBlame.item;\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: ${key}`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getBlameForFileContentsCore(uri, contents, doc, key, cc);\n\n        if (doc.state !== undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedBlame = {\n                item: promise as Promise<GitBlame>\n            };\n            doc.state.set<CachedBlame>(key, value);\n        }\n\n        return promise;\n    }\n\n    async getBlameForFileContentsCore(\n        uri: GitUri,\n        contents: string,\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitBlame | undefined> {\n        if (!(await this.isTracked(uri))) {\n            Logger.log(cc, `Skipping blame; '${uri.fsPath}' is not tracked`);\n            return GitService.emptyPromise as Promise<GitBlame>;\n        }\n\n        const [file, root] = Git.splitPath(uri.fsPath, uri.repoPath, false);\n\n        try {\n            const data = await Git.blame_contents(root, file, contents, {\n                args: Container.config.advanced.blame.customArguments,\n                correlationKey: `:${key}`,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace\n            });\n            const blame = GitBlameParser.parse(data, root, file, await this.getCurrentUser(root));\n            return blame;\n        }\n        catch (ex) {\n            // Trap and cache expected blame errors\n            if (document.state !== undefined) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedBlame = {\n                    item: GitService.emptyPromise as Promise<GitBlame>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedBlame>(key, value);\n\n                document.setBlameFailure();\n                return GitService.emptyPromise as Promise<GitBlame>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log()\n    async getBlameForLine(\n        uri: GitUri,\n        line: number,\n        options: { skipCache?: boolean } = {}\n    ): Promise<GitBlameLine | undefined> {\n        if (!options.skipCache && this.UseCaching) {\n            const blame = await this.getBlameForFile(uri);\n            if (blame === undefined) return undefined;\n\n            let blameLine = blame.lines[line];\n            if (blameLine === undefined) {\n                if (blame.lines.length !== line) return undefined;\n                blameLine = blame.lines[line - 1];\n            }\n\n            const commit = blame.commits.get(blameLine.sha);\n            if (commit === undefined) return undefined;\n\n            const author = blame.authors.get(commit.author)!;\n            return {\n                author: { ...author, lineCount: commit.lines.length },\n                commit: commit,\n                line: blameLine\n            };\n        }\n\n        const lineToBlame = line + 1;\n        const fileName = uri.fsPath;\n\n        try {\n            const data = await Git.blame(uri.repoPath, fileName, uri.sha, {\n                args: Container.config.advanced.blame.customArguments,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace,\n                startLine: lineToBlame,\n                endLine: lineToBlame\n            });\n            const blame = GitBlameParser.parse(data, uri.repoPath, fileName, await this.getCurrentUser(uri.repoPath!));\n            if (blame === undefined) return undefined;\n\n            return {\n                author: Iterables.first(blame.authors.values()),\n                commit: Iterables.first(blame.commits.values()),\n                line: blame.lines[line]\n            };\n        }\n        catch {\n            return undefined;\n        }\n    }\n\n    @log({\n        args: {\n            2: contents => '<contents>'\n        }\n    })\n    async getBlameForLineContents(\n        uri: GitUri,\n        line: number,\n        contents: string,\n        options: { skipCache?: boolean } = {}\n    ): Promise<GitBlameLine | undefined> {\n        if (!options.skipCache && this.UseCaching) {\n            const blame = await this.getBlameForFileContents(uri, contents);\n            if (blame === undefined) return undefined;\n\n            let blameLine = blame.lines[line];\n            if (blameLine === undefined) {\n                if (blame.lines.length !== line) return undefined;\n                blameLine = blame.lines[line - 1];\n            }\n\n            const commit = blame.commits.get(blameLine.sha);\n            if (commit === undefined) return undefined;\n\n            const author = blame.authors.get(commit.author)!;\n            return {\n                author: { ...author, lineCount: commit.lines.length },\n                commit: commit,\n                line: blameLine\n            };\n        }\n\n        const lineToBlame = line + 1;\n        const fileName = uri.fsPath;\n\n        try {\n            const data = await Git.blame_contents(uri.repoPath, fileName, contents, {\n                args: Container.config.advanced.blame.customArguments,\n                ignoreWhitespace: Container.config.blame.ignoreWhitespace,\n                startLine: lineToBlame,\n                endLine: lineToBlame\n            });\n            const currentUser = await this.getCurrentUser(uri.repoPath!);\n            const blame = GitBlameParser.parse(data, uri.repoPath, fileName, currentUser);\n            if (blame === undefined) return undefined;\n\n            return {\n                author: Iterables.first(blame.authors.values()),\n                commit: Iterables.first(blame.commits.values()),\n                line: blame.lines[line]\n            };\n        }\n        catch {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getBlameForRange(uri: GitUri, range: Range): Promise<GitBlameLines | undefined> {\n        const blame = await this.getBlameForFile(uri);\n        if (blame === undefined) return undefined;\n\n        return this.getBlameForRangeSync(blame, uri, range);\n    }\n\n    @log({\n        args: { 0: blame => '<blame>' }\n    })\n    getBlameForRangeSync(blame: GitBlame, uri: GitUri, range: Range): GitBlameLines | undefined {\n        if (blame.lines.length === 0) return { allLines: blame.lines, ...blame };\n\n        if (range.start.line === 0 && range.end.line === blame.lines.length - 1) {\n            return { allLines: blame.lines, ...blame };\n        }\n\n        const lines = blame.lines.slice(range.start.line, range.end.line + 1);\n        const shas = new Set(lines.map(l => l.sha));\n\n        const authors: Map<string, GitAuthor> = new Map();\n        const commits: Map<string, GitBlameCommit> = new Map();\n        for (const c of blame.commits.values()) {\n            if (!shas.has(c.sha)) continue;\n\n            const commit = c.with({\n                lines: c.lines.filter(l => l.line >= range.start.line && l.line <= range.end.line)\n            });\n            commits.set(c.sha, commit);\n\n            let author = authors.get(commit.author);\n            if (author === undefined) {\n                author = {\n                    name: commit.author,\n                    lineCount: 0\n                };\n                authors.set(author.name, author);\n            }\n\n            author.lineCount += commit.lines.length;\n        }\n\n        const sortedAuthors = new Map([...authors.entries()].sort((a, b) => b[1].lineCount - a[1].lineCount));\n\n        return {\n            repoPath: uri.repoPath!,\n            authors: sortedAuthors,\n            commits: commits,\n            lines: lines,\n            allLines: blame.lines\n        };\n    }\n\n    @log()\n    async getBranch(repoPath: string | undefined): Promise<GitBranch | undefined> {\n        if (repoPath === undefined) return undefined;\n\n        const data = await Git.revparse_currentBranch(repoPath);\n        if (data === undefined) return undefined;\n\n        const branch = data[0].split('\\n');\n        return new GitBranch(repoPath, branch[0], true, data[1], branch[1]);\n    }\n\n    @log()\n    async getBranches(repoPath: string | undefined): Promise<GitBranch[]> {\n        if (repoPath === undefined) return [];\n\n        let branches = this._branchesCache.get(repoPath);\n        if (branches !== undefined) return branches;\n\n        const data = await Git.branch(repoPath, { all: true });\n        // If we don't get any data, assume the repo doesn't have any commits yet so check if we have a current branch\n        if (data == null || data.length === 0) {\n            const current = await this.getBranch(repoPath);\n            branches = current !== undefined ? [current] : [];\n        }\n        else {\n            branches = GitBranchParser.parse(data, repoPath) || [];\n        }\n\n        const repo = await this.getRepository(repoPath);\n        if (repo !== undefined && repo.supportsChangeEvents) {\n            this._branchesCache.set(repoPath, branches);\n        }\n        return branches;\n    }\n\n    @log()\n    async getChangedFilesCount(repoPath: string, ref?: string): Promise<GitDiffShortStat | undefined> {\n        const data = await Git.diff_shortstat(repoPath, ref);\n        return GitDiffParser.parseShortStat(data);\n    }\n\n    @log()\n    getConfig(key: string, repoPath?: string): Promise<string | undefined> {\n        return Git.config_get(key, repoPath);\n    }\n\n    @log()\n    async getContributors(repoPath: string): Promise<GitContributor[]> {\n        if (repoPath === undefined) return [];\n\n        const data = await Git.shortlog(repoPath);\n        const shortlog = GitShortLogParser.parse(data, repoPath);\n        return shortlog === undefined ? [] : shortlog.contributors;\n    }\n\n    @log()\n    async getCurrentUser(repoPath: string) {\n        let user = this._userMapCache.get(repoPath);\n        if (user != null) return user;\n        // If we found the repo, but no user data was found just return\n        if (user === null) return undefined;\n\n        const data = await Git.config_getRegex('user.(name|email)', repoPath, { local: true });\n        if (!data) {\n            // If we found no user data, mark it so we won't bother trying again\n            this._userMapCache.set(repoPath, null);\n            return undefined;\n        }\n\n        user = { name: undefined, email: undefined };\n\n        let key: string;\n        let value: string;\n        let match: RegExpExecArray | null = null;\n        do {\n            match = userConfigRegex.exec(data);\n            if (match == null) break;\n\n            [, key, value] = match;\n            // Stops excessive memory usage -- https://bugs.chromium.org/p/v8/issues/detail?id=2869\n            user[key as 'name' | 'email'] = ` ${value}`.substr(1);\n        } while (match != null);\n\n        const author = `${user.name} <${user.email}>`;\n        // Check if there is a mailmap for the current user\n        const mappedAuthor = await Git.check_mailmap(repoPath, author);\n        if (mappedAuthor != null && mappedAuthor.length !== 0 && author !== mappedAuthor) {\n            match = mappedAuthorRegex.exec(mappedAuthor);\n            if (match != null) {\n                [, user.name, user.email] = match;\n            }\n        }\n\n        this._userMapCache.set(repoPath, user);\n        return user;\n    }\n\n    @log()\n    async getDiffForFile(uri: GitUri, ref1?: string, ref2?: string): Promise<GitDiff | undefined> {\n        const cc = Logger.getCorrelationContext();\n\n        if (ref1 !== undefined && ref2 === undefined && uri.sha !== undefined) {\n            ref2 = uri.sha;\n        }\n\n        let key = 'diff';\n        if (ref1 !== undefined) {\n            key += `:${ref1}`;\n        }\n        if (ref2 !== undefined) {\n            key += `:${ref2}`;\n        }\n\n        const doc = await Container.tracker.getOrAdd(uri);\n        if (this.UseCaching) {\n            if (doc.state !== undefined) {\n                const cachedDiff = doc.state.get<CachedDiff>(key);\n                if (cachedDiff !== undefined) {\n                    Logger.debug(cc, `Cache hit: '${key}'`);\n                    return cachedDiff.item;\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: '${key}'`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getDiffForFileCore(\n            uri.repoPath,\n            uri.fsPath,\n            ref1,\n            ref2,\n            { encoding: GitService.getEncoding(uri) },\n            doc,\n            key,\n            cc\n        );\n\n        if (doc.state !== undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedDiff = {\n                item: promise as Promise<GitDiff>\n            };\n            doc.state.set<CachedDiff>(key, value);\n        }\n\n        return promise;\n    }\n\n    private async getDiffForFileCore(\n        repoPath: string | undefined,\n        fileName: string,\n        ref1: string | undefined,\n        ref2: string | undefined,\n        options: { encoding?: string },\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitDiff | undefined> {\n        const [file, root] = Git.splitPath(fileName, repoPath, false);\n\n        try {\n            const data = await Git.diff(root, file, ref1, ref2, { ...options, filter: 'M' });\n            const diff = GitDiffParser.parse(data);\n            return diff;\n        }\n        catch (ex) {\n            // Trap and cache expected diff errors\n            if (document.state !== undefined) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedDiff = {\n                    item: GitService.emptyPromise as Promise<GitDiff>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedDiff>(key, value);\n\n                return GitService.emptyPromise as Promise<GitDiff>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log()\n    async getDiffForLine(\n        uri: GitUri,\n        line: number,\n        ref1?: string,\n        ref2?: string\n    ): Promise<GitDiffChunkLine | undefined> {\n        try {\n            const diff = await this.getDiffForFile(uri, ref1, ref2);\n            if (diff === undefined) return undefined;\n\n            const chunk = diff.chunks.find(c => c.currentPosition.start <= line && c.currentPosition.end >= line);\n            if (chunk === undefined) return undefined;\n\n            return chunk.lines[line - chunk.currentPosition.start + 1];\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getDiffStatus(\n        repoPath: string,\n        ref1?: string,\n        ref2?: string,\n        options: { filter?: string } = {}\n    ): Promise<GitFile[] | undefined> {\n        try {\n            const data = await Git.diff_nameStatus(repoPath, ref1, ref2, options);\n            const diff = GitDiffParser.parseNameStatus(data, repoPath);\n            return diff;\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getFileStatusForCommit(repoPath: string, fileName: string, ref: string): Promise<GitFile | undefined> {\n        if (ref === GitService.deletedOrMissingSha || GitService.isUncommitted(ref)) return undefined;\n\n        const data = await Git.show_status(repoPath, fileName, ref);\n        if (!data) return undefined;\n\n        const files = GitDiffParser.parseNameStatus(data, repoPath);\n        if (files === undefined || files.length === 0) return undefined;\n\n        return files[0];\n    }\n\n    @log()\n    getRecentLogCommitForFile(repoPath: string | undefined, fileName: string): Promise<GitLogCommit | undefined> {\n        return this.getLogCommitForFile(repoPath, fileName, undefined);\n    }\n\n    @log()\n    getRecentShaForFile(repoPath: string, fileName: string) {\n        return Git.log_recent(repoPath, fileName);\n    }\n\n    @log()\n    async getLogCommit(repoPath: string, ref: string): Promise<GitLogCommit | undefined> {\n        const log = await this.getLog(repoPath, { maxCount: 2, ref: ref });\n        if (log === undefined) return undefined;\n\n        return log.commits.get(ref);\n    }\n\n    @log()\n    async getLogCommitForFile(\n        repoPath: string | undefined,\n        fileName: string,\n        options: { ref?: string; firstIfNotFound?: boolean; reverse?: boolean } = {}\n    ): Promise<GitLogCommit | undefined> {\n        const log = await this.getLogForFile(repoPath, fileName, {\n            maxCount: 2,\n            ref: options.ref,\n            reverse: options.reverse\n        });\n        if (log === undefined) return undefined;\n\n        const commit = options.ref && log.commits.get(options.ref);\n        if (commit === undefined && !options.firstIfNotFound && options.ref) {\n            // If the ref isn't a valid sha we will never find it, so let it fall through so we return the first\n            if (!Git.isSha(options.ref) || Git.isUncommitted(options.ref)) return undefined;\n        }\n\n        return commit || Iterables.first(log.commits.values());\n    }\n\n    @log()\n    async getLog(\n        repoPath: string,\n        options: { authors?: string[]; maxCount?: number; ref?: string; reverse?: boolean } = {}\n    ): Promise<GitLog | undefined> {\n        const maxCount = options.maxCount == null ? Container.config.advanced.maxListItems || 0 : options.maxCount;\n\n        try {\n            const data = await Git.log(repoPath, {\n                authors: options.authors,\n                maxCount: maxCount,\n                ref: options.ref,\n                reverse: options.reverse\n            });\n            const log = GitLogParser.parse(\n                data,\n                GitCommitType.Branch,\n                repoPath,\n                undefined,\n                options.ref,\n                await this.getCurrentUser(repoPath),\n                maxCount,\n                options.reverse!,\n                undefined\n            );\n\n            if (log !== undefined) {\n                const opts = { ...options };\n                log.query = (maxCount: number | undefined) => this.getLog(repoPath, { ...opts, maxCount: maxCount });\n            }\n\n            return log;\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getLogForSearch(\n        repoPath: string,\n        search: string,\n        searchBy: GitRepoSearchBy,\n        options: { maxCount?: number } = {}\n    ): Promise<GitLog | undefined> {\n        let maxCount = options.maxCount == null ? Container.config.advanced.maxListItems || 0 : options.maxCount;\n\n        let searchArgs: string[] | undefined = undefined;\n        switch (searchBy) {\n            case GitRepoSearchBy.Author:\n                searchArgs = ['-m', '-M', '--all', '--full-history', '-E', '-i', `--author=${search}`];\n                break;\n            case GitRepoSearchBy.ChangedLines:\n                searchArgs = ['-M', '--all', '--full-history', '-E', '-i', `-G${search}`];\n                break;\n            case GitRepoSearchBy.Changes:\n                searchArgs = ['-M', '--all', '--full-history', '-E', '-i', '--pickaxe-regex', `-S${search}`];\n                break;\n            case GitRepoSearchBy.Files:\n                searchArgs = ['-M', '--all', '--full-history', '-E', '-i', '--', `${search}`];\n                break;\n            case GitRepoSearchBy.Message:\n                searchArgs = ['-m', '-M', '--all', '--full-history', '-E', '-i'];\n                if (search) {\n                    searchArgs.push(`--grep=${search}`);\n                }\n                break;\n            case GitRepoSearchBy.Sha:\n                searchArgs = ['-m', '-M', search];\n                maxCount = 1;\n                break;\n        }\n\n        try {\n            const data = await Git.log_search(repoPath, searchArgs, { maxCount: maxCount });\n            const log = GitLogParser.parse(\n                data,\n                GitCommitType.Branch,\n                repoPath,\n                undefined,\n                undefined,\n                await this.getCurrentUser(repoPath),\n                maxCount,\n                false,\n                undefined\n            );\n\n            if (log !== undefined) {\n                const opts = { ...options };\n                log.query = (maxCount: number | undefined) =>\n                    this.getLogForSearch(repoPath, search, searchBy, { ...opts, maxCount: maxCount });\n            }\n\n            return log;\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n\n    @log()\n    async getLogForFile(\n        repoPath: string | undefined,\n        fileName: string,\n        options: { maxCount?: number; range?: Range; ref?: string; renames?: boolean; reverse?: boolean } = {}\n    ): Promise<GitLog | undefined> {\n        if (repoPath !== undefined && repoPath === Strings.normalizePath(fileName)) {\n            throw new Error(`File name cannot match the repository path; fileName=${fileName}`);\n        }\n\n        const cc = Logger.getCorrelationContext();\n\n        options = { reverse: false, ...options };\n\n        if (options.renames === undefined) {\n            options.renames = Container.config.advanced.fileHistoryFollowsRenames;\n        }\n\n        let key = 'log';\n        if (options.ref !== undefined) {\n            key += `:${options.ref}`;\n        }\n        if (options.maxCount !== undefined) {\n            key += `:n${options.maxCount}`;\n        }\n        if (options.renames) {\n            key += ':follow';\n        }\n        if (options.reverse) {\n            key += ':reverse';\n        }\n\n        const doc = await Container.tracker.getOrAdd(GitUri.fromFile(fileName, repoPath!, options.ref));\n        if (this.UseCaching && options.range === undefined) {\n            if (doc.state !== undefined) {\n                const cachedLog = doc.state.get<CachedLog>(key);\n                if (cachedLog !== undefined) {\n                    Logger.debug(cc, `Cache hit: '${key}'`);\n                    return cachedLog.item;\n                }\n\n                if (options.ref !== undefined || options.maxCount !== undefined) {\n                    // Since we are looking for partial log, see if we have the log of the whole file\n                    const cachedLog = doc.state.get<CachedLog>(\n                        `log${options.renames ? ':follow' : emptyStr}${options.reverse ? ':reverse' : emptyStr}`\n                    );\n                    if (cachedLog !== undefined) {\n                        if (options.ref === undefined) {\n                            Logger.debug(cc, `Cache hit: ~'${key}'`);\n                            return cachedLog.item;\n                        }\n\n                        Logger.debug(cc, `Cache ?: '${key}'`);\n                        let log = await cachedLog.item;\n                        if (log !== undefined && !log.truncated && log.commits.has(options.ref)) {\n                            Logger.debug(cc, `Cache hit: '${key}'`);\n\n                            // Create a copy of the log starting at the requested commit\n                            let skip = true;\n                            let i = 0;\n                            const authors = new Map<string, GitAuthor>();\n                            const commits = new Map(\n                                Iterables.filterMap<[string, GitLogCommit], [string, GitLogCommit]>(\n                                    log.commits.entries(),\n                                    ([ref, c]) => {\n                                        if (skip) {\n                                            if (ref !== options.ref) return undefined;\n                                            skip = false;\n                                        }\n\n                                        i++;\n                                        if (options.maxCount !== undefined && i > options.maxCount) {\n                                            return undefined;\n                                        }\n\n                                        authors.set(c.author, log.authors.get(c.author)!);\n                                        return [ref, c];\n                                    }\n                                )\n                            );\n\n                            const opts = { ...options };\n                            log = {\n                                ...log,\n                                maxCount: options.maxCount,\n                                count: commits.size,\n                                commits: commits,\n                                authors: authors,\n                                query: (maxCount: number | undefined) =>\n                                    this.getLogForFile(repoPath, fileName, { ...opts, maxCount: maxCount })\n                            };\n\n                            return log;\n                        }\n                    }\n                }\n            }\n\n            Logger.debug(cc, `Cache miss: '${key}'`);\n\n            if (doc.state === undefined) {\n                doc.state = new GitDocumentState(doc.key);\n            }\n        }\n\n        const promise = this.getLogForFileCore(repoPath, fileName, options, doc, key, cc);\n\n        if (doc.state !== undefined && options.range === undefined) {\n            Logger.debug(cc, `Cache add: '${key}'`);\n\n            const value: CachedLog = {\n                item: promise as Promise<GitLog>\n            };\n            doc.state.set<CachedLog>(key, value);\n        }\n\n        return promise;\n    }\n\n    private async getLogForFileCore(\n        repoPath: string | undefined,\n        fileName: string,\n        options: { maxCount?: number; range?: Range; ref?: string; renames?: boolean; reverse?: boolean },\n        document: TrackedDocument<GitDocumentState>,\n        key: string,\n        cc: LogCorrelationContext | undefined\n    ): Promise<GitLog | undefined> {\n        if (!(await this.isTracked(fileName, repoPath, { ref: options.ref }))) {\n            Logger.log(cc, `Skipping log; '${fileName}' is not tracked`);\n            return GitService.emptyPromise as Promise<GitLog>;\n        }\n\n        const [file, root] = Git.splitPath(fileName, repoPath, false);\n\n        try {\n            // eslint-disable-next-line prefer-const\n            let { range, ...opts } = options;\n            if (range !== undefined && range.start.line > range.end.line) {\n                range = new Range(range.end, range.start);\n            }\n\n            const maxCount = options.maxCount == null ? Container.config.advanced.maxListItems || 0 : options.maxCount;\n\n            const data = await Git.log_file(root, file, {\n                ...opts,\n                maxCount: maxCount,\n                startLine: range === undefined ? undefined : range.start.line + 1,\n                endLine: range === undefined ? undefined : range.end.line + 1\n            });\n            const log = GitLogParser.parse(\n                data,\n                GitCommitType.File,\n                root,\n                file,\n                opts.ref,\n                await this.getCurrentUser(root),\n                maxCount,\n                opts.reverse!,\n                range\n            );\n\n            if (log !== undefined) {\n                const opts = { ...options };\n                log.query = (maxCount: number | undefined) =>\n                    this.getLogForFile(repoPath, fileName, { ...opts, maxCount: maxCount });\n            }\n\n            return log;\n        }\n        catch (ex) {\n            // Trap and cache expected log errors\n            if (document.state !== undefined && options.range === undefined && !options.reverse) {\n                const msg = ex && ex.toString();\n                Logger.debug(cc, `Cache replace (with empty promise): '${key}'`);\n\n                const value: CachedLog = {\n                    item: GitService.emptyPromise as Promise<GitLog>,\n                    errorMessage: msg\n                };\n                document.state.set<CachedLog>(key, value);\n\n                return GitService.emptyPromise as Promise<GitLog>;\n            }\n\n            return undefined;\n        }\n    }\n\n    @log()\n    async hasRemotes(repoPath: string | undefined): Promise<boolean> {\n        if (repoPath === undefined) return false;\n\n        const repository = await this.getRepository(repoPath);\n        if (repository === undefined) return false;\n\n        return repository.hasRemotes();\n    }\n\n    @log()\n    async hasTrackingBranch(repoPath: string | undefined): Promise<boolean> {\n        if (repoPath === undefined) return false;\n\n        const repository = await this.getRepository(repoPath);\n        if (repository === undefined) return false;\n\n        return repository.hasTrackingBranch();\n    }\n\n    @log()\n    async getMergeBase(repoPath: string, ref1: string, ref2: string, options: { forkPoint?: boolean } = {}) {\n        const cc = Logger.getCorrelationContext();\n\n        try {\n            const data = await Git.merge_base(repoPath, ref1, ref2, options);\n            if (data === undefined) return undefined;\n\n            return data.split('\\n')[0];\n        }\n        catch (ex) {\n            Logger.error(ex, cc);\n            return undefined;\n        }\n    }\n\n    @log()\n    async getRemotes(repoPath: string | undefined, options: { includeAll?: boolean } = {}): Promise<GitRemote[]> {\n        if (repoPath === undefined) return [];\n\n        const repository = await this.getRepository(repoPath);\n        const remotes = repository !== undefined ? repository.getRemotes() : this.getRemotesCore(repoPath);\n\n        if (options.includeAll) return remotes;\n\n        return (await remotes).filter(r => r.provider !== undefined);\n    }\n\n    async getRemotesCore(repoPath: string | undefined, providers?: RemoteProviders): Promise<GitRemote[]> {\n        if (repoPath === undefined) return [];\n\n        providers =\n            providers ||\n            RemoteProviderFactory.loadProviders(\n                configuration.get<RemotesConfig[] | null | undefined>(configuration.name('remotes').value, null)\n            );\n\n        try {\n            const data = await Git.remote(repoPath);\n            return GitRemoteParser.parse(data, repoPath, RemoteProviderFactory.factory(providers));\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return [];\n        }\n    }\n\n    async getRepoPath(filePath: string, options?: { ref?: string }): Promise<string | undefined>;\n    async getRepoPath(uri: Uri | undefined, options?: { ref?: string }): Promise<string | undefined>;\n    @log<GitService['getRepoPath']>({\n        exit: path => `returned ${path}`\n    })\n    async getRepoPath(\n        filePathOrUri: string | Uri | undefined,\n        options: { ref?: string } = {}\n    ): Promise<string | undefined> {\n        if (filePathOrUri == null) return this.getHighlanderRepoPath();\n        if (filePathOrUri instanceof GitUri) return filePathOrUri.repoPath;\n\n        const cc = Logger.getCorrelationContext();\n\n        // Don't save the tracking info to the cache, because we could be looking in the wrong place (e.g. looking in the root when the file is in a submodule)\n        let repo = await this.getRepository(filePathOrUri, { ...options, skipCacheUpdate: true });\n        if (repo !== undefined) return repo.path;\n\n        const rp = await this.getRepoPathCore(\n            typeof filePathOrUri === 'string' ? filePathOrUri : filePathOrUri.fsPath,\n            false\n        );\n        if (rp === undefined) return undefined;\n\n        // Recheck this._repositoryTree.get(rp) to make sure we haven't already tried adding this due to awaits\n        if (this._repositoryTree.get(rp) !== undefined) return rp;\n\n        const isVslsScheme =\n            typeof filePathOrUri === 'string' ? undefined : filePathOrUri.scheme === DocumentSchemes.Vsls;\n\n        // If this new repo is inside one of our known roots and we we don't already know about, add it\n        const root = this.findRepositoryForPath(this._repositoryTree, rp, isVslsScheme);\n\n        let folder;\n        if (root !== undefined) {\n            // Not sure why I added this for vsls (I can't see a reason for it anymore), but if it is added it will break submodules\n            // rp = root.path;\n            folder = root.folder;\n        }\n        else {\n            folder = workspace.getWorkspaceFolder(GitUri.file(rp, isVslsScheme));\n            if (folder === undefined) {\n                const parts = rp.split(slash);\n                folder = {\n                    uri: GitUri.file(rp, isVslsScheme),\n                    name: parts[parts.length - 1],\n                    index: this._repositoryTree.count()\n                };\n            }\n        }\n\n        Logger.log(cc, `Repository found in '${rp}'`);\n        repo = new Repository(folder, rp, false, this.onAnyRepositoryChanged.bind(this), this._suspended);\n        this._repositoryTree.set(rp, repo);\n\n        // Send a notification that the repositories changed\n        setImmediate(async () => {\n            await this.updateContext(this._repositoryTree);\n\n            this.fireRepositoriesChanged();\n        });\n\n        return rp;\n    }\n\n    private async getRepoPathCore(filePath: string, isDirectory: boolean): Promise<string | undefined> {\n        try {\n            return await Git.revparse_toplevel(isDirectory ? filePath : paths.dirname(filePath));\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return undefined;\n        }\n    }\n\n    @log()\n    async getRepoPathOrActive(uri: Uri | undefined, editor: TextEditor | undefined) {\n        const repoPath = await this.getRepoPath(uri);\n        if (repoPath) return repoPath;\n\n        return this.getActiveRepoPath(editor);\n    }\n\n    @log()\n    async getRepositories(predicate?: (repo: Repository) => boolean): Promise<Iterable<Repository>> {\n        const repositoryTree = await this.getRepositoryTree();\n\n        const values = repositoryTree.values();\n        return predicate !== undefined ? Iterables.filter(values, predicate) : values;\n    }\n\n    @log()\n    async getOrderedRepositories(): Promise<Repository[]> {\n        const repositories = [...(await this.getRepositories())];\n        if (repositories.length === 0) return repositories;\n\n        return repositories\n            .filter(r => !r.closed)\n            .sort((a, b) => (a.starred ? -1 : 1) - (b.starred ? -1 : 1) || a.index - b.index);\n    }\n\n    private async getRepositoryTree(): Promise<TernarySearchTree<Repository>> {\n        if (this._repositoriesLoadingPromise !== undefined) {\n            await this._repositoriesLoadingPromise;\n            this._repositoriesLoadingPromise = undefined;\n        }\n\n        return this._repositoryTree;\n    }\n\n    async getRepository(\n        repoPath: string,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<Repository | undefined>;\n    async getRepository(\n        uri: Uri,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<Repository | undefined>;\n    async getRepository(\n        repoPathOrUri: string | Uri,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<Repository | undefined>;\n    @log<GitService['getRepository']>({\n        exit: repo => `returned ${repo !== undefined ? `${repo.path}` : 'undefined'}`\n    })\n    async getRepository(\n        repoPathOrUri: string | Uri,\n        options: { ref?: string; skipCacheUpdate?: boolean } = {}\n    ): Promise<Repository | undefined> {\n        const repositoryTree = await this.getRepositoryTree();\n\n        let isVslsScheme;\n\n        let path: string;\n        if (typeof repoPathOrUri === 'string') {\n            const repo = repositoryTree.get(repoPathOrUri);\n            if (repo !== undefined) return repo;\n\n            path = repoPathOrUri;\n            isVslsScheme = undefined;\n        }\n        else {\n            if (repoPathOrUri instanceof GitUri) {\n                if (repoPathOrUri.repoPath) {\n                    const repo = repositoryTree.get(repoPathOrUri.repoPath);\n                    if (repo !== undefined) return repo;\n                }\n\n                path = repoPathOrUri.fsPath;\n            }\n            else {\n                path = repoPathOrUri.fsPath;\n            }\n\n            isVslsScheme = repoPathOrUri.scheme === DocumentSchemes.Vsls;\n        }\n\n        const repo = this.findRepositoryForPath(repositoryTree, path, isVslsScheme);\n        if (repo === undefined) return undefined;\n\n        // Make sure the file is tracked in this repo before returning -- it could be from a submodule\n        if (!(await this.isTracked(path, repo.path, options))) return undefined;\n        return repo;\n    }\n\n    private findRepositoryForPath(\n        repositoryTree: TernarySearchTree<Repository>,\n        path: string,\n        isVslsScheme: boolean | undefined\n    ): Repository | undefined {\n        let repo = repositoryTree.findSubstr(path);\n        // If we can't find the repo and we are a guest, check if we are a \"root\" workspace\n        if (repo === undefined && isVslsScheme !== false && Container.vsls.isMaybeGuest) {\n            if (!vslsUriPrefixRegex.test(path)) {\n                path = Strings.normalizePath(path);\n                const vslsPath = `/~0${path[0] === slash ? path : `/${path}`}`;\n                repo = repositoryTree.findSubstr(vslsPath);\n            }\n        }\n        return repo;\n    }\n\n    async getRepositoryCount(): Promise<number> {\n        const repositoryTree = await this.getRepositoryTree();\n        return repositoryTree.count();\n    }\n\n    @log()\n    async getStashList(repoPath: string | undefined): Promise<GitStash | undefined> {\n        if (repoPath === undefined) return undefined;\n\n        const data = await Git.stash_list(repoPath);\n        const stash = GitStashParser.parse(data, repoPath);\n        return stash;\n    }\n\n    @log()\n    async getStatusForFile(repoPath: string, fileName: string): Promise<GitStatusFile | undefined> {\n        const porcelainVersion = Git.validateVersion(2, 11) ? 2 : 1;\n\n        const data = await Git.status_file(repoPath, fileName, porcelainVersion);\n        const status = GitStatusParser.parse(data, repoPath, porcelainVersion);\n        if (status === undefined || !status.files.length) return undefined;\n\n        return status.files[0];\n    }\n\n    @log()\n    async getStatusForRepo(repoPath: string | undefined): Promise<GitStatus | undefined> {\n        if (repoPath === undefined) return undefined;\n\n        const porcelainVersion = Git.validateVersion(2, 11) ? 2 : 1;\n\n        const data = await Git.status(repoPath, porcelainVersion);\n        const status = GitStatusParser.parse(data, repoPath, porcelainVersion);\n        return status;\n    }\n\n    @log()\n    async getTags(repoPath: string | undefined, options: { includeRefs?: boolean } = {}): Promise<GitTag[]> {\n        if (repoPath === undefined) return [];\n\n        let tags;\n        if (options.includeRefs) {\n            tags = this._tagsWithRefsCache.get(repoPath);\n            if (tags !== undefined) return tags;\n\n            const data = await Git.showref_tag(repoPath);\n            tags = GitTagParser.parseWithRef(data, repoPath) || [];\n\n            const repo = await this.getRepository(repoPath);\n            if (repo !== undefined && repo.supportsChangeEvents) {\n                this._tagsWithRefsCache.set(repoPath, tags);\n            }\n\n            return tags;\n        }\n\n        tags = this._tagsCache.get(repoPath);\n        if (tags !== undefined) return tags;\n\n        const data = await Git.tag(repoPath);\n        tags = GitTagParser.parse(data, repoPath) || [];\n\n        const repo = await this.getRepository(repoPath);\n        if (repo !== undefined && repo.supportsChangeEvents) {\n            this._tagsCache.set(repoPath, tags);\n        }\n\n        return tags;\n    }\n\n    @log()\n    async getTreeFileForRevision(repoPath: string, fileName: string, ref: string): Promise<GitTree | undefined> {\n        if (repoPath === undefined || fileName == null || fileName.length === 0) return undefined;\n\n        const data = await Git.ls_tree(repoPath, ref, { fileName: fileName });\n        const trees = GitTreeParser.parse(data);\n        return trees === undefined || trees.length === 0 ? undefined : trees[0];\n    }\n\n    @log()\n    async getTreeForRevision(repoPath: string, ref: string): Promise<GitTree[]> {\n        if (repoPath === undefined) return [];\n\n        const data = await Git.ls_tree(repoPath, ref);\n        return GitTreeParser.parse(data) || [];\n    }\n\n    @log()\n    getVersionedFileBuffer(repoPath: string, fileName: string, ref: string) {\n        return Git.show<Buffer>(repoPath, fileName, ref, { encoding: 'buffer' });\n    }\n\n    @log()\n    async getVersionedUri(\n        repoPath: string | undefined,\n        fileName: string,\n        ref: string | undefined\n    ): Promise<Uri | undefined> {\n        if (ref === GitService.deletedOrMissingSha) return undefined;\n\n        if (!ref || (Git.isUncommitted(ref) && !Git.isStagedUncommitted(ref))) {\n            if (await this.fileExists(repoPath!, fileName)) return GitUri.file(fileName);\n\n            return undefined;\n        }\n\n        if (Git.isStagedUncommitted(ref)) {\n            return GitUri.git(fileName, repoPath);\n        }\n\n        return GitUri.toRevisionUri(ref, fileName, repoPath!);\n    }\n\n    isTrackable(scheme: string): boolean;\n    isTrackable(uri: Uri): boolean;\n    isTrackable(schemeOruri: string | Uri): boolean {\n        const scheme = typeof schemeOruri === 'string' ? schemeOruri : schemeOruri.scheme;\n        return (\n            scheme === DocumentSchemes.File ||\n            scheme === DocumentSchemes.Vsls ||\n            scheme === DocumentSchemes.Git ||\n            scheme === DocumentSchemes.GitLens\n        );\n    }\n\n    async isTracked(\n        fileName: string,\n        repoPath?: string,\n        options?: { ref?: string; skipCacheUpdate?: boolean }\n    ): Promise<boolean>;\n    async isTracked(uri: GitUri): Promise<boolean>;\n    @log<GitService['isTracked']>({\n        exit: tracked => `returned ${tracked}`,\n        singleLine: true\n    })\n    async isTracked(\n        fileNameOrUri: string | GitUri,\n        repoPath?: string,\n        options: { ref?: string; skipCacheUpdate?: boolean } = {}\n    ): Promise<boolean> {\n        if (options.ref === GitService.deletedOrMissingSha) return false;\n\n        let ref = options.ref;\n        let cacheKey: string;\n        let fileName: string;\n        if (typeof fileNameOrUri === 'string') {\n            [fileName, repoPath] = Git.splitPath(fileNameOrUri, repoPath);\n            cacheKey = GitUri.toKey(fileNameOrUri);\n        }\n        else {\n            if (!this.isTrackable(fileNameOrUri)) return false;\n\n            fileName = fileNameOrUri.fsPath;\n            repoPath = fileNameOrUri.repoPath;\n            ref = fileNameOrUri.sha;\n            cacheKey = GitUri.toKey(fileName);\n        }\n\n        if (ref !== undefined) {\n            cacheKey += `:${ref}`;\n        }\n\n        let tracked = this._trackedCache.get(cacheKey);\n        if (tracked !== undefined) {\n            tracked = await tracked;\n\n            return tracked;\n        }\n\n        tracked = this.isTrackedCore(fileName, repoPath === undefined ? emptyStr : repoPath, ref);\n        if (options.skipCacheUpdate) {\n            tracked = await tracked;\n\n            return tracked;\n        }\n\n        this._trackedCache.set(cacheKey, tracked);\n        tracked = await tracked;\n        this._trackedCache.set(cacheKey, tracked);\n\n        return tracked;\n    }\n\n    private async isTrackedCore(fileName: string, repoPath: string, ref?: string) {\n        if (ref === GitService.deletedOrMissingSha) return false;\n\n        try {\n            // Even if we have a ref, check first to see if the file exists (that way the cache will be better reused)\n            let tracked = Boolean(await Git.ls_files(repoPath === undefined ? emptyStr : repoPath, fileName));\n            if (!tracked && ref !== undefined) {\n                tracked = Boolean(\n                    await Git.ls_files(repoPath === undefined ? emptyStr : repoPath, fileName, { ref: ref })\n                );\n                // If we still haven't found this file, make sure it wasn't deleted in that ref (i.e. check the previous)\n                if (!tracked) {\n                    tracked = Boolean(\n                        await Git.ls_files(repoPath === undefined ? emptyStr : repoPath, fileName, {\n                            ref: `${ref}^`\n                        })\n                    );\n                }\n            }\n            return tracked;\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return false;\n        }\n    }\n\n    @log()\n    async getDiffTool(repoPath?: string) {\n        return (\n            (await Git.config_get('diff.guitool', repoPath, { local: true })) ||\n            Git.config_get('diff.tool', repoPath, { local: true })\n        );\n    }\n\n    @log()\n    async openDiffTool(\n        repoPath: string,\n        uri: Uri,\n        options: { ref1?: string; ref2?: string; staged?: boolean; tool?: string } = {}\n    ) {\n        if (!options.tool) {\n            const cc = Logger.getCorrelationContext();\n\n            options.tool = await this.getDiffTool(repoPath);\n            if (options.tool === undefined) throw new Error('No diff tool found');\n\n            Logger.log(cc, `Using tool=${options.tool}`);\n        }\n\n        const { tool, ...opts } = options;\n        return Git.difftool_fileDiff(repoPath, uri.fsPath, tool, opts);\n    }\n\n    @log()\n    async openDirectoryDiff(repoPath: string, ref1: string, ref2?: string, tool?: string) {\n        if (!tool) {\n            const cc = Logger.getCorrelationContext();\n\n            tool = await this.getDiffTool(repoPath);\n            if (tool === undefined) throw new Error('No diff tool found');\n\n            Logger.log(cc, `Using tool=${tool}`);\n        }\n\n        return Git.difftool_dirDiff(repoPath, tool, ref1, ref2);\n    }\n\n    @log()\n    async resolveReference(repoPath: string, ref: string, uri?: Uri) {\n        const resolved = Git.isSha(ref) || !Git.isShaLike(ref) || ref.endsWith('^3');\n        if (uri == null) return resolved ? ref : (await Git.revparse(repoPath, ref)) || ref;\n\n        const ensuredRef = await Git.cat_file_validate(\n            repoPath,\n            Strings.normalizePath(paths.relative(repoPath, uri.fsPath)),\n            ref\n        );\n        if (ensuredRef === undefined) return ref;\n\n        return ensuredRef;\n    }\n\n    @log()\n    validateReference(repoPath: string, ref: string) {\n        return Git.cat_validate(repoPath, ref);\n    }\n\n    stageFile(repoPath: string, fileName: string): Promise<string>;\n    stageFile(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    stageFile(repoPath: string, fileNameOrUri: string | Uri): Promise<string> {\n        return Git.add(\n            repoPath,\n            typeof fileNameOrUri === 'string' ? fileNameOrUri : Git.splitPath(fileNameOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    stageDirectory(repoPath: string, directory: string): Promise<string>;\n    stageDirectory(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    stageDirectory(repoPath: string, directoryOrUri: string | Uri): Promise<string> {\n        return Git.add(\n            repoPath,\n            typeof directoryOrUri === 'string' ? directoryOrUri : Git.splitPath(directoryOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    unStageFile(repoPath: string, fileName: string): Promise<string>;\n    unStageFile(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    unStageFile(repoPath: string, fileNameOrUri: string | Uri): Promise<string> {\n        return Git.reset(\n            repoPath,\n            typeof fileNameOrUri === 'string' ? fileNameOrUri : Git.splitPath(fileNameOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    unStageDirectory(repoPath: string, directory: string): Promise<string>;\n    unStageDirectory(repoPath: string, uri: Uri): Promise<string>;\n    @log()\n    unStageDirectory(repoPath: string, directoryOrUri: string | Uri): Promise<string> {\n        return Git.reset(\n            repoPath,\n            typeof directoryOrUri === 'string' ? directoryOrUri : Git.splitPath(directoryOrUri.fsPath, repoPath)[0]\n        );\n    }\n\n    @log()\n    stashApply(repoPath: string, stashName: string, deleteAfter: boolean = false) {\n        return Git.stash_apply(repoPath, stashName, deleteAfter);\n    }\n\n    @log()\n    stashDelete(repoPath: string, stashName: string) {\n        return Git.stash_delete(repoPath, stashName);\n    }\n\n    @log()\n    stashSave(repoPath: string, message?: string, uris?: Uri[]) {\n        if (uris === undefined) return Git.stash_save(repoPath, message);\n\n        GitService.ensureGitVersion('2.13.2', 'Stashing individual files');\n\n        const pathspecs = uris.map(u => Git.splitPath(u.fsPath, repoPath)[0]);\n        return Git.stash_push(repoPath, pathspecs, message);\n    }\n\n    static getEncoding(repoPath: string, fileName: string): string;\n    static getEncoding(uri: Uri): string;\n    static getEncoding(repoPathOrUri: string | Uri, fileName?: string): string {\n        const uri = typeof repoPathOrUri === 'string' ? GitUri.resolveToUri(fileName!, repoPathOrUri) : repoPathOrUri;\n        return Git.getEncoding(workspace.getConfiguration('files', uri).get<string>('encoding'));\n    }\n\n    @log()\n    static async initialize(): Promise<void> {\n        // Try to use the same git as the built-in vscode git extension\n        let gitPath;\n        const gitApi = await GitService.getBuiltInGitApi();\n        if (gitApi !== undefined) {\n            gitPath = gitApi.git.path;\n        }\n\n        await Git.setOrFindGitPath(gitPath || workspace.getConfiguration('git').get<string>('path'));\n    }\n\n    @log()\n    static async getBuiltInGitApi(): Promise<BuiltInGitApi | undefined> {\n        try {\n            const extension = extensions.getExtension('vscode.git') as Extension<GitExtension>;\n            if (extension !== undefined) {\n                const gitExtension = extension.isActive ? extension.exports : await extension.activate();\n\n                return gitExtension.getAPI(1);\n            }\n        }\n        catch {}\n\n        return undefined;\n    }\n\n    static getGitPath(): string {\n        return Git.getGitPath();\n    }\n\n    static getGitVersion(): string {\n        return Git.getGitVersion();\n    }\n\n    static isShaLike(ref: string): boolean {\n        return Git.isShaLike(ref);\n    }\n\n    static isStagedUncommitted(ref: string | undefined): boolean {\n        return Git.isStagedUncommitted(ref);\n    }\n\n    static isUncommitted(ref: string | undefined): boolean {\n        return Git.isUncommitted(ref);\n    }\n\n    static shortenSha(\n        ref: string | undefined,\n        strings: { deletedOrMissing?: string; stagedUncommitted?: string; uncommitted?: string; working?: string } = {}\n    ) {\n        if (ref === undefined) return undefined;\n\n        strings = { deletedOrMissing: '(deleted)', working: emptyStr, ...strings };\n\n        if (ref == null || ref.length === 0) return strings.working;\n        if (ref === GitService.deletedOrMissingSha) return strings.deletedOrMissing;\n\n        return Git.isShaLike(ref) || Git.isStagedUncommitted(ref) ? Git.shortenSha(ref, strings) : ref;\n    }\n\n    static compareGitVersion(version: string) {\n        return Versions.compare(Versions.fromString(this.getGitVersion()), Versions.fromString(version));\n    }\n\n    static ensureGitVersion(version: string, feature: string): void {\n        const gitVersion = this.getGitVersion();\n        if (Versions.compare(Versions.fromString(gitVersion), Versions.fromString(version)) === -1) {\n            throw new Error(\n                `${feature} requires a newer version of Git (>= ${version}) than is currently installed (${gitVersion}). Please install a more recent version of Git to use this GitLens feature.`\n            );\n        }\n    }\n}\n","'use strict';\n\nconst cssColorRegex = /^(?:(#?)([0-9a-f]{3}|[0-9a-f]{6})|((?:rgb|hsl)a?)\\((-?\\d+%?)[,\\s]+(-?\\d+%?)[,\\s]+(-?\\d+%?)[,\\s]*(-?[\\d.]+%?)?\\))$/i;\n\nfunction adjustLight(color: number, amount: number) {\n    const cc = color + amount;\n    const c = amount < 0 ? (cc < 0 ? 0 : cc) : cc > 255 ? 255 : cc;\n\n    return Math.round(c);\n}\n\nexport function darken(color: string, percentage: number) {\n    return lighten(color, -percentage);\n}\n\nexport function lighten(color: string, percentage: number) {\n    const rgba = toRgba(color);\n    if (rgba == null) return color;\n\n    const [r, g, b, a] = rgba;\n    const amount = (255 * percentage) / 100;\n    return `rgba(${adjustLight(r, amount)}, ${adjustLight(g, amount)}, ${adjustLight(b, amount)}, ${a})`;\n}\n\nexport function opacity(color: string, percentage: number) {\n    const rgba = toRgba(color);\n    if (rgba == null) return color;\n\n    const [r, g, b, a] = rgba;\n    return `rgba(${r}, ${g}, ${b}, ${a * (percentage / 100)})`;\n}\n\nexport function toRgba(color: string) {\n    color = color.trim();\n\n    const result = cssColorRegex.exec(color);\n    if (result == null) return null;\n\n    if (result[1] === '#') {\n        const hex = result[2];\n        switch (hex.length) {\n            case 3:\n                return [parseInt(hex[0] + hex[0], 16), parseInt(hex[1] + hex[1], 16), parseInt(hex[2] + hex[2], 16), 1];\n            case 6:\n                return [\n                    parseInt(hex.substring(0, 2), 16),\n                    parseInt(hex.substring(2, 4), 16),\n                    parseInt(hex.substring(4, 6), 16),\n                    1\n                ];\n        }\n\n        return null;\n    }\n\n    switch (result[3]) {\n        case 'rgb':\n            return [parseInt(result[4], 10), parseInt(result[5], 10), parseInt(result[6], 10), 1];\n        case 'rgba':\n            return [parseInt(result[4], 10), parseInt(result[5], 10), parseInt(result[6], 10), parseFloat(result[7])];\n        default:\n            return null;\n    }\n}\n","import {\n    DecorationInstanceRenderOptions,\n    DecorationOptions,\n    MarkdownString,\n    ThemableDecorationAttachmentRenderOptions,\n    ThemableDecorationRenderOptions,\n    ThemeColor,\n    workspace\n} from 'vscode';\nimport { DiffWithCommand, ShowQuickCommitDetailsCommand } from '../commands';\nimport { FileAnnotationType } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport {\n    CommitFormatOptions,\n    CommitFormatter,\n    GitCommit,\n    GitDiffChunkLine,\n    GitRemote,\n    GitService,\n    GitUri\n} from '../git/gitService';\nimport { Objects, Strings } from '../system';\nimport { toRgba } from '../webviews/apps/shared/colors';\n\nexport interface ComputedHeatmap {\n    cold: boolean;\n    colors: { hot: string; cold: string };\n    median: number;\n    newest: number;\n    oldest: number;\n    computeAge(date: Date): number;\n}\n\ninterface HeatmapConfig {\n    enabled: boolean;\n    location?: 'left' | 'right';\n}\n\ninterface RenderOptions\n    extends DecorationInstanceRenderOptions,\n        ThemableDecorationRenderOptions,\n        ThemableDecorationAttachmentRenderOptions {\n    height?: string;\n    uncommittedColor?: string | ThemeColor;\n}\n\nconst defaultHeatmapHotColor = '#f66a0a';\nconst defaultHeatmapColdColor = '#0a60f6';\n\nlet computedHeatmapColor: {\n    color: string;\n    rgb: string;\n};\n\nexport class Annotations {\n    static applyHeatmap(decoration: Partial<DecorationOptions>, date: Date, heatmap: ComputedHeatmap) {\n        const color = this.getHeatmapColor(date, heatmap);\n        decoration.renderOptions!.before!.borderColor = color;\n    }\n\n    private static getHeatmapColor(date: Date, heatmap: ComputedHeatmap) {\n        const baseColor = heatmap.cold ? heatmap.colors.cold : heatmap.colors.hot;\n\n        const age = heatmap.computeAge(date);\n        if (age === 0) return baseColor;\n\n        if (computedHeatmapColor === undefined || computedHeatmapColor.color !== baseColor) {\n            let rgba = toRgba(baseColor);\n            if (rgba == null) {\n                rgba = toRgba(heatmap.cold ? defaultHeatmapColdColor : defaultHeatmapHotColor)!;\n            }\n\n            const [r, g, b] = rgba;\n            computedHeatmapColor = {\n                color: baseColor,\n                rgb: `${r}, ${g}, ${b}`\n            };\n        }\n\n        return `rgba(${computedHeatmapColor.rgb}, ${(1 - age / 10).toFixed(2)})`;\n    }\n\n    static getHoverMessage(\n        commit: GitCommit,\n        dateFormat: string | null,\n        remotes: GitRemote[],\n        annotationType?: FileAnnotationType,\n        line: number = 0\n    ): MarkdownString {\n        if (dateFormat === null) {\n            dateFormat = 'MMMM Do, YYYY h:mma';\n        }\n\n        const markdown = new MarkdownString(\n            CommitFormatter.fromTemplate(Container.config.hovers.detailsMarkdownFormat, commit, {\n                annotationType: annotationType,\n                dateFormat: dateFormat,\n                line: line,\n                markdown: true,\n                remotes: remotes\n            })\n        );\n        markdown.isTrusted = true;\n        return markdown;\n    }\n\n    static getHoverDiffMessage(\n        commit: GitCommit,\n        uri: GitUri,\n        chunkLine: GitDiffChunkLine | undefined\n    ): MarkdownString | undefined {\n        if (chunkLine === undefined || commit.previousSha === undefined) return undefined;\n\n        const codeDiff = this.getCodeDiff(chunkLine);\n\n        let message: string;\n        if (commit.isUncommitted) {\n            if (uri.sha !== undefined && GitService.isStagedUncommitted(uri.sha)) {\n                message = `[\\`Changes\\`](${DiffWithCommand.getMarkdownCommandArgs(commit)} \"Open Changes\") &nbsp; ${\n                    GlyphChars.Dash\n                } &nbsp; [\\`${commit.previousShortSha}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                    commit.previousSha!\n                )} \"Show Commit Details\") ${GlyphChars.ArrowLeftRightLong} _${uri.shortSha}_\\n${codeDiff}`;\n            }\n            else {\n                message = `[\\`Changes\\`](${DiffWithCommand.getMarkdownCommandArgs(commit)} \"Open Changes\") &nbsp; ${\n                    GlyphChars.Dash\n                } &nbsp; _uncommitted changes_\\n${codeDiff}`;\n            }\n        }\n        else {\n            message = `[\\`Changes\\`](${DiffWithCommand.getMarkdownCommandArgs(commit)} \"Open Changes\") &nbsp; ${\n                GlyphChars.Dash\n            } &nbsp; [\\`${commit.previousShortSha}\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                commit.previousSha!\n            )} \"Show Commit Details\") ${GlyphChars.ArrowLeftRightLong} [\\`${\n                commit.shortSha\n            }\\`](${ShowQuickCommitDetailsCommand.getMarkdownCommandArgs(\n                commit.sha\n            )} \"Show Commit Details\")\\n${codeDiff}`;\n        }\n\n        const markdown = new MarkdownString(message);\n        markdown.isTrusted = true;\n        return markdown;\n    }\n\n    private static getCodeDiff(chunkLine: GitDiffChunkLine): string {\n        const previous = chunkLine.previous === undefined ? undefined : chunkLine.previous[0];\n        return `\\`\\`\\`\n-  ${previous === undefined || previous.line === undefined ? '' : previous.line.trim()}\n+  ${chunkLine.line === undefined ? '' : chunkLine.line.trim()}\n\\`\\`\\``;\n    }\n\n    static async changesHover(commit: GitCommit, line: number, uri: GitUri): Promise<Partial<DecorationOptions>> {\n        const sha =\n            !commit.isUncommitted || (uri.sha !== undefined && GitService.isStagedUncommitted(uri.sha))\n                ? commit.previousSha\n                : undefined;\n        const chunkLine = await Container.git.getDiffForLine(uri, line, sha);\n        const message = this.getHoverDiffMessage(commit, uri, chunkLine);\n\n        return {\n            hoverMessage: message\n        };\n    }\n\n    // static detailsHover(commit: GitCommit, dateFormat: string | null, hasRemote: boolean, annotationType?: FileAnnotationType, line: number = 0): DecorationOptions {\n    //     const message = this.getHoverMessage(commit, dateFormat, hasRemote, annotationType);\n    //     return {\n    //         hoverMessage: message\n    //     } as DecorationOptions;\n    // }\n\n    static gutter(\n        commit: GitCommit,\n        format: string,\n        dateFormatOrFormatOptions: string | null | CommitFormatOptions,\n        renderOptions: RenderOptions\n    ): Partial<DecorationOptions> {\n        const decoration: Partial<DecorationOptions> = {\n            renderOptions: {\n                before: { ...renderOptions }\n            }\n        };\n\n        if (commit.isUncommitted) {\n            decoration.renderOptions!.before!.color = renderOptions.uncommittedColor;\n        }\n\n        const message = CommitFormatter.fromTemplate(format, commit, dateFormatOrFormatOptions);\n        decoration.renderOptions!.before!.contentText = Strings.pad(message.replace(/ /g, GlyphChars.Space), 1, 1);\n\n        return decoration;\n    }\n\n    static gutterRenderOptions(\n        separateLines: boolean,\n        heatmap: HeatmapConfig,\n        format: string,\n        options: CommitFormatOptions\n    ): RenderOptions {\n        // Get the character count of all the tokens, assuming there there is a cap (bail if not)\n        let chars = 0;\n        for (const token of Objects.values(options.tokenOptions!)) {\n            if (token === undefined) continue;\n\n            // If any token is uncapped, kick out and set no max\n            if (token.truncateTo == null) {\n                chars = -1;\n                break;\n            }\n\n            chars += token.truncateTo;\n        }\n\n        if (chars >= 0) {\n            // Add the chars of the template string (without tokens)\n            chars += Strings.getWidth(Strings.interpolate(format, undefined));\n            // If we have chars, add a bit of padding\n            if (chars > 0) {\n                chars += 3;\n            }\n        }\n\n        let borderStyle = undefined;\n        let borderWidth = undefined;\n        if (heatmap.enabled) {\n            borderStyle = 'solid';\n            borderWidth = heatmap.location === 'left' ? '0 0 0 2px' : '0 2px 0 0';\n        }\n\n        let width;\n        if (chars >= 0) {\n            const spacing = workspace.getConfiguration('editor').get<number>('letterSpacing');\n            if (spacing != null && spacing !== 0) {\n                width = `calc(${chars}ch + ${Math.round(chars * spacing)}px)`;\n            }\n            else {\n                width = `${chars}ch`;\n            }\n        }\n\n        return {\n            backgroundColor: new ThemeColor('gitlens.gutterBackgroundColor'),\n            borderStyle: borderStyle,\n            borderWidth: borderWidth,\n            color: new ThemeColor('gitlens.gutterForegroundColor'),\n            fontWeight: 'normal',\n            fontStyle: 'normal',\n            height: '100%',\n            margin: '0 26px -1px 0',\n            textDecoration: separateLines ? 'overline solid rgba(0, 0, 0, .2)' : 'none',\n            width: width,\n            uncommittedColor: new ThemeColor('gitlens.gutterUncommittedForegroundColor')\n        };\n    }\n\n    static heatmap(\n        commit: GitCommit,\n        heatmap: ComputedHeatmap,\n        renderOptions: RenderOptions\n    ): Partial<DecorationOptions> {\n        const decoration: Partial<DecorationOptions> = {\n            renderOptions: {\n                before: { ...renderOptions }\n            }\n        };\n\n        Annotations.applyHeatmap(decoration, commit.date, heatmap);\n\n        return decoration;\n    }\n\n    static heatmapRenderOptions(): RenderOptions {\n        return {\n            borderStyle: 'solid',\n            borderWidth: '0 0 0 2px'\n        };\n    }\n\n    // static hover(commit: GitCommit, renderOptions: IRenderOptions, now: number): DecorationOptions {\n    //     const decoration = {\n    //         renderOptions: { before: { ...renderOptions } }\n    //     } as DecorationOptions;\n\n    //     this.applyHeatmap(decoration, commit.date, now);\n\n    //     return decoration;\n    // }\n\n    // static hoverRenderOptions(heatmap: HeatmapConfig): IRenderOptions {\n    //     if (!heatmap.enabled) return { before: undefined };\n\n    //     return {\n    //         borderStyle: 'solid',\n    //         borderWidth: '0 0 0 2px',\n    //         contentText: GlyphChars.ZeroWidthSpace,\n    //         height: '100%',\n    //         margin: '0 26px 0 0',\n    //         textDecoration: 'none'\n    //     } as IRenderOptions;\n    // }\n\n    static trailing(\n        commit: GitCommit,\n        format: string,\n        dateFormat: string | null,\n        scrollable: boolean = true\n    ): Partial<DecorationOptions> {\n        const message = CommitFormatter.fromTemplate(format, commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: dateFormat\n        });\n\n        return {\n            renderOptions: {\n                after: {\n                    backgroundColor: new ThemeColor('gitlens.trailingLineBackgroundColor'),\n                    color: new ThemeColor('gitlens.trailingLineForegroundColor'),\n                    contentText: Strings.pad(message.replace(/ /g, GlyphChars.Space), 1, 1),\n                    fontWeight: 'normal',\n                    fontStyle: 'normal',\n                    // Pull the decoration out of the document flow if we want to be scrollable\n                    textDecoration: `none;${scrollable ? '' : ' position: absolute;'}`\n                }\n            }\n        };\n    }\n\n    // static withRange(decoration: DecorationOptions, start?: number, end?: number): DecorationOptions {\n    //     let range = decoration.range;\n    //     if (start !== undefined) {\n    //         range = range.with({\n    //             start: range.start.with({ character: start })\n    //         });\n    //     }\n\n    //     if (end !== undefined) {\n    //         range = range.with({\n    //             end: range.end.with({ character: end })\n    //         });\n    //     }\n\n    //     return { ...decoration, range: range };\n    // }\n}\n","'use strict';\nimport * as paths from 'path';\nimport {\n    ConfigurationChangeEvent,\n    DecorationRangeBehavior,\n    Disposable,\n    Event,\n    EventEmitter,\n    OverviewRulerLane,\n    Progress,\n    ProgressLocation,\n    TextDocument,\n    TextEditor,\n    TextEditorDecorationType,\n    TextEditorViewColumnChangeEvent,\n    ThemeColor,\n    window,\n    workspace\n} from 'vscode';\nimport { AnnotationsToggleMode, configuration, FileAnnotationType, HighlightLocations } from '../configuration';\nimport { CommandContext, GlyphChars, isTextEditor, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { KeyboardScope } from '../keyboard';\nimport { Logger } from '../logger';\nimport { Functions, Iterables } from '../system';\nimport {\n    DocumentBlameStateChangeEvent,\n    DocumentDirtyStateChangeEvent,\n    GitDocumentState\n} from '../trackers/gitDocumentTracker';\nimport { AnnotationProviderBase, AnnotationStatus, TextEditorCorrelationKey } from './annotationProvider';\nimport { GutterBlameAnnotationProvider } from './gutterBlameAnnotationProvider';\nimport { HeatmapBlameAnnotationProvider } from './heatmapBlameAnnotationProvider';\nimport { RecentChangesAnnotationProvider } from './recentChangesAnnotationProvider';\n\nexport enum AnnotationClearReason {\n    User = 'User',\n    BlameabilityChanged = 'BlameabilityChanged',\n    ColumnChanged = 'ColumnChanged',\n    Disposing = 'Disposing',\n    DocumentChanged = 'DocumentChanged',\n    DocumentClosed = 'DocumentClosed'\n}\n\nexport const Decorations = {\n    blameAnnotation: window.createTextEditorDecorationType({\n        rangeBehavior: DecorationRangeBehavior.ClosedOpen,\n        textDecoration: 'none'\n    }),\n    blameHighlight: undefined as TextEditorDecorationType | undefined,\n    heatmapAnnotation: window.createTextEditorDecorationType({\n        before: {\n            contentText: GlyphChars.ZeroWidthSpace,\n            height: '100%',\n            margin: '0 26px -1px 0'\n        }\n    }),\n    heatmapHighlight: undefined as TextEditorDecorationType | undefined,\n    recentChangesAnnotation: undefined as TextEditorDecorationType | undefined,\n    recentChangesHighlight: undefined as TextEditorDecorationType | undefined\n};\n\nexport class FileAnnotationController implements Disposable {\n    private _onDidToggleAnnotations = new EventEmitter<void>();\n    get onDidToggleAnnotations(): Event<void> {\n        return this._onDidToggleAnnotations.event;\n    }\n\n    private _annotationsDisposable: Disposable | undefined;\n    private _annotationProviders: Map<TextEditorCorrelationKey, AnnotationProviderBase> = new Map();\n    private _disposable: Disposable;\n    private _editor: TextEditor | undefined;\n    private _keyboardScope: KeyboardScope | undefined = undefined;\n    private readonly _toggleModes: Map<FileAnnotationType, AnnotationsToggleMode>;\n    private _annotationType: FileAnnotationType | undefined = undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n\n        this._toggleModes = new Map();\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        void this.clearAll();\n\n        Decorations.blameAnnotation && Decorations.blameAnnotation.dispose();\n        Decorations.blameHighlight && Decorations.blameHighlight.dispose();\n\n        this._annotationsDisposable && this._annotationsDisposable.dispose();\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        const cfg = Container.config;\n\n        if (configuration.changed(e, configuration.name('blame')('highlight').value)) {\n            Decorations.blameHighlight && Decorations.blameHighlight.dispose();\n\n            const cfgHighlight = cfg.blame.highlight;\n\n            if (cfgHighlight.enabled) {\n                Decorations.blameHighlight = window.createTextEditorDecorationType({\n                    gutterIconSize: 'contain',\n                    isWholeLine: true,\n                    overviewRulerLane: OverviewRulerLane.Right,\n                    backgroundColor: cfgHighlight.locations.includes(HighlightLocations.Line)\n                        ? new ThemeColor('gitlens.lineHighlightBackgroundColor')\n                        : undefined,\n                    overviewRulerColor: cfgHighlight.locations.includes(HighlightLocations.Overview)\n                        ? new ThemeColor('gitlens.lineHighlightOverviewRulerColor')\n                        : undefined,\n                    dark: {\n                        gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                            ? Container.context.asAbsolutePath('images/dark/highlight-gutter.svg')\n                            : undefined\n                    },\n                    light: {\n                        gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                            ? Container.context.asAbsolutePath('images/light/highlight-gutter.svg')\n                            : undefined\n                    }\n                });\n            }\n            else {\n                Decorations.blameHighlight = undefined;\n            }\n        }\n\n        if (configuration.changed(e, configuration.name('recentChanges')('highlight').value)) {\n            Decorations.recentChangesAnnotation && Decorations.recentChangesAnnotation.dispose();\n\n            const cfgHighlight = cfg.recentChanges.highlight;\n\n            Decorations.recentChangesAnnotation = window.createTextEditorDecorationType({\n                gutterIconSize: 'contain',\n                isWholeLine: true,\n                overviewRulerLane: OverviewRulerLane.Right,\n                backgroundColor: cfgHighlight.locations.includes(HighlightLocations.Line)\n                    ? new ThemeColor('gitlens.lineHighlightBackgroundColor')\n                    : undefined,\n                overviewRulerColor: cfgHighlight.locations.includes(HighlightLocations.Overview)\n                    ? new ThemeColor('gitlens.lineHighlightOverviewRulerColor')\n                    : undefined,\n                dark: {\n                    gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                        ? Container.context.asAbsolutePath('images/dark/highlight-gutter.svg')\n                        : undefined\n                },\n                light: {\n                    gutterIconPath: cfgHighlight.locations.includes(HighlightLocations.Gutter)\n                        ? Container.context.asAbsolutePath('images/light/highlight-gutter.svg')\n                        : undefined\n                }\n            });\n        }\n\n        const initializing = configuration.initializing(e);\n\n        if (configuration.changed(e, configuration.name('blame')('toggleMode').value)) {\n            this._toggleModes.set(FileAnnotationType.Blame, cfg.blame.toggleMode);\n            if (!initializing && cfg.blame.toggleMode === AnnotationsToggleMode.File) {\n                void this.clearAll();\n            }\n        }\n\n        if (configuration.changed(e, configuration.name('heatmap')('toggleMode').value)) {\n            this._toggleModes.set(FileAnnotationType.Heatmap, cfg.heatmap.toggleMode);\n            if (!initializing && cfg.heatmap.toggleMode === AnnotationsToggleMode.File) {\n                void this.clearAll();\n            }\n        }\n\n        if (configuration.changed(e, configuration.name('recentChanges')('toggleMode').value)) {\n            this._toggleModes.set(FileAnnotationType.RecentChanges, cfg.recentChanges.toggleMode);\n            if (!initializing && cfg.recentChanges.toggleMode === AnnotationsToggleMode.File) {\n                void this.clearAll();\n            }\n        }\n\n        if (initializing) return;\n\n        if (\n            configuration.changed(e, configuration.name('blame').value) ||\n            configuration.changed(e, configuration.name('recentChanges').value) ||\n            configuration.changed(e, configuration.name('heatmap').value) ||\n            configuration.changed(e, configuration.name('hovers').value)\n        ) {\n            // Since the configuration has changed -- reset any visible annotations\n            for (const provider of this._annotationProviders.values()) {\n                if (provider === undefined) continue;\n\n                if (provider.annotationType === FileAnnotationType.RecentChanges) {\n                    provider.reset({\n                        decoration: Decorations.recentChangesAnnotation!,\n                        highlightDecoration: Decorations.recentChangesHighlight\n                    });\n                }\n                else if (provider.annotationType === FileAnnotationType.Blame) {\n                    provider.reset({\n                        decoration: Decorations.blameAnnotation,\n                        highlightDecoration: Decorations.blameHighlight\n                    });\n                }\n                else {\n                    void this.show(provider.editor, FileAnnotationType.Heatmap);\n                }\n            }\n        }\n    }\n\n    private async onActiveTextEditorChanged(editor: TextEditor | undefined) {\n        if (editor !== undefined && !isTextEditor(editor)) return;\n\n        this._editor = editor;\n        // Logger.log('AnnotationController.onActiveTextEditorChanged', editor && editor.document.uri.fsPath);\n\n        if (this.isInWindowToggle()) {\n            await this.show(editor, this._annotationType!);\n\n            return;\n        }\n\n        const provider = this.getProvider(editor);\n        if (provider === undefined) {\n            setCommandContext(CommandContext.AnnotationStatus, undefined);\n            void this.detachKeyboardHook();\n        }\n        else {\n            setCommandContext(CommandContext.AnnotationStatus, provider.status);\n            void this.attachKeyboardHook();\n        }\n    }\n\n    private onBlameStateChanged(e: DocumentBlameStateChangeEvent<GitDocumentState>) {\n        // Only care if we are becoming un-blameable\n        if (e.blameable) return;\n\n        const editor = window.activeTextEditor;\n        if (editor === undefined) return;\n\n        void this.clear(editor, AnnotationClearReason.BlameabilityChanged);\n    }\n\n    private onDirtyStateChanged(e: DocumentDirtyStateChangeEvent<GitDocumentState>) {\n        for (const [key, p] of this._annotationProviders) {\n            if (!e.document.is(p.document)) continue;\n\n            void this.clearCore(key, AnnotationClearReason.DocumentChanged);\n        }\n    }\n\n    private onTextDocumentClosed(document: TextDocument) {\n        if (!Container.git.isTrackable(document.uri)) return;\n\n        for (const [key, p] of this._annotationProviders) {\n            if (p.document !== document) continue;\n\n            void this.clearCore(key, AnnotationClearReason.DocumentClosed);\n        }\n    }\n\n    private onTextEditorViewColumnChanged(e: TextEditorViewColumnChangeEvent) {\n        // FYI https://github.com/Microsoft/vscode/issues/35602\n        const provider = this.getProvider(e.textEditor);\n        if (provider === undefined) {\n            // If we don't find an exact match, do a fuzzy match (since we can't properly track editors)\n            const fuzzyProvider = Iterables.find(\n                this._annotationProviders.values(),\n                p => p.editor.document === e.textEditor.document\n            );\n            if (fuzzyProvider == null) return;\n\n            void this.clearCore(fuzzyProvider.correlationKey, AnnotationClearReason.ColumnChanged);\n\n            return;\n        }\n\n        void provider.restore(e.textEditor);\n    }\n\n    private onVisibleTextEditorsChanged(editors: TextEditor[]) {\n        let provider: AnnotationProviderBase | undefined;\n        for (const e of editors) {\n            provider = this.getProvider(e);\n            if (provider === undefined) continue;\n\n            void provider.restore(e);\n        }\n    }\n\n    isInWindowToggle(): boolean {\n        return this.getToggleMode(this._annotationType) === AnnotationsToggleMode.Window;\n    }\n\n    private getToggleMode(annotationType: FileAnnotationType | undefined): AnnotationsToggleMode {\n        if (annotationType === undefined) return AnnotationsToggleMode.File;\n\n        return this._toggleModes.get(annotationType) || AnnotationsToggleMode.File;\n    }\n\n    clear(editor: TextEditor, reason: AnnotationClearReason = AnnotationClearReason.User) {\n        if (this.isInWindowToggle()) {\n            return this.clearAll();\n        }\n\n        return this.clearCore(AnnotationProviderBase.getCorrelationKey(editor), reason);\n    }\n\n    async clearAll() {\n        this._annotationType = undefined;\n        for (const [key] of this._annotationProviders) {\n            await this.clearCore(key, AnnotationClearReason.Disposing);\n        }\n    }\n\n    async getAnnotationType(editor: TextEditor | undefined): Promise<FileAnnotationType | undefined> {\n        const provider = this.getProvider(editor);\n        if (provider === undefined) return undefined;\n\n        const trackedDocument = await Container.tracker.get(editor!.document);\n        if (trackedDocument === undefined || !trackedDocument.isBlameable) return undefined;\n\n        return provider.annotationType;\n    }\n\n    getProvider(editor: TextEditor | undefined): AnnotationProviderBase | undefined {\n        if (editor === undefined || editor.document === undefined) return undefined;\n        return this._annotationProviders.get(AnnotationProviderBase.getCorrelationKey(editor));\n    }\n\n    async show(\n        editor: TextEditor | undefined,\n        type: FileAnnotationType,\n        shaOrLine?: string | number\n    ): Promise<boolean> {\n        if (this.getToggleMode(type) === AnnotationsToggleMode.Window) {\n            let first = this._annotationType === undefined;\n            const reset = !first && this._annotationType !== type;\n\n            this._annotationType = type;\n\n            if (reset) {\n                await this.clearAll();\n                first = true;\n            }\n\n            if (first) {\n                for (const e of window.visibleTextEditors) {\n                    if (e === editor) continue;\n\n                    void this.show(e, type);\n                }\n            }\n        }\n\n        if (editor === undefined) return false; // || editor.viewColumn === undefined) return false;\n        this._editor = editor;\n\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n        if (!trackedDocument.isBlameable) return false;\n\n        const currentProvider = this.getProvider(editor);\n        if (currentProvider !== undefined && currentProvider.annotationType === type) {\n            await currentProvider.selection(shaOrLine);\n            return true;\n        }\n\n        const provider = await window.withProgress(\n            { location: ProgressLocation.Window },\n            async (progress: Progress<{ message: string }>) => {\n                await setCommandContext(CommandContext.AnnotationStatus, AnnotationStatus.Computing);\n\n                const computingAnnotations = this.showAnnotationsCore(\n                    currentProvider,\n                    editor,\n                    type,\n                    shaOrLine,\n                    progress\n                );\n                const provider = await computingAnnotations;\n\n                if (editor === this._editor) {\n                    await setCommandContext(CommandContext.AnnotationStatus, provider && provider.status);\n                }\n\n                return computingAnnotations;\n            }\n        );\n\n        return provider !== undefined;\n    }\n\n    async toggle(\n        editor: TextEditor | undefined,\n        type: FileAnnotationType,\n        shaOrLine?: string | number,\n        on?: boolean\n    ): Promise<boolean> {\n        if (editor !== undefined) {\n            const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n            if (\n                (type === FileAnnotationType.RecentChanges && !trackedDocument.isTracked) ||\n                !trackedDocument.isBlameable\n            ) {\n                return false;\n            }\n        }\n\n        const provider = this.getProvider(editor);\n        if (provider === undefined) return this.show(editor!, type, shaOrLine);\n\n        const reopen = provider.annotationType !== type;\n        if (on === true && !reopen) return true;\n\n        if (this.isInWindowToggle()) {\n            await this.clearAll();\n        }\n        else {\n            await this.clearCore(provider.correlationKey, AnnotationClearReason.User);\n        }\n\n        if (!reopen) return false;\n\n        return this.show(editor, type, shaOrLine);\n    }\n\n    private async attachKeyboardHook() {\n        // Allows pressing escape to exit the annotations\n        if (this._keyboardScope === undefined) {\n            this._keyboardScope = await Container.keyboard.beginScope({\n                escape: {\n                    onDidPressKey: async () => {\n                        const e = this._editor;\n                        if (e === undefined) return undefined;\n\n                        await this.clear(e, AnnotationClearReason.User);\n                        return undefined;\n                    }\n                }\n            });\n        }\n    }\n\n    private async clearCore(key: TextEditorCorrelationKey, reason: AnnotationClearReason) {\n        const provider = this._annotationProviders.get(key);\n        if (provider === undefined) return;\n\n        Logger.log(`${reason}:`, `Clear annotations for ${key}`);\n\n        this._annotationProviders.delete(key);\n        provider.dispose();\n\n        if (this._annotationProviders.size === 0 || key === AnnotationProviderBase.getCorrelationKey(this._editor)) {\n            await setCommandContext(CommandContext.AnnotationStatus, undefined);\n            await this.detachKeyboardHook();\n        }\n\n        if (this._annotationProviders.size === 0) {\n            Logger.log('Remove all listener registrations for annotations');\n\n            this._annotationsDisposable && this._annotationsDisposable.dispose();\n            this._annotationsDisposable = undefined;\n        }\n\n        this._onDidToggleAnnotations.fire();\n    }\n\n    private async detachKeyboardHook() {\n        if (this._keyboardScope === undefined) return;\n\n        await this._keyboardScope.dispose();\n        this._keyboardScope = undefined;\n    }\n\n    private async showAnnotationsCore(\n        currentProvider: AnnotationProviderBase | undefined,\n        editor: TextEditor,\n        type: FileAnnotationType,\n        shaOrLine?: string | number,\n        progress?: Progress<{ message: string }>\n    ): Promise<AnnotationProviderBase | undefined> {\n        if (progress !== undefined) {\n            let annotationsLabel = 'annotations';\n            switch (type) {\n                case FileAnnotationType.Blame:\n                    annotationsLabel = 'blame annotations';\n                    break;\n\n                case FileAnnotationType.Heatmap:\n                    annotationsLabel = 'heatmap annotations';\n                    break;\n\n                case FileAnnotationType.RecentChanges:\n                    annotationsLabel = 'recent changes annotations';\n                    break;\n            }\n\n            progress!.report({\n                message: `Computing ${annotationsLabel} for ${paths.basename(editor.document.fileName)}`\n            });\n        }\n\n        // Allows pressing escape to exit the annotations\n        await this.attachKeyboardHook();\n\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n\n        let provider: AnnotationProviderBase | undefined = undefined;\n        switch (type) {\n            case FileAnnotationType.Blame:\n                provider = new GutterBlameAnnotationProvider(\n                    editor,\n                    trackedDocument,\n                    Decorations.blameAnnotation,\n                    Decorations.blameHighlight\n                );\n                break;\n\n            case FileAnnotationType.Heatmap:\n                provider = new HeatmapBlameAnnotationProvider(\n                    editor,\n                    trackedDocument,\n                    Decorations.heatmapAnnotation,\n                    Decorations.heatmapHighlight\n                );\n                break;\n\n            case FileAnnotationType.RecentChanges:\n                provider = new RecentChangesAnnotationProvider(\n                    editor,\n                    trackedDocument,\n                    Decorations.recentChangesAnnotation!,\n                    Decorations.recentChangesHighlight\n                );\n                break;\n        }\n        if (provider === undefined || !(await provider.validate())) return undefined;\n\n        if (currentProvider !== undefined) {\n            await this.clearCore(currentProvider.correlationKey, AnnotationClearReason.User);\n        }\n\n        if (!this._annotationsDisposable && this._annotationProviders.size === 0) {\n            Logger.log('Add listener registrations for annotations');\n\n            this._annotationsDisposable = Disposable.from(\n                window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveTextEditorChanged, 50), this),\n                window.onDidChangeTextEditorViewColumn(this.onTextEditorViewColumnChanged, this),\n                window.onDidChangeVisibleTextEditors(Functions.debounce(this.onVisibleTextEditorsChanged, 50), this),\n                workspace.onDidCloseTextDocument(this.onTextDocumentClosed, this),\n                Container.tracker.onDidChangeBlameState(this.onBlameStateChanged, this),\n                Container.tracker.onDidChangeDirtyState(this.onDirtyStateChanged, this)\n            );\n        }\n\n        this._annotationProviders.set(provider.correlationKey, provider);\n        if (await provider.provideAnnotation(shaOrLine)) {\n            this._onDidToggleAnnotations.fire();\n            return provider;\n        }\n\n        return undefined;\n    }\n}\n","'use strict';\nimport {\n    CancellationToken,\n    Disposable,\n    Hover,\n    languages,\n    Position,\n    Range,\n    TextDocument,\n    TextEditor,\n    TextEditorDecorationType\n} from 'vscode';\nimport { Container } from '../container';\nimport { GitBlame, GitCommit, GitUri } from '../git/gitService';\nimport { Arrays, Iterables, log } from '../system';\nimport { GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\nimport { AnnotationProviderBase } from './annotationProvider';\nimport { Annotations, ComputedHeatmap } from './annotations';\n\nexport abstract class BlameAnnotationProviderBase extends AnnotationProviderBase {\n    protected _blame: Promise<GitBlame | undefined>;\n    protected _hoverProviderDisposable: Disposable | undefined;\n    protected readonly _uri: GitUri;\n\n    constructor(\n        editor: TextEditor,\n        trackedDocument: TrackedDocument<GitDocumentState>,\n        decoration: TextEditorDecorationType,\n        highlightDecoration: TextEditorDecorationType | undefined\n    ) {\n        super(editor, trackedDocument, decoration, highlightDecoration);\n\n        this._uri = trackedDocument.uri;\n        this._blame = editor.document.isDirty\n            ? Container.git.getBlameForFileContents(this._uri, editor.document.getText())\n            : Container.git.getBlameForFile(this._uri);\n\n        if (editor.document.isDirty) {\n            trackedDocument.setForceDirtyStateChangeOnNextDocumentChange();\n        }\n    }\n\n    clear() {\n        this._hoverProviderDisposable && this._hoverProviderDisposable.dispose();\n        super.clear();\n    }\n\n    onReset(changes?: {\n        decoration: TextEditorDecorationType;\n        highlightDecoration: TextEditorDecorationType | undefined;\n    }) {\n        if (this.editor !== undefined) {\n            this._blame = this.editor.document.isDirty\n                ? Container.git.getBlameForFileContents(this._uri, this.editor.document.getText())\n                : Container.git.getBlameForFile(this._uri);\n        }\n\n        return super.onReset(changes);\n    }\n\n    @log({ args: false })\n    async selection(shaOrLine?: string | number, blame?: GitBlame) {\n        if (!this.highlightDecoration) return;\n\n        if (blame === undefined) {\n            blame = await this._blame;\n            if (!blame || !blame.lines.length) return;\n        }\n\n        let sha: string | undefined = undefined;\n        if (typeof shaOrLine === 'string') {\n            sha = shaOrLine;\n        }\n        else if (typeof shaOrLine === 'number') {\n            if (shaOrLine >= 0) {\n                const commitLine = blame.lines[shaOrLine];\n                sha = commitLine && commitLine.sha;\n            }\n        }\n        else {\n            sha = Iterables.first(blame.commits.values()).sha;\n        }\n\n        if (!sha) {\n            this.editor.setDecorations(this.highlightDecoration, []);\n            return;\n        }\n\n        const highlightDecorationRanges = Arrays.filterMap(blame.lines, l =>\n            l.sha === sha\n                ? this.editor.document.validateRange(new Range(l.line, 0, l.line, Number.MAX_SAFE_INTEGER))\n                : undefined\n        );\n\n        this.editor.setDecorations(this.highlightDecoration, highlightDecorationRanges);\n    }\n\n    async validate(): Promise<boolean> {\n        const blame = await this._blame;\n        return blame !== undefined && blame.lines.length !== 0;\n    }\n\n    protected async getBlame(): Promise<GitBlame | undefined> {\n        const blame = await this._blame;\n        if (blame === undefined || blame.lines.length === 0) return undefined;\n\n        return blame;\n    }\n\n    @log({ args: false })\n    protected getComputedHeatmap(blame: GitBlame): ComputedHeatmap {\n        const dates = [];\n\n        let commit;\n        let previousSha;\n        for (const l of blame.lines) {\n            if (previousSha === l.sha) continue;\n            previousSha = l.sha;\n\n            commit = blame.commits.get(l.sha);\n            if (commit === undefined) continue;\n\n            dates.push(commit.date);\n        }\n\n        dates.sort((a, b) => a.getTime() - b.getTime());\n\n        const half = Math.floor(dates.length / 2);\n        const median =\n            dates.length % 2 ? dates[half].getTime() : (dates[half - 1].getTime() + dates[half].getTime()) / 2.0;\n\n        const lookup: number[] = [];\n\n        const newest = dates[dates.length - 1].getTime();\n        let step = (newest - median) / 5;\n        for (let i = 5; i > 0; i--) {\n            lookup.push(median + step * i);\n        }\n\n        lookup.push(median);\n\n        const oldest = dates[0].getTime();\n        step = (median - oldest) / 4;\n        for (let i = 1; i <= 4; i++) {\n            lookup.push(median - step * i);\n        }\n\n        const d = new Date();\n        d.setDate(d.getDate() - (Container.config.heatmap.ageThreshold || 90));\n\n        return {\n            cold: newest < d.getTime(),\n            colors: {\n                cold: Container.config.heatmap.coldColor,\n                hot: Container.config.heatmap.hotColor\n            },\n            median: median,\n            newest: newest,\n            oldest: oldest,\n            computeAge: (date: Date) => {\n                const time = date.getTime();\n                let index = 0;\n                for (let i = 0; i < lookup.length; i++) {\n                    index = i;\n                    if (time >= lookup[i]) break;\n                }\n\n                return index;\n            }\n        };\n    }\n\n    registerHoverProviders(providers: { details: boolean; changes: boolean }) {\n        if (\n            !Container.config.hovers.enabled ||\n            !Container.config.hovers.annotations.enabled ||\n            (!providers.details && !providers.changes)\n        ) {\n            return;\n        }\n\n        const subscriptions: Disposable[] = [];\n        if (providers.changes) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: this.document.uri.fsPath },\n                    {\n                        provideHover: this.provideChangesHover.bind(this)\n                    }\n                )\n            );\n        }\n        if (providers.details) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: this.document.uri.fsPath },\n                    {\n                        provideHover: this.provideDetailsHover.bind(this)\n                    }\n                )\n            );\n        }\n\n        this._hoverProviderDisposable = Disposable.from(...subscriptions);\n    }\n\n    async provideDetailsHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        const commit = await this.getCommitForHover(position);\n        if (commit === undefined) return undefined;\n\n        // Get the full commit message -- since blame only returns the summary\n        let logCommit: GitCommit | undefined = undefined;\n        if (!commit.isUncommitted) {\n            logCommit = await Container.git.getLogCommitForFile(commit.repoPath, commit.uri.fsPath, {\n                ref: commit.sha\n            });\n            if (logCommit !== undefined) {\n                // Preserve the previous commit from the blame commit\n                logCommit.previousFileName = commit.previousFileName;\n                logCommit.previousSha = commit.previousSha;\n            }\n        }\n\n        const message = Annotations.getHoverMessage(\n            logCommit || commit,\n            Container.config.defaultDateFormat,\n            await Container.git.getRemotes(commit.repoPath),\n            this.annotationType,\n            this.editor.selection.active.line\n        );\n        return new Hover(\n            message,\n            document.validateRange(new Range(position.line, 0, position.line, Number.MAX_SAFE_INTEGER))\n        );\n    }\n\n    async provideChangesHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        const commit = await this.getCommitForHover(position);\n        if (commit === undefined) return undefined;\n\n        const hover = await Annotations.changesHover(commit, position.line, await GitUri.fromUri(document.uri));\n        if (hover.hoverMessage === undefined) return undefined;\n\n        return new Hover(\n            hover.hoverMessage,\n            document.validateRange(new Range(position.line, 0, position.line, Number.MAX_SAFE_INTEGER))\n        );\n    }\n\n    private async getCommitForHover(position: Position): Promise<GitCommit | undefined> {\n        if (Container.config.hovers.annotations.over !== 'line' && position.character !== 0) return undefined;\n\n        const blame = await this.getBlame();\n        if (blame === undefined) return undefined;\n\n        const line = blame.lines[position.line];\n\n        return blame.commits.get(line.sha);\n    }\n}\n","'use strict';\nimport { DecorationOptions, Range, TextEditorDecorationType, window } from 'vscode';\nimport { FileAnnotationType, GravatarDefaultStyle } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { CommitFormatOptions, GitBlameCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { log, Objects, Strings } from '../system';\nimport { Annotations } from './annotations';\nimport { BlameAnnotationProviderBase } from './blameAnnotationProvider';\n\nexport class GutterBlameAnnotationProvider extends BlameAnnotationProviderBase {\n    @log()\n    async onProvideAnnotation(shaOrLine?: string | number, type?: FileAnnotationType): Promise<boolean> {\n        const cc = Logger.getCorrelationContext();\n\n        this.annotationType = FileAnnotationType.Blame;\n\n        const blame = await this.getBlame();\n        if (blame === undefined) return false;\n\n        let start = process.hrtime();\n\n        const cfg = Container.config.blame;\n\n        // Precalculate the formatting options so we don't need to do it on each iteration\n        const tokenOptions = Strings.getTokensFromTemplate(cfg.format).reduce<{\n            [token: string]: Strings.TokenOptions | undefined;\n        }>((map, token) => {\n            map[token.key] = token.options;\n            return map;\n        }, Object.create(null));\n\n        const options: CommitFormatOptions = {\n            dateFormat: cfg.dateFormat === null ? Container.config.defaultDateFormat : cfg.dateFormat,\n            tokenOptions: tokenOptions\n        };\n\n        const avatars = cfg.avatars;\n        const gravatarDefault = Container.config.defaultGravatarsStyle;\n        const separateLines = cfg.separateLines;\n        const renderOptions = Annotations.gutterRenderOptions(separateLines, cfg.heatmap, cfg.format, options);\n\n        this.decorations = [];\n        const decorationsMap: { [sha: string]: DecorationOptions | undefined } = Object.create(null);\n        const avatarDecorationsMap:\n            | { [email: string]: { decoration: TextEditorDecorationType; ranges: Range[] } }\n            | undefined = avatars ? Object.create(null) : undefined;\n\n        let commit: GitBlameCommit | undefined;\n        let compacted = false;\n        let gutter: DecorationOptions | undefined;\n        let previousSha: string | undefined;\n\n        let computedHeatmap;\n        if (cfg.heatmap.enabled) {\n            computedHeatmap = this.getComputedHeatmap(blame);\n        }\n\n        for (const l of blame.lines) {\n            const line = l.line;\n\n            if (previousSha === l.sha) {\n                if (gutter === undefined) continue;\n\n                // Use a shallow copy of the previous decoration options\n                gutter = { ...gutter };\n\n                if (cfg.compact && !compacted) {\n                    // Since we are wiping out the contextText make sure to copy the objects\n                    gutter.renderOptions = {\n                        before: {\n                            ...gutter.renderOptions!.before,\n                            contentText: GlyphChars.Space.repeat(\n                                Strings.getWidth(gutter.renderOptions!.before!.contentText!)\n                            )\n                        }\n                    };\n\n                    if (separateLines) {\n                        gutter.renderOptions!.before!.textDecoration = 'none';\n                    }\n\n                    compacted = true;\n                }\n\n                gutter.range = new Range(line, 0, line, 0);\n\n                this.decorations.push(gutter);\n\n                if (avatars && !cfg.compact && commit !== undefined && commit.email !== undefined) {\n                    this.addOrUpdateGravatarDecoration(commit, gutter.range, gravatarDefault, avatarDecorationsMap!);\n                }\n\n                continue;\n            }\n\n            compacted = false;\n            previousSha = l.sha;\n\n            commit = blame.commits.get(l.sha);\n            if (commit === undefined) continue;\n\n            gutter = decorationsMap[l.sha];\n            if (gutter !== undefined) {\n                gutter = {\n                    ...gutter,\n                    range: new Range(line, 0, line, 0)\n                };\n\n                this.decorations.push(gutter);\n\n                if (avatars && commit.email !== undefined) {\n                    this.addOrUpdateGravatarDecoration(commit, gutter.range, gravatarDefault, avatarDecorationsMap!);\n                }\n\n                continue;\n            }\n\n            gutter = Annotations.gutter(commit, cfg.format, options, renderOptions) as DecorationOptions;\n\n            if (computedHeatmap !== undefined) {\n                Annotations.applyHeatmap(gutter, commit.date, computedHeatmap);\n            }\n\n            gutter.range = new Range(line, 0, line, 0);\n\n            this.decorations.push(gutter);\n\n            if (avatars && commit.email !== undefined) {\n                this.addOrUpdateGravatarDecoration(commit, gutter.range, gravatarDefault, avatarDecorationsMap!);\n            }\n\n            decorationsMap[l.sha] = gutter;\n        }\n\n        Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to compute gutter blame annotations`);\n\n        if (this.decorations.length) {\n            start = process.hrtime();\n\n            this.editor.setDecorations(this.decoration!, this.decorations);\n\n            if (avatars) {\n                this.additionalDecorations = [];\n                for (const d of Objects.values(avatarDecorationsMap!)) {\n                    this.additionalDecorations.push(d);\n                    this.editor.setDecorations(d.decoration, d.ranges);\n                }\n            }\n\n            Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to apply all gutter blame annotations`);\n        }\n\n        this.registerHoverProviders(Container.config.hovers.annotations);\n        return true;\n    }\n\n    addOrUpdateGravatarDecoration(\n        commit: GitBlameCommit,\n        range: Range,\n        gravatarDefault: GravatarDefaultStyle,\n        map: { [email: string]: { decoration: TextEditorDecorationType; ranges: Range[] } }\n    ) {\n        const avatarDecoration = map[commit.email!];\n        if (avatarDecoration !== undefined) {\n            avatarDecoration.ranges.push(range);\n\n            return;\n        }\n\n        map[commit.email!] = {\n            decoration: window.createTextEditorDecorationType({\n                gutterIconPath: commit.getGravatarUri(gravatarDefault),\n                gutterIconSize: '16px 16px'\n            }),\n            ranges: [range]\n        };\n    }\n}\n","'use strict';\nimport { DecorationOptions, Range } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { Container } from '../container';\nimport { GitBlameCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { log, Strings } from '../system';\nimport { Annotations } from './annotations';\nimport { BlameAnnotationProviderBase } from './blameAnnotationProvider';\n\nexport class HeatmapBlameAnnotationProvider extends BlameAnnotationProviderBase {\n    @log()\n    async onProvideAnnotation(shaOrLine?: string | number, type?: FileAnnotationType): Promise<boolean> {\n        const cc = Logger.getCorrelationContext();\n\n        this.annotationType = FileAnnotationType.Heatmap;\n\n        const blame = await this.getBlame();\n        if (blame === undefined) return false;\n\n        let start = process.hrtime();\n\n        const renderOptions = Annotations.heatmapRenderOptions();\n\n        this.decorations = [];\n        const decorationsMap: { [sha: string]: DecorationOptions | undefined } = Object.create(null);\n\n        let commit: GitBlameCommit | undefined;\n        let heatmap: DecorationOptions | undefined;\n\n        const computedHeatmap = this.getComputedHeatmap(blame);\n\n        for (const l of blame.lines) {\n            const line = l.line;\n\n            heatmap = decorationsMap[l.sha];\n            if (heatmap !== undefined) {\n                heatmap = {\n                    ...heatmap,\n                    range: new Range(line, 0, line, 0)\n                };\n\n                this.decorations.push(heatmap);\n\n                continue;\n            }\n\n            commit = blame.commits.get(l.sha);\n            if (commit === undefined) continue;\n\n            heatmap = Annotations.heatmap(commit, computedHeatmap, renderOptions) as DecorationOptions;\n            heatmap.range = new Range(line, 0, line, 0);\n\n            this.decorations.push(heatmap);\n            decorationsMap[l.sha] = heatmap;\n        }\n\n        Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to compute heatmap annotations`);\n\n        if (this.decorations.length) {\n            start = process.hrtime();\n\n            this.editor.setDecorations(this.decoration!, this.decorations);\n\n            Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to apply recent changes annotations`);\n        }\n\n        this.registerHoverProviders(Container.config.hovers.annotations);\n        return true;\n    }\n}\n","'use strict';\nimport { MarkdownString, Position, Range, TextEditor, TextEditorDecorationType } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { log, Strings } from '../system';\nimport { GitDocumentState, TrackedDocument } from '../trackers/gitDocumentTracker';\nimport { AnnotationProviderBase } from './annotationProvider';\nimport { Annotations } from './annotations';\n\nexport class RecentChangesAnnotationProvider extends AnnotationProviderBase {\n    private readonly _uri: GitUri;\n\n    constructor(\n        editor: TextEditor,\n        trackedDocument: TrackedDocument<GitDocumentState>,\n        decoration: TextEditorDecorationType,\n        highlightDecoration: TextEditorDecorationType | undefined\n    ) {\n        super(editor, trackedDocument, decoration, highlightDecoration);\n\n        this._uri = trackedDocument.uri;\n    }\n\n    @log()\n    async onProvideAnnotation(shaOrLine?: string | number): Promise<boolean> {\n        const cc = Logger.getCorrelationContext();\n\n        this.annotationType = FileAnnotationType.RecentChanges;\n\n        const commit = await Container.git.getRecentLogCommitForFile(this._uri.repoPath, this._uri.fsPath);\n        if (commit === undefined) return false;\n\n        const diff = await Container.git.getDiffForFile(this._uri, commit.previousSha);\n        if (diff === undefined) return false;\n\n        let start = process.hrtime();\n\n        const cfg = Container.config;\n        const dateFormat = cfg.defaultDateFormat;\n\n        this.decorations = [];\n\n        for (const chunk of diff.chunks) {\n            let count = chunk.currentPosition.start - 2;\n            for (const line of chunk.lines) {\n                if (line.line === undefined) continue;\n\n                count++;\n\n                if (line.state === 'unchanged') continue;\n\n                const range = this.editor.document.validateRange(\n                    new Range(new Position(count, 0), new Position(count, Number.MAX_SAFE_INTEGER))\n                );\n\n                let message: MarkdownString | undefined = undefined;\n\n                if (cfg.hovers.enabled && cfg.hovers.annotations.enabled) {\n                    if (cfg.hovers.annotations.details) {\n                        this.decorations.push({\n                            hoverMessage: Annotations.getHoverMessage(\n                                commit,\n                                dateFormat,\n                                await Container.git.getRemotes(commit.repoPath),\n                                this.annotationType,\n                                this.editor.selection.active.line\n                            ),\n                            range: range\n                        });\n                    }\n\n                    if (cfg.hovers.annotations.changes) {\n                        message = Annotations.getHoverDiffMessage(commit, this._uri, line);\n                        if (message === undefined) continue;\n                    }\n                }\n\n                this.decorations.push({\n                    hoverMessage: message,\n                    range: range\n                });\n            }\n        }\n\n        Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to compute recent changes annotations`);\n\n        if (this.decorations.length) {\n            start = process.hrtime();\n\n            this.editor.setDecorations(this.decoration, this.decorations);\n\n            Logger.log(cc, `${Strings.getDurationMilliseconds(start)} ms to apply recent changes annotations`);\n        }\n\n        return true;\n    }\n\n    selection(shaOrLine?: string | number): Promise<void> {\n        return Promise.resolve(undefined);\n    }\n\n    validate(): Promise<boolean> {\n        return Promise.resolve(true);\n    }\n}\n","'use strict';\nimport {\n    ConfigurationChangeEvent,\n    DecorationOptions,\n    DecorationRangeBehavior,\n    Disposable,\n    Range,\n    TextEditor,\n    TextEditorDecorationType,\n    window\n} from 'vscode';\nimport { configuration } from '../configuration';\nimport { isTextEditor } from '../constants';\nimport { Container } from '../container';\nimport { LinesChangeEvent } from '../trackers/gitLineTracker';\nimport { Annotations } from './annotations';\nimport { log } from '../system';\n\nconst annotationDecoration: TextEditorDecorationType = window.createTextEditorDecorationType({\n    after: {\n        margin: '0 0 0 3em',\n        textDecoration: 'none'\n    },\n    rangeBehavior: DecorationRangeBehavior.ClosedOpen\n});\n\nexport class LineAnnotationController implements Disposable {\n    private _disposable: Disposable;\n    private _editor: TextEditor | undefined;\n    private _enabled: boolean = false;\n\n    constructor() {\n        this._disposable = Disposable.from(\n            configuration.onDidChange(this.onConfigurationChanged, this),\n            Container.fileAnnotations.onDidToggleAnnotations(this.onFileAnnotationsToggled, this)\n        );\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.clearAnnotations(this._editor);\n\n        Container.lineTracker.stop(this);\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (!configuration.changed(e, configuration.name('currentLine').value)) return;\n\n        if (configuration.changed(e, configuration.name('currentLine')('enabled').value)) {\n            if (Container.config.currentLine.enabled) {\n                this._enabled = true;\n                this.resume();\n            }\n            else {\n                this._enabled = false;\n                this.setLineTracker(false);\n            }\n        }\n\n        void this.refresh(window.activeTextEditor);\n    }\n\n    private _suspended: boolean = false;\n    get suspended() {\n        return !this._enabled || this._suspended;\n    }\n\n    @log()\n    resume() {\n        this.setLineTracker(true);\n\n        if (this._suspended) {\n            this._suspended = false;\n            return true;\n        }\n\n        return false;\n    }\n\n    @log()\n    suspend() {\n        this.setLineTracker(false);\n\n        if (!this._suspended) {\n            this._suspended = true;\n            return true;\n        }\n\n        return false;\n    }\n\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        if (!e.pending && e.lines !== undefined) {\n            void this.refresh(e.editor);\n\n            return;\n        }\n\n        this.clear(e.editor);\n    }\n\n    private onFileAnnotationsToggled() {\n        void this.refresh(window.activeTextEditor);\n    }\n\n    clear(editor: TextEditor | undefined) {\n        if (this._editor !== editor && this._editor !== undefined) {\n            this.clearAnnotations(this._editor);\n        }\n        this.clearAnnotations(editor);\n    }\n\n    async toggle(editor: TextEditor | undefined) {\n        this._enabled = !(this._enabled && !this.suspended);\n\n        if (this._enabled) {\n            if (this.resume()) {\n                await this.refresh(editor);\n            }\n        }\n        else if (this.suspend()) {\n            await this.refresh(editor);\n        }\n    }\n\n    private clearAnnotations(editor: TextEditor | undefined) {\n        if (editor === undefined || (editor as any)._disposed === true) return;\n\n        editor.setDecorations(annotationDecoration, []);\n    }\n\n    private async refresh(editor: TextEditor | undefined) {\n        if (editor === undefined && this._editor === undefined) return;\n\n        const lines = Container.lineTracker.lines;\n        if (editor === undefined || lines === undefined || !isTextEditor(editor)) {\n            this.clear(this._editor);\n            return;\n        }\n\n        if (this._editor !== editor) {\n            // Clear any annotations on the previously active editor\n            this.clear(this._editor);\n\n            this._editor = editor;\n        }\n\n        const cfg = Container.config.currentLine;\n        if (this.suspended) {\n            this.clear(editor);\n            return;\n        }\n\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n        if (!trackedDocument.isBlameable && this.suspended) {\n            this.clear(editor);\n            return;\n        }\n\n        // Make sure the editor hasn't died since the await above and that we are still on the same line(s)\n        if (editor.document === undefined || !Container.lineTracker.includesAll(lines)) return;\n\n        const scrollable = Container.config.currentLine.scrollable;\n\n        const decorations = [];\n        for (const l of lines) {\n            const state = Container.lineTracker.getState(l);\n            if (state === undefined || state.commit === undefined) continue;\n\n            const decoration = Annotations.trailing(\n                state.commit,\n                cfg.format,\n                cfg.dateFormat === null ? Container.config.defaultDateFormat : cfg.dateFormat,\n                scrollable\n            ) as DecorationOptions;\n            decoration.range = editor.document.validateRange(\n                new Range(l, Number.MAX_SAFE_INTEGER, l, Number.MAX_SAFE_INTEGER)\n            );\n            decorations.push(decoration);\n        }\n\n        editor.setDecorations(annotationDecoration, decorations);\n    }\n\n    private setLineTracker(enabled: boolean) {\n        if (enabled) {\n            if (!Container.lineTracker.isSubscribed(this)) {\n                Container.lineTracker.start(\n                    this,\n                    Disposable.from(Container.lineTracker.onDidChangeActiveLines(this.onActiveLinesChanged, this))\n                );\n            }\n\n            return;\n        }\n\n        Container.lineTracker.stop(this);\n    }\n}\n","'use strict';\nimport {\n    CancellationToken,\n    CodeLens,\n    CodeLensProvider,\n    Command,\n    commands,\n    DocumentSelector,\n    DocumentSymbol,\n    Event,\n    EventEmitter,\n    ExtensionContext,\n    Location,\n    Position,\n    Range,\n    SymbolInformation,\n    SymbolKind,\n    TextDocument\n} from 'vscode';\nimport {\n    Commands,\n    DiffWithPreviousCommandArgs,\n    ShowQuickCommitDetailsCommandArgs,\n    ShowQuickCommitFileDetailsCommandArgs,\n    ShowQuickFileHistoryCommandArgs\n} from '../commands';\nimport {\n    CodeLensCommand,\n    CodeLensConfig,\n    CodeLensLanguageScope,\n    CodeLensScopes,\n    configuration\n} from '../configuration';\nimport { BuiltInCommands, DocumentSchemes } from '../constants';\nimport { Container } from '../container';\nimport { GitBlame, GitBlameCommit, GitBlameLines, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Functions, Iterables } from '../system';\nimport { DocumentTracker, GitDocumentState } from '../trackers/gitDocumentTracker';\n\nexport class GitRecentChangeCodeLens extends CodeLens {\n    constructor(\n        public readonly languageId: string,\n        public readonly symbol: DocumentSymbol | SymbolInformation,\n        public readonly uri: GitUri | undefined,\n        private readonly blame: (() => GitBlameLines | undefined) | undefined,\n        public readonly blameRange: Range,\n        public readonly isFullRange: boolean,\n        range: Range,\n        public readonly desiredCommand: CodeLensCommand,\n        command?: Command | undefined\n    ) {\n        super(range, command);\n    }\n\n    getBlame(): GitBlameLines | undefined {\n        return this.blame && this.blame();\n    }\n}\n\nexport class GitAuthorsCodeLens extends CodeLens {\n    constructor(\n        public readonly languageId: string,\n        public readonly symbol: DocumentSymbol | SymbolInformation,\n        public readonly uri: GitUri | undefined,\n        private readonly blame: () => GitBlameLines | undefined,\n        public readonly blameRange: Range,\n        public readonly isFullRange: boolean,\n        range: Range,\n        public readonly desiredCommand: CodeLensCommand\n    ) {\n        super(range);\n    }\n\n    getBlame(): GitBlameLines | undefined {\n        return this.blame();\n    }\n}\n\nexport class GitCodeLensProvider implements CodeLensProvider {\n    private _onDidChangeCodeLenses = new EventEmitter<void>();\n    get onDidChangeCodeLenses(): Event<void> {\n        return this._onDidChangeCodeLenses.event;\n    }\n\n    static selector: DocumentSelector = [\n        { scheme: DocumentSchemes.File },\n        { scheme: DocumentSchemes.Vsls },\n        { scheme: DocumentSchemes.Git },\n        { scheme: DocumentSchemes.GitLens }\n    ];\n\n    constructor(\n        context: ExtensionContext,\n        private readonly _git: GitService,\n        private readonly _tracker: DocumentTracker<GitDocumentState>\n    ) {}\n\n    reset(reason?: 'idle' | 'saved') {\n        this._onDidChangeCodeLenses.fire();\n    }\n\n    async provideCodeLenses(document: TextDocument, token: CancellationToken): Promise<CodeLens[]> {\n        const trackedDocument = await this._tracker.getOrAdd(document);\n        if (!trackedDocument.isBlameable) return [];\n\n        let dirty = false;\n        if (document.isDirty) {\n            // Only allow dirty blames if we are idle\n            if (trackedDocument.isDirtyIdle) {\n                const maxLines = Container.config.advanced.blame.sizeThresholdAfterEdit;\n                if (maxLines > 0 && document.lineCount > maxLines) {\n                    dirty = true;\n                }\n            }\n            else {\n                dirty = true;\n            }\n        }\n\n        const cfg = configuration.get<CodeLensConfig>(configuration.name('codeLens').value, document.uri);\n\n        let languageScope =\n            cfg.scopesByLanguage &&\n            cfg.scopesByLanguage.find(\n                ll => ll.language !== undefined && ll.language.toLowerCase() === document.languageId\n            );\n        if (languageScope == null) {\n            languageScope = {\n                language: undefined\n            };\n        }\n        if (languageScope.scopes == null) {\n            languageScope.scopes = cfg.scopes;\n        }\n        if (languageScope.symbolScopes == null) {\n            languageScope.symbolScopes = cfg.symbolScopes;\n        }\n\n        languageScope.symbolScopes =\n            languageScope.symbolScopes != null\n                ? (languageScope.symbolScopes = languageScope.symbolScopes.map(s => s.toLowerCase()))\n                : [];\n\n        const lenses: CodeLens[] = [];\n\n        const gitUri = trackedDocument.uri;\n        let blame: GitBlame | undefined;\n        let symbols;\n\n        if (!dirty) {\n            if (token.isCancellationRequested) return lenses;\n\n            if (languageScope.scopes.length === 1 && languageScope.scopes.includes(CodeLensScopes.Document)) {\n                blame = document.isDirty\n                    ? await this._git.getBlameForFileContents(gitUri, document.getText())\n                    : await this._git.getBlameForFile(gitUri);\n            }\n            else {\n                [blame, symbols] = await Promise.all([\n                    document.isDirty\n                        ? this._git.getBlameForFileContents(gitUri, document.getText())\n                        : this._git.getBlameForFile(gitUri),\n                    commands.executeCommand(BuiltInCommands.ExecuteDocumentSymbolProvider, document.uri) as Promise<\n                        SymbolInformation[]\n                    >\n                ]);\n            }\n\n            if (blame === undefined || blame.lines.length === 0) return lenses;\n        }\n        else if (languageScope.scopes.length !== 1 || !languageScope.scopes.includes(CodeLensScopes.Document)) {\n            symbols = (await commands.executeCommand(\n                BuiltInCommands.ExecuteDocumentSymbolProvider,\n                document.uri\n            )) as SymbolInformation[];\n        }\n\n        if (token.isCancellationRequested) return lenses;\n\n        const documentRangeFn = Functions.once(() => document.validateRange(new Range(0, 1000000, 1000000, 1000000)));\n\n        // Since blame information isn't valid when there are unsaved changes -- update the lenses appropriately\n        const dirtyCommand: Command | undefined = dirty\n            ? { command: undefined!, title: this.getDirtyTitle(cfg) }\n            : undefined;\n\n        if (symbols !== undefined) {\n            Logger.log('GitCodeLensProvider.provideCodeLenses:', `${symbols.length} symbol(s) found`);\n            for (const sym of symbols) {\n                this.provideCodeLens(\n                    lenses,\n                    document,\n                    sym,\n                    languageScope as Required<CodeLensLanguageScope>,\n                    documentRangeFn,\n                    blame,\n                    gitUri,\n                    cfg,\n                    dirty,\n                    dirtyCommand\n                );\n            }\n        }\n\n        if (\n            (languageScope.scopes.includes(CodeLensScopes.Document) || languageScope.symbolScopes.includes('file')) &&\n            !languageScope.symbolScopes.includes('!file')\n        ) {\n            // Check if we have a lens for the whole document -- if not add one\n            if (!lenses.find(l => l.range.start.line === 0 && l.range.end.line === 0)) {\n                const blameRange = documentRangeFn();\n\n                let blameForRangeFn: (() => GitBlameLines | undefined) | undefined = undefined;\n                if (dirty || cfg.recentChange.enabled) {\n                    if (!dirty) {\n                        blameForRangeFn = Functions.once(() =>\n                            this._git.getBlameForRangeSync(blame!, gitUri, blameRange)\n                        );\n                    }\n\n                    const fileSymbol = new SymbolInformation(\n                        gitUri.getFilename(),\n                        SymbolKind.File,\n                        '',\n                        new Location(gitUri.documentUri(), new Range(0, 0, 0, blameRange.start.character))\n                    );\n                    lenses.push(\n                        new GitRecentChangeCodeLens(\n                            document.languageId,\n                            fileSymbol,\n                            gitUri,\n                            blameForRangeFn,\n                            blameRange,\n                            true,\n                            getRangeFromSymbol(fileSymbol),\n                            cfg.recentChange.command,\n                            dirtyCommand\n                        )\n                    );\n                }\n                if (!dirty && cfg.authors.enabled) {\n                    if (blameForRangeFn === undefined) {\n                        blameForRangeFn = Functions.once(() =>\n                            this._git.getBlameForRangeSync(blame!, gitUri, blameRange)\n                        );\n                    }\n\n                    const fileSymbol = new SymbolInformation(\n                        gitUri.getFilename(),\n                        SymbolKind.File,\n                        '',\n                        new Location(gitUri.documentUri(), new Range(0, 1, 0, blameRange.start.character))\n                    );\n                    lenses.push(\n                        new GitAuthorsCodeLens(\n                            document.languageId,\n                            fileSymbol,\n                            gitUri,\n                            blameForRangeFn,\n                            blameRange,\n                            true,\n                            getRangeFromSymbol(fileSymbol),\n                            cfg.authors.command\n                        )\n                    );\n                }\n            }\n        }\n\n        return lenses;\n    }\n\n    private getValidateSymbolRange(\n        symbol: SymbolInformation | DocumentSymbol,\n        languageScope: Required<CodeLensLanguageScope>,\n        documentRangeFn: () => Range,\n        includeSingleLineSymbols: boolean\n    ): Range | undefined {\n        let valid = false;\n        let range: Range | undefined;\n\n        const symbolName = SymbolKind[symbol.kind].toLowerCase();\n        switch (symbol.kind) {\n            case SymbolKind.File:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Containers) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    valid = !languageScope.symbolScopes.includes(`!${symbolName}`);\n                }\n\n                if (valid) {\n                    // Adjust the range to be for the whole file\n                    range = documentRangeFn();\n                }\n                break;\n\n            case SymbolKind.Package:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Containers) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    valid = !languageScope.symbolScopes.includes(`!${symbolName}`);\n                }\n\n                if (valid) {\n                    // Adjust the range to be for the whole file\n                    range = getRangeFromSymbol(symbol);\n                    if (range.start.line === 0 && range.end.line === 0) {\n                        range = documentRangeFn();\n                    }\n                }\n                break;\n\n            case SymbolKind.Class:\n            case SymbolKind.Interface:\n            case SymbolKind.Module:\n            case SymbolKind.Namespace:\n            case SymbolKind.Struct:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Containers) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    range = getRangeFromSymbol(symbol);\n                    valid =\n                        !languageScope.symbolScopes.includes(`!${symbolName}`) &&\n                        (includeSingleLineSymbols || !range.isSingleLine);\n                }\n                break;\n\n            case SymbolKind.Constructor:\n            case SymbolKind.Enum:\n            case SymbolKind.Function:\n            case SymbolKind.Method:\n            case SymbolKind.Property:\n                if (\n                    languageScope.scopes.includes(CodeLensScopes.Blocks) ||\n                    languageScope.symbolScopes.includes(symbolName)\n                ) {\n                    range = getRangeFromSymbol(symbol);\n                    valid =\n                        !languageScope.symbolScopes.includes(`!${symbolName}`) &&\n                        (includeSingleLineSymbols || !range.isSingleLine);\n                }\n                break;\n\n            default:\n                if (languageScope.symbolScopes.includes(symbolName)) {\n                    range = getRangeFromSymbol(symbol);\n                    valid =\n                        !languageScope.symbolScopes.includes(`!${symbolName}`) &&\n                        (includeSingleLineSymbols || !range.isSingleLine);\n                }\n                break;\n        }\n\n        return valid ? range || getRangeFromSymbol(symbol) : undefined;\n    }\n\n    private provideCodeLens(\n        lenses: CodeLens[],\n        document: TextDocument,\n        symbol: SymbolInformation | DocumentSymbol,\n        languageScope: Required<CodeLensLanguageScope>,\n        documentRangeFn: () => Range,\n        blame: GitBlame | undefined,\n        gitUri: GitUri | undefined,\n        cfg: CodeLensConfig,\n        dirty: boolean,\n        dirtyCommand: Command | undefined\n    ): void {\n        try {\n            const blameRange = this.getValidateSymbolRange(\n                symbol,\n                languageScope,\n                documentRangeFn,\n                cfg.includeSingleLineSymbols\n            );\n            if (blameRange === undefined) return;\n\n            const line = document.lineAt(getRangeFromSymbol(symbol).start);\n            // Make sure there is only 1 lens per line\n            if (lenses.length && lenses[lenses.length - 1].range.start.line === line.lineNumber) return;\n\n            // Anchor the code lens to the start of the line -- so that the range won't change with edits (otherwise the code lens will be removed and re-added)\n            let startChar = 0;\n\n            let blameForRangeFn: (() => GitBlameLines | undefined) | undefined;\n            if (dirty || cfg.recentChange.enabled) {\n                if (!dirty) {\n                    blameForRangeFn = Functions.once(() => this._git.getBlameForRangeSync(blame!, gitUri!, blameRange));\n                }\n                lenses.push(\n                    new GitRecentChangeCodeLens(\n                        document.languageId,\n                        symbol,\n                        gitUri,\n                        blameForRangeFn,\n                        blameRange,\n                        false,\n                        line.range.with(new Position(line.range.start.line, startChar)),\n                        cfg.recentChange.command,\n                        dirtyCommand\n                    )\n                );\n                startChar++;\n            }\n\n            if (cfg.authors.enabled) {\n                let multiline = !blameRange.isSingleLine;\n                // HACK for Omnisharp, since it doesn't return full ranges\n                if (!multiline && document.languageId === 'csharp') {\n                    switch (symbol.kind) {\n                        case SymbolKind.File:\n                            break;\n                        case SymbolKind.Package:\n                        case SymbolKind.Module:\n                        case SymbolKind.Namespace:\n                        case SymbolKind.Class:\n                        case SymbolKind.Interface:\n                        case SymbolKind.Constructor:\n                        case SymbolKind.Method:\n                        case SymbolKind.Function:\n                        case SymbolKind.Enum:\n                            multiline = true;\n                            break;\n                    }\n                }\n\n                if (multiline && !dirty) {\n                    if (blameForRangeFn === undefined) {\n                        blameForRangeFn = Functions.once(() =>\n                            this._git.getBlameForRangeSync(blame!, gitUri!, blameRange)\n                        );\n                    }\n                    lenses.push(\n                        new GitAuthorsCodeLens(\n                            document.languageId,\n                            symbol,\n                            gitUri,\n                            blameForRangeFn,\n                            blameRange,\n                            false,\n                            line.range.with(new Position(line.range.start.line, startChar)),\n                            cfg.authors.command\n                        )\n                    );\n                }\n            }\n        }\n        finally {\n            if (isDocumentSymbol(symbol)) {\n                for (const child of symbol.children) {\n                    this.provideCodeLens(\n                        lenses,\n                        document,\n                        child,\n                        languageScope,\n                        documentRangeFn,\n                        blame,\n                        gitUri,\n                        cfg,\n                        dirty,\n                        dirtyCommand\n                    );\n                }\n            }\n        }\n    }\n\n    resolveCodeLens(lens: CodeLens, token: CancellationToken): CodeLens | Thenable<CodeLens> {\n        if (lens instanceof GitRecentChangeCodeLens) return this.resolveGitRecentChangeCodeLens(lens, token);\n        if (lens instanceof GitAuthorsCodeLens) return this.resolveGitAuthorsCodeLens(lens, token);\n        return Promise.reject<CodeLens>(undefined);\n    }\n\n    private resolveGitRecentChangeCodeLens(lens: GitRecentChangeCodeLens, token: CancellationToken): CodeLens {\n        const blame = lens.getBlame();\n        if (blame === undefined) return lens;\n\n        const recentCommit = Iterables.first(blame.commits.values());\n        let title = `${recentCommit.author}, ${recentCommit.formattedDate}`;\n        if (Container.config.debug) {\n            title += ` [${lens.languageId}: ${SymbolKind[lens.symbol.kind]}(${lens.range.start.character}-${\n                lens.range.end.character\n            }${\n                (lens.symbol as SymbolInformation).containerName\n                    ? `|${(lens.symbol as SymbolInformation).containerName}`\n                    : ''\n            }), Lines (${lens.blameRange.start.line + 1}-${lens.blameRange.end.line + 1}), Commit (${\n                recentCommit.shortSha\n            })]`;\n        }\n\n        switch (lens.desiredCommand) {\n            case CodeLensCommand.DiffWithPrevious:\n                return this.applyDiffWithPreviousCommand<GitRecentChangeCodeLens>(title, lens, blame, recentCommit);\n            case CodeLensCommand.ShowQuickCommitDetails:\n                return this.applyShowQuickCommitDetailsCommand<GitRecentChangeCodeLens>(\n                    title,\n                    lens,\n                    blame,\n                    recentCommit\n                );\n            case CodeLensCommand.ShowQuickCommitFileDetails:\n                return this.applyShowQuickCommitFileDetailsCommand<GitRecentChangeCodeLens>(\n                    title,\n                    lens,\n                    blame,\n                    recentCommit\n                );\n            case CodeLensCommand.ShowQuickCurrentBranchHistory:\n                return this.applyShowQuickCurrentBranchHistoryCommand<GitRecentChangeCodeLens>(\n                    title,\n                    lens,\n                    blame,\n                    recentCommit\n                );\n            case CodeLensCommand.ShowQuickFileHistory:\n                return this.applyShowQuickFileHistoryCommand<GitRecentChangeCodeLens>(title, lens, blame, recentCommit);\n            case CodeLensCommand.ToggleFileBlame:\n                return this.applyToggleFileBlameCommand<GitRecentChangeCodeLens>(title, lens, blame);\n            default:\n                return lens;\n        }\n    }\n\n    private resolveGitAuthorsCodeLens(lens: GitAuthorsCodeLens, token: CancellationToken): CodeLens {\n        const blame = lens.getBlame();\n        if (blame === undefined) return lens;\n\n        const count = blame.authors.size;\n        let title = `${count} ${count > 1 ? 'authors' : 'author'} (${Iterables.first(blame.authors.values()).name}${\n            count > 1 ? ' and others' : ''\n        })`;\n        if (Container.config.debug) {\n            title += ` [${lens.languageId}: ${SymbolKind[lens.symbol.kind]}(${lens.range.start.character}-${\n                lens.range.end.character\n            }${\n                (lens.symbol as SymbolInformation).containerName\n                    ? `|${(lens.symbol as SymbolInformation).containerName}`\n                    : ''\n            }), Lines (${lens.blameRange.start.line + 1}-${lens.blameRange.end.line + 1}), Authors (${Iterables.join(\n                Iterables.map(blame.authors.values(), a => a.name),\n                ', '\n            )})]`;\n        }\n\n        switch (lens.desiredCommand) {\n            case CodeLensCommand.DiffWithPrevious:\n                return this.applyDiffWithPreviousCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickCommitDetails:\n                return this.applyShowQuickCommitDetailsCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickCommitFileDetails:\n                return this.applyShowQuickCommitFileDetailsCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickCurrentBranchHistory:\n                return this.applyShowQuickCurrentBranchHistoryCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ShowQuickFileHistory:\n                return this.applyShowQuickFileHistoryCommand<GitAuthorsCodeLens>(title, lens, blame);\n            case CodeLensCommand.ToggleFileBlame:\n                return this.applyToggleFileBlameCommand<GitAuthorsCodeLens>(title, lens, blame);\n            default:\n                return lens;\n        }\n    }\n\n    private applyDiffWithPreviousCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        if (commit === undefined) {\n            const blameLine = blame.allLines[lens.range.start.line];\n            commit = blame.commits.get(blameLine.sha);\n        }\n\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: commit\n        };\n        lens.command = {\n            title: title,\n            command: Commands.DiffWithPrevious,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyShowQuickCommitDetailsCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n            commit: commit,\n            sha: commit === undefined ? undefined : commit.sha\n        };\n        lens.command = {\n            title: title,\n            command: commit !== undefined && commit.isUncommitted ? '' : CodeLensCommand.ShowQuickCommitDetails,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyShowQuickCommitFileDetailsCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        const commandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n            commit: commit,\n            sha: commit === undefined ? undefined : commit.sha\n        };\n        lens.command = {\n            title: title,\n            command: commit !== undefined && commit.isUncommitted ? '' : CodeLensCommand.ShowQuickCommitFileDetails,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyShowQuickCurrentBranchHistoryCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        lens.command = {\n            title: title,\n            command: CodeLensCommand.ShowQuickCurrentBranchHistory,\n            arguments: [lens.uri!.toFileUri()]\n        };\n        return lens;\n    }\n\n    private applyShowQuickFileHistoryCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines,\n        commit?: GitBlameCommit\n    ): T {\n        const commandArgs: ShowQuickFileHistoryCommandArgs = {\n            range: lens.isFullRange ? undefined : lens.blameRange\n        };\n        lens.command = {\n            title: title,\n            command: CodeLensCommand.ShowQuickFileHistory,\n            arguments: [lens.uri!.toFileUri(), commandArgs]\n        };\n        return lens;\n    }\n\n    private applyToggleFileBlameCommand<T extends GitRecentChangeCodeLens | GitAuthorsCodeLens>(\n        title: string,\n        lens: T,\n        blame: GitBlameLines\n    ): T {\n        lens.command = {\n            title: title,\n            command: Commands.ToggleFileBlame,\n            arguments: [lens.uri!.toFileUri()]\n        };\n        return lens;\n    }\n\n    private getDirtyTitle(cfg: CodeLensConfig) {\n        if (cfg.recentChange.enabled && cfg.authors.enabled) {\n            return Container.config.strings.codeLens.unsavedChanges.recentChangeAndAuthors;\n        }\n        if (cfg.recentChange.enabled) return Container.config.strings.codeLens.unsavedChanges.recentChangeOnly;\n        return Container.config.strings.codeLens.unsavedChanges.authorsOnly;\n    }\n}\n\nfunction getRangeFromSymbol(symbol: DocumentSymbol | SymbolInformation) {\n    return isDocumentSymbol(symbol) ? symbol.range : symbol.location.range;\n}\n\nfunction isDocumentSymbol(symbol: DocumentSymbol | SymbolInformation): symbol is DocumentSymbol {\n    return Functions.is<DocumentSymbol>(symbol, 'children');\n}\n","'use strict';\nimport { ConfigurationChangeEvent, Disposable, languages } from 'vscode';\nimport { configuration } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport {\n    DocumentBlameStateChangeEvent,\n    DocumentDirtyIdleTriggerEvent,\n    GitDocumentState\n} from '../trackers/gitDocumentTracker';\nimport { GitCodeLensProvider } from './codeLensProvider';\n\nexport class GitCodeLensController implements Disposable {\n    private _canToggle: boolean = false;\n    private _disposable: Disposable | undefined;\n    private _provider: GitCodeLensProvider | undefined;\n    private _providerDisposable: Disposable | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this._providerDisposable && this._providerDisposable.dispose();\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        const section = configuration.name('codeLens').value;\n        if (\n            configuration.changed(e, section, null) ||\n            configuration.changed(e, configuration.name('defaultDateStyle').value) ||\n            configuration.changed(e, configuration.name('defaultDateFormat').value)\n        ) {\n            if (!configuration.initializing(e)) {\n                Logger.log('CodeLens config changed; resetting CodeLens provider');\n            }\n\n            const cfg = Container.config.codeLens;\n            if (cfg.enabled && (cfg.recentChange.enabled || cfg.authors.enabled)) {\n                if (this._provider !== undefined) {\n                    this._provider.reset();\n                }\n                else {\n                    this.createProvider();\n                }\n            }\n            else {\n                if (this._providerDisposable !== undefined) {\n                    this._providerDisposable.dispose();\n                    this._providerDisposable = undefined;\n                }\n                this._provider = undefined;\n            }\n\n            this._canToggle = cfg.recentChange.enabled || cfg.authors.enabled;\n            setCommandContext(CommandContext.CanToggleCodeLens, this._canToggle);\n        }\n    }\n\n    private onBlameStateChanged(e: DocumentBlameStateChangeEvent<GitDocumentState>) {\n        // Only reset if we have saved, since the code lens won't naturally be re-rendered\n        if (this._provider === undefined || !e.blameable) return;\n\n        Logger.log('Blame state changed; resetting CodeLens provider');\n        this._provider.reset('saved');\n    }\n\n    private onDirtyIdleTriggered(e: DocumentDirtyIdleTriggerEvent<GitDocumentState>) {\n        if (this._provider === undefined || !e.document.isBlameable) return;\n\n        const maxLines = Container.config.advanced.blame.sizeThresholdAfterEdit;\n        if (maxLines > 0 && e.document.lineCount > maxLines) return;\n\n        Logger.log('Dirty idle triggered; resetting CodeLens provider');\n        this._provider.reset('idle');\n    }\n\n    toggleCodeLens() {\n        if (!this._canToggle) return;\n\n        Logger.log('toggleCodeLens()');\n        if (this._provider !== undefined) {\n            if (this._providerDisposable !== undefined) {\n                this._providerDisposable.dispose();\n                this._providerDisposable = undefined;\n            }\n\n            this._provider = undefined;\n\n            return;\n        }\n\n        this.createProvider();\n    }\n\n    private createProvider() {\n        this._provider = new GitCodeLensProvider(Container.context, Container.git, Container.tracker);\n        this._providerDisposable = Disposable.from(\n            languages.registerCodeLensProvider(GitCodeLensProvider.selector, this._provider),\n            Container.tracker.onDidChangeBlameState(this.onBlameStateChanged, this),\n            Container.tracker.onDidTriggerDirtyIdle(this.onDirtyIdleTriggered, this)\n        );\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport {\n    Disposable,\n    Event,\n    EventEmitter,\n    FileChangeEvent,\n    FileStat,\n    FileSystemError,\n    FileSystemProvider,\n    FileType,\n    Uri,\n    workspace\n} from 'vscode';\nimport { DocumentSchemes } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitTree, GitUri } from '../git/gitService';\nimport { Iterables, Strings, TernarySearchTree } from '../system';\n\nconst emptyArray = new Uint8Array(0);\n\nexport function fromGitLensFSUri(uri: Uri): { path: string; ref: string; repoPath: string } {\n    const gitUri = uri instanceof GitUri ? uri : GitUri.fromRevisionUri(uri);\n    return { path: gitUri.getRelativePath(), ref: gitUri.sha!, repoPath: gitUri.repoPath! };\n}\n\nexport function toGitLensFSUri(ref: string, repoPath: string): Uri {\n    return GitUri.toRevisionUri(ref, repoPath, repoPath);\n}\n\nexport class GitFileSystemProvider implements FileSystemProvider, Disposable {\n    private readonly _disposable: Disposable;\n    private readonly _searchTreeMap = new Map<string, Promise<TernarySearchTree<GitTree>>>();\n\n    constructor() {\n        this._disposable = Disposable.from(\n            workspace.registerFileSystemProvider(DocumentSchemes.GitLens, this, {\n                isCaseSensitive: true,\n                isReadonly: true\n            })\n        );\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    private _onDidChangeFile = new EventEmitter<FileChangeEvent[]>();\n    get onDidChangeFile(): Event<FileChangeEvent[]> {\n        return this._onDidChangeFile.event;\n    }\n\n    copy?(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n    createDirectory(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n    delete(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n\n    async readDirectory(uri: Uri): Promise<[string, FileType][]> {\n        const { path, ref, repoPath } = fromGitLensFSUri(uri);\n\n        const tree = await this.getTree(path, ref, repoPath);\n        if (tree === undefined) throw FileSystemError.FileNotFound(uri);\n\n        const items = [\n            ...Iterables.map<GitTree, [string, FileType]>(tree, t => [\n                path != null && path.length !== 0 ? Strings.normalizePath(paths.relative(path, t.path)) : t.path,\n                typeToFileType(t.type)\n            ])\n        ];\n        return items;\n    }\n\n    async readFile(uri: Uri): Promise<Uint8Array> {\n        const { path, ref, repoPath } = fromGitLensFSUri(uri);\n\n        if (ref === GitService.deletedOrMissingSha) return emptyArray;\n\n        const buffer = await Container.git.getVersionedFileBuffer(repoPath, path, ref);\n        if (buffer === undefined) return emptyArray;\n\n        return buffer;\n    }\n\n    rename(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n\n    async stat(uri: Uri): Promise<FileStat> {\n        const { path, ref, repoPath } = fromGitLensFSUri(uri);\n\n        if (ref === GitService.deletedOrMissingSha) {\n            return {\n                type: FileType.File,\n                size: 0,\n                ctime: 0,\n                mtime: 0\n            };\n        }\n\n        let treeItem;\n\n        const searchTree = this._searchTreeMap.get(ref);\n        if (searchTree !== undefined) {\n            // Add the fake root folder to the path\n            treeItem = (await searchTree).get(`/~/${path}`);\n        }\n        else {\n            if (path == null || path.length === 0) {\n                const tree = await this.getTree(path, ref, repoPath);\n                if (tree === undefined) throw FileSystemError.FileNotFound(uri);\n\n                return {\n                    type: FileType.Directory,\n                    size: 0,\n                    ctime: 0,\n                    mtime: 0\n                };\n            }\n\n            treeItem = await Container.git.getTreeFileForRevision(repoPath, path, ref);\n        }\n\n        if (treeItem === undefined) {\n            throw FileSystemError.FileNotFound(uri);\n        }\n\n        return {\n            type: typeToFileType(treeItem.type),\n            size: treeItem.size,\n            ctime: 0,\n            mtime: 0\n        };\n    }\n\n    watch(): Disposable {\n        return {\n            dispose: () => {\n                // nothing to dispose\n            }\n        };\n    }\n\n    writeFile(): void | Thenable<void> {\n        throw FileSystemError.NoPermissions;\n    }\n\n    private async createSearchTree(ref: string, repoPath: string) {\n        const searchTree = TernarySearchTree.forPaths() as TernarySearchTree<GitTree>;\n        const trees = await Container.git.getTreeForRevision(repoPath, ref);\n\n        // Add a fake root folder so that searches will work\n        searchTree.set('~', { commitSha: '', path: '~', size: 0, type: 'tree' });\n        for (const item of trees) {\n            searchTree.set(`~/${item.path}`, item);\n        }\n\n        return searchTree;\n    }\n\n    private getOrCreateSearchTree(ref: string, repoPath: string) {\n        let searchTree = this._searchTreeMap.get(ref);\n        if (searchTree === undefined) {\n            searchTree = this.createSearchTree(ref, repoPath);\n            this._searchTreeMap.set(ref, searchTree);\n        }\n\n        return searchTree;\n    }\n\n    private async getTree(path: string, ref: string, repoPath: string) {\n        const searchTree = await this.getOrCreateSearchTree(ref, repoPath);\n        // Add the fake root folder to the path\n        return searchTree!.findSuperstr(`/~/${path}`, true);\n    }\n}\n\nfunction typeToFileType(type: 'blob' | 'tree' | undefined | null) {\n    switch (type) {\n        case 'blob':\n            return FileType.File;\n        case 'tree':\n            return FileType.Directory;\n        default:\n            return FileType.Unknown;\n    }\n}\n","'use strict';\nimport {\n    CancellationToken,\n    ConfigurationChangeEvent,\n    Disposable,\n    Hover,\n    languages,\n    Position,\n    Range,\n    TextDocument,\n    TextEditor,\n    window\n} from 'vscode';\nimport { Annotations } from '../annotations/annotations';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { LinesChangeEvent } from '../trackers/gitLineTracker';\n\nexport class LineHoverController implements Disposable {\n    private _disposable: Disposable;\n    private _hoverProviderDisposable: Disposable | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.unregister();\n\n        Container.lineTracker.stop(this);\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('hovers')('enabled').value) &&\n            !configuration.changed(e, configuration.name('hovers')('currentLine')('enabled').value)\n        ) {\n            return;\n        }\n\n        if (Container.config.hovers.enabled && Container.config.hovers.currentLine.enabled) {\n            Container.lineTracker.start(\n                this,\n                Disposable.from(Container.lineTracker.onDidChangeActiveLines(this.onActiveLinesChanged, this))\n            );\n\n            this.register(window.activeTextEditor);\n        }\n        else {\n            Container.lineTracker.stop(this);\n            this.unregister();\n        }\n    }\n\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        if (e.pending || e.reason !== 'editor') return;\n\n        if (e.editor === undefined || e.lines === undefined) {\n            this.unregister();\n\n            return;\n        }\n\n        this.register(e.editor);\n    }\n\n    async provideDetailsHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        if (!Container.lineTracker.includes(position.line)) return undefined;\n\n        const lineState = Container.lineTracker.getState(position.line);\n        const commit = lineState !== undefined ? lineState.commit : undefined;\n        if (commit === undefined) return undefined;\n\n        // Avoid double annotations if we are showing the whole-file hover blame annotations\n        const fileAnnotations = await Container.fileAnnotations.getAnnotationType(window.activeTextEditor);\n        if (fileAnnotations !== undefined && Container.config.hovers.annotations.details) return undefined;\n\n        const wholeLine = Container.config.hovers.currentLine.over === 'line';\n        // If we aren't showing the hover over the whole line, make sure the annotation is on\n        if (!wholeLine && Container.lineAnnotations.suspended) return undefined;\n\n        const range = document.validateRange(\n            new Range(position.line, wholeLine ? 0 : Number.MAX_SAFE_INTEGER, position.line, Number.MAX_SAFE_INTEGER)\n        );\n        if (!wholeLine && range.start.character !== position.character) return undefined;\n\n        // Get the full commit message -- since blame only returns the summary\n        let logCommit = lineState !== undefined ? lineState.logCommit : undefined;\n        if (logCommit === undefined && !commit.isUncommitted) {\n            logCommit = await Container.git.getLogCommitForFile(commit.repoPath, commit.uri.fsPath, {\n                ref: commit.sha\n            });\n            if (logCommit !== undefined) {\n                // Preserve the previous commit from the blame commit\n                logCommit.previousSha = commit.previousSha;\n                logCommit.previousFileName = commit.previousFileName;\n\n                if (lineState !== undefined) {\n                    lineState.logCommit = logCommit;\n                }\n            }\n        }\n\n        const trackedDocument = await Container.tracker.get(document);\n        if (trackedDocument === undefined) return undefined;\n\n        const message = Annotations.getHoverMessage(\n            logCommit || commit,\n            Container.config.defaultDateFormat,\n            await Container.git.getRemotes(commit.repoPath),\n            fileAnnotations,\n            position.line\n        );\n        return new Hover(message, range);\n    }\n\n    async provideChangesHover(\n        document: TextDocument,\n        position: Position,\n        token: CancellationToken\n    ): Promise<Hover | undefined> {\n        if (!Container.lineTracker.includes(position.line)) return undefined;\n\n        const lineState = Container.lineTracker.getState(position.line);\n        const commit = lineState !== undefined ? lineState.commit : undefined;\n        if (commit === undefined) return undefined;\n\n        // Avoid double annotations if we are showing the whole-file hover blame annotations\n        if (Container.config.hovers.annotations.changes) {\n            const fileAnnotations = await Container.fileAnnotations.getAnnotationType(window.activeTextEditor);\n            if (fileAnnotations !== undefined) return undefined;\n        }\n\n        const wholeLine = Container.config.hovers.currentLine.over === 'line';\n        // If we aren't showing the hover over the whole line, make sure the annotation is on\n        if (!wholeLine && Container.lineAnnotations.suspended) return undefined;\n\n        const range = document.validateRange(\n            new Range(position.line, wholeLine ? 0 : Number.MAX_SAFE_INTEGER, position.line, Number.MAX_SAFE_INTEGER)\n        );\n        if (!wholeLine && range.start.character !== position.character) return undefined;\n\n        const trackedDocument = await Container.tracker.get(document);\n        if (trackedDocument === undefined) return undefined;\n\n        const hover = await Annotations.changesHover(commit, position.line, trackedDocument.uri);\n        if (hover.hoverMessage === undefined) return undefined;\n\n        return new Hover(hover.hoverMessage, range);\n    }\n\n    private register(editor: TextEditor | undefined) {\n        this.unregister();\n\n        if (editor === undefined) return;\n\n        const cfg = Container.config.hovers;\n        if (!cfg.enabled || !cfg.currentLine.enabled || (!cfg.currentLine.details && !cfg.currentLine.changes)) return;\n\n        const subscriptions = [];\n        if (cfg.currentLine.changes) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: editor.document.uri.fsPath },\n                    {\n                        provideHover: this.provideChangesHover.bind(this)\n                    }\n                )\n            );\n        }\n        if (cfg.currentLine.details) {\n            subscriptions.push(\n                languages.registerHoverProvider(\n                    { pattern: editor.document.uri.fsPath },\n                    {\n                        provideHover: this.provideDetailsHover.bind(this)\n                    }\n                )\n            );\n        }\n\n        this._hoverProviderDisposable = Disposable.from(...subscriptions);\n    }\n\n    private unregister() {\n        if (this._hoverProviderDisposable !== undefined) {\n            this._hoverProviderDisposable.dispose();\n            this._hoverProviderDisposable = undefined;\n        }\n    }\n}\n","'use strict';\nimport { commands, Disposable } from 'vscode';\nimport { CommandContext, extensionId, setCommandContext } from './constants';\nimport { Logger } from './logger';\n\nexport declare interface KeyCommand {\n    onDidPressKey?(key: Keys): Thenable<{} | undefined>;\n}\n\nconst keyNoopCommand = Object.create(null) as KeyCommand;\nexport { keyNoopCommand as KeyNoopCommand };\n\nexport declare type Keys = 'left' | 'right' | ',' | '.' | 'escape';\nexport const keys: Keys[] = ['left', 'right', ',', '.', 'escape'];\n\nexport declare interface KeyMapping {\n    [id: string]: KeyCommand | (() => Thenable<KeyCommand>) | undefined;\n}\n\nconst mappings: KeyMapping[] = [];\n\nexport class KeyboardScope implements Disposable {\n    constructor(private readonly mapping: KeyMapping) {\n        for (const key in mapping) {\n            mapping[key] = mapping[key] || keyNoopCommand;\n        }\n    }\n\n    async dispose() {\n        const index = mappings.indexOf(this.mapping);\n        Logger.log('KeyboardScope.dispose', mappings.length, index);\n        if (index === mappings.length - 1) {\n            mappings.pop();\n            await this.updateKeyCommandsContext(mappings[mappings.length - 1]);\n        }\n        else {\n            mappings.splice(index, 1);\n        }\n    }\n\n    async begin() {\n        mappings.push(this.mapping);\n        await this.updateKeyCommandsContext(this.mapping);\n        return this;\n    }\n\n    async clearKeyCommand(key: Keys) {\n        const mapping = mappings[mappings.length - 1];\n        if (mapping !== this.mapping || !mapping[key]) return;\n\n        Logger.log('KeyboardScope.clearKeyCommand', mappings.length, key);\n        mapping[key] = undefined;\n        await setCommandContext(`${CommandContext.Key}:${key}`, false);\n    }\n\n    async setKeyCommand(key: Keys, command: KeyCommand | (() => Promise<KeyCommand>)) {\n        const mapping = mappings[mappings.length - 1];\n        if (mapping !== this.mapping) return;\n\n        Logger.log('KeyboardScope.setKeyCommand', mappings.length, key, Boolean(mapping[key]));\n\n        if (!mapping[key]) {\n            mapping[key] = command;\n            await setCommandContext(`${CommandContext.Key}:${key}`, true);\n        }\n        else {\n            mapping[key] = command;\n        }\n    }\n\n    private async updateKeyCommandsContext(mapping: KeyMapping) {\n        const promises = [];\n        for (const key of keys) {\n            promises.push(setCommandContext(`${CommandContext.Key}:${key}`, Boolean(mapping && mapping[key])));\n        }\n        await Promise.all(promises);\n    }\n}\n\nexport class Keyboard implements Disposable {\n    private _disposable: Disposable;\n\n    constructor() {\n        const subscriptions = keys.map(key =>\n            commands.registerCommand(`${extensionId}.key.${key}`, () => this.execute(key), this)\n        );\n        this._disposable = Disposable.from(...subscriptions);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    beginScope(mapping?: KeyMapping): Promise<KeyboardScope> {\n        Logger.log('Keyboard.beginScope', mappings.length);\n        return new KeyboardScope(mapping ? Object.assign(Object.create(null), mapping) : Object.create(null)).begin();\n    }\n\n    async execute(key: Keys): Promise<{} | undefined> {\n        if (!mappings.length) return undefined;\n\n        try {\n            const mapping = mappings[mappings.length - 1];\n\n            let command = mapping[key] as KeyCommand | (() => Promise<KeyCommand>);\n            if (typeof command === 'function') {\n                command = await command();\n            }\n            if (!command || typeof command.onDidPressKey !== 'function') return undefined;\n\n            Logger.log('Keyboard.execute', key);\n\n            return await command.onDidPressKey(key);\n        }\n        catch (ex) {\n            Logger.error(ex, 'Keyboard.execute');\n            return undefined;\n        }\n    }\n}\n","'use strict';\nimport { ConfigurationChangeEvent, Disposable, StatusBarAlignment, StatusBarItem, TextEditor, window } from 'vscode';\nimport { Commands } from '../commands';\nimport { configuration, StatusBarCommand } from '../configuration';\nimport { isTextEditor } from '../constants';\nimport { Container } from '../container';\nimport { CommitFormatter, GitCommit } from '../git/gitService';\nimport { LinesChangeEvent } from '../trackers/gitLineTracker';\n\nexport class StatusBarController implements Disposable {\n    private _blameStatusBarItem: StatusBarItem | undefined;\n    private _disposable: Disposable;\n    private _modeStatusBarItem: StatusBarItem | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(configuration.onDidChange(this.onConfigurationChanged, this));\n        this.onConfigurationChanged(configuration.initializingChangeEvent);\n    }\n\n    dispose() {\n        this.clearBlame();\n\n        this._blameStatusBarItem && this._blameStatusBarItem.dispose();\n        this._modeStatusBarItem && this._modeStatusBarItem.dispose();\n\n        Container.lineTracker.stop(this);\n        this._disposable && this._disposable.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (configuration.changed(e, configuration.name('mode').value)) {\n            const mode =\n                Container.config.mode.active && Container.config.mode.statusBar.enabled\n                    ? Container.config.modes[Container.config.mode.active]\n                    : undefined;\n            if (mode && mode.statusBarItemName) {\n                const alignment =\n                    Container.config.mode.statusBar.alignment !== 'left'\n                        ? StatusBarAlignment.Right\n                        : StatusBarAlignment.Left;\n\n                if (configuration.changed(e, configuration.name('mode')('statusBar')('alignment').value)) {\n                    if (this._modeStatusBarItem !== undefined && this._modeStatusBarItem.alignment !== alignment) {\n                        this._modeStatusBarItem.dispose();\n                        this._modeStatusBarItem = undefined;\n                    }\n                }\n\n                this._modeStatusBarItem =\n                    this._modeStatusBarItem ||\n                    window.createStatusBarItem(alignment, alignment === StatusBarAlignment.Right ? 999 : 1);\n                this._modeStatusBarItem.command = Commands.SwitchMode;\n                this._modeStatusBarItem.text = mode.statusBarItemName;\n                this._modeStatusBarItem.tooltip = 'Switch GitLens Mode';\n                this._modeStatusBarItem.show();\n            }\n            else if (this._modeStatusBarItem !== undefined) {\n                this._modeStatusBarItem.dispose();\n                this._modeStatusBarItem = undefined;\n            }\n        }\n\n        if (!configuration.changed(e, configuration.name('statusBar').value)) return;\n\n        if (Container.config.statusBar.enabled) {\n            const alignment =\n                Container.config.statusBar.alignment !== 'left' ? StatusBarAlignment.Right : StatusBarAlignment.Left;\n\n            if (configuration.changed(e, configuration.name('statusBar')('alignment').value)) {\n                if (this._blameStatusBarItem !== undefined && this._blameStatusBarItem.alignment !== alignment) {\n                    this._blameStatusBarItem.dispose();\n                    this._blameStatusBarItem = undefined;\n                }\n            }\n\n            this._blameStatusBarItem =\n                this._blameStatusBarItem ||\n                window.createStatusBarItem(alignment, alignment === StatusBarAlignment.Right ? 1000 : 0);\n            this._blameStatusBarItem.command = Container.config.statusBar.command;\n\n            if (configuration.changed(e, configuration.name('statusBar')('enabled').value)) {\n                Container.lineTracker.start(\n                    this,\n                    Disposable.from(Container.lineTracker.onDidChangeActiveLines(this.onActiveLinesChanged, this))\n                );\n            }\n        }\n        else if (configuration.changed(e, configuration.name('statusBar')('enabled').value)) {\n            Container.lineTracker.stop(this);\n\n            if (this._blameStatusBarItem !== undefined) {\n                this._blameStatusBarItem.dispose();\n                this._blameStatusBarItem = undefined;\n            }\n        }\n    }\n\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        // If we need to reduceFlicker, don't clear if only the selected lines changed\n        let clear = !(\n            Container.config.statusBar.reduceFlicker &&\n            e.reason === 'selection' &&\n            (e.pending || e.lines !== undefined)\n        );\n        if (!e.pending && e.lines !== undefined) {\n            const state = Container.lineTracker.getState(e.lines[0]);\n            if (state !== undefined && state.commit !== undefined) {\n                this.updateBlame(state.commit, e.editor!);\n\n                return;\n            }\n\n            clear = true;\n        }\n\n        if (clear) {\n            this.clearBlame();\n        }\n    }\n\n    clearBlame() {\n        if (this._blameStatusBarItem !== undefined) {\n            this._blameStatusBarItem.hide();\n        }\n    }\n\n    private updateBlame(commit: GitCommit, editor: TextEditor) {\n        const cfg = Container.config.statusBar;\n        if (!cfg.enabled || this._blameStatusBarItem === undefined || !isTextEditor(editor)) return;\n\n        this._blameStatusBarItem.text = `$(git-commit) ${CommitFormatter.fromTemplate(cfg.format, commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: cfg.dateFormat === null ? Container.config.defaultDateFormat : cfg.dateFormat\n        })}`;\n\n        switch (cfg.command) {\n            case StatusBarCommand.ToggleFileBlame:\n                this._blameStatusBarItem.tooltip = 'Toggle Blame Annotations';\n                break;\n            case StatusBarCommand.DiffWithPrevious:\n                this._blameStatusBarItem.command = Commands.DiffLineWithPrevious;\n                this._blameStatusBarItem.tooltip = 'Compare Line Revision with Previous';\n                break;\n            case StatusBarCommand.DiffWithWorking:\n                this._blameStatusBarItem.command = Commands.DiffLineWithWorking;\n                this._blameStatusBarItem.tooltip = 'Compare Line Revision with Working';\n                break;\n            case StatusBarCommand.ToggleCodeLens:\n                this._blameStatusBarItem.tooltip = 'Toggle Git CodeLens';\n                break;\n            case StatusBarCommand.ShowQuickCommitDetails:\n                this._blameStatusBarItem.tooltip = 'Show Commit Details';\n                break;\n            case StatusBarCommand.ShowQuickCommitFileDetails:\n                this._blameStatusBarItem.tooltip = 'Show Line Commit Details';\n                break;\n            case StatusBarCommand.ShowQuickFileHistory:\n                this._blameStatusBarItem.tooltip = 'Show File History';\n                break;\n            case StatusBarCommand.ShowQuickCurrentBranchHistory:\n                this._blameStatusBarItem.tooltip = 'Show Branch History';\n                break;\n        }\n\n        this._blameStatusBarItem.show();\n    }\n}\n","'use strict';\nimport { Disposable, Event, EventEmitter, TextEditor, TextEditorSelectionChangeEvent, window } from 'vscode';\nimport { isTextEditor } from '../constants';\nimport { Deferrable, Functions } from '../system';\n\nexport interface LinesChangeEvent {\n    readonly editor: TextEditor | undefined;\n    readonly lines: number[] | undefined;\n\n    readonly reason: 'editor' | 'selection';\n    readonly pending?: boolean;\n}\n\nexport class LineTracker<T> implements Disposable {\n    private _onDidChangeActiveLines = new EventEmitter<LinesChangeEvent>();\n    get onDidChangeActiveLines(): Event<LinesChangeEvent> {\n        return this._onDidChangeActiveLines.event;\n    }\n\n    protected _disposable: Disposable | undefined;\n    private _editor: TextEditor | undefined;\n\n    private readonly _state: Map<number, T | undefined> = new Map();\n\n    dispose() {\n        this.stop();\n    }\n\n    private onActiveTextEditorChanged(editor: TextEditor | undefined) {\n        if (this._editor === editor) return;\n        if (editor !== undefined && !isTextEditor(editor)) return;\n\n        this.reset();\n        this._editor = editor;\n        this._lines = editor !== undefined ? editor.selections.map(s => s.active.line) : undefined;\n\n        this.trigger('editor');\n    }\n\n    private onTextEditorSelectionChanged(e: TextEditorSelectionChangeEvent) {\n        // If this isn't for our cached editor and its not a real editor -- kick out\n        if (this._editor !== e.textEditor && !isTextEditor(e.textEditor)) return;\n\n        const reason = this._editor === e.textEditor ? 'selection' : 'editor';\n\n        const lines = e.selections.map(s => s.active.line);\n        if (this._editor === e.textEditor && this.includesAll(lines)) return;\n\n        this.reset();\n        this._editor = e.textEditor;\n        this._lines = lines;\n        this.trigger(reason);\n    }\n\n    getState(line: number): T | undefined {\n        return this._state.get(line);\n    }\n\n    setState(line: number, state: T | undefined) {\n        this._state.set(line, state);\n    }\n\n    private _lines: number[] | undefined;\n    get lines(): number[] | undefined {\n        return this._lines;\n    }\n\n    includes(line: number): boolean {\n        return this._lines !== undefined && this._lines.includes(line);\n    }\n\n    includesAll(lines: number[] | undefined): boolean {\n        return LineTracker.includesAll(lines, this._lines);\n    }\n\n    refresh() {\n        this.trigger('editor');\n    }\n\n    reset() {\n        this._state.clear();\n    }\n\n    start(subscriber?: any, subscription?: Disposable): void {\n        if (this._disposable !== undefined) return;\n\n        this._disposable = Disposable.from(\n            window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveTextEditorChanged, 0), this),\n            window.onDidChangeTextEditorSelection(this.onTextEditorSelectionChanged, this)\n        );\n\n        setImmediate(() => this.onActiveTextEditorChanged(window.activeTextEditor));\n    }\n\n    stop(subscriber?: any) {\n        if (this._disposable === undefined) return;\n\n        if (this._linesChangedDebounced !== undefined) {\n            this._linesChangedDebounced.cancel();\n        }\n\n        this._disposable.dispose();\n        this._disposable = undefined;\n    }\n\n    protected fireLinesChanged(e: LinesChangeEvent) {\n        this._onDidChangeActiveLines.fire(e);\n    }\n\n    protected trigger(reason: 'editor' | 'selection') {\n        this.onLinesChanged({ editor: this._editor, lines: this._lines, reason: reason });\n    }\n\n    private _linesChangedDebounced: (((e: LinesChangeEvent) => void) & Deferrable) | undefined;\n\n    private onLinesChanged(e: LinesChangeEvent) {\n        if (e.lines === undefined) {\n            setImmediate(() => {\n                if (window.activeTextEditor !== e.editor) return;\n\n                if (this._linesChangedDebounced !== undefined) {\n                    this._linesChangedDebounced.cancel();\n                }\n\n                void this.fireLinesChanged(e);\n            });\n\n            return;\n        }\n\n        if (this._linesChangedDebounced === undefined) {\n            this._linesChangedDebounced = Functions.debounce(\n                (e: LinesChangeEvent) => {\n                    if (window.activeTextEditor !== e.editor) return;\n                    // Make sure we are still on the same lines\n                    if (!LineTracker.includesAll(e.lines, e.editor && e.editor.selections.map(s => s.active.line))) {\n                        return;\n                    }\n\n                    void this.fireLinesChanged(e);\n                },\n                250,\n                { track: true }\n            );\n        }\n\n        // If we have no pending moves, then fire an immediate pending event, and defer the real event\n        if (!this._linesChangedDebounced.pending!()) {\n            void this.fireLinesChanged({ ...e, pending: true });\n        }\n\n        this._linesChangedDebounced(e);\n    }\n\n    static includesAll(lines1: number[] | undefined, lines2: number[] | undefined): boolean {\n        if (lines1 === undefined && lines2 === undefined) return true;\n        if (lines1 === undefined || lines2 === undefined) return false;\n\n        return lines2.length === lines1.length && lines2.every((v, i) => v === lines1[i]);\n    }\n}\n","'use strict';\nimport { Disposable, TextEditor } from 'vscode';\nimport { Container } from '../container';\nimport { GitBlameCommit, GitLogCommit } from '../git/gitService';\nimport {\n    DocumentBlameStateChangeEvent,\n    DocumentDirtyIdleTriggerEvent,\n    DocumentDirtyStateChangeEvent,\n    GitDocumentState\n} from './gitDocumentTracker';\nimport { LinesChangeEvent, LineTracker } from './lineTracker';\n\nexport * from './lineTracker';\n\nexport class GitLineState {\n    constructor(public readonly commit: GitBlameCommit | undefined, public logCommit?: GitLogCommit) {}\n}\n\nexport class GitLineTracker extends LineTracker<GitLineState> {\n    private _count = 0;\n    private _subscriptions: Map<any, Disposable> = new Map();\n\n    protected async fireLinesChanged(e: LinesChangeEvent) {\n        this.reset();\n\n        let updated = false;\n        if (!this._suspended && !e.pending && e.lines !== undefined && e.editor !== undefined) {\n            updated = await this.updateState(e.lines, e.editor);\n        }\n\n        return super.fireLinesChanged(updated ? e : { ...e, lines: undefined });\n    }\n\n    private onBlameStateChanged(e: DocumentBlameStateChangeEvent<GitDocumentState>) {\n        this.trigger('editor');\n    }\n\n    private onDirtyIdleTriggered(e: DocumentDirtyIdleTriggerEvent<GitDocumentState>) {\n        const maxLines = Container.config.advanced.blame.sizeThresholdAfterEdit;\n        if (maxLines > 0 && e.document.lineCount > maxLines) return;\n\n        this.resume();\n    }\n\n    private onDirtyStateChanged(e: DocumentDirtyStateChangeEvent<GitDocumentState>) {\n        if (e.dirty) {\n            this.suspend();\n        }\n        else {\n            this.resume({ force: true });\n        }\n    }\n\n    private _suspended = false;\n\n    private resume(options: { force?: boolean } = {}) {\n        if (!options.force && !this._suspended) return;\n\n        this._suspended = false;\n        this.trigger('editor');\n    }\n\n    private suspend(options: { force?: boolean } = {}) {\n        if (!options.force && this._suspended) return;\n\n        this._suspended = true;\n        this.trigger('editor');\n    }\n\n    isSubscribed(subscriber: any) {\n        return this._subscriptions.has(subscriber);\n    }\n\n    start(subscriber: any, subscription: Disposable): Disposable {\n        const disposable = {\n            dispose: () => this.stop(subscriber)\n        };\n\n        if (this.isSubscribed(subscriber)) return disposable;\n\n        this._subscriptions.set(subscriber, subscription);\n\n        this._count++;\n        if (this._count === 1) {\n            super.start();\n\n            this._disposable = Disposable.from(\n                this._disposable!,\n                Container.tracker.onDidChangeBlameState(this.onBlameStateChanged, this),\n                Container.tracker.onDidChangeDirtyState(this.onDirtyStateChanged, this),\n                Container.tracker.onDidTriggerDirtyIdle(this.onDirtyIdleTriggered, this)\n            );\n        }\n\n        return disposable;\n    }\n\n    stop(subscriber: any) {\n        const subscription = this._subscriptions.get(subscriber);\n        if (subscription === undefined) return;\n\n        this._subscriptions.delete(subscriber);\n        subscription.dispose();\n\n        if (this._disposable === undefined) {\n            this._count = 0;\n            return;\n        }\n\n        this._count--;\n        if (this._count === 0) {\n            super.stop();\n        }\n    }\n\n    private async updateState(lines: number[], editor: TextEditor): Promise<boolean> {\n        const trackedDocument = await Container.tracker.getOrAdd(editor.document);\n        if (!trackedDocument.isBlameable || !this.includesAll(lines)) return false;\n\n        if (lines.length === 1) {\n            const blameLine = editor.document.isDirty\n                ? await Container.git.getBlameForLineContents(trackedDocument.uri, lines[0], editor.document.getText())\n                : await Container.git.getBlameForLine(trackedDocument.uri, lines[0]);\n            if (blameLine === undefined) return false;\n\n            this.setState(blameLine.line.line, new GitLineState(blameLine.commit));\n        }\n        else {\n            const blame = editor.document.isDirty\n                ? await Container.git.getBlameForFileContents(trackedDocument.uri, editor.document.getText())\n                : await Container.git.getBlameForFile(trackedDocument.uri);\n            if (blame === undefined) return false;\n\n            for (const line of lines) {\n                const commitLine = blame.lines[line];\n                this.setState(line, new GitLineState(blame.commits.get(commitLine.sha)!));\n            }\n        }\n\n        if (!trackedDocument.isBlameable || !this.includesAll(lines)) return false;\n\n        if (editor.document.isDirty) {\n            trackedDocument.setForceDirtyStateChangeOnNextDocumentChange();\n        }\n\n        return true;\n    }\n}\n","'use strict';\nimport { Command, Disposable, Event, TreeItem, TreeItemCollapsibleState, TreeViewVisibilityChangeEvent } from 'vscode';\nimport { GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Functions, gate, logName } from '../../system';\nimport { TreeViewNodeStateChangeEvent, View } from '../viewBase';\n\nexport enum ResourceType {\n    ActiveFileHistory = 'gitlens:history:active:file',\n    ActiveLineHistory = 'gitlens:history:active:line',\n    Branch = 'gitlens:branch',\n    Branches = 'gitlens:branches',\n    BranchStatusAheadOfUpstream = 'gitlens:branch-status:upstream:ahead',\n    BranchStatusBehindUpstream = 'gitlens:branch-status:upstream:behind',\n    Commit = 'gitlens:commit',\n    CommitFile = 'gitlens:file:commit',\n    Commits = 'gitlens:commits',\n    Compare = 'gitlens:compare',\n    ComparePicker = 'gitlens:compare:picker',\n    ComparePickerWithRef = 'gitlens:compare:picker:ref',\n    CompareResults = 'gitlens:compare:results',\n    Contributor = 'gitlens:contributor',\n    Contributors = 'gitlens:contributors',\n    File = 'gitlens:file',\n    FileHistory = 'gitlens:history:file',\n    Folder = 'gitlens:folder',\n    LineHistory = 'gitlens:history:line',\n    Message = 'gitlens:message',\n    Pager = 'gitlens:pager',\n    Remote = 'gitlens:remote',\n    Remotes = 'gitlens:remotes',\n    Repositories = 'gitlens:repositories',\n    Repository = 'gitlens:repository',\n    ResultsCommits = 'gitlens:results:commits',\n    ResultsFile = 'gitlens:file:results',\n    ResultsFiles = 'gitlens:results:files',\n    Search = 'gitlens:search',\n    SearchResults = 'gitlens:search:results',\n    Stash = 'gitlens:stash',\n    StashFile = 'gitlens:file:stash',\n    Stashes = 'gitlens:stashes',\n    StatusFileCommits = 'gitlens:status:file:commits',\n    StatusFiles = 'gitlens:status:files',\n    StatusAheadOfUpstream = 'gitlens:status:upstream:ahead',\n    StatusBehindUpstream = 'gitlens:status:upstream:behind',\n    Tag = 'gitlens:tag',\n    Tags = 'gitlens:tags'\n}\n\nexport const unknownGitUri = new GitUri();\n\nexport interface ViewNode {\n    readonly id?: string;\n}\n\nconst counter = 0;\nfunction getViewNodeInstanceId() {\n    // if (counter === Number.MAX_SAFE_INTEGER) {\n    //     counter = 0;\n    // }\n    // counter++;\n    return counter;\n}\n\n@logName<ViewNode>((c, name) => `${name}(${c.id || c._instanceId})`)\nexport abstract class ViewNode<TView extends View = View> {\n    protected readonly _instanceId: number;\n\n    constructor(uri: GitUri, public readonly view: TView, protected readonly parent?: ViewNode) {\n        this._instanceId = getViewNodeInstanceId();\n        this._uri = uri;\n    }\n\n    toString() {\n        return `${Logger.toLoggableName(this)}${this.id != null ? `(${this.id})` : ''}`;\n    }\n\n    protected _uri: GitUri;\n    get uri() {\n        return this._uri;\n    }\n\n    abstract getChildren(): ViewNode[] | Promise<ViewNode[]>;\n\n    getParent(): ViewNode | undefined {\n        return this.parent;\n    }\n\n    abstract getTreeItem(): TreeItem | Promise<TreeItem>;\n\n    getCommand(): Command | undefined {\n        return undefined;\n    }\n\n    @gate()\n    @debug()\n    refresh(reset: boolean = false): void | boolean | Promise<void> | Promise<boolean> {\n        // virtual\n    }\n\n    @gate()\n    @debug()\n    triggerChange(): Promise<void> {\n        return this.view.refreshNode(this);\n    }\n}\n\nexport abstract class ViewRefNode<TView extends View = View> extends ViewNode<TView> {\n    abstract get ref(): string;\n\n    get repoPath(): string {\n        return this.uri.repoPath!;\n    }\n}\n\nexport interface PageableViewNode {\n    readonly supportsPaging: boolean;\n    maxCount: number | undefined;\n}\n\nexport function isPageable(node: ViewNode): node is ViewNode & PageableViewNode {\n    return Functions.is<ViewNode & PageableViewNode>(node, 'supportsPaging', true);\n}\n\ninterface AutoRefreshableView {\n    autoRefresh: boolean;\n    onDidChangeAutoRefresh: Event<void>;\n}\nexport function supportsAutoRefresh(view: View): view is View & AutoRefreshableView {\n    return Functions.is<View & AutoRefreshableView>(view, 'onDidChangeAutoRefresh');\n}\n\nexport abstract class SubscribeableViewNode<TView extends View = View> extends ViewNode<TView> {\n    protected _disposable: Disposable;\n    protected _subscription: Promise<Disposable | undefined> | undefined;\n\n    constructor(uri: GitUri, view: TView, parent?: ViewNode) {\n        super(uri, view, parent);\n\n        const disposables = [\n            this.view.onDidChangeVisibility(this.onVisibilityChanged, this),\n            this.view.onDidChangeNodeState(this.onNodeStateChanged, this)\n        ];\n\n        if (supportsAutoRefresh(this.view)) {\n            disposables.push(this.view.onDidChangeAutoRefresh(this.onAutoRefreshChanged, this));\n        }\n\n        this._disposable = Disposable.from(...disposables);\n    }\n\n    @debug()\n    dispose() {\n        void this.unsubscribe();\n\n        if (this._disposable !== undefined) {\n            this._disposable.dispose();\n        }\n    }\n\n    private _canSubscribe: boolean = true;\n    protected get canSubscribe(): boolean {\n        return this._canSubscribe;\n    }\n    protected set canSubscribe(value: boolean) {\n        if (this._canSubscribe === value) return;\n\n        this._canSubscribe = value;\n\n        void this.ensureSubscription();\n        if (value) {\n            void this.triggerChange();\n        }\n    }\n\n    protected abstract subscribe(): Disposable | undefined | Promise<Disposable | undefined>;\n\n    @debug()\n    protected async unsubscribe(): Promise<void> {\n        if (this._subscription !== undefined) {\n            const subscriptionPromise = this._subscription;\n            this._subscription = undefined;\n\n            const subscription = await subscriptionPromise;\n            if (subscription !== undefined) {\n                subscription.dispose();\n            }\n        }\n    }\n\n    @debug()\n    protected onAutoRefreshChanged() {\n        this.onVisibilityChanged({ visible: this.view.visible });\n    }\n\n    protected onParentStateChanged(state: TreeItemCollapsibleState) {\n        // virtual\n    }\n    protected onStateChanged(state: TreeItemCollapsibleState) {\n        // virtual\n    }\n\n    protected _state: TreeItemCollapsibleState | undefined;\n    protected onNodeStateChanged(e: TreeViewNodeStateChangeEvent<ViewNode>) {\n        if (e.element === this) {\n            this._state = e.state;\n            this.onStateChanged(e.state);\n        }\n        else if (e.element === this.parent) {\n            this.onParentStateChanged(e.state);\n        }\n    }\n\n    @debug()\n    protected onVisibilityChanged(e: TreeViewVisibilityChangeEvent) {\n        void this.ensureSubscription();\n\n        if (e.visible) {\n            void this.triggerChange();\n        }\n    }\n\n    @debug()\n    async ensureSubscription() {\n        // We only need to subscribe if we are visible and if auto-refresh enabled (when supported)\n        if (!this.canSubscribe || !this.view.visible || (supportsAutoRefresh(this.view) && !this.view.autoRefresh)) {\n            await this.unsubscribe();\n\n            return;\n        }\n\n        // If we already have a subscription, just kick out\n        if (this._subscription !== undefined) return;\n\n        this._subscription = Promise.resolve(this.subscribe());\n        await this._subscription;\n    }\n}\n\nexport function nodeSupportsConditionalDismissal(node: ViewNode): node is ViewNode & { canDismiss(): boolean } {\n    return typeof (node as ViewNode & { canDismiss(): boolean }).canDismiss === 'function';\n}\n\nexport function viewSupportsNodeDismissal(view: View): view is View & { dismissNode(node: ViewNode): void } {\n    return typeof (view as View & { dismissNode(node: ViewNode): void }).dismissNode === 'function';\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, Selection, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithPreviousCommandArgs } from '../../commands';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { CommitFormatter, GitFile, GitLogCommit, GitUri, StatusFileFormatter } from '../../git/gitService';\nimport { View } from '../viewBase';\nimport { ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport enum CommitFileNodeDisplayAs {\n    CommitLabel = 1 << 0,\n    FileLabel = 1 << 1,\n\n    CommitIcon = 1 << 2,\n    StatusIcon = 1 << 3,\n    Gravatar = 1 << 4,\n\n    File = FileLabel | StatusIcon\n}\n\nexport class CommitFileNode extends ViewRefNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly file: GitFile,\n        public commit: GitLogCommit,\n        private readonly _displayAs: CommitFileNodeDisplayAs,\n        private readonly _selection?: Selection\n    ) {\n        super(GitUri.fromFile(file, commit.repoPath, commit.sha), view, parent);\n    }\n\n    get priority(): number {\n        return 0;\n    }\n\n    get ref(): string {\n        return this.commit.sha;\n    }\n\n    getChildren(): ViewNode[] {\n        return [];\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        if (!this.commit.isFile) {\n            // See if we can get the commit directly from the multi-file commit\n            const commit = this.commit.toFileCommit(this.file);\n            if (commit === undefined) {\n                const log = await Container.git.getLogForFile(this.repoPath, this.file.fileName, {\n                    maxCount: 2,\n                    ref: this.commit.sha\n                });\n                if (log !== undefined) {\n                    this.commit = log.commits.get(this.commit.sha) || this.commit;\n                }\n            }\n            else {\n                this.commit = commit;\n            }\n        }\n\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.None);\n        item.contextValue = this.resourceType;\n        item.description = this.description;\n        item.tooltip = this.tooltip;\n\n        if ((this._displayAs & CommitFileNodeDisplayAs.CommitIcon) === CommitFileNodeDisplayAs.CommitIcon) {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath(paths.join('images', 'dark', 'icon-commit.svg')),\n                light: Container.context.asAbsolutePath(paths.join('images', 'light', 'icon-commit.svg'))\n            };\n        }\n        else if ((this._displayAs & CommitFileNodeDisplayAs.StatusIcon) === CommitFileNodeDisplayAs.StatusIcon) {\n            const icon = GitFile.getStatusIcon(this.file.status);\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath(paths.join('images', 'dark', icon)),\n                light: Container.context.asAbsolutePath(paths.join('images', 'light', icon))\n            };\n        }\n        else if ((this._displayAs & CommitFileNodeDisplayAs.Gravatar) === CommitFileNodeDisplayAs.Gravatar) {\n            item.iconPath = this.commit.getGravatarUri(Container.config.defaultGravatarsStyle);\n        }\n\n        item.command = this.getCommand();\n\n        // Only cache the label/description/tooltip for a single refresh\n        this._label = undefined;\n        this._description = undefined;\n        this._tooltip = undefined;\n\n        return item;\n    }\n\n    private _description: string | undefined;\n    get description() {\n        if (this._description === undefined) {\n            this._description =\n                this._displayAs & CommitFileNodeDisplayAs.CommitLabel\n                    ? CommitFormatter.fromTemplate(this.getCommitDescriptionTemplate(), this.commit, {\n                          truncateMessageAtNewLine: true,\n                          dateFormat: Container.config.defaultDateFormat\n                      })\n                    : StatusFileFormatter.fromTemplate(this.getCommitFileDescriptionTemplate(), this.file, {\n                          relativePath: this.relativePath\n                      });\n        }\n        return this._description;\n    }\n\n    private _folderName: string | undefined;\n    get folderName() {\n        if (this._folderName === undefined) {\n            this._folderName = paths.dirname(this.uri.getRelativePath());\n        }\n        return this._folderName;\n    }\n\n    private _label: string | undefined;\n    get label() {\n        if (this._label === undefined) {\n            this._label =\n                this._displayAs & CommitFileNodeDisplayAs.CommitLabel\n                    ? CommitFormatter.fromTemplate(this.getCommitTemplate(), this.commit, {\n                          truncateMessageAtNewLine: true,\n                          dateFormat: Container.config.defaultDateFormat\n                      })\n                    : StatusFileFormatter.fromTemplate(this.getCommitFileTemplate(), this.file, {\n                          relativePath: this.relativePath\n                      });\n        }\n        return this._label;\n    }\n\n    private _relativePath: string | undefined;\n    get relativePath(): string | undefined {\n        return this._relativePath;\n    }\n    set relativePath(value: string | undefined) {\n        this._relativePath = value;\n        this._label = undefined;\n        this._tooltip = undefined;\n    }\n\n    protected get resourceType(): string {\n        if (!this.commit.isUncommitted) return ResourceType.CommitFile;\n\n        return this.commit.isStagedUncommitted ? `${ResourceType.File}+staged` : `${ResourceType.File}+unstaged`;\n    }\n\n    private _tooltip: string | undefined;\n    get tooltip() {\n        if (this._tooltip === undefined) {\n            if (this._displayAs & CommitFileNodeDisplayAs.CommitLabel) {\n                // eslint-disable-next-line no-template-curly-in-string\n                const status = StatusFileFormatter.fromTemplate('${status}', this.file);\n                this._tooltip = CommitFormatter.fromTemplate(\n                    this.commit.isUncommitted\n                        ? `\\${author} ${GlyphChars.Dash} \\${id}\\n${status}\\n\\${ago} (\\${date})`\n                        : `\\${author} ${GlyphChars.Dash} \\${id}\\n${status}\\n\\${ago} (\\${date})\\n\\n\\${message}`,\n                    this.commit,\n                    {\n                        dateFormat: Container.config.defaultDateFormat\n                    }\n                );\n            }\n            else {\n                // eslint-disable-next-line no-template-curly-in-string\n                this._tooltip = StatusFileFormatter.fromTemplate('${file}\\n${directory}/\\n\\n${status}', this.file);\n            }\n        }\n        return this._tooltip;\n    }\n\n    protected getCommitTemplate() {\n        return this.view.config.commitFormat;\n    }\n\n    protected getCommitDescriptionTemplate() {\n        return this.view.config.commitDescriptionFormat;\n    }\n\n    protected getCommitFileTemplate() {\n        return this.view.config.commitFileFormat;\n    }\n\n    protected getCommitFileDescriptionTemplate() {\n        return this.view.config.commitFileDescriptionFormat;\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: this._selection !== undefined ? this._selection.active.line : 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Compare File with Previous Revision',\n            command: Commands.DiffWithPrevious,\n            arguments: [GitUri.fromFile(this.file, this.commit.repoPath), commandArgs]\n        };\n    }\n}\n","'use strict';\nimport { ThemeIcon, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewFilesLayout, ViewsFilesConfig } from '../../configuration';\nimport { GitUri } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport interface FileNode extends ViewNode {\n    folderName: string;\n    label?: string;\n    priority: number;\n    relativePath?: string;\n    root?: Arrays.HierarchicalItem<FileNode>;\n}\n\nexport class FolderNode extends ViewNode<ViewWithFiles> {\n    readonly priority: number = 1;\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        public readonly folderName: string,\n        public readonly root: Arrays.HierarchicalItem<FileNode>,\n        private readonly containsWorkingFiles?: boolean,\n        public readonly relativePath?: string\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    getChildren(): (FolderNode | FileNode)[] {\n        if (this.root.descendants === undefined || this.root.children === undefined) return [];\n\n        let children: (FolderNode | FileNode)[];\n\n        const nesting = FolderNode.getFileNesting(\n            this.view.config.files,\n            this.root.descendants,\n            this.relativePath === undefined\n        );\n        if (nesting !== ViewFilesLayout.List) {\n            children = [];\n            for (const folder of this.root.children.values()) {\n                if (folder.value === undefined) {\n                    children.push(\n                        new FolderNode(\n                            this.view,\n                            this,\n                            this.repoPath,\n                            folder.name,\n                            folder,\n                            this.containsWorkingFiles,\n                            folder.relativePath\n                        )\n                    );\n                    continue;\n                }\n\n                folder.value.relativePath = this.root.relativePath;\n                children.push(folder.value);\n            }\n        }\n        else {\n            this.root.descendants.forEach(n => (n.relativePath = this.root.relativePath));\n            children = this.root.descendants;\n        }\n\n        children.sort((a, b) => {\n            return (\n                (a instanceof FolderNode ? -1 : 1) - (b instanceof FolderNode ? -1 : 1) ||\n                a.priority - b.priority ||\n                a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        });\n\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        // TODO: Change this to expanded once https://github.com/Microsoft/vscode/issues/30918 is fixed\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.Collapsed);\n        item.contextValue = ResourceType.Folder;\n        if (this.containsWorkingFiles) {\n            item.contextValue += '+working';\n        }\n        item.iconPath = ThemeIcon.Folder;\n        item.tooltip = this.label;\n        return item;\n    }\n\n    get label(): string {\n        return this.folderName;\n    }\n\n    static getFileNesting<T extends FileNode>(\n        config: ViewsFilesConfig,\n        children: T[],\n        isRoot: boolean\n    ): ViewFilesLayout {\n        const nesting = config.layout || ViewFilesLayout.Auto;\n        if (nesting === ViewFilesLayout.Auto) {\n            if (isRoot || config.compact) {\n                const nestingThreshold = config.threshold || 5;\n                if (children.length <= nestingThreshold) return ViewFilesLayout.List;\n            }\n            return ViewFilesLayout.Tree;\n        }\n        return nesting;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithPreviousCommandArgs } from '../../commands';\nimport { ViewFilesLayout } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { CommitFormatter, GitBranch, GitLogCommit } from '../../git/gitService';\nimport { Arrays, Iterables, Strings } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitFileNode, CommitFileNodeDisplayAs } from './commitFileNode';\nimport { FileNode, FolderNode } from './folderNode';\nimport { ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class CommitNode extends ViewRefNode<ViewWithFiles> {\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly commit: GitLogCommit,\n        public readonly branch?: GitBranch,\n        private readonly getBranchAndTagTips?: (sha: string) => string | undefined\n    ) {\n        super(commit.toGitUri(), view, parent);\n    }\n\n    get ref(): string {\n        return this.commit.sha;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const commit = this.commit;\n        let children: FileNode[] = [\n            ...Iterables.map(\n                commit.files,\n                s => new CommitFileNode(this.view, this, s, commit.toFileCommit(s), CommitFileNodeDisplayAs.File)\n            )\n        ];\n\n        if (this.view.config.files.layout !== ViewFilesLayout.List) {\n            const hierarchy = Arrays.makeHierarchical(\n                children,\n                n => n.uri.getRelativePath().split('/'),\n                (...parts: string[]) => Strings.normalizePath(paths.join(...parts)),\n                this.view.config.files.compact\n            );\n\n            const root = new FolderNode(this.view, this, this.repoPath, '', hierarchy);\n            children = (await root.getChildren()) as FileNode[];\n        }\n        else {\n            children.sort((a, b) =>\n                a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        let label = CommitFormatter.fromTemplate(this.view.config.commitFormat, this.commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: Container.config.defaultDateFormat\n        });\n\n        const branchAndTagTips = this.getBranchAndTagTips && this.getBranchAndTagTips(this.commit.sha);\n        if (branchAndTagTips !== undefined) {\n            label = `${GlyphChars.AngleBracketLeftHeavy}${GlyphChars.SpaceThin}${branchAndTagTips}${\n                GlyphChars.SpaceThin\n            }${GlyphChars.AngleBracketRightHeavy}${GlyphChars.ArrowHeadRight}${GlyphChars.Space} ${label}`;\n        }\n\n        const item = new TreeItem(label, TreeItemCollapsibleState.Collapsed);\n        item.contextValue = ResourceType.Commit;\n        if (this.branch === undefined || this.branch.current) {\n            item.contextValue += '+current';\n        }\n        item.description = CommitFormatter.fromTemplate(this.view.config.commitDescriptionFormat, this.commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: Container.config.defaultDateFormat\n        });\n\n        if (this.view.config.avatars) {\n            item.iconPath = this.commit.getGravatarUri(Container.config.defaultGravatarsStyle);\n        }\n        else {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath('images/dark/icon-commit.svg'),\n                light: Container.context.asAbsolutePath('images/light/icon-commit.svg')\n            };\n        }\n\n        item.tooltip = CommitFormatter.fromTemplate(\n            this.commit.isUncommitted\n                ? `\\${author} ${GlyphChars.Dash} \\${id}\\n\\${ago} (\\${date})`\n                : `\\${author} \\${(email) }${GlyphChars.Dash} \\${id}${\n                      branchAndTagTips !== undefined ? ` (${branchAndTagTips})` : ''\n                  }\\n\\${ago} (\\${date})\\n\\n\\${message}`,\n            this.commit,\n            {\n                dateFormat: Container.config.defaultDateFormat\n            }\n        );\n\n        if (!this.commit.isUncommitted) {\n            item.tooltip += this.commit.getFormattedDiffStatus({\n                expand: true,\n                prefix: '\\n\\n',\n                separator: '\\n'\n            });\n        }\n\n        return item;\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Compare File with Previous Revision',\n            command: Commands.DiffWithPrevious,\n            arguments: [this.uri, commandArgs]\n        };\n    }\n}\n","import { Command, ThemeIcon, TreeItem, TreeItemCollapsibleState, Uri } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { View } from '../viewBase';\nimport { RefreshNodeCommandArgs } from '../viewCommands';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\nexport class MessageNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        private readonly _message: string,\n        private readonly _description?: string,\n        private readonly _tooltip?: string,\n        private readonly _iconPath?:\n            | string\n            | Uri\n            | {\n                  light: string | Uri;\n                  dark: string | Uri;\n              }\n            | ThemeIcon\n    ) {\n        super(unknownGitUri, view, parent);\n    }\n\n    getChildren(): ViewNode[] | Promise<ViewNode[]> {\n        return [];\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = new TreeItem(this._message, TreeItemCollapsibleState.None);\n        item.contextValue = ResourceType.Message;\n        item.description = this._description;\n        item.tooltip = this._tooltip;\n        item.iconPath = this._iconPath;\n        return item;\n    }\n}\n\nexport class CommandMessageNode extends MessageNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        private readonly _command: Command,\n        message: string,\n        description?: string,\n        tooltip?: string,\n        iconPath?:\n            | string\n            | Uri\n            | {\n                  light: string | Uri;\n                  dark: string | Uri;\n              }\n            | ThemeIcon\n    ) {\n        super(view, parent, message, description, tooltip, iconPath);\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = super.getTreeItem();\n        if (item instanceof TreeItem) {\n            item.command = this._command;\n            return item;\n        }\n\n        return item.then(i => {\n            i.command = this._command;\n            return i;\n        });\n    }\n}\n\nexport class UpdateableMessageNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly id: string,\n        private _message: string,\n        private _tooltip?: string,\n        private _iconPath?:\n            | string\n            | Uri\n            | {\n                  light: string | Uri;\n                  dark: string | Uri;\n              }\n            | ThemeIcon\n    ) {\n        super(unknownGitUri, view, parent);\n    }\n\n    getChildren(): ViewNode[] | Promise<ViewNode[]> {\n        return [];\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = new TreeItem(this._message, TreeItemCollapsibleState.None);\n        item.id = this.id;\n        item.contextValue = ResourceType.Message;\n        item.tooltip = this._tooltip;\n        item.iconPath = this._iconPath;\n        return item;\n    }\n\n    update(\n        changes: {\n            message?: string;\n            tooltip?: string | null;\n            iconPath?:\n                | string\n                | null\n                | Uri\n                | {\n                      light: string | Uri;\n                      dark: string | Uri;\n                  }\n                | ThemeIcon;\n        },\n        view: View\n    ) {\n        if (changes.message !== undefined) {\n            this._message = changes.message;\n        }\n\n        if (changes.tooltip !== undefined) {\n            this._tooltip = changes.tooltip === null ? undefined : changes.tooltip;\n        }\n\n        if (changes.iconPath !== undefined) {\n            this._iconPath = changes.iconPath === null ? undefined : changes.iconPath;\n        }\n\n        view.triggerNodeChange(this);\n    }\n}\n\nexport abstract class PagerNode extends ViewNode {\n    protected _args: RefreshNodeCommandArgs = {};\n\n    constructor(\n        view: View,\n        parent: ViewNode,\n        protected readonly message: string,\n        previousNode?: ViewNode,\n        maxCount: number = Container.config.views.pageItemLimit\n    ) {\n        super(unknownGitUri, view, parent);\n\n        this._args.maxCount = maxCount;\n        this._args.previousNode = previousNode;\n    }\n\n    getChildren(): ViewNode[] | Promise<ViewNode[]> {\n        return [];\n    }\n\n    getTreeItem(): TreeItem | Promise<TreeItem> {\n        const item = new TreeItem(this.message, TreeItemCollapsibleState.None);\n        item.contextValue = ResourceType.Pager;\n        item.command = this.getCommand();\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-unfold.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-unfold.svg')\n        };\n        return item;\n    }\n\n    getCommand(): Command | undefined {\n        return {\n            title: 'Refresh',\n            command: 'gitlens.views.refreshNode',\n            arguments: [this.parent, false, this._args]\n        };\n    }\n}\n\nexport class ShowMoreNode extends PagerNode {\n    constructor(view: View, parent: ViewNode, itemType: string, previousNode: ViewNode, maxCount?: number) {\n        super(\n            view,\n            parent,\n            maxCount === 0\n                ? `Show All ${itemType} ${GlyphChars.Space}${GlyphChars.Dash}${GlyphChars.Space} this may take a while`\n                : `Show More ${itemType}`,\n            previousNode,\n            maxCount\n        );\n    }\n}\n","'use strict';\nimport { Container } from '../../container';\nimport { GitLogCommit } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { MessageNode } from './common';\nimport { ViewNode } from './viewNode';\n\nexport async function getBranchesAndTagTipsFn(repoPath: string | undefined, currentName?: string) {\n    const [branches, tags] = await Promise.all([\n        Container.git.getBranches(repoPath),\n        Container.git.getTags(repoPath, { includeRefs: true })\n    ]);\n\n    const branchesAndTagsBySha = Arrays.groupByFilterMap(\n        (branches as { name: string; sha: string }[]).concat(tags as { name: string; sha: string }[]),\n        bt => bt.sha!,\n        bt => (bt.name === currentName ? undefined : bt.name)\n    );\n\n    return (sha: string) => {\n        const branchesAndTags = branchesAndTagsBySha.get(sha);\n        if (branchesAndTags === undefined || branchesAndTags.length === 0) return undefined;\n        return branchesAndTags.join(', ');\n    };\n}\n\nconst markers: [number, string][] = [\n    [0, 'Less than a week ago'],\n    [7, 'Over a week ago'],\n    [30, 'Over a month ago'],\n    [90, 'Over 3 months ago']\n];\n\n// eslint-disable-next-line consistent-return\nexport function* insertDateMarkers<T extends ViewNode & { commit: GitLogCommit }>(\n    iterable: Iterable<T>,\n    parent: ViewNode,\n    skip?: number\n): Iterable<ViewNode> {\n    if (!parent.view.config.showRelativeDateMarkers) {\n        return yield* iterable;\n    }\n\n    let index = skip || 0;\n    let time = undefined;\n    const now = Date.now();\n\n    let first = true;\n\n    for (const node of iterable) {\n        if (index < markers.length) {\n            let [daysAgo, marker] = markers[index];\n            if (time === undefined) {\n                const date = new Date(now);\n                time = date.setDate(date.getDate() - daysAgo);\n            }\n\n            const date = new Date(node.commit.committedDate.setUTCHours(0, 0, 0, 0)).getTime();\n            if (date <= time) {\n                while (index < markers.length - 1) {\n                    [daysAgo] = markers[index + 1];\n                    const nextDate = new Date(now);\n                    const nextTime = nextDate.setDate(nextDate.getDate() - daysAgo);\n\n                    if (date > nextTime) break;\n\n                    index++;\n                    time = undefined;\n                    [, marker] = markers[index];\n                }\n\n                // Don't show the last marker as the first entry -- since it could be wildly far off\n                if (!first || index < markers.length - 1) {\n                    yield new MessageNode(parent.view, parent, marker);\n                }\n\n                index++;\n                time = undefined;\n            }\n        }\n\n        first = false;\n        yield node;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitTrackingState, GitUri } from '../../git/gitService';\nimport { Iterables, Strings } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitNode } from './commitNode';\nimport { ShowMoreNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\n\nexport interface BranchTrackingStatus {\n    ref: string;\n    repoPath: string;\n    state: GitTrackingState;\n    upstream?: string;\n}\n\nexport class BranchTrackingStatusNode extends ViewNode<ViewWithFiles> implements PageableViewNode {\n    readonly supportsPaging: boolean = true;\n    maxCount: number | undefined;\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly status: BranchTrackingStatus,\n        public readonly direction: 'ahead' | 'behind',\n        // Specifies that the node is shown as a root under the repository node\n        private readonly _root: boolean = false\n    ) {\n        super(GitUri.fromRepoPath(status.repoPath), view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.status.repoPath}):${this._root ? 'root:' : ''}branch(${\n            this.status.ref\n        }):status:upstream:(${this.status.upstream}):${this.direction}`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const ahead = this.direction === 'ahead';\n        const range = ahead\n            ? `${this.status.upstream}..${this.status.ref}`\n            : `${this.status.ref}..${this.status.upstream}`;\n\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount || this.view.config.defaultItemLimit,\n            ref: range\n        });\n        if (log === undefined) return [];\n\n        let children;\n        if (ahead) {\n            // Since the last commit when we are looking 'ahead' can have no previous (because of the range given) -- look it up\n            const commits = [...log.commits.values()];\n            const commit = commits[commits.length - 1];\n            if (commit.previousSha === undefined) {\n                const previousLog = await Container.git.getLog(this.uri.repoPath!, { maxCount: 2, ref: commit.sha });\n                if (previousLog !== undefined) {\n                    commits[commits.length - 1] = Iterables.first(previousLog.commits.values());\n                }\n            }\n\n            children = [...insertDateMarkers(Iterables.map(commits, c => new CommitNode(this.view, this, c)), this, 1)];\n        }\n        else {\n            children = [\n                ...insertDateMarkers(\n                    Iterables.map(log.commits.values(), c => new CommitNode(this.view, this, c)),\n                    this,\n                    1\n                )\n            ];\n        }\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', children[children.length - 1]));\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const ahead = this.direction === 'ahead';\n        const label = ahead\n            ? `${Strings.pluralize('commit', this.status.state.ahead)} ahead`\n            : `${Strings.pluralize('commit', this.status.state.behind)} behind`;\n\n        const item = new TreeItem(label, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        if (this._root) {\n            item.contextValue = ahead ? ResourceType.StatusAheadOfUpstream : ResourceType.StatusBehindUpstream;\n        }\n        else {\n            item.contextValue = ahead\n                ? ResourceType.BranchStatusAheadOfUpstream\n                : ResourceType.BranchStatusBehindUpstream;\n        }\n        item.tooltip = `${label}${ahead ? ' of ' : ''}${this.status.upstream}`;\n\n        const iconSuffix = ahead ? 'upload' : 'download';\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(`images/dark/icon-${iconSuffix}.svg`),\n            light: Container.context.asAbsolutePath(`images/light/icon-${iconSuffix}.svg`)\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitBranch, GitUri } from '../../git/gitService';\nimport { debug, gate, Iterables, log } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchTrackingStatusNode } from './branchTrackingStatusNode';\nimport { CommitNode } from './commitNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { getBranchesAndTagTipsFn, insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class BranchNode extends ViewRefNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging: boolean = true;\n    maxCount: number | undefined;\n\n    private _children: ViewNode[] | undefined;\n\n    constructor(\n        uri: GitUri,\n        view: RepositoriesView,\n        parent: ViewNode,\n        public readonly branch: GitBranch,\n        // Specifies that the node is shown as a root under the repository node\n        private readonly _root: boolean = false\n    ) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.branch.repoPath})${this._root ? ':root:' : ''}:branch(${\n            this.branch.name\n        })${this.branch.current ? '+current:' : ''}${this.branch.remote ? '+remote' : ''}${\n            this.branch.starred ? '+starred:' : ''\n        }`;\n    }\n\n    get current(): boolean {\n        return this.branch.current;\n    }\n\n    get label(): string {\n        const branchName = this.branch.getName();\n        if (this.view.config.branches.layout === ViewBranchesLayout.List) return branchName;\n\n        return (this._root && this.current) || this.branch.detached || this.branch.starred\n            ? branchName\n            : this.branch.getBasename();\n    }\n\n    get ref(): string {\n        return this.branch.ref;\n    }\n\n    get treeHierarchy(): string[] {\n        return this.branch.detached || this.branch.starred ? [this.branch.name] : this.branch.getName().split('/');\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const children = [];\n            if (!this._root && this.branch.tracking) {\n                const status = {\n                    ref: this.branch.ref,\n                    repoPath: this.branch.repoPath,\n                    state: this.branch.state,\n                    upstream: this.branch.tracking\n                };\n\n                if (this.branch.state.behind) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, status, 'behind'));\n                }\n\n                if (this.branch.state.ahead) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, status, 'ahead'));\n                }\n            }\n\n            const log = await Container.git.getLog(this.uri.repoPath!, {\n                maxCount: this.maxCount || this.view.config.defaultItemLimit,\n                ref: this.ref\n            });\n            if (log === undefined) return [new MessageNode(this.view, this, 'No commits could be found.')];\n\n            const getBranchAndTagTips = await getBranchesAndTagTipsFn(this.uri.repoPath, this.branch.name);\n            children.push(\n                ...insertDateMarkers(\n                    Iterables.map(\n                        log.commits.values(),\n                        c => new CommitNode(this.view, this, c, this.branch, getBranchAndTagTips)\n                    ),\n                    this\n                )\n            );\n\n            if (log.truncated) {\n                children.push(new ShowMoreNode(this.view, this, 'Commits', children[children.length - 1]));\n            }\n\n            this._children = children;\n        }\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const name = this.label;\n        let tooltip = `${this.branch.getName()}${this.current ? ' (current)' : ''}`;\n        let iconSuffix = '';\n\n        let description;\n        if (!this.branch.remote && this.branch.tracking !== undefined) {\n            if (this.view.config.showTrackingBranch) {\n                description = `${this.branch.getTrackingStatus({ suffix: `${GlyphChars.Space} ` })}${\n                    GlyphChars.ArrowLeftRightLong\n                }${GlyphChars.Space} ${this.branch.tracking}`;\n            }\n            tooltip += ` is tracking ${this.branch.tracking}\\n${this.branch.getTrackingStatus({\n                empty: 'up-to-date',\n                expand: true,\n                separator: '\\n'\n            })}`;\n\n            if (this.branch.state.ahead || this.branch.state.behind) {\n                if (this.branch.state.behind) {\n                    iconSuffix = '-red';\n                }\n                if (this.branch.state.ahead) {\n                    iconSuffix = this.branch.state.behind ? '-yellow' : '-green';\n                }\n            }\n        }\n\n        const item = new TreeItem(\n            // Hide the current branch checkmark when the node is displayed as a root under the repository node\n            `${!this._root && this.current ? `${GlyphChars.Check} ${GlyphChars.Space}` : ''}${name}`,\n            TreeItemCollapsibleState.Collapsed\n        );\n        item.contextValue = ResourceType.Branch;\n        if (this.current) {\n            item.contextValue += '+current';\n        }\n        if (this.branch.remote) {\n            item.contextValue += '+remote';\n        }\n        if (this.branch.starred) {\n            item.contextValue += '+starred';\n        }\n        if (this.branch.tracking) {\n            item.contextValue += '+tracking';\n        }\n\n        item.description = description;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(`images/dark/icon-branch${iconSuffix}.svg`),\n            light: Container.context.asAbsolutePath(`images/light/icon-branch${iconSuffix}.svg`)\n        };\n        item.id = this.id;\n        item.tooltip = tooltip;\n\n        return item;\n    }\n\n    @log()\n    async star() {\n        await this.branch.star();\n        void this.parent!.triggerChange();\n    }\n\n    @log()\n    async unstar() {\n        await this.branch.unstar();\n        void this.parent!.triggerChange();\n    }\n\n    @gate()\n    @debug()\n    refresh() {\n        this._children = undefined;\n    }\n}\n","'use strict';\nimport { ThemeIcon, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GitUri } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { View } from '../viewBase';\nimport { BranchNode } from './branchNode';\nimport { TagNode } from './tagNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class BranchOrTagFolderNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly type: 'branch' | 'remote-branch' | 'tag',\n        public readonly repoPath: string,\n        public readonly folderName: string,\n        public readonly relativePath: string | undefined,\n        public readonly root: Arrays.HierarchicalItem<BranchNode | TagNode>,\n        private readonly _expanded: boolean = false\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repoPath}):${this.type}-folder(${this.relativePath})`;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this.root.descendants === undefined || this.root.children === undefined) return [];\n\n        const children: (BranchOrTagFolderNode | BranchNode | TagNode)[] = [];\n\n        for (const folder of this.root.children.values()) {\n            if (folder.value === undefined) {\n                // If the folder contains the current branch, expand it by default\n                const expanded =\n                    folder.descendants !== undefined &&\n                    folder.descendants.some(n => n instanceof BranchNode && n.current);\n                children.push(\n                    new BranchOrTagFolderNode(\n                        this.view,\n                        this,\n                        this.type,\n                        this.repoPath,\n                        folder.name,\n                        folder.relativePath,\n                        folder,\n                        expanded\n                    )\n                );\n                continue;\n            }\n\n            children.push(folder.value);\n        }\n\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            this.label,\n            this._expanded ? TreeItemCollapsibleState.Expanded : TreeItemCollapsibleState.Collapsed\n        );\n        item.id = this.id;\n        item.contextValue = ResourceType.Folder;\n        item.iconPath = ThemeIcon.Folder;\n        item.tooltip = this.label;\n        return item;\n    }\n\n    get label(): string {\n        return this.folderName;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Arrays, Iterables } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchNode } from './branchNode';\nimport { BranchOrTagFolderNode } from './branchOrTagFolderNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class BranchesNode extends ViewNode<RepositoriesView> {\n    private _children: ViewNode[] | undefined;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repo.path}):branches`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const branches = await this.repo.getBranches();\n            if (branches === undefined) return [];\n\n            branches.sort(\n                (a, b) =>\n                    (a.starred ? -1 : 1) - (b.starred ? -1 : 1) ||\n                    a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n            );\n\n            // filter local branches\n            const branchNodes = [\n                ...Iterables.filterMap(branches, b =>\n                    b.remote ? undefined : new BranchNode(this.uri, this.view, this, b)\n                )\n            ];\n            if (this.view.config.branches.layout === ViewBranchesLayout.List) return branchNodes;\n\n            const hierarchy = Arrays.makeHierarchical(\n                branchNodes,\n                n => n.treeHierarchy,\n                (...paths: string[]) => paths.join('/'),\n                this.view.config.files.compact\n            );\n\n            const root = new BranchOrTagFolderNode(this.view, this, 'branch', this.repo.path, '', undefined, hierarchy);\n            this._children = await root.getChildren();\n        }\n        return this._children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const remotes = await this.repo.getRemotes();\n\n        const item = new TreeItem('Branches', TreeItemCollapsibleState.Collapsed);\n        item.contextValue = ResourceType.Branches;\n        if (remotes !== undefined && remotes.length > 0) {\n            item.contextValue += '+remotes';\n        }\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-branch.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-branch.svg')\n        };\n        item.id = this.id;\n\n        return item;\n    }\n\n    refresh() {\n        this._children = undefined;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GitContributor, GitUri } from '../../git/gitService';\nimport { Iterables, Strings } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\nimport { Container } from '../../container';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { getBranchesAndTagTipsFn, insertDateMarkers } from './helpers';\nimport { CommitNode } from './commitNode';\n\nexport class ContributorNode extends ViewNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging: boolean = true;\n    maxCount: number | undefined;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly contributor: GitContributor) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.contributor.repoPath}):contributor(${\n            this.contributor.name\n        }|${this.contributor.email}}`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount || this.view.config.defaultItemLimit,\n            authors: [this.contributor.name]\n        });\n        if (log === undefined) return [new MessageNode(this.view, this, 'No commits could be found.')];\n\n        const getBranchAndTagTips = await getBranchesAndTagTipsFn(this.uri.repoPath);\n        const children = [\n            ...insertDateMarkers(\n                Iterables.map(\n                    log.commits.values(),\n                    c => new CommitNode(this.view, this, c, undefined, getBranchAndTagTips)\n                ),\n                this\n            )\n        ];\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', children[children.length - 1]));\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.contributor.name, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Contributor;\n        item.description = this.contributor.email;\n        item.tooltip = `${this.contributor.name} <${this.contributor.email}>\\n${Strings.pluralize(\n            'commit',\n            this.contributor.count\n        )}`;\n\n        if (this.view.config.avatars) {\n            item.iconPath = this.contributor.getGravatarUri(Container.config.defaultGravatarsStyle);\n        }\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { RepositoriesView } from '../repositoriesView';\nimport { MessageNode } from './common';\nimport { ContributorNode } from './contributorNode';\nimport { ResourceType, ViewNode } from './viewNode';\nimport { Container } from '../../container';\n\nexport class ContributorsNode extends ViewNode<RepositoriesView> {\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repo.path}):contributors`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const contributors = await this.repo.getContributors();\n        if (contributors.length === 0) return [new MessageNode(this.view, this, 'No contributors could be found.')];\n\n        contributors.sort((a, b) => b.count - a.count);\n\n        const children = contributors.map(c => new ContributorNode(this.uri, this.view, this, c));\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Contributors', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Contributors;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-people.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-people.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { Disposable, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport {\n    GitCommitType,\n    GitLogCommit,\n    GitService,\n    GitUri,\n    RepositoryChange,\n    RepositoryChangeEvent,\n    RepositoryFileSystemChangeEvent\n} from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { CommitFileNode, CommitFileNodeDisplayAs } from './commitFileNode';\nimport { MessageNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nexport class FileHistoryNode extends SubscribeableViewNode {\n    constructor(uri: GitUri, view: View, parent: ViewNode) {\n        super(uri, view, parent);\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const children: ViewNode[] = [];\n\n        const displayAs =\n            CommitFileNodeDisplayAs.CommitLabel |\n            (this.view.config.avatars ? CommitFileNodeDisplayAs.Gravatar : CommitFileNodeDisplayAs.StatusIcon);\n\n        if (this.uri.sha === undefined) {\n            const status = await Container.git.getStatusForFile(this.uri.repoPath!, this.uri.fsPath);\n            if (status !== undefined && (status.indexStatus !== undefined || status.workingTreeStatus !== undefined)) {\n                let sha;\n                let previousSha;\n                if (status.workingTreeStatus !== undefined) {\n                    sha = GitService.uncommittedSha;\n                    if (status.indexStatus !== undefined) {\n                        previousSha = GitService.stagedUncommittedSha;\n                    }\n                    else if (status.workingTreeStatus !== '?') {\n                        previousSha = 'HEAD';\n                    }\n                }\n                else {\n                    sha = GitService.stagedUncommittedSha;\n                    previousSha = 'HEAD';\n                }\n\n                const user = await Container.git.getCurrentUser(this.uri.repoPath!);\n                const commit = new GitLogCommit(\n                    GitCommitType.File,\n                    this.uri.repoPath!,\n                    sha,\n                    'You',\n                    user !== undefined ? user.email : undefined,\n                    new Date(),\n                    new Date(),\n                    '',\n                    status.fileName,\n                    [status],\n                    status.status,\n                    status.originalFileName,\n                    previousSha,\n                    status.originalFileName || status.fileName\n                );\n                children.push(new CommitFileNode(this.view, this, status, commit, displayAs));\n            }\n        }\n\n        const log = await Container.git.getLogForFile(this.uri.repoPath, this.uri.fsPath, {\n            ref: this.uri.sha\n        });\n        if (log !== undefined) {\n            children.push(\n                ...insertDateMarkers(\n                    Iterables.map(\n                        log.commits.values(),\n                        c => new CommitFileNode(this.view, this, c.files[0], c, displayAs)\n                    ),\n                    this\n                )\n            );\n        }\n\n        if (children.length === 0) return [new MessageNode(this.view, this, 'No file history could be found.')];\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            `${this.uri.getFilename()}${\n                this.uri.sha\n                    ? ` ${\n                          this.uri.sha === GitService.deletedOrMissingSha ? this.uri.shortSha : `(${this.uri.shortSha})`\n                      }`\n                    : ''\n            }`,\n            TreeItemCollapsibleState.Expanded\n        );\n        item.contextValue = ResourceType.FileHistory;\n        item.description = this.uri.getDirectory();\n        item.tooltip = `History of ${this.uri.getFilename()}\\n${this.uri.getDirectory()}/${\n            this.uri.sha === undefined ? '' : `\\n\\n${this.uri.sha}`\n        }`;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-history.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-history.svg')\n        };\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @debug()\n    protected async subscribe() {\n        const repo = await Container.git.getRepository(this.uri);\n        if (repo === undefined) return undefined;\n\n        const subscription = Disposable.from(\n            repo.onDidChange(this.onRepoChanged, this),\n            repo.onDidChangeFileSystem(this.onRepoFileSystemChanged, this),\n            { dispose: () => repo.stopWatchingFileSystem() }\n        );\n\n        repo.startWatchingFileSystem();\n\n        return subscription;\n    }\n\n    private onRepoChanged(e: RepositoryChangeEvent) {\n        if (!e.changed(RepositoryChange.Repository)) return;\n\n        Logger.log(`FileHistoryNode.onRepoChanged(${e.changes.join()}); triggering node refresh`);\n\n        void this.triggerChange();\n    }\n\n    private onRepoFileSystemChanged(e: RepositoryFileSystemChangeEvent) {\n        if (!e.uris.some(uri => uri.toString(true) === this.uri.toString(true))) return;\n\n        Logger.debug(\n            `FileHistoryNode${this.id}.onRepoFileSystemChanged(${this.uri.toString(true)}); triggering node refresh`\n        );\n\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { CancellationToken, CancellationTokenSource, QuickPickItem, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitReference, GitService, GitTag } from '../git/gitService';\nimport { Functions } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut } from './commonQuickPicks';\n\nexport class RefQuickPickItem implements QuickPickItem {\n    label: string;\n    description: string;\n    detail: string | undefined;\n\n    constructor(public readonly ref: string, checked?: boolean) {\n        this.label = `${checked ? `$(check)${GlyphChars.Space}` : GlyphChars.Space.repeat(4)} ${GitService.shortenSha(\n            ref\n        )}`;\n        this.description = '';\n    }\n\n    get current() {\n        return false;\n    }\n\n    get item() {\n        const ref: GitReference = { name: this.ref, ref: this.ref };\n        return ref;\n    }\n\n    get remote() {\n        return false;\n    }\n}\n\nexport class BranchQuickPickItem implements QuickPickItem {\n    label: string;\n    description: string;\n    detail: string | undefined;\n\n    constructor(public readonly branch: GitBranch, checked?: boolean) {\n        checked = checked || (checked === undefined && branch.current);\n        this.label = `${checked ? `$(check)${GlyphChars.Space}` : GlyphChars.Space.repeat(4)} ${branch.name}`;\n        this.description = branch.remote\n            ? `${GlyphChars.Space.repeat(2)} remote branch`\n            : branch.current\n            ? 'current branch'\n            : '';\n    }\n\n    get current() {\n        return this.branch.current;\n    }\n\n    get item() {\n        return this.branch;\n    }\n\n    get ref() {\n        return this.branch.name;\n    }\n\n    get remote() {\n        return this.branch.remote;\n    }\n}\n\nexport class TagQuickPickItem implements QuickPickItem {\n    label: string;\n    description: string;\n    detail: string | undefined;\n\n    constructor(public readonly tag: GitTag, checked?: boolean) {\n        this.label = `${checked ? `$(check)${GlyphChars.Space}` : GlyphChars.Space.repeat(4)} ${tag.name}`;\n        this.description = `${GlyphChars.Space.repeat(2)} tag`;\n    }\n\n    get current() {\n        return false;\n    }\n\n    get item() {\n        return this.tag;\n    }\n\n    get ref() {\n        return this.tag.name;\n    }\n\n    get remote() {\n        return false;\n    }\n}\n\nexport type ReferencesQuickPickItem = BranchQuickPickItem | TagQuickPickItem | RefQuickPickItem;\n\nexport interface ReferencesQuickPickOptions {\n    allowEnteringRefs?: boolean;\n    autoPick?: boolean;\n    checked?: string;\n    filters?: {\n        branches?(branch: GitBranch): boolean;\n        tags?(tag: GitTag): boolean;\n    };\n    goBack?: CommandQuickPickItem;\n    include?: 'branches' | 'tags' | 'all';\n}\n\nexport class ReferencesQuickPick {\n    constructor(public readonly repoPath: string | undefined) {}\n\n    async show(\n        placeHolder: string,\n        options: ReferencesQuickPickOptions = {}\n    ): Promise<ReferencesQuickPickItem | CommandQuickPickItem | undefined> {\n        const cancellation = new CancellationTokenSource();\n\n        let scope;\n        if (options.goBack) {\n            scope = await Container.keyboard.beginScope({ left: options.goBack });\n        }\n\n        let autoPick;\n        try {\n            let items = this.getItems(options, cancellation.token);\n            if (options.autoPick) {\n                items = items.then(itms => {\n                    if (itms.length <= 1) {\n                        autoPick = itms[0];\n                        cancellation.cancel();\n                    }\n                    return itms;\n                });\n            }\n\n            let pick;\n            if (options.allowEnteringRefs) {\n                placeHolder += `${GlyphChars.Space.repeat(3)}(select or enter a reference)`;\n\n                const quickpick = window.createQuickPick<ReferencesQuickPickItem | CommandQuickPickItem>();\n                quickpick.busy = true;\n                quickpick.enabled = false;\n                quickpick.placeholder = placeHolder;\n                quickpick.ignoreFocusOut = getQuickPickIgnoreFocusOut();\n                quickpick.show();\n\n                quickpick.items = await items;\n                quickpick.busy = false;\n                quickpick.enabled = true;\n\n                pick = await new Promise<ReferencesQuickPickItem | CommandQuickPickItem | undefined>(resolve => {\n                    cancellation.token.onCancellationRequested(() => quickpick.hide());\n\n                    quickpick.onDidHide(() => resolve(undefined));\n                    quickpick.onDidAccept(async () => {\n                        if (quickpick.selectedItems.length === 0) {\n                            quickpick.busy = true;\n                            quickpick.enabled = false;\n\n                            const ref = quickpick.value;\n                            if (\n                                this.repoPath === undefined ||\n                                (await Container.git.validateReference(this.repoPath, ref))\n                            ) {\n                                resolve(new RefQuickPickItem(ref));\n                            }\n                            else {\n                                quickpick.title = 'You must enter a valid reference';\n                                quickpick.busy = false;\n                                quickpick.enabled = true;\n                                return;\n                            }\n                        }\n                        else {\n                            resolve(quickpick.selectedItems[0]);\n                        }\n\n                        quickpick.hide();\n                    });\n                });\n\n                quickpick.dispose();\n            }\n            else {\n                pick = await window.showQuickPick(\n                    items,\n                    {\n                        placeHolder: placeHolder,\n                        ignoreFocusOut: getQuickPickIgnoreFocusOut()\n                    },\n                    cancellation.token\n                );\n            }\n\n            if (pick === undefined && autoPick !== undefined) {\n                pick = autoPick;\n            }\n\n            if (pick === undefined) {\n                cancellation.cancel();\n            }\n\n            return pick;\n        }\n        finally {\n            if (scope !== undefined) {\n                await scope.dispose();\n            }\n\n            cancellation.dispose();\n        }\n    }\n\n    private async getItems(options: ReferencesQuickPickOptions, token: CancellationToken) {\n        const { checked, filters, goBack, include } = { include: 'all', ...options };\n\n        let branches;\n        let tags;\n        switch (include) {\n            case 'branches': {\n                const result = await Functions.cancellable(Container.git.getBranches(this.repoPath), token);\n                if (result === undefined || token.isCancellationRequested) return [];\n\n                branches = result;\n                break;\n            }\n            case 'tags': {\n                const result = await Functions.cancellable(Container.git.getTags(this.repoPath), token);\n                if (result === undefined || token.isCancellationRequested) return [];\n\n                tags = result;\n                break;\n            }\n            default: {\n                const result = await Functions.cancellable(\n                    Promise.all([Container.git.getBranches(this.repoPath), Container.git.getTags(this.repoPath)]),\n                    token\n                );\n                if (result === undefined || token.isCancellationRequested) return [];\n\n                [branches, tags] = result;\n                break;\n            }\n        }\n\n        const items: (BranchQuickPickItem | TagQuickPickItem | CommandQuickPickItem)[] = [];\n\n        if (branches !== undefined) {\n            const filter =\n                filters !== undefined && typeof filters.branches === 'function' ? filters.branches : undefined;\n\n            branches.sort(\n                (a, b) =>\n                    (a.starred ? -1 : 1) - (b.starred ? -1 : 1) ||\n                    (b.remote ? -1 : 1) - (a.remote ? -1 : 1) ||\n                    a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n            );\n            for (const b of branches) {\n                if (filter !== undefined && !filter(b)) continue;\n\n                items.push(new BranchQuickPickItem(b, checked !== undefined ? b.name === checked : undefined));\n            }\n        }\n\n        if (tags !== undefined) {\n            const filter = filters !== undefined && typeof filters.tags === 'function' ? filters.tags : undefined;\n\n            tags.sort((a, b) => a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' }));\n            for (const t of tags) {\n                if (filter !== undefined && !filter(t)) continue;\n\n                items.push(new TagQuickPickItem(t, checked !== undefined ? t.name === checked : undefined));\n            }\n        }\n\n        if (goBack !== undefined) {\n            items.splice(0, 0, goBack);\n        }\n\n        return items;\n    }\n}\n","'use strict';\nimport {\n    CancellationTokenSource,\n    commands,\n    QuickPickItem,\n    TextDocumentShowOptions,\n    TextEditor,\n    Uri,\n    window\n} from 'vscode';\nimport { Commands, openEditor } from '../commands';\nimport { configuration } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitLogCommit, GitRepoSearchBy, GitStashCommit, GitUri } from '../git/gitService';\nimport { KeyMapping, Keys } from '../keyboard';\nimport { Strings } from '../system';\nimport { ReferencesQuickPick, ReferencesQuickPickItem } from './referencesQuickPick';\n\nexport function getQuickPickIgnoreFocusOut() {\n    return !configuration.get<boolean>(configuration.name('advanced')('quickPick')('closeOnFocusOut').value);\n}\n\nexport function showQuickPickProgress(message: string, mapping?: KeyMapping): CancellationTokenSource {\n    const cancellation = new CancellationTokenSource();\n    void _showQuickPickProgress(message, cancellation, mapping);\n    return cancellation;\n}\n\nasync function _showQuickPickProgress(message: string, cancellation: CancellationTokenSource, mapping?: KeyMapping) {\n    const scope = mapping && (await Container.keyboard.beginScope(mapping));\n\n    try {\n        await window.showQuickPick(\n            _getInfiniteCancellablePromise(cancellation),\n            {\n                placeHolder: message,\n                ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            },\n            cancellation.token\n        );\n    }\n    catch (ex) {\n        // Not sure why this throws\n    }\n    finally {\n        cancellation.cancel();\n        scope && scope.dispose();\n    }\n}\n\nfunction _getInfiniteCancellablePromise(cancellation: CancellationTokenSource) {\n    return new Promise<QuickPickItem[]>((resolve, reject) => {\n        const disposable = cancellation.token.onCancellationRequested(() => {\n            disposable.dispose();\n            resolve([]);\n        });\n    });\n}\n\nexport interface QuickPickItem extends QuickPickItem {\n    onDidSelect?(): void;\n    onDidPressKey?(key: Keys): Promise<{} | undefined>;\n}\n\nexport class CommandQuickPickItem implements QuickPickItem {\n    label!: string;\n    description!: string;\n    detail?: string | undefined;\n    protected command: Commands | undefined;\n    protected args: any[] | undefined;\n\n    constructor(item: QuickPickItem, args?: [Commands, any[]]);\n    constructor(item: QuickPickItem, command?: Commands, args?: any[]);\n    constructor(item: QuickPickItem, commandOrArgs?: Commands | [Commands, any[]], args?: any[]) {\n        if (commandOrArgs === undefined) {\n            this.command = undefined;\n            this.args = args;\n        }\n        else if (typeof commandOrArgs === 'string') {\n            this.command = commandOrArgs;\n            this.args = args;\n        }\n        else {\n            this.command = commandOrArgs[0];\n            this.args = commandOrArgs.slice(1);\n        }\n        Object.assign(this, item);\n    }\n\n    execute(): Thenable<{} | undefined> {\n        if (this.command === undefined) return Promise.resolve(undefined);\n\n        return commands.executeCommand(this.command, ...(this.args || []));\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute();\n    }\n}\n\nexport class CommitQuickPickItem<T extends GitLogCommit = GitLogCommit> implements QuickPickItem {\n    label: string;\n    description: string;\n    detail: string;\n\n    constructor(public readonly commit: T) {\n        const message = commit.getShortMessage();\n        if (GitStashCommit.is(commit)) {\n            this.label = message;\n            this.description = '';\n            this.detail = `${GlyphChars.Space} ${commit.stashName || commit.shortSha} ${Strings.pad(\n                GlyphChars.Dot,\n                1,\n                1\n            )} ${commit.formattedDate} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.getFormattedDiffStatus({\n                compact: true\n            })}`;\n        }\n        else {\n            this.label = message;\n            this.description = `${Strings.pad('$(git-commit)', 1, 1)} ${commit.shortSha}`;\n            this.detail = `${GlyphChars.Space} ${commit.author}, ${commit.formattedDate}${\n                commit.isFile\n                    ? ''\n                    : ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.getFormattedDiffStatus({ compact: true })}`\n            }`;\n        }\n    }\n}\n\nexport class KeyCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(command: Commands, args?: any[]) {\n        super({ label: '', description: '' }, command, args);\n    }\n}\n\nexport class MessageQuickPickItem extends CommandQuickPickItem {\n    constructor(message: string) {\n        super({ label: message, description: '' });\n    }\n}\n\nexport class OpenFileCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(public readonly uri: Uri, item: QuickPickItem) {\n        super(item, undefined, undefined);\n    }\n\n    execute(options?: TextDocumentShowOptions): Thenable<TextEditor | undefined> {\n        return openEditor(this.uri, options);\n    }\n\n    // onDidSelect(): Promise<{} | undefined> {\n    //     return this.execute({\n    //         preserveFocus: true,\n    //         preview: true\n    //     });\n    // }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute({\n            preserveFocus: true,\n            preview: false\n        });\n    }\n}\n\nexport class OpenFilesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(public readonly uris: Uri[], item: QuickPickItem) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ): Promise<{} | undefined> {\n        for (const uri of this.uris) {\n            await openEditor(uri, options);\n        }\n        return undefined;\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        return this.execute({\n            preserveFocus: true,\n            preview: false\n        });\n    }\n}\n\nexport class ShowCommitInViewQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        public readonly commit: GitLogCommit,\n        item: QuickPickItem = {\n            label: 'Show in View',\n            description: `${Strings.pad(GlyphChars.Dash, 2, 2)} displays the commit in the GitLens Search Commits view`\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(): Promise<{} | undefined> {\n        return void (await Container.searchView.search(this.commit.repoPath, this.commit.sha, GitRepoSearchBy.Sha, {\n            label: { label: `commits with an id matching '${this.commit.shortSha}'` }\n        }));\n    }\n}\n\nexport class ShowCommitSearchResultsInViewQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        public readonly search: string,\n        public readonly searchBy: GitRepoSearchBy,\n        public readonly results: GitLog,\n        public readonly resultsLabel: string | { label: string; resultsType?: { singular: string; plural: string } },\n        item: QuickPickItem = {\n            label: 'Show in View',\n            description: `${Strings.pad(\n                GlyphChars.Dash,\n                2,\n                2\n            )} displays the search results in the GitLens Search Commits view`\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(): Promise<{} | undefined> {\n        return void (await Container.searchView.showSearchResults(\n            this.results.repoPath,\n            this.search,\n            this.searchBy,\n            this.results,\n            {\n                label: this.resultsLabel\n            }\n        ));\n    }\n}\n\nexport class ShowFileHistoryFromQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        private readonly repoPath: string,\n        private readonly placeHolder: string,\n        private readonly _goBack?: CommandQuickPickItem,\n        item: QuickPickItem = {\n            label: 'Show File History from...',\n            description: `${Strings.pad(GlyphChars.Dash, 2, 2)} shows an alternate file history`\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    execute(): Promise<CommandQuickPickItem | ReferencesQuickPickItem | undefined> {\n        return new ReferencesQuickPick(this.repoPath).show(this.placeHolder, {\n            allowEnteringRefs: true,\n            goBack: this._goBack\n        });\n    }\n}\n\nexport class ShowFileHistoryInViewQuickPickItem extends CommandQuickPickItem {\n    constructor(\n        public readonly uri: GitUri,\n        public readonly baseRef: string | undefined,\n        item: QuickPickItem = {\n            label: 'Show in View',\n            description: `${Strings.pad(\n                GlyphChars.Dash,\n                2,\n                2\n            )} displays the file history in the GitLens File History view`\n        }\n    ) {\n        super(item, undefined, undefined);\n    }\n\n    async execute(): Promise<{} | undefined> {\n        return void (await Container.fileHistoryView.showHistoryForUri(this.uri, this.baseRef));\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { window } from 'vscode';\nimport { Commands, OpenInRemoteCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport {\n    getNameFromRemoteResource,\n    GitLogCommit,\n    GitRemote,\n    GitService,\n    RemoteResource,\n    RemoteResourceType\n} from '../git/gitService';\nimport { Strings } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut } from './commonQuickPicks';\n\nexport class OpenRemoteCommandQuickPickItem extends CommandQuickPickItem {\n    private remote: GitRemote;\n    private resource: RemoteResource;\n\n    constructor(remote: GitRemote, resource: RemoteResource, public readonly clipboard?: boolean) {\n        super(\n            {\n                label: clipboard\n                    ? `$(link-external) Copy ${getNameFromRemoteResource(resource)} Url to Clipboard from ${\n                          remote.provider!.name\n                      }`\n                    : `$(link-external) Open ${getNameFromRemoteResource(resource)} on ${remote.provider!.name}`,\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(repo) ${remote.provider!.path}`\n            },\n            undefined,\n            undefined\n        );\n\n        this.remote = remote;\n        this.resource = resource;\n    }\n\n    execute(): Thenable<{} | undefined> {\n        if (this.clipboard) return this.remote.provider!.copy(this.resource);\n\n        return this.remote.provider!.open(this.resource);\n    }\n}\n\nexport class OpenRemotesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(remotes: GitRemote[], resource: RemoteResource, goBackCommand?: CommandQuickPickItem) {\n        const name = getNameFromRemoteResource(resource);\n\n        let description;\n        switch (resource.type) {\n            case RemoteResourceType.Branch:\n                description = `$(git-branch) ${resource.branch}`;\n                break;\n\n            case RemoteResourceType.Branches:\n                description = '$(git-branch) Branches';\n                break;\n\n            case RemoteResourceType.Commit:\n                description = `$(git-commit) ${GitService.shortenSha(resource.sha)}`;\n                break;\n\n            case RemoteResourceType.File:\n                description = `$(file-text) ${paths.basename(resource.fileName)}`;\n                break;\n\n            case RemoteResourceType.Repo:\n                description = '$(repo) Repository';\n                break;\n\n            case RemoteResourceType.Revision:\n                if (resource.commit !== undefined && resource.commit instanceof GitLogCommit) {\n                    if (resource.commit.status === 'D') {\n                        resource.sha = resource.commit.previousSha;\n                        description = `$(file-text) ${paths.basename(resource.fileName)} in ${\n                            GlyphChars.Space\n                        }$(git-commit) ${resource.commit.previousShortSha} (deleted in ${\n                            GlyphChars.Space\n                        }$(git-commit) ${resource.commit.shortSha})`;\n                    }\n                    else {\n                        resource.sha = resource.commit.sha;\n                        description = `$(file-text) ${paths.basename(resource.fileName)} in ${\n                            GlyphChars.Space\n                        }$(git-commit) ${resource.commit.shortSha}`;\n                    }\n                }\n                else {\n                    const shortFileSha = resource.sha === undefined ? '=' : GitService.shortenSha(resource.sha);\n                    description = `$(file-text) ${paths.basename(resource.fileName)}${\n                        shortFileSha ? ` in ${GlyphChars.Space}$(git-commit) ${shortFileSha}` : ''\n                    }`;\n                }\n                break;\n\n            default:\n                description = '';\n                break;\n        }\n\n        let remote: GitRemote | undefined;\n        if (remotes.length > 1) {\n            remote = remotes.find(r => r.default);\n        }\n        else if (remotes.length === 1) {\n            remote = remotes[0];\n        }\n\n        if (remote != null) {\n            const commandArgs: OpenInRemoteCommandArgs = {\n                remotes: remotes,\n                resource: resource,\n                goBackCommand: goBackCommand\n            };\n            super(\n                {\n                    label: `$(link-external) Open ${name} on ${remote.provider!.name}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(repo) ${remote.provider!.path} ${Strings.pad(\n                        GlyphChars.Dot,\n                        1,\n                        1\n                    )} ${description}`\n                },\n                Commands.OpenInRemote,\n                [undefined, commandArgs]\n            );\n\n            return;\n        }\n\n        remote = remotes[0];\n        // Use the real provider name if there is only 1 provider\n        const provider = remotes.every(r => r.provider !== undefined && r.provider.name === remote!.provider!.name)\n            ? remote.provider!.name\n            : 'Remote';\n\n        const commandArgs: OpenInRemoteCommandArgs = {\n            remotes: remotes,\n            resource: resource,\n            goBackCommand: goBackCommand\n        };\n        super(\n            {\n                label: `$(link-external) Open ${name} on ${provider}${GlyphChars.Ellipsis}`,\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${description}`\n            },\n            Commands.OpenInRemote,\n            [undefined, commandArgs]\n        );\n    }\n}\n\nexport class RemotesQuickPick {\n    static async show(\n        remotes: GitRemote[],\n        placeHolder: string,\n        resource: RemoteResource,\n        clipboard?: boolean,\n        goBackCommand?: CommandQuickPickItem\n    ): Promise<OpenRemoteCommandQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = remotes.map(r => new OpenRemoteCommandQuickPickItem(r, resource, clipboard)) as (\n            | OpenRemoteCommandQuickPickItem\n            | CommandQuickPickItem)[];\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        // const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        const pick = await window.showQuickPick(items, {\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n        });\n        if (pick === undefined) return undefined;\n\n        // await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Commands, ShowQuickBranchHistoryCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitUri, RemoteResourceType } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    CommitQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    showQuickPickProgress\n} from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\n\nexport class BranchHistoryQuickPick {\n    static showProgress(branch: string) {\n        return showQuickPickProgress(\n            `${branch} history ${GlyphChars.Dash} search by commit message, filename, or commit id`,\n            {\n                left: KeyNoopCommand,\n                ',': KeyNoopCommand,\n                '.': KeyNoopCommand\n            }\n        );\n    }\n\n    static async show(\n        log: GitLog,\n        uri: GitUri | undefined,\n        branch: string,\n        progressCancellation: CancellationTokenSource,\n        goBackCommand?: CommandQuickPickItem,\n        nextPageCommand?: CommandQuickPickItem\n    ): Promise<CommitQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = Array.from(Iterables.map(log.commits.values(), c => new CommitQuickPickItem(c))) as (\n            | CommitQuickPickItem\n            | CommandQuickPickItem)[];\n\n        const currentCommandArgs: ShowQuickBranchHistoryCommandArgs = {\n            branch: branch,\n            log: log,\n            maxCount: log.maxCount,\n            goBackCommand: goBackCommand\n        };\n        const currentCommand = new CommandQuickPickItem(\n            {\n                label: `go back ${GlyphChars.ArrowBack}`,\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to ${\n                    GlyphChars.Space\n                }$(git-branch) ${branch} history`\n            },\n            Commands.ShowQuickBranchHistory,\n            [uri, currentCommandArgs]\n        );\n\n        const remotes = await Container.git.getRemotes((uri && uri.repoPath) || log.repoPath);\n        if (remotes.length) {\n            items.splice(\n                0,\n                0,\n                new OpenRemotesCommandQuickPickItem(\n                    remotes,\n                    {\n                        type: RemoteResourceType.Branch,\n                        branch: branch\n                    },\n                    currentCommand\n                )\n            );\n        }\n\n        let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n        if (log.truncated || log.sha) {\n            if (log.truncated) {\n                const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                    branch: branch,\n                    maxCount: 0,\n                    goBackCommand: goBackCommand\n                };\n                items.splice(\n                    0,\n                    0,\n                    new CommandQuickPickItem(\n                        {\n                            label: '$(sync) Show All Commits',\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} this may take a while`\n                        },\n                        Commands.ShowQuickBranchHistory,\n                        [GitUri.fromRepoPath(log.repoPath), commandArgs]\n                    )\n                );\n            }\n\n            if (nextPageCommand) {\n                items.splice(0, 0, nextPageCommand);\n            }\n\n            if (log.truncated) {\n                const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                    branch: branch,\n                    maxCount: log.maxCount,\n                    nextPageCommand: nextPageCommand\n                };\n                const npc = new CommandQuickPickItem(\n                    {\n                        label: '$(arrow-right) Show Next Commits',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${log.maxCount} newer commits`\n                    },\n                    Commands.ShowQuickBranchHistory,\n                    [uri, commandArgs]\n                );\n\n                const last = Iterables.last(log.commits.values());\n                if (last != null) {\n                    const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                        branch: branch,\n                        maxCount: log.maxCount,\n                        goBackCommand: goBackCommand,\n                        nextPageCommand: npc\n                    };\n                    previousPageCommand = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-left) Show Previous Commits',\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${log.maxCount} older commits`\n                        },\n                        Commands.ShowQuickBranchHistory,\n                        [new GitUri(uri ? uri : last.uri, last), commandArgs]\n                    );\n\n                    items.splice(0, 0, previousPageCommand);\n                }\n            }\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        if (progressCancellation.token.isCancellationRequested) return undefined;\n\n        const scope = await Container.keyboard.beginScope({\n            left: goBackCommand,\n            ',': previousPageCommand,\n            '.': nextPageCommand\n        });\n\n        progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            matchOnDetail: true,\n            placeHolder: `${branch} history ${GlyphChars.Dash} search by commit message, filename, or commit id`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { QuickPickItem, Uri, window } from 'vscode';\nimport {\n    Commands,\n    CopyMessageToClipboardCommandArgs,\n    CopyShaToClipboardCommandArgs,\n    DiffWithPreviousCommandArgs,\n    DiffWithWorkingCommandArgs,\n    openEditor,\n    ShowQuickCommitDetailsCommandArgs,\n    ShowQuickCommitFileDetailsCommandArgs,\n    ShowQuickFileHistoryCommandArgs\n} from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitLogCommit, GitUri, RemoteResourceType } from '../git/gitService';\nimport { KeyCommand, KeyNoopCommand } from '../keyboard';\nimport { Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    KeyCommandQuickPickItem,\n    OpenFileCommandQuickPickItem\n} from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\n\nexport class ApplyCommitFileChangesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(private readonly commit: GitLogCommit, item?: QuickPickItem) {\n        super(\n            item || {\n                label: '$(git-pull-request) Apply Changes',\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(file-text) ${paths.basename(\n                    commit.fileName\n                )} in ${GlyphChars.Space}$(git-commit) ${commit.shortSha}`\n            },\n            undefined,\n            undefined\n        );\n    }\n\n    async execute(): Promise<{} | undefined> {\n        const uri = this.commit.toGitUri();\n        void (await openEditor(uri, { preserveFocus: true, preview: false }));\n\n        void (await Container.git.applyChangesToWorkingFile(uri));\n\n        return undefined;\n    }\n}\n\nexport class OpenCommitFileCommandQuickPickItem extends OpenFileCommandQuickPickItem {\n    constructor(commit: GitLogCommit, item?: QuickPickItem) {\n        const uri = GitUri.resolveToUri(commit.fileName, commit.repoPath);\n        super(\n            uri,\n            item || {\n                label: '$(file-symlink-file) Open File',\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${paths.basename(commit.fileName)}`\n            }\n        );\n    }\n}\n\nexport class OpenCommitFileRevisionCommandQuickPickItem extends OpenFileCommandQuickPickItem {\n    constructor(commit: GitLogCommit, item?: QuickPickItem) {\n        let description: string;\n        let uri: Uri;\n        if (commit.status === 'D') {\n            uri = GitUri.toRevisionUri(commit.previousFileSha, commit.previousUri.fsPath, commit.repoPath);\n            description = `${Strings.pad(GlyphChars.Dash, 2, 3)} ${paths.basename(commit.fileName)} in ${\n                GlyphChars.Space\n            }$(git-commit) ${commit.previousShortSha} (deleted in ${GlyphChars.Space}$(git-commit) ${commit.shortSha})`;\n        }\n        else {\n            uri = GitUri.toRevisionUri(commit.sha, commit.uri.fsPath, commit.repoPath);\n            description = `${Strings.pad(GlyphChars.Dash, 2, 3)} ${paths.basename(commit.fileName)} in ${\n                GlyphChars.Space\n            }$(git-commit) ${commit.shortSha}`;\n        }\n        super(\n            uri,\n            item || {\n                label: '$(file-symlink-file) Open Revision',\n                description: description\n            }\n        );\n    }\n}\n\nexport class CommitFileQuickPick {\n    static async show(\n        commit: GitLogCommit,\n        uri: Uri,\n        goBackCommand?: CommandQuickPickItem,\n        currentCommand?: CommandQuickPickItem,\n        fileLog?: GitLog\n    ): Promise<CommandQuickPickItem | undefined> {\n        const items: CommandQuickPickItem[] = [];\n\n        const stash = commit.isStash;\n\n        const workingName =\n            (commit.workingFileName && paths.basename(commit.workingFileName)) || paths.basename(commit.fileName);\n\n        const isUncommitted = commit.isUncommitted;\n        if (isUncommitted) {\n            // Since we can't trust the previous sha on an uncommitted commit, find the last commit for this file\n            const c = await Container.git.getRecentLogCommitForFile(undefined, commit.uri.fsPath);\n            if (c === undefined) return undefined;\n\n            commit = c;\n        }\n\n        await commit.resolvePreviousFileSha();\n\n        if (stash) {\n            items.push(new ApplyCommitFileChangesCommandQuickPickItem(commit));\n        }\n\n        if (commit.previousFileShortSha) {\n            const commandArgs: DiffWithPreviousCommandArgs = {\n                commit: commit\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-compare) Open Changes',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(git-commit) ${\n                            commit.previousFileShortSha\n                        } ${GlyphChars.Space} $(git-compare) ${GlyphChars.Space} $(git-commit) ${commit.shortSha}`\n                    },\n                    Commands.DiffWithPrevious,\n                    [commit.uri, commandArgs]\n                )\n            );\n        }\n\n        if (commit.workingFileName) {\n            const commandArgs: DiffWithWorkingCommandArgs = {\n                commit: commit\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-compare) Open Changes with Working File',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(git-commit) ${commit.shortSha} ${\n                            GlyphChars.Space\n                        } $(git-compare) ${GlyphChars.Space} $(file-text) ${workingName}`\n                    },\n                    Commands.DiffWithWorking,\n                    [GitUri.resolveToUri(commit.workingFileName, commit.repoPath), commandArgs]\n                )\n            );\n        }\n\n        if (commit.workingFileName && commit.status !== 'D') {\n            items.push(new OpenCommitFileCommandQuickPickItem(commit));\n        }\n        items.push(new OpenCommitFileRevisionCommandQuickPickItem(commit));\n\n        const remotes = await Container.git.getRemotes(commit.repoPath);\n        if (remotes.length) {\n            if (commit.workingFileName && commit.status !== 'D') {\n                const branch = await Container.git.getBranch(commit.repoPath);\n                if (branch !== undefined) {\n                    items.push(\n                        new OpenRemotesCommandQuickPickItem(\n                            remotes,\n                            {\n                                type: RemoteResourceType.File,\n                                fileName: commit.workingFileName,\n                                branch: branch.name\n                            },\n                            currentCommand\n                        )\n                    );\n                }\n            }\n\n            if (!stash) {\n                items.push(\n                    new OpenRemotesCommandQuickPickItem(\n                        remotes,\n                        {\n                            type: RemoteResourceType.Revision,\n                            fileName: commit.fileName,\n                            commit: commit\n                        },\n                        currentCommand\n                    )\n                );\n            }\n        }\n\n        if (!stash) {\n            items.push(new ApplyCommitFileChangesCommandQuickPickItem(commit));\n\n            const copyShaCommandArgs: CopyShaToClipboardCommandArgs = {\n                sha: commit.sha\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(clippy) Copy Commit ID to Clipboard',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${commit.shortSha}`\n                    },\n                    Commands.CopyShaToClipboard,\n                    [uri, copyShaCommandArgs]\n                )\n            );\n\n            const copyMessageCommandArgs: CopyMessageToClipboardCommandArgs = {\n                message: commit.message,\n                sha: commit.sha\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(clippy) Copy Commit Message to Clipboard',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${commit.getShortMessage()}`\n                    },\n                    Commands.CopyMessageToClipboard,\n                    [uri, copyMessageCommandArgs]\n                )\n            );\n        }\n\n        if (commit.workingFileName) {\n            const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                log: fileLog,\n                goBackCommand: currentCommand\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(history) Show File History',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} of ${paths.basename(commit.fileName)}`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [GitUri.resolveToUri(commit.workingFileName, commit.repoPath), commandArgs]\n                )\n            );\n        }\n\n        if (!stash) {\n            const fileHistoryCommandArgs: ShowQuickFileHistoryCommandArgs = {\n                goBackCommand: currentCommand\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: `$(history) Show ${commit.workingFileName ? 'Previous ' : ''}File History`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} of ${paths.basename(\n                            commit.fileName\n                        )} ${Strings.pad(GlyphChars.Dot, 1, 1)} from ${GlyphChars.Space}$(git-commit) ${\n                            commit.shortSha\n                        }`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [commit.toGitUri(), fileHistoryCommandArgs]\n                )\n            );\n\n            const commitDetailsCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                commit: commit,\n                sha: commit.sha,\n                goBackCommand: currentCommand\n            };\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-commit) Show Commit Details',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(git-commit) ${commit.shortSha}`\n                    },\n                    Commands.ShowQuickCommitDetails,\n                    [commit.toGitUri(), commitDetailsCommandArgs]\n                )\n            );\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        let previousCommand: KeyCommand | (() => Promise<KeyCommand>) | undefined = undefined;\n        let nextCommand: KeyCommand | (() => Promise<KeyCommand>) | undefined = undefined;\n        if (!stash) {\n            // If we have the full history, we are good\n            if (fileLog !== undefined && !fileLog.truncated && fileLog.sha === undefined) {\n                const previousCommandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                    fileLog: fileLog,\n                    sha: commit.previousSha,\n                    goBackCommand: goBackCommand\n                };\n                previousCommand =\n                    commit.previousSha === undefined\n                        ? undefined\n                        : new KeyCommandQuickPickItem(Commands.ShowQuickCommitFileDetails, [\n                              commit.previousUri,\n                              previousCommandArgs\n                          ]);\n\n                const nextCommandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                    fileLog: fileLog,\n                    sha: commit.nextSha,\n                    goBackCommand: goBackCommand\n                };\n                nextCommand =\n                    commit.nextSha === undefined\n                        ? undefined\n                        : new KeyCommandQuickPickItem(Commands.ShowQuickCommitFileDetails, [\n                              commit.nextUri,\n                              nextCommandArgs\n                          ]);\n            }\n            else {\n                previousCommand = async () => {\n                    let log = fileLog;\n                    let c = log && log.commits.get(commit.sha);\n\n                    // If we can't find the commit or the previous commit isn't available (since it isn't trustworthy)\n                    if (c === undefined || c.previousSha === undefined) {\n                        log = await Container.git.getLogForFile(commit.repoPath, uri.fsPath, {\n                            maxCount: Container.config.advanced.maxListItems,\n                            ref: commit.sha,\n                            renames: true\n                        });\n                        if (log === undefined) return KeyNoopCommand;\n\n                        c = log && log.commits.get(commit.sha);\n                        // Since we exclude merge commits in file log, just grab the first returned commit\n                        if (c === undefined && commit.isMerge) {\n                            c = Iterables.first(log.commits.values());\n                        }\n\n                        if (c) {\n                            // Copy over next info, since it is trustworthy at this point\n                            c.nextSha = commit.nextSha;\n                            c.nextFileName = commit.nextFileName;\n                        }\n                    }\n\n                    if (c === undefined || c.previousSha === undefined) return KeyNoopCommand;\n\n                    const previousCommandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                        fileLog: log,\n                        sha: c.previousSha,\n                        goBackCommand: goBackCommand\n                    };\n                    return new KeyCommandQuickPickItem(Commands.ShowQuickCommitFileDetails, [\n                        c.previousUri,\n                        previousCommandArgs\n                    ]);\n                };\n\n                nextCommand = async () => {\n                    let log = fileLog;\n                    let c = log && log.commits.get(commit.sha);\n\n                    // If we can't find the commit or the next commit isn't available (since it isn't trustworthy)\n                    if (c === undefined || c.nextSha === undefined) {\n                        log = undefined;\n                        c = undefined;\n\n                        // Try to find the next commit\n                        const next = await Container.git.findNextCommit(commit.repoPath, uri.fsPath, commit.sha);\n                        if (next !== undefined && next.sha !== commit.sha) {\n                            c = commit;\n                            c.nextSha = next.sha;\n                            c.nextFileName = next.originalFileName || next.fileName;\n                        }\n                    }\n\n                    if (c === undefined || c.nextSha === undefined) return KeyNoopCommand;\n\n                    const nextCommandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                        fileLog: log,\n                        sha: c.nextSha,\n                        goBackCommand: goBackCommand\n                    };\n                    return new KeyCommandQuickPickItem(Commands.ShowQuickCommitFileDetails, [\n                        c.nextUri,\n                        nextCommandArgs\n                    ]);\n                };\n            }\n        }\n\n        const scope = await Container.keyboard.beginScope({\n            left: goBackCommand,\n            ',': previousCommand,\n            '.': nextCommand\n        });\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder: `${commit.getFormattedPath()} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                isUncommitted ? `Uncommitted ${GlyphChars.ArrowRightHollow} ` : ''\n            }${commit.shortSha} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.author}, ${\n                commit.formattedDate\n            } ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.getShortMessage()}`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut(),\n            onDidSelectItem: (item: QuickPickItem) => {\n                void scope.setKeyCommand('right', item as KeyCommand);\n            }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, Uri, window } from 'vscode';\nimport {\n    Commands,\n    CopyMessageToClipboardCommandArgs,\n    CopyShaToClipboardCommandArgs,\n    DiffDirectoryCommandArgs,\n    DiffWithPreviousCommandArgs,\n    ShowQuickCommitDetailsCommandArgs,\n    StashApplyCommandArgs,\n    StashDeleteCommandArgs\n} from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport {\n    GitFile,\n    GitFileStatus,\n    GitLog,\n    GitLogCommit,\n    GitStashCommit,\n    GitUri,\n    RemoteResourceType\n} from '../git/gitService';\nimport { KeyCommand, KeyNoopCommand, Keys } from '../keyboard';\nimport { Arrays, Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    KeyCommandQuickPickItem,\n    OpenFileCommandQuickPickItem,\n    OpenFilesCommandQuickPickItem,\n    QuickPickItem,\n    ShowCommitInViewQuickPickItem\n} from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\n\nexport class CommitWithFileStatusQuickPickItem extends OpenFileCommandQuickPickItem {\n    readonly status: GitFileStatus;\n\n    readonly commit: GitLogCommit;\n\n    constructor(commit: GitLogCommit, file: GitFile) {\n        const octicon = GitFile.getStatusOcticon(file.status);\n        const description = GitFile.getFormattedDirectory(file, true);\n\n        super(GitUri.toRevisionUri(commit.sha, file, commit.repoPath), {\n            label: `${Strings.pad(octicon, 4, 2)} ${paths.basename(file.fileName)}`,\n            description: description\n        });\n\n        this.commit = commit.toFileCommit(file);\n        this.status = file.status;\n    }\n\n    get sha(): string {\n        return this.commit.sha;\n    }\n\n    onDidPressKey(key: Keys): Thenable<{} | undefined> {\n        if (this.commit.previousSha === undefined) return super.onDidPressKey(key);\n\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n        return commands.executeCommand(Commands.DiffWithPrevious, this.commit.toGitUri(), commandArgs);\n    }\n}\n\nexport class OpenCommitFilesCommandQuickPickItem extends OpenFilesCommandQuickPickItem {\n    constructor(commit: GitLogCommit, versioned: boolean = false, item?: QuickPickItem) {\n        const repoPath = commit.repoPath;\n        const uris = Arrays.filterMap(commit.files, f => GitUri.fromFile(f, repoPath));\n\n        super(\n            uris,\n            item || {\n                label: '$(file-symlink-file) Open Files',\n                description: ''\n                // detail: `Opens all of the changed file in the working tree`\n            }\n        );\n    }\n}\n\nexport class OpenCommitFileRevisionsCommandQuickPickItem extends OpenFilesCommandQuickPickItem {\n    constructor(commit: GitLogCommit, item?: QuickPickItem) {\n        const uris = Arrays.filterMap(commit.files, f =>\n            GitUri.toRevisionUri(f.status === 'D' ? commit.previousFileSha : commit.sha, f, commit.repoPath)\n        );\n\n        super(\n            uris,\n            item || {\n                label: '$(file-symlink-file) Open Revisions',\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} in ${GlyphChars.Space}$(git-commit) ${\n                    commit.shortSha\n                }`\n                // detail: `Opens all of the changed files in $(git-commit) ${commit.shortSha}`\n            }\n        );\n    }\n}\n\nexport class CommitQuickPick {\n    static async show(\n        commit: GitLogCommit,\n        uri: Uri,\n        goBackCommand?: CommandQuickPickItem,\n        currentCommand?: CommandQuickPickItem,\n        repoLog?: GitLog\n    ): Promise<CommitWithFileStatusQuickPickItem | CommandQuickPickItem | undefined> {\n        await commit.resolvePreviousFileSha();\n\n        const items: (CommitWithFileStatusQuickPickItem | CommandQuickPickItem)[] = commit.files.map(\n            fs => new CommitWithFileStatusQuickPickItem(commit, fs)\n        );\n\n        const stash = commit.isStash;\n\n        let index = 0;\n\n        if (stash) {\n            const stashApplyCommmandArgs: StashApplyCommandArgs = {\n                confirm: true,\n                deleteAfter: false,\n                stashItem: commit as GitStashCommit,\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(git-pull-request) Apply Stashed Changes',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${commit.getShortMessage()}`\n                    },\n                    Commands.StashApply,\n                    [stashApplyCommmandArgs]\n                )\n            );\n\n            const stashDeleteCommmandArgs: StashDeleteCommandArgs = {\n                confirm: true,\n                stashItem: commit as GitStashCommit,\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(x) Delete Stashed Changes',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${commit.getShortMessage()}`\n                    },\n                    Commands.StashDelete,\n                    [stashDeleteCommmandArgs]\n                )\n            );\n\n            items.splice(index++, 0, new ShowCommitInViewQuickPickItem(commit));\n        }\n        else {\n            items.splice(index++, 0, new ShowCommitInViewQuickPickItem(commit));\n\n            const remotes = await Container.git.getRemotes(commit.repoPath);\n            if (remotes.length) {\n                items.splice(\n                    index++,\n                    0,\n                    new OpenRemotesCommandQuickPickItem(\n                        remotes,\n                        {\n                            type: RemoteResourceType.Commit,\n                            sha: commit.sha\n                        },\n                        currentCommand\n                    )\n                );\n            }\n        }\n\n        items.splice(index++, 0, new OpenCommitFilesCommandQuickPickItem(commit));\n        items.splice(index++, 0, new OpenCommitFileRevisionsCommandQuickPickItem(commit));\n\n        let diffDirectoryCommmandArgs: DiffDirectoryCommandArgs = {\n            ref1: commit.previousFileSha,\n            ref2: commit.sha\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(git-compare) Open Directory Compare with Previous Revision',\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(git-commit) ${commit.previousFileShortSha} ${\n                        GlyphChars.Space\n                    } $(git-compare) ${GlyphChars.Space} $(git-commit) ${commit.shortSha}`\n                },\n                Commands.DiffDirectory,\n                [commit.uri, diffDirectoryCommmandArgs]\n            )\n        );\n\n        diffDirectoryCommmandArgs = {\n            ref1: commit.sha\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(git-compare) Open Directory Compare with Working Tree',\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} $(git-commit) ${commit.shortSha} ${\n                        GlyphChars.Space\n                    } $(git-compare) ${GlyphChars.Space} $(file-directory) Working Tree`\n                },\n                Commands.DiffDirectory,\n                [uri, diffDirectoryCommmandArgs]\n            )\n        );\n\n        if (!stash) {\n            const copyShaCommandArgs: CopyShaToClipboardCommandArgs = {\n                sha: commit.sha\n            };\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(clippy) Copy Commit ID to Clipboard',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${commit.shortSha}`\n                    },\n                    Commands.CopyShaToClipboard,\n                    [uri, copyShaCommandArgs]\n                )\n            );\n        }\n\n        const copyMessageCommandArgs: CopyMessageToClipboardCommandArgs = {\n            message: commit.message,\n            sha: commit.sha\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(clippy) Copy Commit Message to Clipboard',\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} ${commit.getShortMessage()}`\n                },\n                Commands.CopyMessageToClipboard,\n                [uri, copyMessageCommandArgs]\n            )\n        );\n\n        const commitDetailsCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n            commit: commit,\n            repoLog: repoLog,\n            sha: commit.sha,\n            goBackCommand: goBackCommand\n        };\n        items.splice(\n            index++,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: 'Changed Files',\n                    description: commit.getFormattedDiffStatus()\n                },\n                Commands.ShowQuickCommitDetails,\n                [uri, commitDetailsCommandArgs]\n            )\n        );\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        let previousCommand: KeyCommand | (() => Promise<KeyCommand>) | undefined = undefined;\n        let nextCommand: KeyCommand | (() => Promise<KeyCommand>) | undefined = undefined;\n        if (!stash) {\n            // If we have the full history, we are good\n            if (repoLog !== undefined && !repoLog.truncated && repoLog.sha === undefined) {\n                const previousCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                    repoLog: repoLog,\n                    sha: commit.previousSha,\n                    goBackCommand: goBackCommand\n                };\n                previousCommand =\n                    commit.previousSha === undefined\n                        ? undefined\n                        : new KeyCommandQuickPickItem(Commands.ShowQuickCommitDetails, [\n                              commit.previousUri,\n                              previousCommandArgs\n                          ]);\n\n                const nextCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                    repoLog: repoLog,\n                    sha: commit.nextSha,\n                    goBackCommand: goBackCommand\n                };\n                nextCommand =\n                    commit.nextSha === undefined\n                        ? undefined\n                        : new KeyCommandQuickPickItem(Commands.ShowQuickCommitDetails, [\n                              commit.nextUri,\n                              nextCommandArgs\n                          ]);\n            }\n            else {\n                previousCommand = async () => {\n                    let log = repoLog;\n                    let c = log && log.commits.get(commit.sha);\n\n                    // If we can't find the commit or the previous commit isn't available (since it isn't trustworthy)\n                    if (c === undefined || c.previousSha === undefined) {\n                        log = await Container.git.getLog(commit.repoPath, {\n                            maxCount: Container.config.advanced.maxListItems,\n                            ref: commit.sha\n                        });\n                        c = log && log.commits.get(commit.sha);\n\n                        if (c) {\n                            // Copy over next info, since it is trustworthy at this point\n                            c.nextSha = commit.nextSha;\n                        }\n                    }\n\n                    if (c === undefined || c.previousSha === undefined) return KeyNoopCommand;\n\n                    const previousCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                        repoLog: log,\n                        sha: c.previousSha,\n                        goBackCommand: goBackCommand\n                    };\n                    return new KeyCommandQuickPickItem(Commands.ShowQuickCommitDetails, [\n                        c.previousUri,\n                        previousCommandArgs\n                    ]);\n                };\n\n                nextCommand = async () => {\n                    let log = repoLog;\n                    let c = log && log.commits.get(commit.sha);\n\n                    // If we can't find the commit or the next commit isn't available (since it isn't trustworthy)\n                    if (c === undefined || c.nextSha === undefined) {\n                        log = undefined;\n                        c = undefined;\n\n                        // Try to find the next commit\n                        const nextLog = await Container.git.getLog(commit.repoPath, {\n                            maxCount: 1,\n                            reverse: true,\n                            ref: commit.sha\n                        });\n                        const next = nextLog && Iterables.first(nextLog.commits.values());\n                        if (next !== undefined && next.sha !== commit.sha) {\n                            c = commit;\n                            c.nextSha = next.sha;\n                        }\n                    }\n\n                    if (c === undefined || c.nextSha === undefined) return KeyNoopCommand;\n\n                    const nextCommandArgs: ShowQuickCommitDetailsCommandArgs = {\n                        repoLog: log,\n                        sha: c.nextSha,\n                        goBackCommand: goBackCommand\n                    };\n                    return new KeyCommandQuickPickItem(Commands.ShowQuickCommitDetails, [c.nextUri, nextCommandArgs]);\n                };\n            }\n        }\n\n        const scope = await Container.keyboard.beginScope({\n            left: goBackCommand,\n            ',': previousCommand,\n            '.': nextCommand\n        });\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            matchOnDetail: true,\n            placeHolder: `${commit.shortSha} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                commit.author ? `${commit.author}, ` : ''\n            }${commit.formattedDate} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${commit.getShortMessage()}`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut(),\n            onDidSelectItem: (item: QuickPickItem) => {\n                void scope.setKeyCommand('right', item);\n                if (typeof item.onDidSelect === 'function') {\n                    item.onDidSelect();\n                }\n            }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitLog } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables } from '../system';\nimport {\n    CommandQuickPickItem,\n    CommitQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    MessageQuickPickItem,\n    showQuickPickProgress\n} from './commonQuickPicks';\n\nexport class CommitsQuickPick {\n    static showProgress(message: string) {\n        return showQuickPickProgress(message, {\n            left: KeyNoopCommand,\n            ',': KeyNoopCommand,\n            '.': KeyNoopCommand\n        });\n    }\n\n    static async show(\n        log: GitLog | undefined,\n        placeHolder: string,\n        progressCancellation: CancellationTokenSource,\n        options: {\n            goBackCommand?: CommandQuickPickItem;\n            showAllCommand?: CommandQuickPickItem;\n            showInViewCommand?: CommandQuickPickItem;\n        }\n    ): Promise<CommitQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = ((log && [...Iterables.map(log.commits.values(), c => new CommitQuickPickItem(c))]) || [\n            new MessageQuickPickItem('No results found')\n        ]) as (CommitQuickPickItem | CommandQuickPickItem)[];\n\n        if (options.showInViewCommand !== undefined) {\n            items.splice(0, 0, options.showInViewCommand);\n        }\n\n        if (options.showAllCommand !== undefined) {\n            items.splice(0, 0, options.showAllCommand);\n        }\n\n        if (options.goBackCommand !== undefined) {\n            items.splice(0, 0, options.goBackCommand);\n        }\n\n        if (progressCancellation.token.isCancellationRequested) return undefined;\n\n        const scope = await Container.keyboard.beginScope({ left: options.goBackCommand });\n\n        progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Commands, ShowQuickCurrentBranchHistoryCommandArgs, ShowQuickFileHistoryCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitUri, RemoteResource, RemoteResourceType } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    CommitQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    ShowFileHistoryFromQuickPickItem,\n    showQuickPickProgress\n} from './commonQuickPicks';\nimport { OpenRemotesCommandQuickPickItem } from './remotesQuickPick';\n\nexport class FileHistoryQuickPick {\n    static showProgress(placeHolder: string) {\n        return showQuickPickProgress(placeHolder, {\n            left: KeyNoopCommand,\n            ',': KeyNoopCommand,\n            '.': KeyNoopCommand\n        });\n    }\n\n    static async show(\n        log: GitLog,\n        uri: GitUri,\n        placeHolder: string,\n        options: {\n            currentCommand?: CommandQuickPickItem;\n            goBackCommand?: CommandQuickPickItem;\n            nextPageCommand?: CommandQuickPickItem;\n            previousPageCommand?: CommandQuickPickItem;\n            pickerOnly?: boolean;\n            progressCancellation?: CancellationTokenSource;\n            showAllCommand?: CommandQuickPickItem;\n            showInViewCommand?: CommandQuickPickItem;\n        } = {}\n    ): Promise<CommitQuickPickItem | CommandQuickPickItem | undefined> {\n        options = { pickerOnly: false, ...options };\n\n        const items = Array.from(Iterables.map(log.commits.values(), c => new CommitQuickPickItem(c))) as (\n            | CommitQuickPickItem\n            | CommandQuickPickItem)[];\n\n        let index = 0;\n\n        index++;\n        items.splice(0, 0, new ShowFileHistoryFromQuickPickItem(log.repoPath, placeHolder, options.currentCommand));\n\n        if (options.showInViewCommand !== undefined) {\n            index++;\n            items.splice(0, 0, options.showInViewCommand);\n        }\n\n        if (log.truncated || log.sha) {\n            if (options.showAllCommand !== undefined) {\n                index++;\n                items.splice(0, 0, options.showAllCommand);\n            }\n            else if (!options.pickerOnly) {\n                const [workingFileName] = await Container.git.findWorkingFileName(\n                    paths.relative(log.repoPath, uri.fsPath),\n                    log.repoPath\n                );\n                if (workingFileName) {\n                    const goBackCommandArgs: ShowQuickFileHistoryCommandArgs = {\n                        log: log,\n                        maxCount: log.maxCount,\n                        range: log.range,\n                        goBackCommand: options.goBackCommand\n                    };\n\n                    const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                        goBackCommand: new CommandQuickPickItem(\n                            {\n                                label: `go back ${GlyphChars.ArrowBack}`,\n                                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to history of ${\n                                    GlyphChars.Space\n                                }$(file-text) ${paths.basename(uri.fsPath)}${\n                                    uri.sha ? ` from ${GlyphChars.Space}$(git-commit) ${uri.shortSha}` : ''\n                                }`\n                            },\n                            Commands.ShowQuickFileHistory,\n                            [uri, goBackCommandArgs]\n                        )\n                    };\n\n                    index++;\n                    items.splice(\n                        0,\n                        0,\n                        new CommandQuickPickItem(\n                            {\n                                label: '$(history) Show File History',\n                                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} of ${paths.basename(\n                                    workingFileName\n                                )}`\n                            },\n                            Commands.ShowQuickFileHistory,\n                            [GitUri.resolveToUri(workingFileName, log.repoPath), commandArgs]\n                        )\n                    );\n                }\n            }\n\n            if (options.nextPageCommand !== undefined) {\n                index++;\n                items.splice(0, 0, options.nextPageCommand);\n            }\n\n            if (options.previousPageCommand !== undefined) {\n                index++;\n                items.splice(0, 0, options.previousPageCommand);\n            }\n        }\n\n        if (!options.pickerOnly) {\n            const branch = await Container.git.getBranch(uri.repoPath!);\n\n            if (branch !== undefined) {\n                const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                    log: log,\n                    maxCount: log.maxCount,\n                    range: log.range\n                };\n\n                const currentCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to history of ${\n                            GlyphChars.Space\n                        }$(file-text) ${paths.basename(uri.fsPath)}${\n                            uri.sha ? ` from ${GlyphChars.Space}$(git-commit) ${uri.shortSha}` : ''\n                        }`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [uri, commandArgs]\n                );\n\n                // Only show the full repo option if we are the root\n                if (options.goBackCommand === undefined) {\n                    const commandArgs: ShowQuickCurrentBranchHistoryCommandArgs = {\n                        goBackCommand: currentCommand\n                    };\n                    items.splice(\n                        index++,\n                        0,\n                        new CommandQuickPickItem(\n                            {\n                                label: '$(history) Show Branch History',\n                                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows  ${\n                                    GlyphChars.Space\n                                }$(git-branch) ${branch.name} history`\n                            },\n                            Commands.ShowQuickCurrentBranchHistory,\n                            [undefined, commandArgs]\n                        )\n                    );\n                }\n\n                const remotes = await Container.git.getRemotes(uri.repoPath!);\n                if (remotes.length) {\n                    const resource: RemoteResource =\n                        uri.sha !== undefined\n                            ? {\n                                  type: RemoteResourceType.Revision,\n                                  branch: branch.name,\n                                  fileName: uri.getRelativePath(),\n                                  sha: uri.sha\n                              }\n                            : {\n                                  type: RemoteResourceType.File,\n                                  branch: branch.name,\n                                  fileName: uri.getRelativePath()\n                              };\n                    items.splice(index++, 0, new OpenRemotesCommandQuickPickItem(remotes, resource, currentCommand));\n                }\n            }\n\n            if (options.goBackCommand) {\n                items.splice(0, 0, options.goBackCommand);\n            }\n        }\n\n        if (options.progressCancellation !== undefined && options.progressCancellation.token.isCancellationRequested) {\n            return undefined;\n        }\n\n        const scope = await Container.keyboard.beginScope({\n            left: options.goBackCommand,\n            ',': options.previousPageCommand,\n            '.': options.nextPageCommand\n        });\n\n        options.progressCancellation && options.progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            matchOnDetail: true,\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { QuickPickItem, window } from 'vscode';\nimport { Container } from '../container';\nimport { Repository } from '../git/gitService';\nimport { Iterables } from '../system';\nimport { CommandQuickPickItem, getQuickPickIgnoreFocusOut } from './commonQuickPicks';\n\nexport class RepositoryQuickPickItem implements QuickPickItem {\n    label: string;\n    description: string;\n    detail: string | undefined;\n\n    constructor(public readonly repository: Repository) {\n        this.label = repository.name;\n        this.description = repository.path;\n    }\n\n    get repoPath(): string {\n        return this.repository.path;\n    }\n}\n\nexport class RepositoriesQuickPick {\n    static async show(\n        placeHolder: string,\n        goBackCommand?: CommandQuickPickItem\n    ): Promise<RepositoryQuickPickItem | CommandQuickPickItem | undefined> {\n        const items = [\n            ...Iterables.map(await Container.git.getOrderedRepositories(), r => new RepositoryQuickPickItem(r))\n        ] as (RepositoryQuickPickItem | CommandQuickPickItem)[];\n\n        if (goBackCommand !== undefined) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        // const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        const pick = await window.showQuickPick(items, {\n            placeHolder: placeHolder,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n        });\n\n        // await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, window } from 'vscode';\nimport {\n    Commands,\n    DiffWithPreviousCommandArgs,\n    OpenChangedFilesCommandArgs,\n    ShowQuickBranchHistoryCommandArgs,\n    ShowQuickRepoStatusCommandArgs,\n    ShowQuickStashListCommandArgs\n} from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport {\n    GitCommitType,\n    GitFileStatus,\n    GitLogCommit,\n    GitService,\n    GitStatus,\n    GitStatusFile,\n    GitUri\n} from '../git/gitService';\nimport { Keys } from '../keyboard';\nimport { Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    OpenFileCommandQuickPickItem,\n    QuickPickItem\n} from './commonQuickPicks';\n\nexport class OpenStatusFileCommandQuickPickItem extends OpenFileCommandQuickPickItem {\n    readonly status: GitStatusFile;\n    private readonly commit: GitLogCommit;\n\n    constructor(status: GitStatusFile, realIndexStatus?: GitFileStatus, item?: QuickPickItem) {\n        const octicon = status.getOcticon();\n        const description = status.getFormattedDirectory(true);\n\n        super(\n            status.uri,\n            item || {\n                label: `${status.staged ? '$(check)' : GlyphChars.Space.repeat(3)}${Strings.pad(\n                    octicon,\n                    2,\n                    2\n                )} ${paths.basename(status.fileName)}`,\n                description: description\n            }\n        );\n\n        this.status = status;\n        if (status.indexStatus !== undefined) {\n            this.commit = new GitLogCommit(\n                GitCommitType.File,\n                status.repoPath,\n                GitService.stagedUncommittedSha,\n                'You',\n                undefined,\n                new Date(),\n                new Date(),\n                '',\n                status.fileName,\n                [status],\n                status.status,\n                status.originalFileName,\n                'HEAD',\n                status.fileName\n            );\n        }\n        else {\n            this.commit = new GitLogCommit(\n                GitCommitType.File,\n                status.repoPath,\n                GitService.uncommittedSha,\n                'You',\n                undefined,\n                new Date(),\n                new Date(),\n                '',\n                status.fileName,\n                [status],\n                status.status,\n                status.originalFileName,\n                realIndexStatus !== undefined ? GitService.stagedUncommittedSha : 'HEAD',\n                status.fileName\n            );\n        }\n    }\n\n    onDidPressKey(key: Keys): Promise<{} | undefined> {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n        return commands.executeCommand(\n            Commands.DiffWithPrevious,\n            GitUri.fromFile(this.status, this.status.repoPath),\n            commandArgs\n        ) as Promise<{} | undefined>;\n    }\n}\n\nexport class OpenStatusFilesCommandQuickPickItem extends CommandQuickPickItem {\n    constructor(files: GitStatusFile[], item?: QuickPickItem) {\n        const uris = files.map(f => f.uri);\n        const commandArgs: OpenChangedFilesCommandArgs = {\n            uris: uris\n        };\n\n        super(\n            item || {\n                label: '$(file-symlink-file) Open Changed Files',\n                description: ''\n                // detail: `Opens all of the changed files in the repository`\n            },\n            Commands.OpenChangedFiles,\n            [undefined, commandArgs]\n        );\n    }\n}\n\ninterface ComputedStatus {\n    staged: number;\n    stagedAddsAndChanges: GitStatusFile[];\n    stagedStatus: string;\n\n    unstaged: number;\n    unstagedAddsAndChanges: GitStatusFile[];\n    unstagedStatus: string;\n}\n\nexport class RepoStatusQuickPick {\n    private static computeStatus(files: GitStatusFile[]): ComputedStatus {\n        let stagedAdds = 0;\n        let unstagedAdds = 0;\n        let stagedChanges = 0;\n        let unstagedChanges = 0;\n        let stagedDeletes = 0;\n        let unstagedDeletes = 0;\n\n        const stagedAddsAndChanges: GitStatusFile[] = [];\n        const unstagedAddsAndChanges: GitStatusFile[] = [];\n\n        for (const f of files) {\n            switch (f.indexStatus) {\n                case 'A':\n                case '?':\n                    stagedAdds++;\n                    stagedAddsAndChanges.push(f);\n                    break;\n\n                case 'D':\n                    stagedDeletes++;\n                    break;\n\n                case undefined:\n                    break;\n\n                default:\n                    stagedChanges++;\n                    stagedAddsAndChanges.push(f);\n                    break;\n            }\n\n            switch (f.workingTreeStatus) {\n                case 'A':\n                case '?':\n                    unstagedAdds++;\n                    unstagedAddsAndChanges.push(f);\n                    break;\n\n                case 'D':\n                    unstagedDeletes++;\n                    break;\n\n                case undefined:\n                    break;\n\n                default:\n                    unstagedChanges++;\n                    unstagedAddsAndChanges.push(f);\n                    break;\n            }\n        }\n\n        const staged = stagedAdds + stagedChanges + stagedDeletes;\n        const unstaged = unstagedAdds + unstagedChanges + unstagedDeletes;\n\n        return {\n            staged: staged,\n            stagedStatus: staged > 0 ? `+${stagedAdds} ~${stagedChanges} -${stagedDeletes}` : '',\n            stagedAddsAndChanges: stagedAddsAndChanges,\n            unstaged: unstaged,\n            unstagedStatus: unstaged > 0 ? `+${unstagedAdds} ~${unstagedChanges} -${unstagedDeletes}` : '',\n            unstagedAddsAndChanges: unstagedAddsAndChanges\n        };\n    }\n\n    static async show(\n        status: GitStatus,\n        goBackCommand?: CommandQuickPickItem\n    ): Promise<\n        OpenStatusFileCommandQuickPickItem | OpenStatusFilesCommandQuickPickItem | CommandQuickPickItem | undefined\n    > {\n        const items = [\n            ...Iterables.flatMap(status.files, s => {\n                if (s.workingTreeStatus !== undefined && s.indexStatus !== undefined) {\n                    return [\n                        new OpenStatusFileCommandQuickPickItem(s.with({ indexStatus: null }), s.indexStatus),\n                        new OpenStatusFileCommandQuickPickItem(s.with({ workTreeStatus: null }))\n                    ];\n                }\n\n                return [new OpenStatusFileCommandQuickPickItem(s)];\n            })\n        ] as (OpenStatusFileCommandQuickPickItem | OpenStatusFilesCommandQuickPickItem | CommandQuickPickItem)[];\n\n        // Sort the status by staged and then filename\n        items.sort(\n            (a, b) =>\n                ((a as OpenStatusFileCommandQuickPickItem).status.staged ? -1 : 1) -\n                    ((b as OpenStatusFileCommandQuickPickItem).status.staged ? -1 : 1) ||\n                (a as OpenStatusFileCommandQuickPickItem).status.fileName.localeCompare(\n                    (b as OpenStatusFileCommandQuickPickItem).status.fileName,\n                    undefined,\n                    { numeric: true, sensitivity: 'base' }\n                )\n        );\n\n        const repoStatusCommandArgs: ShowQuickRepoStatusCommandArgs = {\n            goBackCommand: goBackCommand\n        };\n        const currentCommand = new CommandQuickPickItem(\n            {\n                label: `go back ${GlyphChars.ArrowBack}`,\n                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to ${GlyphChars.Space}$(git-branch) ${\n                    status.branch\n                } status`\n            },\n            Commands.ShowQuickRepoStatus,\n            [undefined, repoStatusCommandArgs]\n        );\n\n        const computed = this.computeStatus(status.files);\n        if (computed.staged > 0) {\n            let index = 0;\n            const unstagedIndex = computed.unstaged > 0 ? status.files.findIndex(f => !f.staged) : -1;\n            if (unstagedIndex > -1) {\n                items.splice(\n                    unstagedIndex,\n                    0,\n                    new CommandQuickPickItem(\n                        {\n                            label: 'Unstaged Files',\n                            description: computed.unstagedStatus\n                        },\n                        Commands.ShowQuickRepoStatus,\n                        [undefined, repoStatusCommandArgs]\n                    )\n                );\n\n                items.splice(\n                    unstagedIndex,\n                    0,\n                    new OpenStatusFilesCommandQuickPickItem(computed.stagedAddsAndChanges, {\n                        label: `${GlyphChars.Space.repeat(4)} $(file-symlink-file) Open Staged Files`,\n                        description: ''\n                    })\n                );\n\n                items.push(\n                    new OpenStatusFilesCommandQuickPickItem(computed.unstagedAddsAndChanges, {\n                        label: `${GlyphChars.Space.repeat(4)} $(file-symlink-file) Open Unstaged Files`,\n                        description: ''\n                    })\n                );\n            }\n\n            items.splice(\n                index++,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: 'Staged Files',\n                        description: computed.stagedStatus\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n        else if (status.files.some(f => !f.staged)) {\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: 'Unstaged Files',\n                        description: computed.unstagedStatus\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n\n        if (status.files.length) {\n            items.push(\n                new OpenStatusFilesCommandQuickPickItem(\n                    computed.stagedAddsAndChanges.concat(computed.unstagedAddsAndChanges)\n                )\n            );\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: '$(x) Close Unchanged Files',\n                        description: ''\n                    },\n                    Commands.CloseUnchangedFiles\n                )\n            );\n        }\n        else {\n            items.push(\n                new CommandQuickPickItem(\n                    {\n                        label: 'No changes in the working tree',\n                        description: ''\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n\n        const stashListCommandArgs: ShowQuickStashListCommandArgs = {\n            goBackCommand: currentCommand\n        };\n        items.splice(\n            0,\n            0,\n            new CommandQuickPickItem(\n                {\n                    label: '$(inbox) Show Stashed Changes',\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows stashed changes in the repository`\n                },\n                Commands.ShowQuickStashList,\n                [GitUri.fromRepoPath(status.repoPath), stashListCommandArgs]\n            )\n        );\n\n        if (status.upstream && status.state.ahead) {\n            const branchHistoryCommandArgs: ShowQuickBranchHistoryCommandArgs = {\n                branch: status.ref,\n                maxCount: 0,\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: `$(cloud-upload)${GlyphChars.Space} ${status.state.ahead} Commit${\n                            status.state.ahead > 1 ? 's' : ''\n                        } ahead of ${GlyphChars.Space}$(git-branch) ${status.upstream}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows commits in ${\n                            GlyphChars.Space\n                        }$(git-branch) ${status.branch} but not ${GlyphChars.Space}$(git-branch) ${status.upstream}`\n                    },\n                    Commands.ShowQuickBranchHistory,\n                    [\n                        GitUri.fromRepoPath(status.repoPath, `${status.upstream}..${status.ref}`),\n                        branchHistoryCommandArgs\n                    ]\n                )\n            );\n        }\n\n        if (status.upstream && status.state.behind) {\n            const branchHistoryCommandArgs: ShowQuickBranchHistoryCommandArgs = {\n                branch: status.ref,\n                maxCount: 0,\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: `$(cloud-download)${GlyphChars.Space} ${status.state.behind} Commit${\n                            status.state.behind > 1 ? 's' : ''\n                        } behind ${GlyphChars.Space}$(git-branch) ${status.upstream}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows commits in ${\n                            GlyphChars.Space\n                        }$(git-branch) ${status.upstream} but not ${GlyphChars.Space}$(git-branch) ${status.branch}${\n                            status.sha\n                                ? ` (since ${GlyphChars.Space}$(git-commit) ${GitService.shortenSha(status.sha)})`\n                                : ''\n                        }`\n                    },\n                    Commands.ShowQuickBranchHistory,\n                    [\n                        GitUri.fromRepoPath(status.repoPath, `${status.ref}..${status.upstream}`),\n                        branchHistoryCommandArgs\n                    ]\n                )\n            );\n        }\n\n        if (status.upstream && !status.state.ahead && !status.state.behind) {\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: `$(git-branch) ${status.branch} is up-to-date with ${GlyphChars.Space}$(git-branch) ${\n                            status.upstream\n                        }`,\n                        description: ''\n                    },\n                    Commands.ShowQuickRepoStatus,\n                    [undefined, repoStatusCommandArgs]\n                )\n            );\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder: `status of ${status.branch}${\n                status.upstream ? ` ${Strings.pad(GlyphChars.ArrowLeftRightLong, 1, 1)} ${status.upstream}` : ''\n            }`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut(),\n            onDidSelectItem: (item: QuickPickItem) => {\n                void scope.setKeyCommand('right', item);\n            }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, window } from 'vscode';\nimport { Commands, StashSaveCommandArgs } from '../commands';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitStash, GitStashCommit } from '../git/gitService';\nimport { KeyNoopCommand } from '../keyboard';\nimport { Iterables, Strings } from '../system';\nimport {\n    CommandQuickPickItem,\n    CommitQuickPickItem,\n    getQuickPickIgnoreFocusOut,\n    showQuickPickProgress\n} from './commonQuickPicks';\n\nexport class StashListQuickPick {\n    static showProgress(mode: 'list' | 'apply') {\n        const message =\n            mode === 'apply'\n                ? `Apply stashed changes to your working tree${GlyphChars.Ellipsis}`\n                : `stashed changes ${GlyphChars.Dash} search by message, filename, or commit id`;\n        return showQuickPickProgress(message, {\n            left: KeyNoopCommand,\n            ',': KeyNoopCommand,\n            '.': KeyNoopCommand\n        });\n    }\n\n    static async show(\n        stash: GitStash,\n        mode: 'list' | 'apply',\n        progressCancellation: CancellationTokenSource,\n        goBackCommand?: CommandQuickPickItem,\n        currentCommand?: CommandQuickPickItem\n    ): Promise<CommitQuickPickItem<GitStashCommit> | CommandQuickPickItem | undefined> {\n        const items = ((stash &&\n            Array.from(Iterables.map(stash.commits.values(), c => new CommitQuickPickItem<GitStashCommit>(c)))) ||\n            []) as (CommitQuickPickItem<GitStashCommit> | CommandQuickPickItem)[];\n\n        if (mode === 'list') {\n            const commandArgs: StashSaveCommandArgs = {\n                goBackCommand: currentCommand\n            };\n            items.splice(\n                0,\n                0,\n                new CommandQuickPickItem(\n                    {\n                        label: '$(plus) Stash Changes',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} stashes all changes`\n                    },\n                    Commands.StashSave,\n                    [commandArgs]\n                )\n            );\n        }\n\n        if (goBackCommand) {\n            items.splice(0, 0, goBackCommand);\n        }\n\n        if (progressCancellation.token.isCancellationRequested) return undefined;\n\n        const scope = await Container.keyboard.beginScope({ left: goBackCommand });\n\n        progressCancellation.cancel();\n\n        const pick = await window.showQuickPick(items, {\n            matchOnDescription: true,\n            placeHolder:\n                mode === 'apply'\n                    ? `Apply stashed changes to your working tree${GlyphChars.Ellipsis}`\n                    : `stashed changes ${GlyphChars.Dash} search by message, filename, or commit id`,\n            ignoreFocusOut: getQuickPickIgnoreFocusOut()\n            // onDidSelectItem: (item: QuickPickItem) => {\n            //     scope.setKeyCommand('right', item);\n            // }\n        });\n\n        await scope.dispose();\n\n        return pick;\n    }\n}\n","'use strict';\nimport { Disposable, TextEditor, TreeItem, TreeItemCollapsibleState, window } from 'vscode';\nimport { UriComparer } from '../../comparers';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitCommitish, GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../../quickpicks';\nimport { debug, Functions, gate, log } from '../../system';\nimport { FileHistoryView } from '../fileHistoryView';\nimport { MessageNode } from './common';\nimport { FileHistoryNode } from './fileHistoryNode';\nimport { ResourceType, SubscribeableViewNode, unknownGitUri, ViewNode } from './viewNode';\n\nexport class FileHistoryTrackerNode extends SubscribeableViewNode<FileHistoryView> {\n    private _baseRef: string | undefined;\n    private _fileUri: GitUri | undefined;\n    private _child: FileHistoryNode | undefined;\n\n    constructor(view: FileHistoryView) {\n        super(unknownGitUri, view);\n    }\n\n    dispose() {\n        super.dispose();\n\n        this.resetChild();\n    }\n\n    @debug()\n    private resetChild() {\n        if (this._child === undefined) return;\n\n        this._child.dispose();\n        this._child = undefined;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._child === undefined) {\n            if (this._fileUri === undefined && this.uri === unknownGitUri) {\n                return [\n                    new MessageNode(\n                        this.view,\n                        this,\n                        'There are no editors open that can provide file history information.'\n                    )\n                ];\n            }\n\n            const uri = this._fileUri || this.uri;\n            const commitish: GitCommitish = { ...uri, repoPath: uri.repoPath!, sha: this._baseRef || uri.sha };\n            const fileUri = new GitUri(uri, commitish);\n            this._child = new FileHistoryNode(fileUri, this.view, this);\n        }\n\n        return [this._child];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('File History', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.ActiveFileHistory;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @gate()\n    @log()\n    async changeBase() {\n        const pick = await new ReferencesQuickPick(this.uri.repoPath!).show(\n            `Change the file history base to${GlyphChars.Ellipsis}`,\n            {\n                allowEnteringRefs: true,\n                checked: this._baseRef\n            }\n        );\n        if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n        this._baseRef = pick.current ? undefined : pick.ref;\n        if (this._child === undefined) return;\n\n        this._uri = unknownGitUri;\n        await this.triggerChange();\n    }\n\n    @gate()\n    @debug({\n        exit: r => `returned ${r}`\n    })\n    async refresh(reset: boolean = false) {\n        const cc = Logger.getCorrelationContext();\n\n        if (reset) {\n            this._uri = unknownGitUri;\n            this.resetChild();\n        }\n\n        const editor = window.activeTextEditor;\n        if (editor == null || !Container.git.isTrackable(editor.document.uri)) {\n            if (\n                this.uri === unknownGitUri ||\n                (Container.git.isTrackable(this.uri) &&\n                    window.visibleTextEditors.some(e => e.document && UriComparer.equals(e.document.uri, this.uri)))\n            ) {\n                return true;\n            }\n\n            this._uri = unknownGitUri;\n            this.resetChild();\n\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return false;\n        }\n\n        if (UriComparer.equals(editor!.document.uri, this.uri)) {\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return true;\n        }\n\n        let gitUri = await GitUri.fromUri(editor!.document.uri);\n\n        let uri;\n        if (gitUri.sha !== undefined) {\n            // If we have a sha, normalize the history to the working file (so we get a full history all the time)\n            const [fileName, repoPath] = await Container.git.findWorkingFileName(\n                gitUri.fsPath,\n                gitUri.repoPath,\n                gitUri.sha\n            );\n\n            if (fileName !== undefined) {\n                uri = GitUri.resolveToUri(fileName, repoPath);\n            }\n        }\n\n        if (this.uri !== unknownGitUri && UriComparer.equals(uri || gitUri, this.uri)) {\n            return true;\n        }\n\n        if (uri !== undefined) {\n            gitUri = await GitUri.fromUri(uri);\n        }\n\n        this._uri = gitUri;\n        this.resetChild();\n\n        if (cc !== undefined) {\n            cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n        }\n        return false;\n    }\n\n    @log()\n    setEditorFollowing(enabled: boolean) {\n        if (enabled && this._fileUri !== undefined) {\n            this._fileUri = undefined;\n            this._baseRef = undefined;\n\n            this._uri = unknownGitUri;\n            // Don't need to call triggerChange here, since canSubscribe will do it\n        }\n\n        this.canSubscribe = enabled;\n    }\n\n    @gate()\n    @log()\n    async showHistoryForUri(uri: GitUri, baseRef?: string) {\n        this._fileUri = uri;\n        this._baseRef = baseRef;\n\n        this._uri = unknownGitUri;\n        await this.triggerChange();\n    }\n\n    @debug()\n    protected subscribe() {\n        return Disposable.from(\n            window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveEditorChanged, 500), this)\n        );\n    }\n\n    @debug({ args: false })\n    private onActiveEditorChanged(editor: TextEditor | undefined) {\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { Disposable, Selection, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitCommitType, GitFile, GitLogCommit } from '../../git/git';\nimport {\n    GitService,\n    GitUri,\n    RepositoryChange,\n    RepositoryChangeEvent,\n    RepositoryFileSystemChangeEvent\n} from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { CommitFileNode, CommitFileNodeDisplayAs } from './commitFileNode';\nimport { MessageNode } from './common';\nimport { insertDateMarkers } from './helpers';\nimport { ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nexport class LineHistoryNode extends SubscribeableViewNode {\n    constructor(uri: GitUri, view: View, parent: ViewNode, public readonly selection: Selection) {\n        super(uri, view, parent);\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const children: ViewNode[] = [];\n\n        const displayAs =\n            CommitFileNodeDisplayAs.CommitLabel |\n            (this.view.config.avatars ? CommitFileNodeDisplayAs.Gravatar : CommitFileNodeDisplayAs.StatusIcon);\n\n        const log = await Container.git.getLogForFile(this.uri.repoPath, this.uri.fsPath, {\n            ref: this.uri.sha,\n            range: this.selection\n        });\n        if (log !== undefined) {\n            children.push(\n                ...insertDateMarkers(\n                    Iterables.filterMap(\n                        log.commits.values(),\n                        c => new CommitFileNode(this.view, this, c.files[0], c, displayAs, this.selection)\n                    ),\n                    this\n                )\n            );\n        }\n\n        const blame = await Container.git.getBlameForLine(this.uri, this.selection.active.line);\n        if (blame !== undefined) {\n            let first = children[0] as CommitFileNode | undefined;\n            if (first !== undefined && !(first instanceof CommitFileNode)) {\n                first = children[1] as CommitFileNode | undefined;\n            }\n\n            if (first === undefined || first.commit.sha !== blame.commit.sha) {\n                const file: GitFile = {\n                    fileName: blame.commit.fileName,\n                    indexStatus: '?',\n                    originalFileName: blame.commit.originalFileName,\n                    repoPath: this.uri.repoPath!,\n                    status: 'M',\n                    workingTreeStatus: '?'\n                };\n\n                const commit = new GitLogCommit(\n                    GitCommitType.File,\n                    this.uri.repoPath!,\n                    blame.commit.sha,\n                    'You',\n                    blame.commit.email,\n                    blame.commit.date,\n                    // TODO: Add committed date to blame?\n                    blame.commit.date,\n                    blame.commit.message,\n                    blame.commit.fileName,\n                    [file],\n                    'M',\n                    blame.commit.originalFileName,\n                    blame.commit.previousSha,\n                    blame.commit.originalFileName || blame.commit.fileName\n                );\n\n                children.splice(0, 0, new CommitFileNode(this.view, this, file, commit, displayAs, this.selection));\n            }\n        }\n\n        if (children.length === 0) return [new MessageNode(this.view, this, 'No line history could be found.')];\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const lines = this.selection.isSingleLine\n            ? ` #${this.selection.start.line + 1}`\n            : ` #${this.selection.start.line + 1}-${this.selection.end.line + 1}`;\n        const item = new TreeItem(\n            `${this.uri.getFilename()}${lines}${\n                this.uri.sha\n                    ? ` ${\n                          this.uri.sha === GitService.deletedOrMissingSha ? this.uri.shortSha : `(${this.uri.shortSha})`\n                      }`\n                    : ''\n            }`,\n            TreeItemCollapsibleState.Expanded\n        );\n        item.contextValue = ResourceType.LineHistory;\n        item.description = this.uri.getDirectory();\n        item.tooltip = `History of ${this.uri.getFilename()}${lines}\\n${this.uri.getDirectory()}/${\n            this.uri.sha === undefined ? '' : `\\n\\n${this.uri.sha}`\n        }`;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-history.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-history.svg')\n        };\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @debug()\n    protected async subscribe() {\n        const repo = await Container.git.getRepository(this.uri);\n        if (repo === undefined) return undefined;\n\n        const subscription = Disposable.from(\n            repo.onDidChange(this.onRepoChanged, this),\n            repo.onDidChangeFileSystem(this.onRepoFileSystemChanged, this),\n            { dispose: () => repo.stopWatchingFileSystem() }\n        );\n\n        repo.startWatchingFileSystem();\n\n        return subscription;\n    }\n\n    private onRepoChanged(e: RepositoryChangeEvent) {\n        if (!e.changed(RepositoryChange.Repository)) return;\n\n        Logger.log(`LineHistoryNode.onRepoChanged(${e.changes.join()}); triggering node refresh`);\n\n        void this.triggerChange();\n    }\n\n    private onRepoFileSystemChanged(e: RepositoryFileSystemChangeEvent) {\n        if (!e.uris.some(uri => uri.toString(true) === this.uri.toString(true))) return;\n\n        Logger.debug(`LineHistoryNode.onRepoFileSystemChanged(${this.uri.toString(true)}); triggering node refresh`);\n\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { Disposable, Selection, TreeItem, TreeItemCollapsibleState, window } from 'vscode';\nimport { UriComparer } from '../../comparers';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitCommitish, GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../../quickpicks';\nimport { debug, Functions, gate, log } from '../../system';\nimport { LinesChangeEvent } from '../../trackers/gitLineTracker';\nimport { LineHistoryView } from '../lineHistoryView';\nimport { MessageNode } from './common';\nimport { LineHistoryNode } from './lineHistoryNode';\nimport { ResourceType, SubscribeableViewNode, unknownGitUri, ViewNode } from './viewNode';\n\nexport class LineHistoryTrackerNode extends SubscribeableViewNode<LineHistoryView> {\n    private _base: string | undefined;\n    private _child: LineHistoryNode | undefined;\n    private _selection: Selection | undefined;\n\n    constructor(view: LineHistoryView) {\n        super(unknownGitUri, view);\n    }\n\n    dispose() {\n        super.dispose();\n\n        this.resetChild();\n    }\n\n    @debug()\n    private resetChild() {\n        if (this._child === undefined) return;\n\n        this._child.dispose();\n        this._child = undefined;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._child === undefined) {\n            if (this.uri === unknownGitUri) {\n                return [\n                    new MessageNode(\n                        this.view,\n                        this,\n                        'There are no editors open that can provide line history information.'\n                    )\n                ];\n            }\n\n            const commitish: GitCommitish = {\n                ...this.uri,\n                repoPath: this.uri.repoPath!,\n                sha: this.uri.sha || this._base\n            };\n            const fileUri = new GitUri(this.uri, commitish);\n            this._child = new LineHistoryNode(fileUri, this.view, this, this._selection!);\n        }\n\n        return [this._child];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Line History', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.ActiveLineHistory;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @gate()\n    @log()\n    async changeBase() {\n        const pick = await new ReferencesQuickPick(this.uri.repoPath!).show(\n            `Change the line history base to${GlyphChars.Ellipsis}`,\n            {\n                allowEnteringRefs: true,\n                checked: this._base\n            }\n        );\n        if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n        this._base = pick.current ? undefined : pick.ref;\n        if (this._child === undefined) return;\n\n        this._uri = unknownGitUri;\n        await this.triggerChange();\n    }\n\n    @gate()\n    @debug()\n    async refresh(reset: boolean = false) {\n        const cc = Logger.getCorrelationContext();\n\n        if (reset) {\n            this._uri = unknownGitUri;\n            this._selection = undefined;\n            this.resetChild();\n        }\n\n        const editor = window.activeTextEditor;\n        if (editor == null || !Container.git.isTrackable(editor.document.uri)) {\n            if (\n                this.uri === unknownGitUri ||\n                (Container.git.isTrackable(this.uri) &&\n                    window.visibleTextEditors.some(e => e.document && UriComparer.equals(e.document.uri, this.uri)))\n            ) {\n                return true;\n            }\n\n            this._uri = unknownGitUri;\n            this._selection = undefined;\n            this.resetChild();\n\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return false;\n        }\n\n        if (\n            UriComparer.equals(editor!.document.uri, this.uri) &&\n            (this._selection !== undefined && editor.selection.isEqual(this._selection))\n        ) {\n            if (cc !== undefined) {\n                cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n            }\n            return true;\n        }\n\n        const gitUri = await GitUri.fromUri(editor!.document.uri);\n\n        if (\n            this.uri !== unknownGitUri &&\n            UriComparer.equals(gitUri, this.uri) &&\n            (this._selection !== undefined && editor.selection.isEqual(this._selection))\n        ) {\n            return true;\n        }\n\n        this._uri = gitUri;\n        this._selection = editor.selection;\n        this.resetChild();\n\n        if (cc !== undefined) {\n            cc.exitDetails = `, uri=${Logger.toLoggable(this._uri)}`;\n        }\n        return false;\n    }\n\n    @log()\n    setEditorFollowing(enabled: boolean) {\n        this.canSubscribe = enabled;\n    }\n\n    @debug()\n    protected subscribe() {\n        if (Container.lineTracker.isSubscribed(this)) return undefined;\n\n        const onActiveLinesChanged = Functions.debounce(this.onActiveLinesChanged.bind(this), 250);\n\n        return Container.lineTracker.start(\n            this,\n            Disposable.from(\n                Container.lineTracker.onDidChangeActiveLines((e: LinesChangeEvent) => {\n                    if (e.pending) return;\n\n                    onActiveLinesChanged(e);\n                })\n            )\n        );\n    }\n\n    @debug({ args: false })\n    private onActiveLinesChanged(e: LinesChangeEvent) {\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { GitRemote, GitRemoteType, GitUri, Repository } from '../../git/gitService';\nimport { Arrays, Iterables, log } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchNode } from './branchNode';\nimport { BranchOrTagFolderNode } from './branchOrTagFolderNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class RemoteNode extends ViewNode<RepositoriesView> {\n    constructor(\n        uri: GitUri,\n        view: RepositoriesView,\n        parent: ViewNode,\n        public readonly remote: GitRemote,\n        public readonly repo: Repository\n    ) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.remote.repoPath}):remote(${this.remote.name}:${\n            this.remote.id\n        })`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const branches = await this.repo.getBranches();\n        if (branches === undefined) return [];\n\n        branches.sort(\n            (a, b) =>\n                (a.starred ? -1 : 1) - (b.starred ? -1 : 1) ||\n                a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n        );\n\n        // filter remote branches\n        const branchNodes = [\n            ...Iterables.filterMap(branches, b =>\n                !b.remote || !b.name.startsWith(this.remote.name)\n                    ? undefined\n                    : new BranchNode(this.uri, this.view, this, b)\n            )\n        ];\n        if (this.view.config.branches.layout === ViewBranchesLayout.List) return branchNodes;\n\n        const hierarchy = Arrays.makeHierarchical(\n            branchNodes,\n            n => n.treeHierarchy,\n            (...paths: string[]) => paths.join('/'),\n            this.view.config.files.compact\n        );\n\n        const root = new BranchOrTagFolderNode(\n            this.view,\n            this,\n            'remote-branch',\n            this.repo.path,\n            '',\n            undefined,\n            hierarchy\n        );\n        const children = (await root.getChildren()) as (BranchOrTagFolderNode | BranchNode)[];\n\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const fetch = this.remote.types.find(rt => rt.type === GitRemoteType.Fetch);\n        const push = this.remote.types.find(rt => rt.type === GitRemoteType.Push);\n\n        let separator;\n        if (fetch && push) {\n            separator = GlyphChars.ArrowLeftRightLong;\n        }\n        else if (fetch) {\n            separator = GlyphChars.ArrowLeft;\n        }\n        else if (push) {\n            separator = GlyphChars.ArrowRight;\n        }\n        else {\n            separator = GlyphChars.Dash;\n        }\n\n        const item = new TreeItem(\n            `${this.remote.default ? `${GlyphChars.Check} ${GlyphChars.Space}` : ''}${this.remote.name}`,\n            TreeItemCollapsibleState.Collapsed\n        );\n        item.description = `${separator}${GlyphChars.Space} ${\n            this.remote.provider !== undefined ? this.remote.provider.name : this.remote.domain\n        } ${GlyphChars.Space}${GlyphChars.Dot}${GlyphChars.Space} ${\n            this.remote.provider !== undefined ? this.remote.provider.displayPath : this.remote.path\n        }`;\n        item.contextValue = ResourceType.Remote;\n        if (this.remote.default) {\n            item.contextValue += '+default';\n        }\n\n        if (this.remote.provider !== undefined) {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath(`images/dark/icon-${this.remote.provider.icon}.svg`),\n                light: Container.context.asAbsolutePath(`images/light/icon-${this.remote.provider.icon}.svg`)\n            };\n        }\n        else {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath('images/dark/icon-remote.svg'),\n                light: Container.context.asAbsolutePath('images/light/icon-remote.svg')\n            };\n        }\n\n        item.id = this.id;\n        item.tooltip = `${this.remote.name} (${\n            this.remote.provider !== undefined ? this.remote.provider.name : this.remote.domain\n        })\\n${this.remote.provider !== undefined ? this.remote.provider.displayPath : this.remote.path}\\n`;\n\n        for (const type of this.remote.types) {\n            item.tooltip += `\\n${type.url} (${type.type})`;\n        }\n\n        return item;\n    }\n\n    @log()\n    fetch(options: { progress?: boolean } = {}) {\n        return this.repo.fetch({ ...options, remote: this.remote.name });\n    }\n\n    @log()\n    async setAsDefault(state: boolean = true) {\n        void (await this.remote.setAsDefault(state));\n        void this.parent!.triggerChange();\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { MessageNode } from './common';\nimport { RemoteNode } from './remoteNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class RemotesNode extends ViewNode<RepositoriesView> {\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repo.path}):remotes`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const remotes = await this.repo.getRemotes();\n        if (remotes === undefined || remotes.length === 0) {\n            return [new MessageNode(this.view, this, 'No remotes could be found')];\n        }\n\n        remotes.sort(\n            (a, b) =>\n                (a.default ? -1 : 1) - (b.default ? -1 : 1) ||\n                a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' })\n        );\n        return [...Iterables.map(remotes, r => new RemoteNode(this.uri, this.view, this, r, this.repo))];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Remotes', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Remotes;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-remote.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-remote.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { GitFile, GitLogCommit } from '../../git/gitService';\nimport { View } from '../viewBase';\nimport { CommitFileNode, CommitFileNodeDisplayAs } from './commitFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StashFileNode extends CommitFileNode {\n    constructor(view: View, parent: ViewNode, file: GitFile, commit: GitLogCommit) {\n        super(view, parent, file, commit, CommitFileNodeDisplayAs.File);\n    }\n\n    protected get resourceType(): ResourceType {\n        return ResourceType.StashFile;\n    }\n\n    protected getCommitTemplate() {\n        return this.view.config.stashFormat;\n    }\n\n    protected getCommitDescriptionTemplate() {\n        return this.view.config.stashDescriptionFormat;\n    }\n\n    protected getCommitFileTemplate() {\n        return this.view.config.stashFileFormat;\n    }\n\n    protected getCommitFileDescriptionTemplate() {\n        return this.view.config.stashFileDescriptionFormat;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { CommitFormatter, GitStashCommit } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { StashFileNode } from './stashFileNode';\nimport { ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class StashNode extends ViewRefNode {\n    constructor(view: View, parent: ViewNode, public readonly commit: GitStashCommit) {\n        super(commit.toGitUri(), view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.commit.repoPath}):stash(${this.commit.sha})`;\n    }\n\n    get ref(): string {\n        return this.commit.sha;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const files = (this.commit as GitStashCommit).files;\n\n        // Check for any untracked files -- since git doesn't return them via `git stash list` :(\n        // See https://stackoverflow.com/questions/12681529/\n        const log = await Container.git.getLog(this.commit.repoPath, {\n            maxCount: 1,\n            ref: `${(this.commit as GitStashCommit).stashName}^3`\n        });\n        if (log !== undefined) {\n            const commit = Iterables.first(log.commits.values());\n            if (commit !== undefined && commit.files.length !== 0) {\n                // Since these files are untracked -- make them look that way\n                commit.files.forEach(s => (s.status = '?'));\n                files.splice(files.length, 0, ...commit.files);\n            }\n        }\n\n        const children = files.map(s => new StashFileNode(this.view, this, s, this.commit.toFileCommit(s)));\n        children.sort((a, b) => a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' }));\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(\n            CommitFormatter.fromTemplate(this.view.config.stashFormat, this.commit, {\n                truncateMessageAtNewLine: true,\n                dateFormat: Container.config.defaultDateFormat\n            }),\n            TreeItemCollapsibleState.Collapsed\n        );\n        item.id = this.id;\n        item.description = CommitFormatter.fromTemplate(this.view.config.stashDescriptionFormat, this.commit, {\n            truncateMessageAtNewLine: true,\n            dateFormat: Container.config.defaultDateFormat\n        });\n        item.contextValue = ResourceType.Stash;\n        // eslint-disable-next-line no-template-curly-in-string\n        item.tooltip = CommitFormatter.fromTemplate('${ago} (${date})\\n\\n${message}', this.commit, {\n            dateFormat: Container.config.defaultDateFormat\n        });\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { View } from '../viewBase';\nimport { MessageNode } from './common';\nimport { StashNode } from './stashNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StashesNode extends ViewNode {\n    constructor(uri: GitUri, view: View, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repo.path}):stashes`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const stash = await this.repo.getStashList();\n        if (stash === undefined) return [new MessageNode(this.view, this, 'No stashed changes.')];\n\n        return [...Iterables.map(stash.commits.values(), c => new StashNode(this.view, this, c))];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Stashes', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Stashes;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-stash.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-stash.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, ThemeIcon, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithPreviousCommandArgs } from '../../commands';\nimport { Container } from '../../container';\nimport { GitFile, GitLogCommit, GitUri, StatusFileFormatter } from '../../git/gitService';\nimport { Strings } from '../../system';\nimport { View } from '../viewBase';\nimport { CommitFileNode, CommitFileNodeDisplayAs } from './commitFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StatusFileNode extends ViewNode {\n    private readonly _hasStagedChanges: boolean = false;\n    private readonly _hasUnstagedChanges: boolean = false;\n\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        public readonly file: GitFile,\n        public readonly commits: GitLogCommit[]\n    ) {\n        super(GitUri.fromFile(file, repoPath, 'HEAD'), view, parent);\n\n        for (const c of this.commits) {\n            if (c.isStagedUncommitted) {\n                this._hasStagedChanges = true;\n            }\n            else if (c.isUncommitted) {\n                this._hasUnstagedChanges = true;\n            }\n\n            if (this._hasStagedChanges && this._hasUnstagedChanges) break;\n        }\n    }\n\n    getChildren(): ViewNode[] {\n        return this.commits.map(\n            c =>\n                new CommitFileNode(\n                    this.view,\n                    this,\n                    this.file,\n                    c,\n                    CommitFileNodeDisplayAs.CommitLabel |\n                        (this.view.config.avatars\n                            ? CommitFileNodeDisplayAs.Gravatar\n                            : CommitFileNodeDisplayAs.CommitIcon)\n                )\n        );\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.None);\n        item.description = this.description;\n\n        if ((this._hasStagedChanges || this._hasUnstagedChanges) && this.commits.length === 1) {\n            item.contextValue = ResourceType.File;\n            if (this._hasStagedChanges) {\n                item.contextValue += '+staged';\n                item.tooltip = StatusFileFormatter.fromTemplate(\n                    // eslint-disable-next-line no-template-curly-in-string\n                    '${file}\\n${directory}/\\n\\n${status} in Index (staged)',\n                    this.file\n                );\n            }\n            else {\n                item.contextValue += '+unstaged';\n                item.tooltip = StatusFileFormatter.fromTemplate(\n                    // eslint-disable-next-line no-template-curly-in-string\n                    '${file}\\n${directory}/\\n\\n${status} in Working Tree',\n                    this.file\n                );\n            }\n\n            // Use the file icon and decorations\n            item.resourceUri = GitUri.resolveToUri(this.file.fileName, this.repoPath);\n            item.iconPath = ThemeIcon.File;\n\n            item.command = this.getCommand();\n        }\n        else {\n            item.collapsibleState = TreeItemCollapsibleState.Collapsed;\n            if (this._hasStagedChanges || this._hasUnstagedChanges) {\n                item.contextValue = ResourceType.File;\n                if (this._hasStagedChanges && this._hasUnstagedChanges) {\n                    item.contextValue += '+staged+unstaged';\n                }\n                else if (this._hasStagedChanges) {\n                    item.contextValue += '+staged';\n                }\n                else {\n                    item.contextValue += '+unstaged';\n                }\n\n                // Use the file icon and decorations\n                item.resourceUri = GitUri.resolveToUri(this.file.fileName, this.repoPath);\n                item.iconPath = ThemeIcon.File;\n            }\n            else {\n                item.contextValue = ResourceType.StatusFileCommits;\n\n                const icon = GitFile.getStatusIcon(this.file.status);\n                item.iconPath = {\n                    dark: Container.context.asAbsolutePath(paths.join('images', 'dark', icon)),\n                    light: Container.context.asAbsolutePath(paths.join('images', 'light', icon))\n                };\n            }\n\n            item.tooltip = StatusFileFormatter.fromTemplate(\n                `\\${file}\\n\\${directory}/\\n\\n\\${status} in ${this.getChangedIn()}`,\n                this.file\n            );\n        }\n\n        // Only cache the label/description for a single refresh\n        this._label = undefined;\n        this._description = undefined;\n\n        return item;\n    }\n\n    private _description: string | undefined;\n    get description() {\n        if (this._description === undefined) {\n            this._description = StatusFileFormatter.fromTemplate(\n                this.view.config.statusFileDescriptionFormat,\n                {\n                    ...this.file,\n                    commit: this.commit\n                },\n                {\n                    relativePath: this.relativePath\n                }\n            );\n        }\n        return this._description;\n    }\n\n    private _folderName: string | undefined;\n    get folderName() {\n        if (this._folderName === undefined) {\n            this._folderName = paths.dirname(this.uri.getRelativePath());\n        }\n        return this._folderName;\n    }\n\n    private _label: string | undefined;\n    get label() {\n        if (this._label === undefined) {\n            this._label = StatusFileFormatter.fromTemplate(\n                this.view.config.statusFileFormat,\n                {\n                    ...this.file,\n                    commit: this.commit\n                },\n                {\n                    relativePath: this.relativePath\n                }\n            );\n        }\n        return this._label;\n    }\n\n    get commit() {\n        return this.commits[0];\n    }\n\n    get priority(): number {\n        if (this._hasStagedChanges && !this._hasUnstagedChanges) return -3;\n        if (this._hasStagedChanges) return -2;\n        if (this._hasUnstagedChanges) return -1;\n        return 0;\n    }\n\n    private _relativePath: string | undefined;\n    get relativePath(): string | undefined {\n        return this._relativePath;\n    }\n    set relativePath(value: string | undefined) {\n        this._relativePath = value;\n        this._label = undefined;\n        this._description = undefined;\n    }\n\n    private getChangedIn(): string {\n        const changedIn = [];\n\n        let commits = 0;\n\n        if (this._hasUnstagedChanges) {\n            commits++;\n            changedIn.push('Working Tree');\n        }\n\n        if (this._hasStagedChanges) {\n            commits++;\n            changedIn.push('Index (staged)');\n        }\n\n        if (this.commits.length > commits) {\n            commits = this.commits.length - commits;\n        }\n\n        if (commits > 0) {\n            changedIn.push(Strings.pluralize('commit', commits));\n        }\n\n        if (changedIn.length > 2) {\n            changedIn[changedIn.length - 1] = `and ${changedIn[changedIn.length - 1]}`;\n        }\n        return changedIn.join(changedIn.length > 2 ? ', ' : ' and ');\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithPreviousCommandArgs = {\n            commit: this.commit,\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Compare File with Previous Revision',\n            command: Commands.DiffWithPrevious,\n            arguments: [GitUri.fromFile(this.file, this.repoPath), commandArgs]\n        };\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewFilesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitStatusFile } from '../../git/git';\nimport {\n    GitCommitType,\n    GitFileWithCommit,\n    GitLog,\n    GitLogCommit,\n    GitService,\n    GitStatus,\n    GitUri\n} from '../../git/gitService';\nimport { Arrays, Iterables, Objects, Strings } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { FileNode, FolderNode } from './folderNode';\nimport { StatusFileNode } from './statusFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class StatusFilesNode extends ViewNode<RepositoriesView> {\n    readonly repoPath: string;\n\n    constructor(\n        view: RepositoriesView,\n        parent: ViewNode,\n        public readonly status: GitStatus,\n        public readonly range: string | undefined\n    ) {\n        super(GitUri.fromRepoPath(status.repoPath), view, parent);\n        this.repoPath = status.repoPath;\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.status.repoPath}):status:files`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        let files: GitFileWithCommit[] = [];\n\n        const repoPath = this.repoPath;\n\n        let log: GitLog | undefined;\n        if (this.range !== undefined) {\n            log = await Container.git.getLog(repoPath, { maxCount: 0, ref: this.range });\n            if (log !== undefined) {\n                files = [\n                    ...Iterables.flatMap(log.commits.values(), c =>\n                        c.files.map(s => {\n                            const file: GitFileWithCommit = { ...s, commit: c };\n                            return file;\n                        })\n                    )\n                ];\n            }\n        }\n\n        if (this.status.files.length !== 0 && this.includeWorkingTree) {\n            files.splice(\n                0,\n                0,\n                ...Iterables.flatMap(this.status.files, s => {\n                    if (s.workingTreeStatus !== undefined && s.indexStatus !== undefined) {\n                        // Decrements the date to guarantee this entry will be sorted after the previous entry (most recent first)\n                        const older = new Date();\n                        older.setMilliseconds(older.getMilliseconds() - 1);\n\n                        return [\n                            this.toStatusFile(s, GitService.uncommittedSha, GitService.stagedUncommittedSha),\n                            this.toStatusFile(s, GitService.stagedUncommittedSha, 'HEAD', older)\n                        ];\n                    }\n                    else if (s.indexStatus !== undefined) {\n                        return [this.toStatusFile(s, GitService.stagedUncommittedSha, 'HEAD')];\n                    }\n\n                    return [this.toStatusFile(s, GitService.uncommittedSha, 'HEAD')];\n                })\n            );\n        }\n\n        files.sort((a, b) => b.commit.date.getTime() - a.commit.date.getTime());\n\n        const groups = Arrays.groupBy(files, s => s.fileName);\n\n        let children: FileNode[] = [\n            ...Iterables.map(\n                Objects.values(groups),\n                files =>\n                    new StatusFileNode(this.view, this, repoPath, files[files.length - 1], files.map(s => s.commit))\n            )\n        ];\n\n        if (this.view.config.files.layout !== ViewFilesLayout.List) {\n            const hierarchy = Arrays.makeHierarchical(\n                children,\n                n => n.uri.getRelativePath().split('/'),\n                (...parts: string[]) => Strings.normalizePath(paths.join(...parts)),\n                this.view.config.files.compact\n            );\n\n            const root = new FolderNode(this.view, this, repoPath, '', hierarchy, true);\n            children = (await root.getChildren()) as FileNode[];\n        }\n        else {\n            children.sort(\n                (a, b) =>\n                    a.priority - b.priority ||\n                    a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        }\n\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        let files = this.status.files !== undefined && this.includeWorkingTree ? this.status.files.length : 0;\n\n        if (this.status.upstream !== undefined && this.status.state.ahead > 0) {\n            if (files > 0) {\n                const aheadFiles = await Container.git.getDiffStatus(this.repoPath, `${this.status.upstream}...`);\n                if (aheadFiles !== undefined) {\n                    const uniques = new Set();\n                    for (const f of this.status.files) {\n                        uniques.add(f.fileName);\n                    }\n                    for (const f of aheadFiles) {\n                        uniques.add(f.fileName);\n                    }\n\n                    files = uniques.size;\n                }\n            }\n            else {\n                const stats = await Container.git.getChangedFilesCount(this.repoPath, `${this.status.upstream}...`);\n                if (stats !== undefined) {\n                    files += stats.files;\n                }\n            }\n        }\n\n        const label = `${Strings.pluralize('file', files)} changed`;\n        const item = new TreeItem(label, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.StatusFiles;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-diff.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-diff.svg')\n        };\n\n        return item;\n    }\n\n    private get includeWorkingTree(): boolean {\n        return this.view.config.includeWorkingTree;\n    }\n\n    private toStatusFile(file: GitStatusFile, ref: string, previousRef: string, date?: Date): GitFileWithCommit {\n        return {\n            status: file.status,\n            repoPath: file.repoPath,\n            indexStatus: file.indexStatus,\n            workingTreeStatus: file.workingTreeStatus,\n            fileName: file.fileName,\n            originalFileName: file.originalFileName,\n            commit: new GitLogCommit(\n                GitCommitType.File,\n                file.repoPath,\n                ref,\n                'You',\n                undefined,\n                date || new Date(),\n                date || new Date(),\n                '',\n                file.fileName,\n                [file],\n                file.status,\n                file.originalFileName,\n                previousRef,\n                file.fileName\n            )\n        };\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitTag, GitUri } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { CommitNode } from './commitNode';\nimport { MessageNode, ShowMoreNode } from './common';\nimport { getBranchesAndTagTipsFn, insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode, ViewRefNode } from './viewNode';\n\nexport class TagNode extends ViewRefNode<RepositoriesView> implements PageableViewNode {\n    readonly supportsPaging: boolean = true;\n    maxCount: number | undefined;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly tag: GitTag) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.tag.repoPath}):tag(${this.tag.name})`;\n    }\n\n    get label(): string {\n        return this.view.config.branches.layout === ViewBranchesLayout.Tree ? this.tag.getBasename() : this.tag.name;\n    }\n\n    get ref(): string {\n        return this.tag.name;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: this.maxCount || this.view.config.defaultItemLimit,\n            ref: this.tag.name\n        });\n        if (log === undefined) return [new MessageNode(this.view, this, 'No commits could be found.')];\n\n        const getBranchAndTagTips = await getBranchesAndTagTipsFn(this.uri.repoPath, this.tag.name);\n        const children = [\n            ...insertDateMarkers(\n                Iterables.map(\n                    log.commits.values(),\n                    c => new CommitNode(this.view, this, c, undefined, getBranchAndTagTips)\n                ),\n                this\n            )\n        ];\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Commits', children[children.length - 1]));\n        }\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Tag;\n        item.tooltip = `${this.tag.name}${this.tag.annotation === undefined ? '' : `\\n${this.tag.annotation}`}`;\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewBranchesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitUri, Repository } from '../../git/gitService';\nimport { Arrays } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchOrTagFolderNode } from './branchOrTagFolderNode';\nimport { MessageNode } from './common';\nimport { TagNode } from './tagNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class TagsNode extends ViewNode<RepositoriesView> {\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repo.path}):tags`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const tags = await this.repo.getTags();\n        if (tags.length === 0) return [new MessageNode(this.view, this, 'No tags could be found.')];\n\n        tags.sort((a, b) => a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' }));\n        const tagNodes = tags.map(t => new TagNode(this.uri, this.view, this, t));\n        if (this.view.config.branches.layout === ViewBranchesLayout.List) return tagNodes;\n\n        const hierarchy = Arrays.makeHierarchical(\n            tagNodes,\n            n => n.tag.name.split('/'),\n            (...paths: string[]) => paths.join('/'),\n            this.view.config.files.compact\n        );\n\n        const root = new BranchOrTagFolderNode(this.view, this, 'tag', this.repo.path, '', undefined, hierarchy);\n        const children = (await root.getChildren()) as (BranchOrTagFolderNode | TagNode)[];\n        return children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Tags', TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.contextValue = ResourceType.Tags;\n\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath('images/dark/icon-tag.svg'),\n            light: Container.context.asAbsolutePath('images/light/icon-tag.svg')\n        };\n\n        return item;\n    }\n}\n","'use strict';\nimport { Disposable, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport {\n    GitBranch,\n    GitStatus,\n    GitUri,\n    Repository,\n    RepositoryChange,\n    RepositoryChangeEvent,\n    RepositoryFileSystemChangeEvent\n} from '../../git/gitService';\nimport { Dates, debug, gate, log, Strings } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { BranchesNode } from './branchesNode';\nimport { BranchNode } from './branchNode';\nimport { BranchTrackingStatusNode } from './branchTrackingStatusNode';\nimport { MessageNode } from './common';\nimport { RemotesNode } from './remotesNode';\nimport { StashesNode } from './stashesNode';\nimport { StatusFilesNode } from './statusFilesNode';\nimport { TagsNode } from './tagsNode';\nimport { ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\nimport { ContributorsNode } from './contributorsNode';\n\nconst hasTimeRegex = /[hHm]/;\n\nexport class RepositoryNode extends SubscribeableViewNode<RepositoriesView> {\n    private _children: ViewNode[] | undefined;\n    private _lastFetched: number = 0;\n    private _status: Promise<GitStatus | undefined>;\n\n    constructor(uri: GitUri, view: RepositoriesView, parent: ViewNode, public readonly repo: Repository) {\n        super(uri, view, parent);\n\n        this._status = this.repo.getStatus();\n    }\n\n    get id(): string {\n        return `${this._instanceId}:gitlens:repository(${this.repo.path})${this.repo.starred ? '+starred:' : ''}`;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const children = [];\n\n            const status = await this._status;\n            if (status !== undefined) {\n                const branch = new GitBranch(\n                    status.repoPath,\n                    status.branch,\n                    true,\n                    status.sha,\n                    status.upstream,\n                    status.state.ahead,\n                    status.state.behind,\n                    status.detached\n                );\n                children.push(new BranchNode(this.uri, this.view, this, branch, true));\n\n                if (status.state.behind) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, status, 'behind', true));\n                }\n\n                if (status.state.ahead) {\n                    children.push(new BranchTrackingStatusNode(this.view, this, status, 'ahead', true));\n                }\n\n                if (status.state.ahead || (status.files.length !== 0 && this.includeWorkingTree)) {\n                    const range = status.upstream ? `${status.upstream}..${branch.ref}` : undefined;\n                    children.push(new StatusFilesNode(this.view, this, status, range));\n                }\n\n                if (!this.view.config.repositories.compact) {\n                    children.push(new MessageNode(this.view, this, '', GlyphChars.Dash.repeat(2), ''));\n                }\n            }\n\n            children.push(\n                new BranchesNode(this.uri, this.view, this, this.repo),\n                new ContributorsNode(this.uri, this.view, this, this.repo),\n                new RemotesNode(this.uri, this.view, this, this.repo),\n                new StashesNode(this.uri, this.view, this, this.repo),\n                new TagsNode(this.uri, this.view, this, this.repo)\n            );\n            this._children = children;\n        }\n        return this._children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const label = this.repo.formattedName || this.uri.repoPath || '';\n\n        this._lastFetched = await this.repo.getLastFetched();\n\n        const lastFetchedTooltip = this.formatLastFetched({\n            prefix: `${Strings.pad(GlyphChars.Dash, 2, 2)}Last fetched on `,\n            format: Container.config.defaultDateFormat || 'dddd MMMM Do, YYYY',\n            includeTime: true\n        });\n\n        let description;\n        let tooltip = this.repo.formattedName\n            ? `${this.repo.formattedName}${lastFetchedTooltip}\\n${this.uri.repoPath}`\n            : `${this.uri.repoPath}${lastFetchedTooltip}`;\n        let iconSuffix = '';\n        let workingStatus = '';\n\n        const status = await this._status;\n        if (status !== undefined) {\n            tooltip += `\\n\\nCurrent branch is ${status.branch}`;\n\n            if (status.files.length !== 0 && this.includeWorkingTree) {\n                workingStatus = status.getFormattedDiffStatus({\n                    compact: true,\n                    prefix: Strings.pad(GlyphChars.Dot, 2, 2)\n                });\n            }\n\n            const upstreamStatus = status.getUpstreamStatus({\n                prefix: `${GlyphChars.Space} `\n            });\n\n            description = `${status.branch}${upstreamStatus}${workingStatus}`;\n\n            iconSuffix = workingStatus ? '-blue' : '';\n            if (status.upstream !== undefined) {\n                tooltip += ` and is tracking ${status.upstream}\\n${status.getUpstreamStatus({\n                    empty: 'No commits ahead or behind',\n                    expand: true,\n                    separator: '\\n',\n                    suffix: '\\n'\n                })}`;\n\n                if (status.state.behind) {\n                    iconSuffix = '-red';\n                }\n                if (status.state.ahead) {\n                    iconSuffix = status.state.behind ? '-yellow' : '-green';\n                }\n            }\n\n            if (workingStatus) {\n                tooltip += `\\n\\nWorking tree has uncommitted changes${status.getFormattedDiffStatus({\n                    expand: true,\n                    prefix: '\\n',\n                    separator: '\\n'\n                })}`;\n            }\n        }\n\n        if (!this.repo.supportsChangeEvents) {\n            description = `<!>${description ? ` ${GlyphChars.Space}${description}` : ''}`;\n            tooltip += '\\n\\n<!> Unable to automatically detect repository changes';\n        }\n\n        const item = new TreeItem(label, TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Repository;\n        if (this.repo.starred) {\n            item.contextValue += '+starred';\n        }\n        item.description = `${description || ''}${this.formatLastFetched({\n            prefix: `${Strings.pad(GlyphChars.Dot, 2, 2)}Last fetched `\n        })}`;\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(`images/dark/icon-repo${iconSuffix}.svg`),\n            light: Container.context.asAbsolutePath(`images/light/icon-repo${iconSuffix}.svg`)\n        };\n        item.id = this.id;\n        item.tooltip = tooltip;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @log()\n    fetch(options: { progress?: boolean; remote?: string } = {}) {\n        return this.repo.fetch(options);\n    }\n\n    @log()\n    pull(options: { progress?: boolean } = {}) {\n        return this.repo.pull(options);\n    }\n\n    @log()\n    push(options: { force?: boolean; progress?: boolean } = {}) {\n        return this.repo.push(options);\n    }\n\n    @gate()\n    @debug()\n    async refresh() {\n        this._status = this.repo.getStatus();\n\n        this._children = undefined;\n        await this.ensureSubscription();\n    }\n\n    @log()\n    async star() {\n        await this.repo.star();\n        void this.parent!.triggerChange();\n    }\n\n    @log()\n    async unstar() {\n        await this.repo.unstar();\n        void this.parent!.triggerChange();\n    }\n\n    @debug()\n    protected subscribe() {\n        const disposables = [this.repo.onDidChange(this.onRepoChanged, this)];\n\n        // if (Container.config.defaultDateStyle === DateStyle.Relative) {\n        //     disposables.push(Functions.interval(() => void this.updateLastFetched(), 60000));\n        // }\n\n        if (this.includeWorkingTree) {\n            disposables.push(this.repo.onDidChangeFileSystem(this.onFileSystemChanged, this), {\n                dispose: () => this.repo.stopWatchingFileSystem()\n            });\n\n            this.repo.startWatchingFileSystem();\n        }\n\n        return Disposable.from(...disposables);\n    }\n\n    private get includeWorkingTree(): boolean {\n        return this.view.config.includeWorkingTree;\n    }\n\n    @debug({\n        args: {\n            0: (e: RepositoryFileSystemChangeEvent) =>\n                `{ repository: ${e.repository ? e.repository.name : ''}, uris(${e.uris.length}): [${e.uris\n                    .slice(0, 1)\n                    .map(u => u.fsPath)\n                    .join(', ')}${e.uris.length > 1 ? ', ...' : ''}] }`\n        }\n    })\n    private onFileSystemChanged(e: RepositoryFileSystemChangeEvent) {\n        void this.triggerChange();\n    }\n\n    @debug({\n        args: {\n            0: (e: RepositoryChangeEvent) =>\n                `{ repository: ${e.repository ? e.repository.name : ''}, changes: ${e.changes.join()} }`\n        }\n    })\n    private onRepoChanged(e: RepositoryChangeEvent) {\n        if (e.changed(RepositoryChange.Closed)) {\n            this.dispose();\n\n            return;\n        }\n\n        if (\n            this._children === undefined ||\n            e.changed(RepositoryChange.Repository) ||\n            e.changed(RepositoryChange.Config)\n        ) {\n            void this.triggerChange();\n\n            return;\n        }\n\n        if (e.changed(RepositoryChange.Stashes)) {\n            const node = this._children.find(c => c instanceof StashesNode);\n            if (node !== undefined) {\n                void this.view.triggerNodeChange(node);\n            }\n        }\n\n        if (e.changed(RepositoryChange.Remotes)) {\n            const node = this._children.find(c => c instanceof RemotesNode);\n            if (node !== undefined) {\n                void this.view.triggerNodeChange(node);\n            }\n        }\n\n        if (e.changed(RepositoryChange.Tags)) {\n            const node = this._children.find(c => c instanceof TagsNode);\n            if (node !== undefined) {\n                void this.view.triggerNodeChange(node);\n            }\n        }\n    }\n\n    private formatLastFetched(options: { prefix?: string; format?: string; includeTime?: boolean } = {}) {\n        if (this._lastFetched === 0) return '';\n\n        // if (options.format === undefined && Container.config.defaultDateStyle === DateStyle.Relative) {\n        //     // If less than a day has passed show a relative date\n        //     if (Date.now() - this._lastFetched < Dates.MillisecondsPerDay) {\n        //         return `${options.prefix || ''}${Dates.toFormatter(new Date(this._lastFetched)).fromNow()}`;\n        //     }\n        // }\n\n        let format = options.format || Container.config.defaultDateShortFormat || 'MMM D, YYYY';\n        if (\n            (options.includeTime ||\n                // If less than a day has passed show the time too\n                (options.includeTime === undefined && Date.now() - this._lastFetched < Dates.MillisecondsPerDay)) &&\n            // If the time is already included don't do anything\n            !hasTimeRegex.test(format)\n        ) {\n            format = `h:mma, ${format}`;\n        }\n\n        return `${options.prefix || ''}${Dates.toFormatter(new Date(this._lastFetched)).format(format)}`;\n    }\n\n    // @debug()\n    // private async updateLastFetched() {\n    //     const prevLastFetched = this._lastFetched;\n    //     this._lastFetched = await this.repo.getLastFetched();\n\n    //     // If the fetched date hasn't changed and it was over a day ago, kick out\n    //     if (this._lastFetched === prevLastFetched && Date.now() - this._lastFetched >= Dates.MillisecondsPerDay) return;\n\n    //     this.view.triggerNodeChange(this);\n    // }\n}\n","'use strict';\nimport { Disposable, TextEditor, TreeItem, TreeItemCollapsibleState, window } from 'vscode';\nimport { Container } from '../../container';\nimport { GitUri } from '../../git/gitService';\nimport { Logger } from '../../logger';\nimport { debug, Functions, gate } from '../../system';\nimport { RepositoriesView } from '../repositoriesView';\nimport { MessageNode } from './common';\nimport { RepositoryNode } from './repositoryNode';\nimport { ResourceType, SubscribeableViewNode, unknownGitUri, ViewNode } from './viewNode';\n\nexport class RepositoriesNode extends SubscribeableViewNode<RepositoriesView> {\n    private _children: (RepositoryNode | MessageNode)[] | undefined;\n\n    constructor(view: RepositoriesView) {\n        super(unknownGitUri, view);\n    }\n\n    dispose() {\n        super.dispose();\n\n        this.resetChildren();\n    }\n\n    @debug()\n    private resetChildren() {\n        if (this._children === undefined) return;\n\n        for (const child of this._children) {\n            if (child instanceof RepositoryNode) {\n                child.dispose();\n            }\n        }\n        this._children = undefined;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        if (this._children === undefined) {\n            const repositories = await Container.git.getOrderedRepositories();\n            if (repositories.length === 0) return [new MessageNode(this.view, this, 'No repositories could be found.')];\n\n            this._children = repositories.map(r => new RepositoryNode(GitUri.fromRepoPath(r.path), this.view, this, r));\n        }\n\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Repositories', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Repositories;\n\n        void this.ensureSubscription();\n\n        return item;\n    }\n\n    @gate()\n    @debug()\n    async refresh(reset: boolean = false) {\n        if (this._children === undefined) return;\n\n        if (reset) {\n            this.resetChildren();\n            await this.unsubscribe();\n            void this.ensureSubscription();\n\n            return;\n        }\n\n        const repositories = await Container.git.getOrderedRepositories();\n        if (repositories.length === 0 && (this._children === undefined || this._children.length === 0)) return;\n\n        if (repositories.length === 0) {\n            this._children = [new MessageNode(this.view, this, 'No repositories could be found.')];\n            return;\n        }\n\n        const children = [];\n        for (const repo of repositories) {\n            const normalizedPath = repo.normalizedPath;\n            const child = (this._children as RepositoryNode[]).find(c => c.repo.normalizedPath === normalizedPath);\n            if (child !== undefined) {\n                children.push(child);\n                void child.refresh();\n            }\n            else {\n                children.push(new RepositoryNode(GitUri.fromRepoPath(repo.path), this.view, this, repo));\n            }\n        }\n\n        for (const child of this._children as RepositoryNode[]) {\n            if (children.includes(child)) continue;\n\n            child.dispose();\n        }\n\n        this._children = children;\n\n        void this.ensureSubscription();\n    }\n\n    @debug()\n    protected subscribe() {\n        const subscriptions = [Container.git.onDidChangeRepositories(this.onRepositoriesChanged, this)];\n\n        if (this.view.config.autoReveal) {\n            subscriptions.push(\n                window.onDidChangeActiveTextEditor(Functions.debounce(this.onActiveEditorChanged, 500), this)\n            );\n        }\n\n        return Disposable.from(...subscriptions);\n    }\n\n    @debug({ args: false })\n    private onActiveEditorChanged(editor: TextEditor | undefined) {\n        if (editor == null || this._children === undefined || this._children.length === 1) {\n            return;\n        }\n\n        try {\n            const uri = editor.document.uri;\n            const node = this._children.find(n => n instanceof RepositoryNode && n.repo.containsUri(uri)) as\n                | RepositoryNode\n                | undefined;\n            if (node === undefined) return;\n\n            // Check to see if this repo has a descendent that is already selected\n            let parent = this.view.selection.length === 0 ? undefined : this.view.selection[0];\n            while (parent !== undefined) {\n                if (parent === node) return;\n\n                parent = parent.getParent();\n            }\n\n            void this.view.reveal(node, { expand: true });\n        }\n        catch (ex) {\n            Logger.error(ex);\n        }\n    }\n\n    @debug()\n    private onRepositoriesChanged() {\n        void this.triggerChange();\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Container } from '../../container';\nimport { GitLog, GitUri } from '../../git/gitService';\nimport { Iterables } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitNode } from './commitNode';\nimport { ShowMoreNode } from './common';\nimport { getBranchesAndTagTipsFn, insertDateMarkers } from './helpers';\nimport { PageableViewNode, ResourceType, ViewNode } from './viewNode';\n\nexport interface CommitsQueryResults {\n    label: string;\n    log: GitLog | undefined;\n}\n\nexport class ResultsCommitsNode extends ViewNode<ViewWithFiles> implements PageableViewNode {\n    readonly supportsPaging: boolean = true;\n    maxCount: number | undefined;\n\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        private readonly _commitsQuery: (maxCount: number | undefined) => Promise<CommitsQueryResults>\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    get type(): ResourceType {\n        return ResourceType.ResultsCommits;\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const { log } = await this.getCommitsQueryResults();\n        if (log === undefined) return [];\n\n        const getBranchAndTagTips = await getBranchesAndTagTipsFn(this.uri.repoPath);\n        const children = [\n            ...insertDateMarkers(\n                Iterables.map(\n                    log.commits.values(),\n                    c => new CommitNode(this.view, this, c, undefined, getBranchAndTagTips)\n                ),\n                this\n            )\n        ];\n\n        if (log.truncated) {\n            children.push(new ShowMoreNode(this.view, this, 'Results', children[children.length - 1]));\n        }\n\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const { label, log } = await this.getCommitsQueryResults();\n\n        let description;\n        if ((await Container.git.getRepositoryCount()) > 1) {\n            const repo = await Container.git.getRepository(this.repoPath);\n            description = (repo && repo.formattedName) || this.repoPath;\n        }\n\n        const item = new TreeItem(\n            label,\n            log && log.count > 0 ? TreeItemCollapsibleState.Collapsed : TreeItemCollapsibleState.None\n        );\n        item.contextValue = this.type;\n        item.description = description;\n\n        return item;\n    }\n\n    refresh() {\n        this._commitsQueryResults = this._commitsQuery(this.maxCount);\n    }\n\n    private _commitsQueryResults: Promise<CommitsQueryResults> | undefined;\n\n    protected getCommitsQueryResults() {\n        if (this._commitsQueryResults === undefined) {\n            this._commitsQueryResults = this._commitsQuery(this.maxCount);\n        }\n\n        return this._commitsQueryResults;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { Command, TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { Commands, DiffWithCommandArgs } from '../../commands';\nimport { Container } from '../../container';\nimport { GitFile, GitUri, StatusFileFormatter } from '../../git/gitService';\nimport { View } from '../viewBase';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class ResultsFileNode extends ViewNode {\n    constructor(\n        view: View,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        public readonly file: GitFile,\n        public readonly ref1: string,\n        public readonly ref2: string\n    ) {\n        super(GitUri.fromFile(file, repoPath, ref1 ? ref1 : ref2 ? ref2 : undefined), view, parent);\n    }\n\n    get ref() {\n        return this.ref1 ? this.ref1 : this.ref2 ? this.ref2 : undefined;\n    }\n\n    getChildren(): ViewNode[] {\n        return [];\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem(this.label, TreeItemCollapsibleState.None);\n        item.contextValue = ResourceType.ResultsFile;\n        item.description = this.description;\n        // eslint-disable-next-line no-template-curly-in-string\n        item.tooltip = StatusFileFormatter.fromTemplate('${file}\\n${directory}/\\n\\n${status}', this.file);\n\n        const statusIcon = GitFile.getStatusIcon(this.file.status);\n        item.iconPath = {\n            dark: Container.context.asAbsolutePath(paths.join('images', 'dark', statusIcon)),\n            light: Container.context.asAbsolutePath(paths.join('images', 'light', statusIcon))\n        };\n\n        item.command = this.getCommand();\n        return item;\n    }\n\n    private _description: string | undefined;\n    get description() {\n        if (this._description === undefined) {\n            // eslint-disable-next-line no-template-curly-in-string\n            this._description = StatusFileFormatter.fromTemplate('${directory}', this.file, {\n                relativePath: this.relativePath\n            });\n        }\n        return this._description;\n    }\n\n    private _folderName: string | undefined;\n    get folderName() {\n        if (this._folderName === undefined) {\n            this._folderName = paths.dirname(this.uri.getRelativePath());\n        }\n        return this._folderName;\n    }\n\n    private _label: string | undefined;\n    get label() {\n        if (this._label === undefined) {\n            // eslint-disable-next-line no-template-curly-in-string\n            this._label = StatusFileFormatter.fromTemplate('${file}', this.file, {\n                relativePath: this.relativePath\n            });\n        }\n        return this._label;\n    }\n\n    private _relativePath: string | undefined;\n    get relativePath(): string | undefined {\n        return this._relativePath;\n    }\n    set relativePath(value: string | undefined) {\n        this._relativePath = value;\n        this._label = undefined;\n        this._description = undefined;\n    }\n\n    get priority(): number {\n        return 0;\n    }\n\n    getCommand(): Command | undefined {\n        const commandArgs: DiffWithCommandArgs = {\n            lhs: {\n                sha: this.ref1,\n                uri: this.uri\n            },\n            rhs: {\n                sha: this.ref2,\n                uri:\n                    this.file.status === 'R'\n                        ? GitUri.fromFile(this.file, this.uri.repoPath!, this.ref2, true)\n                        : this.uri\n            },\n            repoPath: this.uri.repoPath!,\n\n            line: 0,\n            showOptions: {\n                preserveFocus: true,\n                preview: true\n            }\n        };\n        return {\n            title: 'Open Changes',\n            command: Commands.DiffWith,\n            arguments: [this.uri, commandArgs]\n        };\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { ViewFilesLayout } from '../../configuration';\nimport { Container } from '../../container';\nimport { GitFile, GitUri } from '../../git/gitService';\nimport { Arrays, Iterables, Strings } from '../../system';\nimport { ViewWithFiles } from '../viewBase';\nimport { FileNode, FolderNode } from './folderNode';\nimport { ResultsFileNode } from './resultsFileNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport interface FilesQueryResults {\n    label: string;\n    diff: GitFile[] | undefined;\n}\n\nexport class ResultsFilesNode extends ViewNode<ViewWithFiles> {\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        public readonly repoPath: string,\n        private readonly _ref1: string,\n        private readonly _ref2: string\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view, parent);\n    }\n\n    async getChildren(): Promise<ViewNode[]> {\n        const { diff } = await this.getFilesQueryResults();\n        if (diff === undefined) return [];\n\n        let children: FileNode[] = [\n            ...Iterables.map(diff, s => new ResultsFileNode(this.view, this, this.repoPath, s, this._ref1, this._ref2))\n        ];\n\n        if (this.view.config.files.layout !== ViewFilesLayout.List) {\n            const hierarchy = Arrays.makeHierarchical(\n                children,\n                n => n.uri.getRelativePath().split('/'),\n                (...parts: string[]) => Strings.normalizePath(paths.join(...parts)),\n                this.view.config.files.compact\n            );\n\n            const root = new FolderNode(this.view, this, this.repoPath, '', hierarchy);\n            children = (await root.getChildren()) as FileNode[];\n        }\n        else {\n            children.sort(\n                (a, b) =>\n                    a.priority - b.priority ||\n                    a.label!.localeCompare(b.label!, undefined, { numeric: true, sensitivity: 'base' })\n            );\n        }\n\n        return children;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const { diff, label } = await this.getFilesQueryResults();\n\n        const item = new TreeItem(\n            label,\n            diff && diff.length > 0 ? TreeItemCollapsibleState.Expanded : TreeItemCollapsibleState.None\n        );\n        item.contextValue = ResourceType.ResultsFiles;\n        return item;\n    }\n\n    refresh() {\n        this._filesQueryResults = this.getFilesQueryResultsCore();\n    }\n\n    private _filesQueryResults: Promise<FilesQueryResults> | undefined;\n\n    private getFilesQueryResults() {\n        if (this._filesQueryResults === undefined) {\n            this._filesQueryResults = this.getFilesQueryResultsCore();\n        }\n\n        return this._filesQueryResults;\n    }\n\n    private async getFilesQueryResultsCore(): Promise<FilesQueryResults> {\n        const diff = await Container.git.getDiffStatus(this.uri.repoPath!, this._ref1, this._ref2);\n        return {\n            label: `${Strings.pluralize('file', diff !== undefined ? diff.length : 0, { zero: 'No' })} changed`,\n            diff: diff\n        };\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { NamedRef } from '../../constants';\nimport { Container } from '../../container';\nimport { GitService, GitUri } from '../../git/gitService';\nimport { log, Strings } from '../../system';\nimport { CompareView } from '../compareView';\nimport { CommitsQueryResults, ResultsCommitsNode } from './resultsCommitsNode';\nimport { ResultsFilesNode } from './resultsFilesNode';\nimport { ResourceType, SubscribeableViewNode, ViewNode } from './viewNode';\n\nexport class CompareResultsNode extends SubscribeableViewNode<CompareView> {\n    constructor(\n        view: CompareView,\n        public readonly repoPath: string,\n        private _ref1: NamedRef,\n        private _ref2: NamedRef,\n        private _pinned: boolean = false\n    ) {\n        super(GitUri.fromRepoPath(repoPath), view);\n    }\n\n    get label() {\n        return `Comparing ${this._ref1.label ||\n            GitService.shortenSha(this._ref1.ref, { working: 'Working Tree' })} to ${this._ref2.label ||\n            GitService.shortenSha(this._ref2.ref, { working: 'Working Tree' })}`;\n    }\n\n    get pinned(): boolean {\n        return this._pinned;\n    }\n\n    get ref1(): NamedRef {\n        return this._ref1;\n    }\n\n    get ref2(): NamedRef {\n        return this._ref2;\n    }\n\n    getChildren(): ViewNode[] {\n        return [\n            new ResultsCommitsNode(this.view, this, this.uri.repoPath!, this.getCommitsQuery.bind(this)),\n            new ResultsFilesNode(this.view, this, this.uri.repoPath!, this._ref1.ref, this._ref2.ref)\n        ];\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        let description;\n        if ((await Container.git.getRepositoryCount()) > 1) {\n            const repo = await Container.git.getRepository(this.uri.repoPath!);\n            description = (repo && repo.formattedName) || this.uri.repoPath;\n        }\n\n        const item = new TreeItem(this.label, this._state || TreeItemCollapsibleState.Collapsed);\n        item.contextValue = ResourceType.CompareResults;\n        if (this._pinned) {\n            item.contextValue += '+pinned';\n        }\n        item.description = description;\n        if (this._pinned) {\n            item.iconPath = {\n                dark: Container.context.asAbsolutePath('images/dark/icon-pin-small.svg'),\n                light: Container.context.asAbsolutePath('images/light/icon-pin-small.svg')\n            };\n        }\n\n        return item;\n    }\n\n    canDismiss(): boolean {\n        return !this._pinned;\n    }\n\n    @log()\n    async pin() {\n        if (this._pinned) return;\n\n        await this.view.updatePinnedComparison(this.getPinnableId(), {\n            path: this.repoPath,\n            ref1: this.ref1,\n            ref2: this.ref2\n        });\n\n        this._pinned = true;\n        void this.triggerChange();\n    }\n\n    @log()\n    async unpin() {\n        if (!this._pinned) return;\n\n        await this.view.updatePinnedComparison(this.getPinnableId());\n\n        this._pinned = false;\n        void this.triggerChange();\n    }\n\n    @log()\n    async swap() {\n        // Save the current id so we can update it later\n        const currentId = this.getPinnableId();\n\n        const ref1 = this._ref1;\n        this._ref1 = this._ref2;\n        this._ref2 = ref1;\n\n        // If we were pinned, remove the existing pin and save a new one\n        if (this._pinned) {\n            await this.view.updatePinnedComparison(currentId);\n            await this.view.updatePinnedComparison(this.getPinnableId(), {\n                path: this.repoPath,\n                ref1: this.ref1,\n                ref2: this.ref2\n            });\n        }\n\n        this.view.triggerNodeChange(this);\n    }\n\n    protected subscribe() {\n        return undefined;\n    }\n\n    private async getCommitsQuery(maxCount: number | undefined): Promise<CommitsQueryResults> {\n        const log = await Container.git.getLog(this.uri.repoPath!, {\n            maxCount: maxCount,\n            ref: `${this._ref1.ref}...${this._ref2.ref || 'HEAD'}`\n        });\n\n        const count = log !== undefined ? log.count : 0;\n        const truncated = log !== undefined ? log.truncated : false;\n\n        const label = Strings.pluralize('commit', count, { number: truncated ? `${count}+` : undefined, zero: 'No' });\n\n        return {\n            label: label,\n            log: log\n        };\n    }\n\n    private getPinnableId() {\n        return Strings.sha1(`${this.repoPath}|${this.ref1.ref}|${this.ref2.ref}`);\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { GlyphChars } from '../../constants';\nimport { Container } from '../../container';\nimport { CompareView } from '../compareView';\nimport { CompareNode } from './compareNode';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\nexport class ComparePickerNode extends ViewNode<CompareView> {\n    constructor(view: CompareView, protected readonly parent: CompareNode) {\n        super(unknownGitUri, view, parent);\n    }\n\n    getChildren(): ViewNode[] {\n        return [];\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const selectedRef = this.parent.selectedRef;\n        const repoPath = selectedRef !== undefined ? selectedRef.repoPath : undefined;\n\n        let description;\n        if (repoPath !== undefined) {\n            if ((await Container.git.getRepositoryCount()) > 1) {\n                const repo = await Container.git.getRepository(repoPath);\n                description = (repo && repo.formattedName) || repoPath;\n            }\n        }\n\n        let item;\n        if (selectedRef === undefined) {\n            item = new TreeItem(\n                'Compare <branch, tag, or ref> with <branch, tag, or ref>',\n                TreeItemCollapsibleState.None\n            );\n            item.contextValue = ResourceType.ComparePicker;\n            item.description = description;\n            item.tooltip = `Click to select or enter a reference for compare${GlyphChars.Ellipsis}`;\n            item.command = {\n                title: `Compare${GlyphChars.Ellipsis}`,\n                command: this.view.getQualifiedCommand('selectForCompare')\n            };\n        }\n        else {\n            item = new TreeItem(\n                `Compare ${selectedRef.label} with <branch, tag, or ref>`,\n                TreeItemCollapsibleState.None\n            );\n            item.contextValue = ResourceType.ComparePickerWithRef;\n            item.description = description;\n            item.tooltip = `Click to compare ${selectedRef.label} with${GlyphChars.Ellipsis}`;\n            item.command = {\n                title: `Compare ${selectedRef.label} with${GlyphChars.Ellipsis}`,\n                command: this.view.getQualifiedCommand('compareWithSelected')\n            };\n        }\n\n        return item;\n    }\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { getRepoPathOrPrompt } from '../../commands';\nimport { CommandContext, GlyphChars, NamedRef, setCommandContext } from '../../constants';\nimport { GitService } from '../../git/gitService';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../../quickpicks';\nimport { debug, Functions, gate, Iterables, log } from '../../system';\nimport { CompareView } from '../compareView';\nimport { MessageNode } from './common';\nimport { ComparePickerNode } from './comparePickerNode';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\ninterface RepoRef {\n    label: string;\n    repoPath: string;\n    ref: string | NamedRef;\n}\n\nexport class CompareNode extends ViewNode<CompareView> {\n    private _children: (ViewNode | MessageNode)[] = [];\n    private _comparePickerNode: ComparePickerNode | undefined;\n\n    constructor(view: CompareView) {\n        super(unknownGitUri, view);\n    }\n\n    private _selectedRef: RepoRef | undefined;\n    get selectedRef(): RepoRef | undefined {\n        return this._selectedRef;\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._children.length === 0) {\n            // Not really sure why I can't reuse this node -- but if I do the Tree errors out with an id already exists error\n            this._comparePickerNode = new ComparePickerNode(this.view, this);\n            this._children = [this._comparePickerNode];\n\n            const pinned = this.view.getPinnedComparisons();\n            if (pinned.length !== 0) {\n                this._children.push(...pinned);\n            }\n        }\n        else if (this._comparePickerNode === undefined || !this._children.includes(this._comparePickerNode)) {\n            // Not really sure why I can't reuse this node -- but if I do the Tree errors out with an id already exists error\n            this._comparePickerNode = new ComparePickerNode(this.view, this);\n            this._children.splice(0, 0, this._comparePickerNode);\n\n            if (this._selectedRef !== undefined) {\n                const node = this._comparePickerNode;\n                setImmediate(() => this.view.reveal(node, { focus: false, select: true }));\n            }\n        }\n\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Compare', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Compare;\n        return item;\n    }\n\n    addOrReplace(results: ViewNode, replace: boolean) {\n        if (this._children.includes(results)) return;\n\n        if (this._children.length !== 0 && replace) {\n            this._children.length = 0;\n            this._children.push(results);\n\n            // Re-add the pinned comparisons\n            const pinned = this.view.getPinnedComparisons();\n            if (pinned.length !== 0) {\n                this._children.push(...pinned);\n            }\n        }\n        else {\n            if (this._comparePickerNode !== undefined) {\n                const index = this._children.indexOf(this._comparePickerNode);\n                if (index !== -1) {\n                    this._children.splice(index, 1);\n                }\n            }\n\n            this._children.splice(0, 0, results);\n        }\n\n        this.view.triggerNodeChange();\n    }\n\n    @log()\n    clear() {\n        this._selectedRef = undefined;\n        setCommandContext(CommandContext.ViewsCanCompare, false);\n\n        this._children.length = 0;\n        this.view.triggerNodeChange();\n    }\n\n    @log({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    dismiss(node: ViewNode) {\n        this._selectedRef = undefined;\n        setCommandContext(CommandContext.ViewsCanCompare, false);\n\n        if (this._children.length !== 0) {\n            const index = this._children.indexOf(node);\n            if (index === -1) return;\n\n            this._children.splice(index, 1);\n        }\n        this.view.triggerNodeChange();\n    }\n\n    @gate()\n    @debug()\n    async refresh() {\n        if (this._children.length === 0) return;\n\n        const promises: Promise<any>[] = [\n            ...Iterables.filterMap(this._children, c => {\n                const result = c.refresh();\n                return Functions.isPromise<boolean | void>(result) ? result : undefined;\n            })\n        ];\n        await Promise.all(promises);\n    }\n\n    async compareWithSelected(repoPath?: string, ref?: string | NamedRef) {\n        if (this._selectedRef === undefined) return;\n\n        if (repoPath === undefined) {\n            repoPath = this._selectedRef.repoPath;\n        }\n        else if (repoPath !== this._selectedRef.repoPath) {\n            // If we don't have a matching repoPath, then start over\n            void this.selectForCompare(repoPath, ref);\n            return;\n        }\n\n        if (ref === undefined) {\n            const pick = await new ReferencesQuickPick(repoPath).show(\n                `Compare ${this.getRefName(this._selectedRef.ref)} with${GlyphChars.Ellipsis}`,\n                { allowEnteringRefs: true }\n            );\n            if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n            ref = pick.ref;\n        }\n\n        const ref1 = this._selectedRef;\n\n        this._selectedRef = undefined;\n        setCommandContext(CommandContext.ViewsCanCompare, false);\n\n        void (await this.view.compare(repoPath, ref1.ref, ref));\n    }\n\n    async selectForCompare(repoPath?: string, ref?: string | NamedRef) {\n        if (repoPath === undefined) {\n            repoPath = await getRepoPathOrPrompt(undefined, `Compare in which repository${GlyphChars.Ellipsis}`);\n        }\n        if (repoPath === undefined) return;\n\n        let autoCompare = false;\n        if (ref === undefined) {\n            const pick = await new ReferencesQuickPick(repoPath).show(`Compare${GlyphChars.Ellipsis}`, {\n                allowEnteringRefs: true\n            });\n            if (pick === undefined || pick instanceof CommandQuickPickItem) return;\n\n            ref = pick.ref;\n\n            autoCompare = true;\n        }\n\n        this._selectedRef = { label: this.getRefName(ref), repoPath: repoPath, ref: ref };\n        setCommandContext(CommandContext.ViewsCanCompare, true);\n\n        await this.view.show();\n\n        void (await this.triggerChange());\n\n        if (autoCompare) {\n            void (await this.compareWithSelected());\n        }\n    }\n\n    private getRefName(ref: string | NamedRef) {\n        return typeof ref === 'string' ? GitService.shortenSha(ref)! : ref.label || GitService.shortenSha(ref.ref)!;\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport {\n    commands,\n    Disposable,\n    ExtensionContext,\n    SourceControlResourceGroup,\n    SourceControlResourceState,\n    TextDocumentShowOptions,\n    TextEditor,\n    TextEditorEdit,\n    Uri,\n    ViewColumn,\n    window,\n    workspace\n} from 'vscode';\nimport { BuiltInCommands, DocumentSchemes, ImageMimetypes } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitCommit, GitFile, GitRemote, GitUri, Repository } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { CommandQuickPickItem, RepositoriesQuickPick } from '../quickpicks';\n// import { Telemetry } from '../telemetry';\nimport { ViewNode, ViewRefNode } from '../views/nodes';\n\nexport enum Commands {\n    ClearFileAnnotations = 'gitlens.clearFileAnnotations',\n    CloseUnchangedFiles = 'gitlens.closeUnchangedFiles',\n    ComputingFileAnnotations = 'gitlens.computingFileAnnotations',\n    CopyMessageToClipboard = 'gitlens.copyMessageToClipboard',\n    CopyRemoteFileUrlToClipboard = 'gitlens.copyRemoteFileUrlToClipboard',\n    CopyShaToClipboard = 'gitlens.copyShaToClipboard',\n    DiffDirectory = 'gitlens.diffDirectory',\n    DiffDirectoryWithHead = 'gitlens.diffDirectoryWithHead',\n    DiffHeadWith = 'gitlens.diffHeadWith',\n    // DEPRECATED\n    DiffHeadWithBranch = 'gitlens.diffHeadWithBranch',\n    DiffWorkingWith = 'gitlens.diffWorkingWith',\n    // DEPRECATED\n    DiffWorkingWithBranch = 'gitlens.diffWorkingWithBranch',\n    ExternalDiffAll = 'gitlens.externalDiffAll',\n    DiffWith = 'gitlens.diffWith',\n    // DEPRECATED\n    DiffWithBranch = 'gitlens.diffWithBranch',\n    DiffWithRef = 'gitlens.diffWithRef',\n    DiffWithNext = 'gitlens.diffWithNext',\n    DiffWithNextInDiff = 'gitlens.diffWithNextInDiff',\n    DiffWithPrevious = 'gitlens.diffWithPrevious',\n    DiffWithPreviousInDiff = 'gitlens.diffWithPreviousInDiff',\n    DiffLineWithPrevious = 'gitlens.diffLineWithPrevious',\n    DiffWithRevision = 'gitlens.diffWithRevision',\n    DiffWithWorking = 'gitlens.diffWithWorking',\n    DiffWithWorkingInDiff = 'gitlens.diffWithWorkingInDiff',\n    DiffLineWithWorking = 'gitlens.diffLineWithWorking',\n    ExternalDiff = 'gitlens.externalDiff',\n    FetchRepositories = 'gitlens.fetchRepositories',\n    OpenChangedFiles = 'gitlens.openChangedFiles',\n    OpenBranchesInRemote = 'gitlens.openBranchesInRemote',\n    OpenBranchInRemote = 'gitlens.openBranchInRemote',\n    OpenCommitInRemote = 'gitlens.openCommitInRemote',\n    OpenFileInRemote = 'gitlens.openFileInRemote',\n    OpenFileRevision = 'gitlens.openFileRevision',\n    OpenFileRevisionFrom = 'gitlens.openFileRevisionFrom',\n    // DEPRECATED\n    OpenFileRevisionFromBranch = 'gitlens.openFileRevisionFromBranch',\n    OpenInRemote = 'gitlens.openInRemote',\n    OpenRepoInRemote = 'gitlens.openRepoInRemote',\n    OpenWorkingFile = 'gitlens.openWorkingFile',\n    PullRepositories = 'gitlens.pullRepositories',\n    PushRepositories = 'gitlens.pushRepositories',\n    ResetSuppressedWarnings = 'gitlens.resetSuppressedWarnings',\n    ShowCommitInView = 'gitlens.showCommitInView',\n    SearchCommits = 'gitlens.showCommitSearch',\n    SearchCommitsInView = 'gitlens.views.search.searchCommits',\n    ShowCompareView = 'gitlens.showCompareView',\n    ShowFileHistoryView = 'gitlens.showFileHistoryView',\n    ShowFileHistoryInView = 'gitlens.showFileHistoryInView',\n    ShowLineHistoryView = 'gitlens.showLineHistoryView',\n    ShowLastQuickPick = 'gitlens.showLastQuickPick',\n    ShowQuickBranchHistory = 'gitlens.showQuickBranchHistory',\n    ShowQuickCommitDetails = 'gitlens.showQuickCommitDetails',\n    ShowQuickCommitFileDetails = 'gitlens.showQuickCommitFileDetails',\n    ShowQuickCurrentBranchHistory = 'gitlens.showQuickRepoHistory',\n    ShowQuickFileHistory = 'gitlens.showQuickFileHistory',\n    ShowQuickRepoStatus = 'gitlens.showQuickRepoStatus',\n    ShowQuickRevisionDetails = 'gitlens.showQuickRevisionDetails',\n    ShowQuickStashList = 'gitlens.showQuickStashList',\n    ShowRepositoriesView = 'gitlens.showRepositoriesView',\n    ShowSearchView = 'gitlens.showSearchView',\n    ShowHistoryPage = 'gitlens.showHistoryPage',\n    ShowSettingsPage = 'gitlens.showSettingsPage',\n    ShowWelcomePage = 'gitlens.showWelcomePage',\n    StashApply = 'gitlens.stashApply',\n    StashDelete = 'gitlens.stashDelete',\n    StashSave = 'gitlens.stashSave',\n    StashSaveFiles = 'gitlens.stashSaveFiles',\n    SupportGitLens = 'gitlens.supportGitLens',\n    SwitchMode = 'gitlens.switchMode',\n    ToggleCodeLens = 'gitlens.toggleCodeLens',\n    ToggleFileBlame = 'gitlens.toggleFileBlame',\n    ToggleFileHeatmap = 'gitlens.toggleFileHeatmap',\n    ToggleFileRecentChanges = 'gitlens.toggleFileRecentChanges',\n    ToggleLineBlame = 'gitlens.toggleLineBlame',\n    ToggleReviewMode = 'gitlens.toggleReviewMode',\n    ToggleZenMode = 'gitlens.toggleZenMode',\n    ViewsOpenDirectoryDiff = 'gitlens.views.openDirectoryDiff',\n    ViewsOpenDirectoryDiffWithWorking = 'gitlens.views.openDirectoryDiffWithWorking'\n}\n\ninterface CommandConstructor {\n    new (): any;\n}\n\nconst registrableCommands: CommandConstructor[] = [];\n\nexport function command(): ClassDecorator {\n    return (target: any) => {\n        registrableCommands.push(target);\n    };\n}\n\nexport function registerCommands(context: ExtensionContext): void {\n    for (const c of registrableCommands) {\n        context.subscriptions.push(new c());\n    }\n}\n\nexport function getCommandUri(uri?: Uri, editor?: TextEditor): Uri | undefined {\n    if (uri instanceof Uri) return uri;\n    if (editor == null) return undefined;\n\n    const document = editor.document;\n    if (document == null) return undefined;\n\n    return document.uri;\n}\n\nexport async function getRepoPathOrActiveOrPrompt(\n    uri: Uri | undefined,\n    editor: TextEditor | undefined,\n    placeholder: string,\n    goBackCommand?: CommandQuickPickItem\n) {\n    let repoPath = await Container.git.getRepoPathOrActive(uri, editor);\n    if (!repoPath) {\n        const pick = await RepositoriesQuickPick.show(placeholder, goBackCommand);\n        if (pick instanceof CommandQuickPickItem) {\n            await pick.execute();\n            return undefined;\n        }\n\n        if (pick === undefined) {\n            if (goBackCommand !== undefined) {\n                await goBackCommand.execute();\n            }\n            return undefined;\n        }\n\n        repoPath = pick.repoPath;\n    }\n    return repoPath;\n}\n\nexport async function getRepoPathOrPrompt(\n    uri: Uri | undefined,\n    placeholder: string,\n    goBackCommand?: CommandQuickPickItem\n) {\n    let repoPath = await Container.git.getRepoPath(uri);\n    if (!repoPath) {\n        const pick = await RepositoriesQuickPick.show(placeholder, goBackCommand);\n        if (pick instanceof CommandQuickPickItem) {\n            await pick.execute();\n            return undefined;\n        }\n\n        if (pick === undefined) {\n            if (goBackCommand !== undefined) {\n                await goBackCommand.execute();\n            }\n            return undefined;\n        }\n\n        repoPath = pick.repoPath;\n    }\n    return repoPath;\n}\n\nexport interface CommandContextParsingOptions {\n    editor: boolean;\n    uri: boolean;\n}\n\nexport interface CommandBaseContext {\n    command: string;\n    editor?: TextEditor;\n    uri?: Uri;\n}\n\nexport interface CommandScmGroupsContext extends CommandBaseContext {\n    type: 'scm-groups';\n    scmResourceGroups: SourceControlResourceGroup[];\n}\n\nexport interface CommandScmStatesContext extends CommandBaseContext {\n    type: 'scm-states';\n    scmResourceStates: SourceControlResourceState[];\n}\n\nexport interface CommandUnknownContext extends CommandBaseContext {\n    type: 'unknown';\n}\n\nexport interface CommandUriContext extends CommandBaseContext {\n    type: 'uri';\n}\n\n// export interface CommandViewContext extends CommandBaseContext {\n//     type: 'view';\n// }\n\nexport interface CommandViewItemContext extends CommandBaseContext {\n    type: 'viewItem';\n    node: ViewNode;\n}\n\nexport function isCommandViewContextWithBranch(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { branch: GitBranch } } {\n    if (context.type !== 'viewItem') return false;\n\n    return (context.node as ViewNode & { branch: GitBranch }).branch instanceof GitBranch;\n}\n\nexport function isCommandViewContextWithCommit<T extends GitCommit>(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { commit: T } } {\n    if (context.type !== 'viewItem') return false;\n\n    return (context.node as ViewNode & { commit: GitCommit }).commit instanceof GitCommit;\n}\n\nexport function isCommandViewContextWithFile(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { file: GitFile; repoPath: string } } {\n    if (context.type !== 'viewItem') return false;\n\n    const node = context.node as ViewNode & { file: GitFile; repoPath: string };\n    return node.file !== undefined && (node.file.repoPath !== undefined || node.repoPath !== undefined);\n}\n\nexport function isCommandViewContextWithFileCommit(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { commit: GitCommit; file: GitFile; repoPath: string } } {\n    if (context.type !== 'viewItem') return false;\n\n    const node = context.node as ViewNode & { commit: GitCommit; file: GitFile; repoPath: string };\n    return (\n        node.file !== undefined &&\n        node.commit instanceof GitCommit &&\n        (node.file.repoPath !== undefined || node.repoPath !== undefined)\n    );\n}\n\nexport function isCommandViewContextWithFileRefs(\n    context: CommandContext\n): context is CommandViewItemContext & {\n    node: ViewNode & { file: GitFile; ref1: string; ref2: string; repoPath: string };\n} {\n    if (context.type !== 'viewItem') return false;\n\n    const node = context.node as ViewNode & { file: GitFile; ref1: string; ref2: string; repoPath: string };\n    return (\n        node.file !== undefined &&\n        node.ref1 !== undefined &&\n        node.ref2 !== undefined &&\n        (node.file.repoPath !== undefined || node.repoPath !== undefined)\n    );\n}\n\nexport function isCommandViewContextWithRef(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { ref: string } } {\n    return context.type === 'viewItem' && context.node instanceof ViewRefNode;\n}\n\nexport function isCommandViewContextWithRemote(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { remote: GitRemote } } {\n    if (context.type !== 'viewItem') return false;\n\n    return (context.node as ViewNode & { remote: GitRemote }).remote instanceof GitRemote;\n}\n\nexport function isCommandViewContextWithRepo(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { repo: Repository } } {\n    if (context.type !== 'viewItem') return false;\n\n    return (context.node as ViewNode & { repo?: Repository }).repo instanceof Repository;\n}\n\nexport function isCommandViewContextWithRepoPath(\n    context: CommandContext\n): context is CommandViewItemContext & { node: ViewNode & { repoPath: string } } {\n    if (context.type !== 'viewItem') return false;\n\n    return typeof (context.node as ViewNode & { repoPath?: string }).repoPath === 'string';\n}\n\nexport type CommandContext =\n    | CommandScmGroupsContext\n    | CommandScmStatesContext\n    | CommandUnknownContext\n    | CommandUriContext\n    // | CommandViewContext\n    | CommandViewItemContext;\n\nfunction isScmResourceGroup(group: any): group is SourceControlResourceGroup {\n    if (group == null) return false;\n\n    return (\n        (group as SourceControlResourceGroup).id !== undefined &&\n        (group.handle !== undefined ||\n            (group as SourceControlResourceGroup).label !== undefined ||\n            (group as SourceControlResourceGroup).resourceStates !== undefined)\n    );\n}\n\nfunction isScmResourceState(state: any): state is SourceControlResourceState {\n    if (state == null) return false;\n\n    return (state as SourceControlResourceState).resourceUri != null;\n}\n\nfunction isTextEditor(editor: any): editor is TextEditor {\n    if (editor == null) return false;\n\n    return (\n        editor.id !== undefined &&\n        ((editor as TextEditor).edit !== undefined || (editor as TextEditor).document !== undefined)\n    );\n}\n\nexport abstract class Command implements Disposable {\n    static getMarkdownCommandArgsCore<T>(command: Commands, args: T): string {\n        return `command:${command}?${encodeURIComponent(JSON.stringify(args))}`;\n    }\n\n    protected readonly contextParsingOptions: CommandContextParsingOptions = { editor: false, uri: false };\n\n    private _disposable: Disposable;\n\n    constructor(command: Commands | Commands[]) {\n        if (typeof command === 'string') {\n            this._disposable = commands.registerCommand(\n                command,\n                (...args: any[]) => this._execute(command, ...args),\n                this\n            );\n\n            return;\n        }\n\n        const subscriptions = command.map(cmd =>\n            commands.registerCommand(cmd, (...args: any[]) => this._execute(cmd, ...args), this)\n        );\n        this._disposable = Disposable.from(...subscriptions);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    protected preExecute(context: CommandContext, ...args: any[]): Promise<any> {\n        return this.execute(...args);\n    }\n\n    abstract execute(...args: any[]): any;\n\n    protected _execute(command: string, ...args: any[]): any {\n        // Telemetry.trackEvent(command);\n\n        const [context, rest] = Command.parseContext(command, { ...this.contextParsingOptions }, ...args);\n        return this.preExecute(context, ...rest);\n    }\n\n    private static parseContext(\n        command: string,\n        options: CommandContextParsingOptions,\n        ...args: any[]\n    ): [CommandContext, any[]] {\n        let editor: TextEditor | undefined = undefined;\n\n        let firstArg = args[0];\n        if (options.editor && (firstArg == null || isTextEditor(firstArg))) {\n            editor = firstArg;\n            args = args.slice(1);\n            firstArg = args[0];\n        }\n\n        if (options.uri && (firstArg == null || firstArg instanceof Uri)) {\n            const [uri, ...rest] = args as [Uri, any];\n            if (uri !== undefined) {\n                return [{ command: command, type: 'uri', editor: editor, uri: uri }, rest];\n            }\n\n            args = args.slice(1);\n        }\n\n        if (firstArg instanceof ViewNode) {\n            const [node, ...rest] = args as [ViewNode, any];\n            return [{ command: command, type: 'viewItem', node: node, uri: node.uri }, rest];\n        }\n\n        if (isScmResourceState(firstArg)) {\n            const states = [];\n            let count = 0;\n            for (const arg of args) {\n                if (!isScmResourceState(arg)) break;\n\n                count++;\n                states.push(arg);\n            }\n\n            return [\n                { command: command, type: 'scm-states', scmResourceStates: states, uri: states[0].resourceUri },\n                args.slice(count)\n            ];\n        }\n\n        if (isScmResourceGroup(firstArg)) {\n            const groups = [];\n            let count = 0;\n            for (const arg of args) {\n                if (!isScmResourceGroup(arg)) break;\n\n                count++;\n                groups.push(arg);\n            }\n\n            return [{ command: command, type: 'scm-groups', scmResourceGroups: groups }, args.slice(count)];\n        }\n\n        return [{ command: command, type: 'unknown', editor: editor }, args];\n    }\n}\n\nexport abstract class ActiveEditorCommand extends Command {\n    protected readonly contextParsingOptions: CommandContextParsingOptions = { editor: true, uri: true };\n\n    constructor(command: Commands | Commands[]) {\n        super(command);\n    }\n\n    protected preExecute(context: CommandContext, ...args: any[]): Promise<any> {\n        return this.execute(context.editor, context.uri, ...args);\n    }\n\n    protected _execute(command: string, ...args: any[]): any {\n        return super._execute(command, window.activeTextEditor, ...args);\n    }\n\n    abstract execute(editor?: TextEditor, ...args: any[]): any;\n}\n\nlet lastCommand: { command: string; args: any[] } | undefined = undefined;\nexport function getLastCommand() {\n    return lastCommand;\n}\n\nexport abstract class ActiveEditorCachedCommand extends ActiveEditorCommand {\n    constructor(command: Commands | Commands[]) {\n        super(command);\n    }\n\n    protected _execute(command: string, ...args: any[]): any {\n        lastCommand = {\n            command: command,\n            args: args\n        };\n        return super._execute(command, ...args);\n    }\n\n    abstract execute(editor: TextEditor, ...args: any[]): any;\n}\n\nexport abstract class EditorCommand implements Disposable {\n    private _disposable: Disposable;\n\n    constructor(command: Commands | Commands[]) {\n        if (!Array.isArray(command)) {\n            command = [command];\n        }\n\n        const subscriptions = [];\n        for (const cmd of command) {\n            subscriptions.push(\n                commands.registerTextEditorCommand(\n                    cmd,\n                    (editor: TextEditor, edit: TextEditorEdit, ...args: any[]) =>\n                        this.executeCore(cmd, editor, edit, ...args),\n                    this\n                )\n            );\n        }\n        this._disposable = Disposable.from(...subscriptions);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    private executeCore(command: string, editor: TextEditor, edit: TextEditorEdit, ...args: any[]): any {\n        // Telemetry.trackEvent(command);\n        return this.execute(editor, edit, ...args);\n    }\n\n    abstract execute(editor: TextEditor, edit: TextEditorEdit, ...args: any[]): any;\n}\n\nexport async function openEditor(\n    uri: Uri,\n    options: TextDocumentShowOptions & { rethrow?: boolean } = {}\n): Promise<TextEditor | undefined> {\n    const { rethrow, ...opts } = options;\n    try {\n        if (uri instanceof GitUri) {\n            uri = uri.documentUri();\n        }\n\n        if (uri.scheme === DocumentSchemes.GitLens && ImageMimetypes[paths.extname(uri.fsPath)]) {\n            await commands.executeCommand(BuiltInCommands.Open, uri);\n\n            return undefined;\n        }\n\n        const document = await workspace.openTextDocument(uri);\n        return window.showTextDocument(document, {\n            preserveFocus: false,\n            preview: true,\n            viewColumn: ViewColumn.Active,\n            ...opts\n        });\n    }\n    catch (ex) {\n        const msg = ex.toString();\n        if (msg.includes('File seems to be binary and cannot be opened as text')) {\n            await commands.executeCommand(BuiltInCommands.Open, uri);\n\n            return undefined;\n        }\n\n        if (rethrow) throw ex;\n\n        Logger.error(ex, 'openEditor');\n        return undefined;\n    }\n}\n\nexport function openWorkspace(uri: Uri, name: string, options: { openInNewWindow?: boolean } = {}) {\n    if (options.openInNewWindow) {\n        commands.executeCommand(BuiltInCommands.OpenFolder, uri, true);\n\n        return true;\n    }\n\n    return workspace.updateWorkspaceFolders(\n        workspace.workspaceFolders !== undefined ? workspace.workspaceFolders.length : 0,\n        null,\n        { uri: uri, name: name }\n    );\n}\n","'use strict';\nimport { TreeItem, TreeItemCollapsibleState } from 'vscode';\nimport { SearchCommitsCommandArgs } from '../../commands';\nimport { GlyphChars } from '../../constants';\nimport { GitRepoSearchBy } from '../../git/gitService';\nimport { debug, Functions, gate, Iterables, log } from '../../system';\nimport { View } from '../viewBase';\nimport { CommandMessageNode, MessageNode } from './common';\nimport { ResourceType, unknownGitUri, ViewNode } from './viewNode';\n\nexport class SearchNode extends ViewNode {\n    private _children: (ViewNode | MessageNode)[] = [];\n\n    constructor(view: View) {\n        super(unknownGitUri, view);\n    }\n\n    getChildren(): ViewNode[] {\n        if (this._children.length === 0) {\n            const command = {\n                title: ' ',\n                command: 'gitlens.showCommitSearch'\n            };\n\n            const getCommandArgs = (searchBy: GitRepoSearchBy): SearchCommitsCommandArgs => {\n                return {\n                    searchBy: searchBy\n                };\n            };\n\n            return [\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Message)]\n                    },\n                    'Search commits by message',\n                    'message-pattern',\n                    'Click to search commits by message'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Author)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by author`,\n                    '@ author-pattern',\n                    'Click to search commits by author'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Sha)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by commit id`,\n                    '# sha',\n                    'Click to search commits by commit id'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Files)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by files`,\n                    ': file-path/glob',\n                    'Click to search commits by files'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.Changes)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by changes`,\n                    '= pattern',\n                    'Click to search commits by changes'\n                ),\n                new CommandMessageNode(\n                    this.view,\n                    this,\n                    {\n                        ...command,\n                        arguments: [this, getCommandArgs(GitRepoSearchBy.ChangedLines)]\n                    },\n                    `${GlyphChars.Space.repeat(4)} or, by changed lines`,\n                    '~ pattern',\n                    'Click to search commits by changed lines'\n                )\n            ];\n        }\n\n        return this._children;\n    }\n\n    getTreeItem(): TreeItem {\n        const item = new TreeItem('Search', TreeItemCollapsibleState.Expanded);\n        item.contextValue = ResourceType.Search;\n        return item;\n    }\n\n    addOrReplace(results: ViewNode, replace: boolean) {\n        if (this._children.includes(results)) return;\n\n        if (this._children.length !== 0 && replace) {\n            this._children.length = 0;\n            this._children.push(results);\n        }\n        else {\n            this._children.splice(0, 0, results);\n        }\n\n        this.view.triggerNodeChange();\n    }\n\n    @log()\n    clear() {\n        if (this._children.length === 0) return;\n\n        this._children.length = 0;\n        this.view.triggerNodeChange();\n    }\n\n    @log({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    dismiss(node: ViewNode) {\n        if (this._children.length === 0) return;\n\n        const index = this._children.findIndex(n => n === node);\n        if (index === -1) return;\n\n        this._children.splice(index, 1);\n        this.view.triggerNodeChange();\n    }\n\n    @gate()\n    @debug()\n    async refresh() {\n        if (this._children.length === 0) return;\n\n        const promises: Promise<any>[] = [\n            ...Iterables.filterMap(this._children, c => {\n                const result = c.refresh();\n                return Functions.isPromise<boolean | void>(result) ? result : undefined;\n            })\n        ];\n        await Promise.all(promises);\n    }\n}\n","'use strict';\nimport { TreeItem } from 'vscode';\nimport { SearchCommitsCommandArgs } from '../../commands';\nimport { Commands } from '../../commands/common';\nimport { GitRepoSearchBy } from '../../git/gitService';\nimport { ViewWithFiles } from '../viewBase';\nimport { CommitsQueryResults, ResultsCommitsNode } from './resultsCommitsNode';\nimport { ResourceType, ViewNode } from './viewNode';\n\nexport class SearchResultsCommitsNode extends ResultsCommitsNode {\n    constructor(\n        view: ViewWithFiles,\n        parent: ViewNode,\n        repoPath: string,\n        public readonly search: string,\n        public readonly searchBy: GitRepoSearchBy,\n        commitsQuery: (maxCount: number | undefined) => Promise<CommitsQueryResults>\n    ) {\n        super(view, parent, repoPath, commitsQuery);\n    }\n\n    get type(): ResourceType {\n        return ResourceType.SearchResults;\n    }\n\n    async getTreeItem(): Promise<TreeItem> {\n        const { log } = await super.getCommitsQueryResults();\n\n        const item = await super.getTreeItem();\n\n        if (log == null || log.count === 0) {\n            const args: SearchCommitsCommandArgs = {\n                search: this.search,\n                searchBy: this.searchBy,\n                prefillOnly: true\n            };\n            item.command = {\n                title: 'Search Commits',\n                command: Commands.SearchCommitsInView,\n                arguments: [args]\n            };\n        }\n\n        return item;\n    }\n}\n","'use strict';\nimport {\n    commands,\n    ConfigurationChangeEvent,\n    Disposable,\n    Event,\n    EventEmitter,\n    TreeDataProvider,\n    TreeItem,\n    TreeItemCollapsibleState,\n    TreeView,\n    TreeViewExpansionEvent,\n    TreeViewVisibilityChangeEvent,\n    window\n} from 'vscode';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { debug, Functions, log } from '../system';\nimport { CompareView } from './compareView';\nimport { FileHistoryView } from './fileHistoryView';\nimport { LineHistoryView } from './lineHistoryView';\nimport { ViewNode } from './nodes';\nimport { isPageable } from './nodes/viewNode';\nimport { RepositoriesView } from './repositoriesView';\nimport { SearchView } from './searchView';\nimport { RefreshNodeCommandArgs } from './viewCommands';\n\nexport type View = RepositoriesView | FileHistoryView | LineHistoryView | CompareView | SearchView;\nexport type ViewWithFiles = RepositoriesView | CompareView | SearchView;\n\nexport interface TreeViewNodeStateChangeEvent<T> extends TreeViewExpansionEvent<T> {\n    state: TreeItemCollapsibleState;\n}\n\nexport abstract class ViewBase<TRoot extends ViewNode<View>> implements TreeDataProvider<ViewNode>, Disposable {\n    protected _onDidChangeTreeData = new EventEmitter<ViewNode>();\n    get onDidChangeTreeData(): Event<ViewNode> {\n        return this._onDidChangeTreeData.event;\n    }\n\n    private _onDidChangeVisibility = new EventEmitter<TreeViewVisibilityChangeEvent>();\n    get onDidChangeVisibility(): Event<TreeViewVisibilityChangeEvent> {\n        return this._onDidChangeVisibility.event;\n    }\n\n    private _onDidChangeNodeState = new EventEmitter<TreeViewNodeStateChangeEvent<ViewNode>>();\n    get onDidChangeNodeState(): Event<TreeViewNodeStateChangeEvent<ViewNode>> {\n        return this._onDidChangeNodeState.event;\n    }\n\n    protected _disposable: Disposable | undefined;\n    protected _root: TRoot | undefined;\n    protected _tree: TreeView<ViewNode> | undefined;\n\n    constructor(public readonly id: string) {\n        this.registerCommands();\n\n        Container.context.subscriptions.push(configuration.onDidChange(this.onConfigurationChanged, this));\n        setImmediate(() => this.onConfigurationChanged(configuration.initializingChangeEvent));\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    getQualifiedCommand(command: string) {\n        return `${this.id}.${command}`;\n    }\n\n    protected abstract get location(): string;\n\n    protected abstract getRoot(): TRoot;\n    protected abstract registerCommands(): void;\n    protected abstract onConfigurationChanged(e: ConfigurationChangeEvent): void;\n\n    protected initialize(container?: string, options: { showCollapseAll?: boolean } = {}) {\n        if (this._disposable) {\n            this._disposable.dispose();\n            this._onDidChangeTreeData = new EventEmitter<ViewNode>();\n        }\n\n        this._tree = window.createTreeView(`${this.id}${container ? `:${container}` : ''}`, {\n            ...options,\n            treeDataProvider: this\n        });\n        this._disposable = Disposable.from(\n            this._tree,\n            this._tree.onDidChangeVisibility(Functions.debounce(this.onVisibilityChanged, 250), this),\n            this._tree.onDidCollapseElement(this.onElementCollapsed, this),\n            this._tree.onDidExpandElement(this.onElementExpanded, this)\n        );\n    }\n\n    protected ensureRoot() {\n        if (this._root === undefined) {\n            this._root = this.getRoot();\n        }\n\n        return this._root;\n    }\n\n    getChildren(node?: ViewNode): ViewNode[] | Promise<ViewNode[]> {\n        if (node !== undefined) return node.getChildren();\n\n        const root = this.ensureRoot();\n        return root.getChildren();\n    }\n\n    getParent(node: ViewNode): ViewNode | undefined {\n        return node.getParent();\n    }\n\n    getTreeItem(node: ViewNode): TreeItem | Promise<TreeItem> {\n        return node.getTreeItem();\n    }\n\n    protected onElementCollapsed(e: TreeViewExpansionEvent<ViewNode>) {\n        this._onDidChangeNodeState.fire({ ...e, state: TreeItemCollapsibleState.Collapsed });\n    }\n\n    protected onElementExpanded(e: TreeViewExpansionEvent<ViewNode>) {\n        this._onDidChangeNodeState.fire({ ...e, state: TreeItemCollapsibleState.Expanded });\n    }\n\n    protected onVisibilityChanged(e: TreeViewVisibilityChangeEvent) {\n        this._onDidChangeVisibility.fire(e);\n    }\n\n    get selection(): ViewNode[] {\n        if (this._tree === undefined || this._root === undefined) return [];\n\n        return this._tree.selection;\n    }\n\n    get visible(): boolean {\n        return this._tree !== undefined ? this._tree.visible : false;\n    }\n\n    @debug()\n    async refresh(reset: boolean = false) {\n        if (this._root !== undefined) {\n            await this._root.refresh(reset);\n        }\n\n        this.triggerNodeChange();\n    }\n\n    @debug({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    async refreshNode(node: ViewNode, reset: boolean = false, args?: RefreshNodeCommandArgs) {\n        if (args !== undefined) {\n            if (isPageable(node)) {\n                if (args.maxCount === undefined || args.maxCount === 0) {\n                    node.maxCount = args.maxCount;\n                }\n                else {\n                    node.maxCount = (node.maxCount || args.maxCount) + args.maxCount;\n                }\n\n                if (args.previousNode !== undefined) {\n                    void (await this.reveal(args.previousNode, { select: true }));\n                }\n            }\n        }\n\n        const cancel = await node.refresh(reset);\n        if (cancel === true) return;\n\n        this.triggerNodeChange(node);\n    }\n\n    @log({\n        args: { 0: (n: ViewNode) => n.toString() }\n    })\n    async reveal(\n        node: ViewNode,\n        options?: {\n            select?: boolean;\n            focus?: boolean;\n            expand?: boolean | number;\n        }\n    ) {\n        if (this._tree === undefined) return;\n\n        try {\n            await this._tree.reveal(node, options);\n        }\n        catch (ex) {\n            Logger.error(ex);\n        }\n    }\n\n    @log()\n    async show() {\n        try {\n            const location = this.location;\n            return await commands.executeCommand(`${this.id}${location ? `:${location}` : ''}.focus`);\n        }\n        catch (ex) {\n            Logger.error(ex);\n            return undefined;\n        }\n    }\n\n    @debug({\n        args: { 0: (n: ViewNode) => (n != null ? n.toString() : '') }\n    })\n    triggerNodeChange(node?: ViewNode) {\n        // Since the root node won't actually refresh, force everything\n        this._onDidChangeTreeData.fire(node !== undefined && node !== this._root ? node : undefined);\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { CompareViewConfig, configuration, ViewFilesLayout, ViewsConfig } from '../configuration';\nimport {\n    CommandContext,\n    NamedRef,\n    PinnedComparison,\n    PinnedComparisons,\n    setCommandContext,\n    WorkspaceState\n} from '../constants';\nimport { Container } from '../container';\nimport { CompareNode, CompareResultsNode, nodeSupportsConditionalDismissal, ViewNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class CompareView extends ViewBase<CompareNode> {\n    constructor() {\n        super('gitlens.views.compare');\n\n        setCommandContext(CommandContext.ViewsCompareKeepResults, this.keepResults);\n    }\n\n    getRoot() {\n        return new CompareNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('clear'), () => this.clear(), this);\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToAuto'),\n            () => this.setFilesLayout(ViewFilesLayout.Auto),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToList'),\n            () => this.setFilesLayout(ViewFilesLayout.List),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToTree'),\n            () => this.setFilesLayout(ViewFilesLayout.Tree),\n            this\n        );\n        commands.registerCommand(this.getQualifiedCommand('setKeepResultsToOn'), () => this.setKeepResults(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setKeepResultsToOff'),\n            () => this.setKeepResults(false),\n            this\n        );\n\n        commands.registerCommand(this.getQualifiedCommand('pinComparison'), this.pinComparison, this);\n        commands.registerCommand(this.getQualifiedCommand('unpinComparison'), this.unpinComparison, this);\n        commands.registerCommand(this.getQualifiedCommand('swapComparison'), this.swapComparison, this);\n\n        commands.registerCommand(this.getQualifiedCommand('selectForCompare'), this.selectForCompare, this);\n        commands.registerCommand(this.getQualifiedCommand('compareWithSelected'), this.compareWithSelected, this);\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('compare').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('compare')('location').value)) {\n            this.initialize(this.config.location, { showCollapseAll: true });\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & CompareViewConfig {\n        return { ...Container.config.views, ...Container.config.views.compare };\n    }\n\n    get keepResults(): boolean {\n        return Container.context.workspaceState.get<boolean>(WorkspaceState.ViewsCompareKeepResults, false);\n    }\n\n    clear() {\n        if (this._root === undefined) return;\n\n        this._root.clear();\n    }\n\n    dismissNode(node: ViewNode) {\n        if (this._root === undefined) return;\n        if (nodeSupportsConditionalDismissal(node) && node.canDismiss() === false) return;\n\n        this._root.dismiss(node);\n    }\n\n    compare(repoPath: string, ref1: string | NamedRef, ref2: string | NamedRef) {\n        return this.addResults(\n            new CompareResultsNode(\n                this,\n                repoPath,\n                typeof ref1 === 'string' ? { ref: ref1 } : ref1,\n                typeof ref2 === 'string' ? { ref: ref2 } : ref2\n            )\n        );\n    }\n\n    compareWithSelected(repoPath?: string, ref?: string | NamedRef) {\n        const root = this.ensureRoot();\n        void root.compareWithSelected(repoPath, ref);\n    }\n\n    selectForCompare(repoPath?: string, ref?: string | NamedRef) {\n        const root = this.ensureRoot();\n        void root.selectForCompare(repoPath, ref);\n    }\n\n    getPinnedComparisons() {\n        const pinned = Container.context.workspaceState.get<PinnedComparisons>(WorkspaceState.PinnedComparisons);\n        if (pinned == null) return [];\n\n        return Object.values(pinned).map(p => new CompareResultsNode(this, p.path, p.ref1, p.ref2, true));\n    }\n\n    async updatePinnedComparison(id: string, pin?: PinnedComparison) {\n        let pinned = Container.context.workspaceState.get<PinnedComparisons>(WorkspaceState.PinnedComparisons);\n        if (pinned == null) {\n            pinned = Object.create(null);\n        }\n\n        if (pin !== undefined) {\n            pinned![id] = {\n                path: pin.path,\n                ref1: pin.ref1,\n                ref2: pin.ref2\n            };\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { [id]: _, ...rest } = pinned!;\n            pinned = rest;\n        }\n\n        await Container.context.workspaceState.update(WorkspaceState.PinnedComparisons, pinned);\n    }\n\n    private async addResults(results: ViewNode) {\n        if (!this.visible) {\n            void (await this.show());\n        }\n\n        const root = this.ensureRoot();\n        root.addOrReplace(results, !this.keepResults);\n\n        setImmediate(() => this.reveal(results, { select: true, expand: true }));\n    }\n\n    private setFilesLayout(layout: ViewFilesLayout) {\n        return configuration.updateEffective(configuration.name('views')('compare')('files')('layout').value, layout);\n    }\n\n    private setKeepResults(enabled: boolean) {\n        Container.context.workspaceState.update(WorkspaceState.ViewsCompareKeepResults, enabled);\n        setCommandContext(CommandContext.ViewsCompareKeepResults, enabled);\n    }\n\n    private pinComparison(node: ViewNode) {\n        if (!(node instanceof CompareResultsNode)) return undefined;\n\n        return node.pin();\n    }\n\n    private swapComparison(node: ViewNode) {\n        if (!(node instanceof CompareResultsNode)) return undefined;\n\n        return node.swap();\n    }\n\n    private unpinComparison(node: ViewNode) {\n        if (!(node instanceof CompareResultsNode)) return undefined;\n\n        return node.unpin();\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { configuration, FileHistoryViewConfig, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitUri';\nimport { FileHistoryTrackerNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class FileHistoryView extends ViewBase<FileHistoryTrackerNode> {\n    constructor() {\n        super('gitlens.views.fileHistory');\n    }\n\n    getRoot() {\n        return new FileHistoryTrackerNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(this.getQualifiedCommand('changeBase'), () => this.changeBase(), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOn'),\n            () => this.setEditorFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOff'),\n            () => this.setEditorFollowing(false),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOn'),\n            () => this.setRenameFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOff'),\n            () => this.setRenameFollowing(false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('fileHistory').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value) &&\n            !configuration.changed(e, configuration.name('advanced')('fileHistoryFollowsRenames').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('fileHistory')('enabled').value)) {\n            setCommandContext(CommandContext.ViewsFileHistoryEditorFollowing, true);\n        }\n\n        if (configuration.changed(e, configuration.name('views')('fileHistory')('location').value)) {\n            this.initialize(this.config.location);\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & FileHistoryViewConfig {\n        return { ...Container.config.views, ...Container.config.views.fileHistory };\n    }\n\n    async showHistoryForUri(uri: GitUri, baseRef?: string) {\n        const root = this.ensureRoot();\n\n        this.setEditorFollowing(false);\n        await root.showHistoryForUri(uri, baseRef);\n        return this.show();\n    }\n\n    private changeBase() {\n        if (this._root !== undefined) {\n            void this._root.changeBase();\n        }\n    }\n\n    private setEditorFollowing(enabled: boolean) {\n        setCommandContext(CommandContext.ViewsFileHistoryEditorFollowing, enabled);\n        if (this._root !== undefined) {\n            this._root.setEditorFollowing(enabled);\n        }\n    }\n\n    private setRenameFollowing(enabled: boolean) {\n        return configuration.updateEffective(\n            configuration.name('advanced')('fileHistoryFollowsRenames').value,\n            enabled\n        );\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { configuration, LineHistoryViewConfig, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { LineHistoryTrackerNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class LineHistoryView extends ViewBase<LineHistoryTrackerNode> {\n    constructor() {\n        super('gitlens.views.lineHistory');\n    }\n\n    getRoot() {\n        return new LineHistoryTrackerNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(this.getQualifiedCommand('changeBase'), () => this.changeBase(), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOn'),\n            () => this.setEditorFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setEditorFollowingOff'),\n            () => this.setEditorFollowing(false),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOn'),\n            () => this.setRenameFollowing(true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setRenameFollowingOff'),\n            () => this.setRenameFollowing(false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('lineHistory').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value) &&\n            !configuration.changed(e, configuration.name('advanced')('fileHistoryFollowsRenames').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('lineHistory')('enabled').value)) {\n            setCommandContext(CommandContext.ViewsLineHistoryEditorFollowing, true);\n        }\n\n        if (configuration.changed(e, configuration.name('views')('lineHistory')('location').value)) {\n            this.initialize(this.config.location);\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & LineHistoryViewConfig {\n        return { ...Container.config.views, ...Container.config.views.lineHistory };\n    }\n\n    private changeBase() {\n        if (this._root !== undefined) {\n            void this._root.changeBase();\n        }\n    }\n\n    private setEditorFollowing(enabled: boolean) {\n        setCommandContext(CommandContext.ViewsLineHistoryEditorFollowing, enabled);\n        if (this._root !== undefined) {\n            this._root.setEditorFollowing(enabled);\n        }\n    }\n\n    private setRenameFollowing(enabled: boolean) {\n        return configuration.updateEffective(\n            configuration.name('advanced')('fileHistoryFollowsRenames').value,\n            enabled\n        );\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent, Event, EventEmitter } from 'vscode';\nimport { configuration, RepositoriesViewConfig, ViewFilesLayout, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext, WorkspaceState } from '../constants';\nimport { Container } from '../container';\nimport { RepositoriesNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\nexport class RepositoriesView extends ViewBase<RepositoriesNode> {\n    constructor() {\n        super('gitlens.views.repositories');\n    }\n\n    private _onDidChangeAutoRefresh = new EventEmitter<void>();\n    get onDidChangeAutoRefresh(): Event<void> {\n        return this._onDidChangeAutoRefresh.event;\n    }\n\n    getRoot() {\n        return new RepositoriesNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToAuto'),\n            () => this.setFilesLayout(ViewFilesLayout.Auto),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToList'),\n            () => this.setFilesLayout(ViewFilesLayout.List),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToTree'),\n            () => this.setFilesLayout(ViewFilesLayout.Tree),\n            this\n        );\n\n        commands.registerCommand(\n            this.getQualifiedCommand('setAutoRefreshToOn'),\n            () => this.setAutoRefresh(Container.config.views.repositories.autoRefresh, true),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setAutoRefreshToOff'),\n            () => this.setAutoRefresh(Container.config.views.repositories.autoRefresh, false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('repositories').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('repositories')('autoRefresh').value)) {\n            void this.setAutoRefresh(Container.config.views.repositories.autoRefresh);\n        }\n\n        if (configuration.changed(e, configuration.name('views')('repositories')('location').value)) {\n            this.initialize(this.config.location, { showCollapseAll: true });\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get autoRefresh() {\n        return (\n            this.config.autoRefresh &&\n            Container.context.workspaceState.get<boolean>(WorkspaceState.ViewsRepositoriesAutoRefresh, true)\n        );\n    }\n\n    get config(): ViewsConfig & RepositoriesViewConfig {\n        return { ...Container.config.views, ...Container.config.views.repositories };\n    }\n\n    private async setAutoRefresh(enabled: boolean, workspaceEnabled?: boolean) {\n        if (enabled) {\n            if (workspaceEnabled === undefined) {\n                workspaceEnabled = Container.context.workspaceState.get<boolean>(\n                    WorkspaceState.ViewsRepositoriesAutoRefresh,\n                    true\n                );\n            }\n            else {\n                await Container.context.workspaceState.update(\n                    WorkspaceState.ViewsRepositoriesAutoRefresh,\n                    workspaceEnabled\n                );\n            }\n        }\n\n        setCommandContext(CommandContext.ViewsRepositoriesAutoRefresh, enabled && workspaceEnabled);\n\n        this._onDidChangeAutoRefresh.fire();\n    }\n\n    private setFilesLayout(layout: ViewFilesLayout) {\n        return configuration.updateEffective(\n            configuration.name('views')('repositories')('files')('layout').value,\n            layout\n        );\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent } from 'vscode';\nimport { configuration, SearchViewConfig, ViewFilesLayout, ViewsConfig } from '../configuration';\nimport { CommandContext, setCommandContext, WorkspaceState } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitRepoSearchBy } from '../git/gitService';\nimport { Functions, Strings } from '../system';\nimport { nodeSupportsConditionalDismissal, SearchNode, SearchResultsCommitsNode, ViewNode } from './nodes';\nimport { ViewBase } from './viewBase';\n\ninterface SearchQueryResult {\n    label: string;\n    log: GitLog | undefined;\n}\n\nexport class SearchView extends ViewBase<SearchNode> {\n    constructor() {\n        super('gitlens.views.search');\n\n        setCommandContext(CommandContext.ViewsSearchKeepResults, this.keepResults);\n    }\n\n    getRoot() {\n        return new SearchNode(this);\n    }\n\n    protected get location(): string {\n        return this.config.location;\n    }\n\n    protected registerCommands() {\n        void Container.viewCommands;\n        commands.registerCommand(this.getQualifiedCommand('clear'), () => this.clear(), this);\n        commands.registerCommand(this.getQualifiedCommand('refresh'), () => this.refresh(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToAuto'),\n            () => this.setFilesLayout(ViewFilesLayout.Auto),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToList'),\n            () => this.setFilesLayout(ViewFilesLayout.List),\n            this\n        );\n        commands.registerCommand(\n            this.getQualifiedCommand('setFilesLayoutToTree'),\n            () => this.setFilesLayout(ViewFilesLayout.Tree),\n            this\n        );\n        commands.registerCommand(this.getQualifiedCommand('setKeepResultsToOn'), () => this.setKeepResults(true), this);\n        commands.registerCommand(\n            this.getQualifiedCommand('setKeepResultsToOff'),\n            () => this.setKeepResults(false),\n            this\n        );\n    }\n\n    protected onConfigurationChanged(e: ConfigurationChangeEvent) {\n        if (\n            !configuration.changed(e, configuration.name('views')('search').value) &&\n            !configuration.changed(e, configuration.name('views').value) &&\n            !configuration.changed(e, configuration.name('defaultGravatarsStyle').value)\n        ) {\n            return;\n        }\n\n        if (configuration.changed(e, configuration.name('views')('search')('location').value)) {\n            this.initialize(this.config.location, { showCollapseAll: true });\n        }\n\n        if (!configuration.initializing(e) && this._root !== undefined) {\n            void this.refresh(true);\n        }\n    }\n\n    get config(): ViewsConfig & SearchViewConfig {\n        return { ...Container.config.views, ...Container.config.views.search };\n    }\n\n    get keepResults(): boolean {\n        return Container.context.workspaceState.get<boolean>(WorkspaceState.ViewsSearchKeepResults, false);\n    }\n\n    clear() {\n        if (this._root === undefined) return;\n\n        this._root.clear();\n    }\n\n    dismissNode(node: ViewNode) {\n        if (this._root === undefined) return;\n        if (nodeSupportsConditionalDismissal(node) && node.canDismiss() === false) return;\n\n        this._root.dismiss(node);\n    }\n\n    async search(\n        repoPath: string,\n        search: string,\n        searchBy: GitRepoSearchBy,\n        options: {\n            maxCount?: number;\n            label:\n                | string\n                | {\n                      label: string;\n                      resultsType?: { singular: string; plural: string };\n                  };\n        }\n    ) {\n        await this.show();\n\n        const searchQueryFn = this.getSearchQueryFn(\n            Container.git.getLogForSearch(repoPath, search, searchBy, {\n                maxCount: options.maxCount\n            }),\n            options\n        );\n\n        return this.addResults(\n            new SearchResultsCommitsNode(this, this._root!, repoPath, search, searchBy, searchQueryFn)\n        );\n    }\n\n    showSearchResults(\n        repoPath: string,\n        search: string,\n        searchBy: GitRepoSearchBy,\n        results: GitLog,\n        options: {\n            label:\n                | string\n                | {\n                      label: string;\n                      resultsType?: { singular: string; plural: string };\n                  };\n        }\n    ) {\n        const label = this.getSearchLabel(options.label, results);\n        const searchQueryFn = Functions.cachedOnce(this.getSearchQueryFn(results, options), {\n            label: label,\n            log: results\n        });\n\n        return this.addResults(\n            new SearchResultsCommitsNode(this, this._root!, repoPath, search, searchBy, searchQueryFn)\n        );\n    }\n\n    private addResults(results: ViewNode) {\n        const root = this.ensureRoot();\n        root.addOrReplace(results, !this.keepResults);\n\n        setImmediate(() => this.reveal(results, { select: true, expand: true }));\n    }\n\n    private getSearchLabel(\n        label:\n            | string\n            | {\n                  label: string;\n                  resultsType?: { singular: string; plural: string };\n              },\n        log: GitLog | undefined\n    ) {\n        if (typeof label === 'string') return label;\n\n        const count = log !== undefined ? log.count : 0;\n        const truncated = log !== undefined ? log.truncated : false;\n\n        const resultsType =\n            label.resultsType === undefined ? { singular: 'result', plural: 'results' } : label.resultsType;\n\n        return `${Strings.pluralize(resultsType.singular, count, {\n            number: truncated ? `${count}+` : undefined,\n            plural: resultsType.plural,\n            zero: 'No'\n        })} for ${label.label}`;\n    }\n\n    private getSearchQueryFn(\n        results: Promise<GitLog | undefined> | GitLog | undefined,\n        options: {\n            label:\n                | string\n                | {\n                      label: string;\n                      resultsType?: { singular: string; plural: string };\n                  };\n        }\n    ): (maxCount: number | undefined) => Promise<SearchQueryResult> {\n        return async (maxCount: number | undefined) => {\n            const res = await results;\n\n            let log;\n            if (res !== undefined) {\n                log = await (res.query === undefined\n                    ? (maxCount: number | undefined) => Promise.resolve(res)\n                    : res.query)(maxCount);\n            }\n\n            const label = this.getSearchLabel(options.label, log);\n            return {\n                label: label,\n                log: log\n            };\n        };\n    }\n\n    private setFilesLayout(layout: ViewFilesLayout) {\n        return configuration.updateEffective(configuration.name('views')('search')('files')('layout').value, layout);\n    }\n\n    private setKeepResults(enabled: boolean) {\n        Container.context.workspaceState.update(WorkspaceState.ViewsSearchKeepResults, enabled);\n        setCommandContext(CommandContext.ViewsSearchKeepResults, enabled);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, Disposable, env, Terminal, TextDocumentShowOptions, Uri, window } from 'vscode';\nimport {\n    Commands,\n    DiffWithCommandArgs,\n    DiffWithCommandArgsRevision,\n    DiffWithPreviousCommandArgs,\n    DiffWithWorkingCommandArgs,\n    openEditor,\n    OpenFileInRemoteCommandArgs,\n    OpenFileRevisionCommandArgs,\n    openWorkspace\n} from '../commands';\nimport { BuiltInCommands, CommandContext, extensionTerminalName, setCommandContext } from '../constants';\nimport { Container } from '../container';\nimport { toGitLensFSUri } from '../git/fsProvider';\nimport { GitService, GitUri } from '../git/gitService';\nimport { Arrays } from '../system';\nimport {\n    BranchNode,\n    BranchTrackingStatusNode,\n    CommitFileNode,\n    CommitNode,\n    FolderNode,\n    RemoteNode,\n    RepositoryNode,\n    ResultsFileNode,\n    StashFileNode,\n    StashNode,\n    StatusFileNode,\n    TagNode,\n    ViewNode,\n    ViewRefNode,\n    viewSupportsNodeDismissal\n} from './nodes';\nimport { ContributorNode } from './nodes/contributorNode';\nimport { Strings } from '../system/string';\n\nexport interface RefreshNodeCommandArgs {\n    maxCount?: number;\n    previousNode?: ViewNode;\n}\n\ninterface CompareSelectedInfo {\n    ref: string;\n    repoPath: string | undefined;\n    uri?: Uri;\n}\n\nexport class ViewCommands implements Disposable {\n    private _disposable: Disposable | undefined;\n    private _terminal: Terminal | undefined;\n    private _terminalCwd: string | undefined;\n\n    constructor() {\n        commands.registerCommand(\n            'gitlens.views.refreshNode',\n            (node: ViewNode, reset?: boolean, args?: RefreshNodeCommandArgs) =>\n                node.view.refreshNode(node, reset === undefined ? true : reset, args),\n            this\n        );\n        commands.registerCommand(\n            'gitlens.views.expandNode',\n            (node: ViewNode) => node.view.reveal(node, { select: false, focus: false, expand: 3 }),\n            this\n        );\n        commands.registerCommand(\n            'gitlens.views.dismissNode',\n            (node: ViewNode) => viewSupportsNodeDismissal(node.view) && node.view.dismissNode(node),\n            this\n        );\n\n        commands.registerCommand('gitlens.views.fetch', this.fetch, this);\n        commands.registerCommand('gitlens.views.pull', this.pull, this);\n        commands.registerCommand('gitlens.views.push', this.push, this);\n        commands.registerCommand('gitlens.views.pushWithForce', n => this.push(n, true), this);\n        commands.registerCommand('gitlens.views.closeRepository', this.closeRepository, this);\n\n        commands.registerCommand('gitlens.views.setAsDefault', this.setAsDefault, this);\n        commands.registerCommand('gitlens.views.unsetAsDefault', this.unsetAsDefault, this);\n\n        commands.registerCommand('gitlens.views.openInTerminal', this.openInTerminal, this);\n        commands.registerCommand('gitlens.views.star', this.star, this);\n        commands.registerCommand('gitlens.views.unstar', this.unstar, this);\n\n        commands.registerCommand('gitlens.views.exploreRepoRevision', this.exploreRepoRevision, this);\n\n        commands.registerCommand('gitlens.views.contributor.addCoauthoredBy', this.contributorAddCoauthoredBy, this);\n        commands.registerCommand('gitlens.views.contributor.copyToClipboard', this.contributorCopyToClipboard, this);\n\n        commands.registerCommand('gitlens.views.openChanges', this.openChanges, this);\n        commands.registerCommand('gitlens.views.openChangesWithWorking', this.openChangesWithWorking, this);\n        commands.registerCommand('gitlens.views.openFile', this.openFile, this);\n        commands.registerCommand('gitlens.views.openFileRevision', this.openFileRevision, this);\n        commands.registerCommand('gitlens.views.openFileRevisionInRemote', this.openFileRevisionInRemote, this);\n        commands.registerCommand('gitlens.views.openChangedFiles', this.openChangedFiles, this);\n        commands.registerCommand('gitlens.views.openChangedFileChanges', this.openChangedFileChanges, this);\n        commands.registerCommand(\n            'gitlens.views.openChangedFileChangesWithWorking',\n            this.openChangedFileChangesWithWorking,\n            this\n        );\n        commands.registerCommand('gitlens.views.openChangedFileRevisions', this.openChangedFileRevisions, this);\n        commands.registerCommand('gitlens.views.applyChanges', this.applyChanges, this);\n        commands.registerCommand('gitlens.views.checkout', this.checkout, this);\n\n        commands.registerCommand('gitlens.views.stageDirectory', this.stageDirectory, this);\n        commands.registerCommand('gitlens.views.stageFile', this.stageFile, this);\n        commands.registerCommand('gitlens.views.unstageDirectory', this.unstageDirectory, this);\n        commands.registerCommand('gitlens.views.unstageFile', this.unstageFile, this);\n\n        commands.registerCommand('gitlens.views.compareAncestryWithWorking', this.compareAncestryWithWorking, this);\n        commands.registerCommand('gitlens.views.compareWithHead', this.compareWithHead, this);\n        commands.registerCommand('gitlens.views.compareWithRemote', this.compareWithRemote, this);\n        commands.registerCommand('gitlens.views.compareWithSelected', this.compareWithSelected, this);\n        commands.registerCommand('gitlens.views.selectForCompare', this.selectForCompare, this);\n        commands.registerCommand('gitlens.views.compareFileWithSelected', this.compareFileWithSelected, this);\n        commands.registerCommand('gitlens.views.selectFileForCompare', this.selectFileForCompare, this);\n        commands.registerCommand('gitlens.views.compareWithWorking', this.compareWithWorking, this);\n\n        commands.registerCommand('gitlens.views.terminalCheckoutBranch', this.terminalCheckoutBranch, this);\n        commands.registerCommand('gitlens.views.terminalCreateBranch', this.terminalCreateBranch, this);\n        commands.registerCommand('gitlens.views.terminalDeleteBranch', this.terminalDeleteBranch, this);\n        commands.registerCommand('gitlens.views.terminalMergeBranch', this.terminalMergeBranch, this);\n        commands.registerCommand('gitlens.views.terminalRebaseBranch', this.terminalRebaseBranch, this);\n        commands.registerCommand('gitlens.views.terminalRebaseBranchToRemote', this.terminalRebaseBranchToRemote, this);\n        commands.registerCommand(\n            'gitlens.views.terminalSquashBranchIntoCommit',\n            this.terminalSquashBranchIntoCommit,\n            this\n        );\n        commands.registerCommand('gitlens.views.terminalCheckoutCommit', this.terminalCheckoutCommit, this);\n        commands.registerCommand('gitlens.views.terminalCherryPickCommit', this.terminalCherryPickCommit, this);\n        commands.registerCommand('gitlens.views.terminalPushCommit', this.terminalPushCommit, this);\n        commands.registerCommand('gitlens.views.terminalRebaseCommit', this.terminalRebaseCommit, this);\n        commands.registerCommand('gitlens.views.terminalResetCommit', this.terminalResetCommit, this);\n        commands.registerCommand('gitlens.views.terminalRevertCommit', this.terminalRevertCommit, this);\n        commands.registerCommand('gitlens.views.terminalRemoveRemote', this.terminalRemoveRemote, this);\n        commands.registerCommand('gitlens.views.terminalCreateTag', this.terminalCreateTag, this);\n        commands.registerCommand('gitlens.views.terminalDeleteTag', this.terminalDeleteTag, this);\n    }\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n    }\n\n    private async contributorAddCoauthoredBy(node: ContributorNode) {\n        if (!(node instanceof ContributorNode)) return;\n\n        const gitApi = await GitService.getBuiltInGitApi();\n        if (gitApi === undefined) return;\n\n        const repo = gitApi.repositories.find(\n            r => Strings.normalizePath(r.rootUri.fsPath) === node.contributor.repoPath\n        );\n        if (repo === undefined) return;\n\n        const coauthor = `${node.contributor.name}${node.contributor.email ? ` <${node.contributor.email}>` : ''}`;\n\n        const message = repo.inputBox.value;\n        if (message.includes(coauthor)) return;\n\n        let newlines;\n        if (message.includes('Co-authored-by: ')) {\n            newlines = '\\n';\n        }\n        else if (message.length !== 0 && message[message.length - 1] === '\\n') {\n            newlines = '\\n\\n';\n        }\n        else {\n            newlines = '\\n\\n\\n';\n        }\n\n        repo.inputBox.value = `${message}${newlines}Co-authored-by: ${coauthor}`;\n    }\n\n    private async contributorCopyToClipboard(node: ContributorNode) {\n        if (!(node instanceof ContributorNode)) return;\n\n        await env.clipboard.writeText(\n            `${node.contributor.name}${node.contributor.email ? ` <${node.contributor.email}>` : ''}`\n        );\n    }\n\n    private fetch(node: RemoteNode | RepositoryNode) {\n        if (node instanceof RemoteNode) return node.fetch();\n        if (node instanceof RepositoryNode) return node.fetch();\n\n        return undefined;\n    }\n\n    private pull(node: RepositoryNode | BranchTrackingStatusNode) {\n        if (node instanceof BranchTrackingStatusNode) {\n            node = node.getParent() as RepositoryNode;\n        }\n        if (!(node instanceof RepositoryNode)) return undefined;\n\n        return node.pull();\n    }\n\n    private push(node: RepositoryNode | BranchTrackingStatusNode, force?: boolean) {\n        if (node instanceof BranchTrackingStatusNode) {\n            node = node.getParent() as RepositoryNode;\n        }\n        if (!(node instanceof RepositoryNode)) return undefined;\n\n        return node.push({ force: force });\n    }\n\n    private async applyChanges(node: CommitFileNode | StashFileNode | ResultsFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof ResultsFileNode)) {\n            return;\n        }\n\n        void (await this.openFile(node));\n\n        if (node instanceof ResultsFileNode) {\n            void (await Container.git.applyChangesToWorkingFile(node.uri, node.ref1, node.ref2));\n\n            return;\n        }\n\n        if (node.uri.sha !== undefined && node.uri.sha !== 'HEAD') {\n            void (await Container.git.applyChangesToWorkingFile(node.uri));\n        }\n    }\n\n    private checkout(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return undefined;\n\n        return Container.git.checkout(node.repoPath, node.ref);\n    }\n\n    private closeRepository(node: RepositoryNode) {\n        if (!(node instanceof RepositoryNode)) return;\n\n        node.repo.closed = true;\n    }\n\n    private compareWithHead(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return undefined;\n\n        return Container.compareView.compare(node.repoPath, node.ref, 'HEAD');\n    }\n\n    private compareWithRemote(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return undefined;\n        if (!node.branch.tracking) return undefined;\n\n        return Container.compareView.compare(node.repoPath, node.branch.tracking, node.ref);\n    }\n\n    private compareWithWorking(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return undefined;\n\n        return Container.compareView.compare(node.repoPath, node.ref, '');\n    }\n\n    private async compareAncestryWithWorking(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return undefined;\n\n        const branch = await Container.git.getBranch(node.repoPath);\n        if (branch === undefined) return undefined;\n\n        const commonAncestor = await Container.git.getMergeBase(node.repoPath, branch.ref, node.ref);\n        if (commonAncestor === undefined) return undefined;\n\n        return Container.compareView.compare(\n            node.repoPath,\n            { ref: commonAncestor, label: `ancestry with ${node.ref} (${GitService.shortenSha(commonAncestor)})` },\n            ''\n        );\n    }\n\n    private compareWithSelected(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        Container.compareView.compareWithSelected(node.repoPath, node.ref);\n    }\n\n    private selectForCompare(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        Container.compareView.selectForCompare(node.repoPath, node.ref);\n    }\n\n    private compareFileWithSelected(node: CommitFileNode | ResultsFileNode | StashFileNode) {\n        if (\n            this._selectedFile === undefined ||\n            (!(node instanceof CommitFileNode) && !(node instanceof ResultsFileNode)) ||\n            node.ref === undefined\n        ) {\n            return undefined;\n        }\n        if (this._selectedFile.repoPath !== node.repoPath) {\n            this.selectFileForCompare(node);\n            return undefined;\n        }\n\n        const selected = this._selectedFile;\n\n        this._selectedFile = undefined;\n        setCommandContext(CommandContext.ViewsCanCompareFile, false);\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: selected.repoPath,\n            lhs: {\n                sha: selected.ref,\n                uri: selected.uri!\n            },\n            rhs: {\n                sha: node.ref,\n                uri: node.uri\n            }\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n\n    private _selectedFile: CompareSelectedInfo | undefined;\n\n    private selectFileForCompare(node: CommitFileNode | ResultsFileNode | StashFileNode) {\n        if ((!(node instanceof CommitFileNode) && !(node instanceof ResultsFileNode)) || node.ref === undefined) return;\n\n        this._selectedFile = {\n            ref: node.ref,\n            repoPath: node.repoPath,\n            uri: node.uri\n        };\n        setCommandContext(CommandContext.ViewsCanCompareFile, true);\n    }\n\n    private exploreRepoRevision(node: ViewRefNode, options: { openInNewWindow?: boolean } = {}) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        const uri = toGitLensFSUri(node.ref, node.repoPath);\n        const gitUri = GitUri.fromRevisionUri(uri);\n\n        openWorkspace(uri, `${paths.basename(gitUri.repoPath!)} @ ${gitUri.shortSha}`, options);\n\n        void commands.executeCommand(BuiltInCommands.FocusFilesExplorer);\n    }\n\n    private openChanges(node: CommitFileNode | ResultsFileNode | StashFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof ResultsFileNode)) return undefined;\n\n        const command = node.getCommand();\n        if (command === undefined || command.arguments === undefined) return undefined;\n\n        const [uri, args] = command.arguments as [Uri, DiffWithPreviousCommandArgs];\n        args.showOptions!.preview = false;\n        return commands.executeCommand(command.command, uri, args);\n    }\n\n    private async openChangesWithWorking(node: CommitFileNode | ResultsFileNode | StashFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof ResultsFileNode)) return undefined;\n\n        const args: DiffWithWorkingCommandArgs = {\n            showOptions: {\n                preserveFocus: true,\n                preview: false\n            }\n        };\n\n        if (node instanceof ResultsFileNode) {\n            args.commit = await Container.git.getLogCommitForFile(node.repoPath, node.uri.fsPath, {\n                ref: node.uri.sha,\n                firstIfNotFound: true,\n                reverse: true\n            });\n        }\n\n        return commands.executeCommand(Commands.DiffWithWorking, node.uri, args);\n    }\n\n    private openFile(node: CommitFileNode | ResultsFileNode | StashFileNode | StatusFileNode) {\n        if (\n            !(node instanceof CommitFileNode) &&\n            !(node instanceof ResultsFileNode) &&\n            !(node instanceof StatusFileNode)\n        ) {\n            return undefined;\n        }\n\n        return openEditor(node.uri, { preserveFocus: true, preview: false });\n    }\n\n    private openFileRevision(\n        node: CommitFileNode | ResultsFileNode | StashFileNode,\n        options: OpenFileRevisionCommandArgs = { showOptions: { preserveFocus: true, preview: false } }\n    ) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof ResultsFileNode)) return undefined;\n\n        let uri = options.uri;\n        if (uri == null) {\n            if (node instanceof ResultsFileNode) {\n                uri = GitUri.toRevisionUri(node.uri);\n            }\n            else {\n                uri =\n                    node.commit.status === 'D'\n                        ? GitUri.toRevisionUri(\n                              node.commit.previousSha!,\n                              node.commit.previousUri.fsPath,\n                              node.commit.repoPath\n                          )\n                        : GitUri.toRevisionUri(node.uri);\n            }\n        }\n\n        return openEditor(uri, options.showOptions || { preserveFocus: true, preview: false });\n    }\n\n    private async openChangedFileChanges(\n        node: CommitNode | StashNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode)) return;\n\n        const repoPath = node.commit.repoPath;\n        const uris = node.commit.files.map(s => GitUri.fromFile(s, repoPath));\n\n        for (const uri of uris) {\n            await this.openDiffWith(\n                repoPath,\n                {\n                    uri: uri,\n                    sha:\n                        node.commit.previousSha !== undefined ? node.commit.previousSha : GitService.deletedOrMissingSha\n                },\n                { uri: uri, sha: node.commit.sha },\n                options\n            );\n        }\n    }\n\n    private async openChangedFileChangesWithWorking(\n        node: CommitNode | StashNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode)) return;\n\n        const repoPath = node.commit.repoPath;\n        const uris = Arrays.filterMap(node.commit.files, f =>\n            f.status !== 'D' ? GitUri.fromFile(f, repoPath) : undefined\n        );\n\n        for (const uri of uris) {\n            await this.openDiffWith(repoPath, { uri: uri, sha: node.commit.sha }, { uri: uri, sha: '' }, options);\n        }\n    }\n\n    private async openChangedFiles(\n        node: CommitNode | StashNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode)) return;\n\n        const repoPath = node.commit.repoPath;\n        const uris = Arrays.filterMap(node.commit.files, f => GitUri.fromFile(f, repoPath));\n\n        for (const uri of uris) {\n            await openEditor(uri, options);\n        }\n    }\n\n    private async openChangedFileRevisions(\n        node: CommitNode | StashNode,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        if (!(node instanceof CommitNode) && !(node instanceof StashNode)) return;\n\n        const uris = Arrays.filterMap(node.commit.files, f =>\n            GitUri.toRevisionUri(\n                f.status === 'D' ? node.commit.previousFileSha : node.commit.sha,\n                f,\n                node.commit.repoPath\n            )\n        );\n        for (const uri of uris) {\n            await openEditor(uri, options);\n        }\n    }\n\n    private openDiffWith(\n        repoPath: string,\n        lhs: DiffWithCommandArgsRevision,\n        rhs: DiffWithCommandArgsRevision,\n        options: TextDocumentShowOptions = { preserveFocus: false, preview: false }\n    ) {\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: repoPath,\n            lhs: lhs,\n            rhs: rhs,\n            showOptions: options\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n\n    private openFileRevisionInRemote(node: CommitFileNode | StashFileNode | StatusFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof StatusFileNode)) return undefined;\n\n        const args: OpenFileInRemoteCommandArgs = {\n            range: false\n        };\n        return commands.executeCommand(\n            Commands.OpenFileInRemote,\n            node.commit.toGitUri(node.commit.status === 'D'),\n            args\n        );\n    }\n\n    private openInTerminal(node: RepositoryNode) {\n        if (!(node instanceof RepositoryNode)) return undefined;\n\n        return commands.executeCommand(BuiltInCommands.OpenInTerminal, Uri.file(node.repo.path));\n    }\n\n    private setAsDefault(node: RemoteNode) {\n        if (node instanceof RemoteNode) return node.setAsDefault();\n        return undefined;\n    }\n\n    private unsetAsDefault(node: RemoteNode) {\n        if (node instanceof RemoteNode) return node.setAsDefault(false);\n        return undefined;\n    }\n\n    private async stageDirectory(node: FolderNode) {\n        if (!(node instanceof FolderNode) || !node.relativePath) return;\n\n        void (await Container.git.stageDirectory(node.repoPath, node.relativePath));\n        void node.triggerChange();\n    }\n\n    private async stageFile(node: CommitFileNode | StatusFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof StatusFileNode)) return;\n\n        void (await Container.git.stageFile(node.repoPath, node.file.fileName));\n        void node.triggerChange();\n    }\n\n    private async unstageDirectory(node: FolderNode) {\n        if (!(node instanceof FolderNode) || !node.relativePath) return;\n\n        void (await Container.git.unStageDirectory(node.repoPath, node.relativePath));\n        void node.triggerChange();\n    }\n\n    private async unstageFile(node: CommitFileNode | StatusFileNode) {\n        if (!(node instanceof CommitFileNode) && !(node instanceof StatusFileNode)) return;\n\n        void (await Container.git.unStageFile(node.repoPath, node.file.fileName));\n        void node.triggerChange();\n    }\n\n    private star(node: BranchNode | RepositoryNode) {\n        if (node instanceof BranchNode || node instanceof RepositoryNode) return node.star();\n        return undefined;\n    }\n\n    private unstar(node: BranchNode | RepositoryNode) {\n        if (node instanceof BranchNode || node instanceof RepositoryNode) return node.unstar();\n        return undefined;\n    }\n\n    terminalCheckoutBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        this.sendTerminalCommand('checkout', `${node.ref}`, node.repoPath);\n    }\n\n    async terminalCreateBranch(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        let remoteBranch = false;\n        let value = undefined;\n        if (node instanceof BranchNode && node.branch.remote) {\n            remoteBranch = true;\n            value = node.branch.getName();\n        }\n\n        const name = await window.showInputBox({\n            prompt: \"Please provide a branch name (Press 'Enter' to confirm or 'Escape' to cancel)\",\n            placeHolder: 'Branch name',\n            value: value\n        });\n        if (name === undefined || name.length === 0) return;\n\n        this.sendTerminalCommand('branch', `${remoteBranch ? '-t ' : ''}${name} ${node.ref}`, node.repoPath);\n    }\n\n    terminalDeleteBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        if (node.branch.remote) {\n            this.sendTerminalCommand('push', `${node.branch.getRemote()} :${node.branch.getName()}`, node.repoPath);\n        }\n        else {\n            this.sendTerminalCommand('branch', `-d ${node.ref}`, node.repoPath);\n        }\n    }\n\n    terminalMergeBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        this.sendTerminalCommand('merge', `${node.ref}`, node.repoPath);\n    }\n\n    terminalRebaseBranch(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        this.sendTerminalCommand('rebase', `-i ${node.ref}`, node.repoPath);\n    }\n\n    terminalRebaseBranchToRemote(node: BranchNode | BranchTrackingStatusNode) {\n        if (node instanceof BranchNode) {\n            if (!node.branch.current || !node.branch.tracking) return;\n\n            this.sendTerminalCommand('rebase', `-i ${node.branch.tracking}`, node.repoPath);\n        }\n        else if (node instanceof BranchTrackingStatusNode) {\n            this.sendTerminalCommand('rebase', `-i ${node.status.upstream}`, node.status.repoPath);\n        }\n    }\n\n    terminalSquashBranchIntoCommit(node: BranchNode) {\n        if (!(node instanceof BranchNode)) return;\n\n        this.sendTerminalCommand('merge', `--squash ${node.ref}`, node.repoPath);\n    }\n\n    terminalCheckoutCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        this.sendTerminalCommand('checkout', `${node.ref}`, node.repoPath);\n    }\n\n    terminalCherryPickCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        this.sendTerminalCommand('cherry-pick', `-e ${node.ref}`, node.repoPath);\n    }\n\n    async terminalPushCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        const branch = node.branch || (await Container.git.getBranch(node.repoPath));\n        if (branch === undefined) return;\n\n        this.sendTerminalCommand('push', `${branch.getRemote()} ${node.ref}:${branch.getName()}`, node.repoPath);\n    }\n\n    terminalRebaseCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        this.sendTerminalCommand('rebase', `-i ${node.ref}^`, node.repoPath);\n    }\n\n    terminalResetCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        this.sendTerminalCommand('reset', `--soft ${node.ref}`, node.repoPath);\n    }\n\n    terminalRevertCommit(node: CommitNode) {\n        if (!(node instanceof CommitNode)) return;\n\n        this.sendTerminalCommand('revert', `-e ${node.ref}`, node.repoPath);\n    }\n\n    terminalRemoveRemote(node: RemoteNode) {\n        if (!(node instanceof RemoteNode)) return;\n\n        this.sendTerminalCommand('remote', `remove ${node.remote.name}`, node.remote.repoPath);\n    }\n\n    async terminalCreateTag(node: ViewRefNode) {\n        if (!(node instanceof ViewRefNode)) return;\n\n        const name = await window.showInputBox({\n            prompt: \"Please provide a tag name (Press 'Enter' to confirm or 'Escape' to cancel)\",\n            placeHolder: 'Tag name'\n        });\n        if (name === undefined || name.length === 0) return;\n\n        const message = await window.showInputBox({\n            prompt:\n                \"Please provide an optional message to annotate the tag (Press 'Enter' to confirm or 'Escape' to cancel)\",\n            placeHolder: 'Tag message'\n        });\n        if (message === undefined) return;\n\n        const args = `${message.length !== 0 ? `-a -m \"${message}\" ` : ''}${name} ${node.ref}`;\n        this.sendTerminalCommand('tag', args, node.repoPath);\n    }\n\n    terminalDeleteTag(node: TagNode) {\n        if (!(node instanceof TagNode)) return;\n\n        this.sendTerminalCommand('tag', `-d ${node.ref}`, node.repoPath);\n    }\n\n    private ensureTerminal(cwd: string): Terminal {\n        if (this._terminal === undefined) {\n            this._terminal = window.createTerminal(extensionTerminalName);\n            this._disposable = window.onDidCloseTerminal((e: Terminal) => {\n                if (e.name === extensionTerminalName) {\n                    this._terminal = undefined;\n                    this._disposable!.dispose();\n                    this._disposable = undefined;\n                }\n            }, this);\n\n            Container.context.subscriptions.push(this._disposable);\n            this._terminalCwd = undefined;\n        }\n\n        if (this._terminalCwd !== cwd) {\n            this._terminal.sendText(`cd \"${cwd}\"`, true);\n            this._terminalCwd = cwd;\n        }\n\n        return this._terminal;\n    }\n\n    private sendTerminalCommand(command: string, args: string, cwd: string) {\n        // let git = GitService.getGitPath();\n        // if (git.includes(' ')) {\n        //     git = `\"${git}\"`;\n        // }\n\n        const terminal = this.ensureTerminal(cwd);\n        terminal.show(false);\n        terminal.sendText(`git ${command} ${args}`, false);\n    }\n}\n","'use strict';\nimport { Config } from '../config';\n\nexport interface IpcMessage {\n    id: string;\n    method: string;\n    params?: any;\n}\n\nexport type IpcNotificationParamsOf<NT> = NT extends IpcNotificationType<infer P> ? P : never;\nexport class IpcNotificationType<P = any> {\n    constructor(public readonly method: string) {}\n}\n\nexport type IpcCommandParamsOf<CT> = CT extends IpcCommandType<infer P> ? P : never;\nexport class IpcCommandType<P = any> {\n    constructor(public readonly method: string) {}\n}\n\nexport function onIpcCommand<CT extends IpcCommandType>(\n    type: CT,\n    command: IpcMessage,\n    fn: (params: IpcCommandParamsOf<CT>) => void\n) {\n    fn(command.params);\n}\n\nexport function onIpcNotification<NT extends IpcNotificationType>(\n    type: NT,\n    notification: IpcMessage,\n    fn: (params: IpcNotificationParamsOf<NT>) => void\n) {\n    fn(notification.params);\n}\n\nexport interface DidChangeConfigurationNotificationParams {\n    config: Config;\n}\nexport const DidChangeConfigurationNotificationType = new IpcNotificationType<DidChangeConfigurationNotificationParams>(\n    'configuration/didChange'\n);\n\nexport interface UpdateConfigurationCommandParams {\n    changes: {\n        [key: string]: any;\n    };\n    removes: string[];\n    scope: 'user' | 'workspace';\n    uri?: string;\n}\nexport const UpdateConfigurationCommandType = new IpcCommandType<UpdateConfigurationCommandParams>(\n    'configuration/update'\n);\n\nexport interface AppBootstrap {}\n\nexport interface AppWithConfigBootstrap {\n    config: Config;\n}\n\nexport interface SettingsBootstrap extends AppWithConfigBootstrap {\n    scope: 'user' | 'workspace';\n    scopes: ['user' | 'workspace', string][];\n}\n\nexport interface WelcomeBootstrap extends AppWithConfigBootstrap {}\n\nexport interface HistoryBootstrap {}\n","'use strict';\nimport * as paths from 'path';\nimport * as fs from 'fs';\nimport {\n    ConfigurationChangeEvent,\n    ConfigurationTarget,\n    Disposable,\n    Uri,\n    ViewColumn,\n    WebviewPanel,\n    WebviewPanelOnDidChangeViewStateEvent,\n    window,\n    workspace\n} from 'vscode';\nimport { Config, configuration } from '../configuration';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport {\n    DidChangeConfigurationNotificationType,\n    IpcMessage,\n    IpcNotificationParamsOf,\n    IpcNotificationType,\n    onIpcCommand,\n    UpdateConfigurationCommandType\n} from './protocol';\n\nlet ipcSequence = 0;\n\nexport abstract class WebviewBase<TBootstrap> implements Disposable {\n    private _disposable: Disposable | undefined;\n    private _disposablePanel: Disposable | undefined;\n    private _panel: WebviewPanel | undefined;\n\n    constructor() {\n        this._disposable = Disposable.from(\n            configuration.onDidChange(this.onConfigurationChanged, this),\n            ...this.registerCommands()\n        );\n    }\n\n    abstract get filename(): string;\n    abstract get id(): string;\n    abstract get title(): string;\n\n    abstract getBootstrap(): TBootstrap;\n    abstract registerCommands(): Disposable[];\n\n    dispose() {\n        this._disposable && this._disposable.dispose();\n        this._disposablePanel && this._disposablePanel.dispose();\n    }\n\n    private onConfigurationChanged(e: ConfigurationChangeEvent) {\n        this.notifyDidChangeConfiguration();\n    }\n\n    private onPanelDisposed() {\n        this._disposablePanel && this._disposablePanel.dispose();\n        this._panel = undefined;\n    }\n\n    private onViewStateChanged(e: WebviewPanelOnDidChangeViewStateEvent) {\n        Logger.log(\n            `Webview(${this.id}).onViewStateChanged`,\n            `active=${e.webviewPanel.active}, visible=${e.webviewPanel.visible}`\n        );\n\n        // Anytime the webview becomes active, make sure it has the most up-to-date config\n        if (e.webviewPanel.active) {\n            this.notifyDidChangeConfiguration();\n        }\n    }\n\n    protected onMessageReceived(e: IpcMessage) {\n        // virtual\n    }\n\n    private onMessageReceivedCore(e: IpcMessage) {\n        if (e == null) return;\n\n        Logger.log(`Webview(${this.id}).onMessageReceived: method=${e.method}, data=${JSON.stringify(e)}`);\n\n        switch (e.method) {\n            case UpdateConfigurationCommandType.method:\n                onIpcCommand(UpdateConfigurationCommandType, e, async params => {\n                    const target =\n                        params.scope === 'workspace' ? ConfigurationTarget.Workspace : ConfigurationTarget.Global;\n\n                    for (const key in params.changes) {\n                        const inspect = await configuration.inspect(key)!;\n\n                        const value = params.changes[key];\n                        await configuration.update(key, value === inspect.defaultValue ? undefined : value, target);\n                    }\n\n                    for (const key of params.removes) {\n                        await configuration.update(key, undefined, target);\n                    }\n                });\n\n                break;\n            default:\n                this.onMessageReceived(e);\n\n                break;\n        }\n    }\n\n    get visible() {\n        return this._panel === undefined ? false : this._panel.visible;\n    }\n\n    hide() {\n        if (this._panel === undefined) return;\n\n        this._panel.dispose();\n    }\n\n    async show(): Promise<void> {\n        const html = await this.getHtml();\n\n        if (this._panel === undefined) {\n            this._panel = window.createWebviewPanel(\n                this.id,\n                this.title,\n                { viewColumn: ViewColumn.Active, preserveFocus: false },\n                {\n                    retainContextWhenHidden: true,\n                    enableFindWidget: true,\n                    enableCommandUris: true,\n                    enableScripts: true\n                }\n            );\n\n            this._panel.iconPath = Uri.file(Container.context.asAbsolutePath('images/gitlens-icon.png'));\n            this._disposablePanel = Disposable.from(\n                this._panel,\n                this._panel.onDidDispose(this.onPanelDisposed, this),\n                this._panel.onDidChangeViewState(this.onViewStateChanged, this),\n                this._panel.webview.onDidReceiveMessage(this.onMessageReceivedCore, this)\n            );\n\n            this._panel.webview.html = html;\n        }\n        else {\n            // Reset the html to get the webview to reload\n            this._panel.webview.html = '';\n            this._panel.webview.html = html;\n            this._panel.reveal(ViewColumn.Active, false);\n        }\n    }\n\n    private _html: string | undefined;\n    private async getHtml(): Promise<string> {\n        const filename = Container.context.asAbsolutePath(paths.join('dist/webviews/', this.filename));\n\n        let content;\n        // When we are debugging avoid any caching so that we can change the html and have it update without reloading\n        if (Logger.isDebugging) {\n            content = await new Promise<string>((resolve, reject) => {\n                fs.readFile(filename, 'utf8', (err, data) => {\n                    if (err) {\n                        reject(err);\n                    }\n                    else {\n                        resolve(data);\n                    }\n                });\n            });\n        }\n        else {\n            if (this._html !== undefined) return this._html;\n\n            const doc = await workspace.openTextDocument(filename);\n            content = doc.getText();\n        }\n\n        this._html = content.replace(\n            /{{root}}/g,\n            Uri.file(Container.context.asAbsolutePath('.'))\n                .with({ scheme: 'vscode-resource' })\n                .toString()\n        );\n\n        if (this._html.includes(\"'{{bootstrap}}'\")) {\n            this._html = this._html.replace(\"'{{bootstrap}}'\", JSON.stringify(this.getBootstrap()));\n        }\n\n        return this._html;\n    }\n\n    protected notify<NT extends IpcNotificationType>(type: NT, params: IpcNotificationParamsOf<NT>): Thenable<boolean> {\n        return this.postMessage({ id: this.nextIpcId(), method: type.method, params: params });\n    }\n\n    private nextIpcId() {\n        if (ipcSequence === Number.MAX_SAFE_INTEGER) {\n            ipcSequence = 1;\n        }\n        else {\n            ipcSequence++;\n        }\n\n        return `host:${ipcSequence}`;\n    }\n\n    private notifyDidChangeConfiguration() {\n        // Make sure to get the raw config, not from the container which has the modes mixed in\n        return this.notify(DidChangeConfigurationNotificationType, { config: configuration.get<Config>() });\n    }\n\n    private postMessage(message: IpcMessage) {\n        if (this._panel === undefined) return Promise.resolve(false);\n\n        return this._panel.webview.postMessage(message);\n    }\n}\n","'use strict';\nimport { commands, workspace } from 'vscode';\nimport { Commands } from '../commands';\nimport { Config, configuration } from '../configuration';\nimport { SettingsBootstrap } from './protocol';\nimport { WebviewBase } from './webviewBase';\n\nexport class SettingsWebview extends WebviewBase<SettingsBootstrap> {\n    constructor() {\n        super();\n    }\n\n    get filename(): string {\n        return 'settings.html';\n    }\n\n    get id(): string {\n        return 'gitlens.settings';\n    }\n\n    get title(): string {\n        return 'GitLens Settings';\n    }\n\n    getBootstrap(): SettingsBootstrap {\n        return {\n            // Make sure to get the raw config, not from the container which has the modes mixed in\n            config: configuration.get<Config>(),\n            scope: 'user',\n            scopes: this.getAvailableScopes()\n        };\n    }\n\n    registerCommands() {\n        return [commands.registerCommand(Commands.ShowSettingsPage, this.show, this)];\n    }\n\n    private getAvailableScopes(): ['user' | 'workspace', string][] {\n        const scopes: ['user' | 'workspace', string][] = [['user', 'User']];\n        if (workspace.workspaceFolders !== undefined && workspace.workspaceFolders.length) {\n            scopes.push(['workspace', 'Workspace']);\n        }\n        return scopes;\n    }\n}\n","'use strict';\nimport { commands } from 'vscode';\nimport { Commands } from '../commands';\nimport { Container } from '../container';\nimport { WelcomeBootstrap } from './protocol';\nimport { WebviewBase } from './webviewBase';\n\nexport class WelcomeWebview extends WebviewBase<WelcomeBootstrap> {\n    constructor() {\n        super();\n    }\n\n    get filename(): string {\n        return 'welcome.html';\n    }\n\n    get id(): string {\n        return 'gitlens.welcome';\n    }\n\n    get title(): string {\n        return 'Welcome to GitLens';\n    }\n\n    getBootstrap(): WelcomeBootstrap {\n        return {\n            config: Container.config\n        };\n    }\n\n    registerCommands() {\n        return [commands.registerCommand(Commands.ShowWelcomePage, this.show, this)];\n    }\n}\n","'use strict';\nimport { commands, ConfigurationChangeEvent, Disposable, ExtensionContext, Uri } from 'vscode';\nimport { FileAnnotationController } from './annotations/fileAnnotationController';\nimport { LineAnnotationController } from './annotations/lineAnnotationController';\nimport { GitCodeLensController } from './codelens/codeLensController';\nimport { Commands, ToggleFileBlameCommandArgs } from './commands';\nimport { AnnotationsToggleMode, Config, configuration, ConfigurationWillChangeEvent } from './configuration';\nimport { GitFileSystemProvider } from './git/fsProvider';\nimport { GitService } from './git/gitService';\nimport { clearGravatarCache } from './gravatar';\nimport { LineHoverController } from './hovers/lineHoverController';\nimport { Keyboard } from './keyboard';\nimport { Logger, TraceLevel } from './logger';\nimport { StatusBarController } from './statusbar/statusBarController';\nimport { GitDocumentTracker } from './trackers/gitDocumentTracker';\nimport { GitLineTracker } from './trackers/gitLineTracker';\nimport { CompareView } from './views/compareView';\nimport { FileHistoryView } from './views/fileHistoryView';\nimport { LineHistoryView } from './views/lineHistoryView';\nimport { RepositoriesView } from './views/repositoriesView';\nimport { SearchView } from './views/searchView';\nimport { ViewCommands } from './views/viewCommands';\nimport { VslsController } from './vsls/vsls';\nimport { SettingsWebview } from './webviews/settingsWebview';\nimport { WelcomeWebview } from './webviews/welcomeWebview';\n\nexport class Container {\n    private static _configsAffectedByMode: string[] | undefined;\n    private static _applyModeConfigurationTransformBound:\n        | ((e: ConfigurationChangeEvent) => ConfigurationChangeEvent)\n        | undefined;\n\n    static initialize(context: ExtensionContext, config: Config) {\n        this._context = context;\n        this._config = Container.applyMode(config);\n\n        context.subscriptions.push((this._lineTracker = new GitLineTracker()));\n        context.subscriptions.push((this._tracker = new GitDocumentTracker()));\n        context.subscriptions.push((this._vsls = new VslsController()));\n\n        context.subscriptions.push((this._git = new GitService()));\n\n        // Since there is a bit of a chicken & egg problem with the DocumentTracker and the GitService, initialize the tracker once the GitService is loaded\n        this._tracker.initialize();\n\n        context.subscriptions.push((this._fileAnnotationController = new FileAnnotationController()));\n        context.subscriptions.push((this._lineAnnotationController = new LineAnnotationController()));\n        context.subscriptions.push((this._lineHoverController = new LineHoverController()));\n        context.subscriptions.push((this._statusBarController = new StatusBarController()));\n        context.subscriptions.push((this._codeLensController = new GitCodeLensController()));\n        context.subscriptions.push((this._keyboard = new Keyboard()));\n        context.subscriptions.push((this._settingsWebview = new SettingsWebview()));\n        context.subscriptions.push((this._welcomeWebview = new WelcomeWebview()));\n\n        if (config.views.compare.enabled) {\n            context.subscriptions.push((this._compareView = new CompareView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('compare')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._compareView = new CompareView()));\n                }\n            });\n        }\n\n        if (config.views.fileHistory.enabled) {\n            context.subscriptions.push((this._fileHistoryView = new FileHistoryView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('fileHistory')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._fileHistoryView = new FileHistoryView()));\n                }\n            });\n        }\n\n        if (config.views.lineHistory.enabled) {\n            context.subscriptions.push((this._lineHistoryView = new LineHistoryView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('lineHistory')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._lineHistoryView = new LineHistoryView()));\n                }\n            });\n        }\n\n        if (config.views.repositories.enabled) {\n            context.subscriptions.push((this._repositoriesView = new RepositoriesView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('repositories')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._repositoriesView = new RepositoriesView()));\n                }\n            });\n        }\n\n        if (config.views.search.enabled) {\n            context.subscriptions.push((this._searchView = new SearchView()));\n        }\n        else {\n            let disposable: Disposable;\n            // eslint-disable-next-line prefer-const\n            disposable = configuration.onDidChange(e => {\n                if (configuration.changed(e, configuration.name('views')('search')('enabled').value)) {\n                    disposable.dispose();\n                    context.subscriptions.push((this._searchView = new SearchView()));\n                }\n            });\n        }\n\n        context.subscriptions.push(new GitFileSystemProvider());\n\n        context.subscriptions.push(configuration.onWillChange(this.onConfigurationChanging, this));\n    }\n\n    private static onConfigurationChanging(e: ConfigurationWillChangeEvent) {\n        this._config = undefined;\n\n        if (configuration.changed(e.change, configuration.name('outputLevel').value)) {\n            Logger.level = configuration.get<TraceLevel>(configuration.name('outputLevel').value);\n        }\n\n        if (configuration.changed(e.change, configuration.name('defaultGravatarsStyle').value)) {\n            clearGravatarCache();\n        }\n\n        if (\n            configuration.changed(e.change, configuration.name('mode').value) ||\n            configuration.changed(e.change, configuration.name('modes').value)\n        ) {\n            if (this._applyModeConfigurationTransformBound === undefined) {\n                this._applyModeConfigurationTransformBound = this.applyModeConfigurationTransform.bind(this);\n            }\n            e.transform = this._applyModeConfigurationTransformBound;\n        }\n    }\n\n    private static _codeLensController: GitCodeLensController;\n    static get codeLens() {\n        return this._codeLensController;\n    }\n\n    private static _compareView: CompareView | undefined;\n    static get compareView() {\n        if (this._compareView === undefined) {\n            this._context.subscriptions.push((this._compareView = new CompareView()));\n        }\n\n        return this._compareView;\n    }\n\n    private static _config: Config | undefined;\n    static get config() {\n        if (this._config === undefined) {\n            this._config = Container.applyMode(configuration.get<Config>());\n        }\n        return this._config;\n    }\n\n    private static _context: ExtensionContext;\n    static get context() {\n        return this._context;\n    }\n\n    private static _fileAnnotationController: FileAnnotationController;\n    static get fileAnnotations() {\n        return this._fileAnnotationController;\n    }\n\n    private static _fileHistoryView: FileHistoryView | undefined;\n    static get fileHistoryView() {\n        if (this._fileHistoryView === undefined) {\n            this._context.subscriptions.push((this._fileHistoryView = new FileHistoryView()));\n        }\n\n        return this._fileHistoryView;\n    }\n\n    private static _git: GitService;\n    static get git() {\n        return this._git;\n    }\n\n    private static _keyboard: Keyboard;\n    static get keyboard() {\n        return this._keyboard;\n    }\n\n    private static _lineAnnotationController: LineAnnotationController;\n    static get lineAnnotations() {\n        return this._lineAnnotationController;\n    }\n\n    private static _lineHistoryView: LineHistoryView | undefined;\n    static get lineHistoryView() {\n        if (this._lineHistoryView === undefined) {\n            this._context.subscriptions.push((this._lineHistoryView = new LineHistoryView()));\n        }\n\n        return this._lineHistoryView;\n    }\n\n    private static _lineHoverController: LineHoverController;\n    static get lineHovers() {\n        return this._lineHoverController;\n    }\n\n    private static _lineTracker: GitLineTracker;\n    static get lineTracker() {\n        return this._lineTracker;\n    }\n\n    private static _repositoriesView: RepositoriesView | undefined;\n    static get repositoriesView(): RepositoriesView {\n        return this._repositoriesView!;\n    }\n\n    private static _searchView: SearchView | undefined;\n    static get searchView() {\n        if (this._searchView === undefined) {\n            this._context.subscriptions.push((this._searchView = new SearchView()));\n        }\n\n        return this._searchView;\n    }\n\n    private static _settingsWebview: SettingsWebview;\n    static get settingsWebview() {\n        return this._settingsWebview;\n    }\n\n    private static _statusBarController: StatusBarController;\n    static get statusBar() {\n        return this._statusBarController;\n    }\n\n    private static _tracker: GitDocumentTracker;\n    static get tracker() {\n        return this._tracker;\n    }\n\n    private static _viewCommands: ViewCommands | undefined;\n    static get viewCommands() {\n        if (this._viewCommands === undefined) {\n            this._context.subscriptions.push((this._viewCommands = new ViewCommands()));\n        }\n        return this._viewCommands;\n    }\n\n    private static _vsls: VslsController;\n    static get vsls() {\n        return this._vsls;\n    }\n\n    private static _welcomeWebview: WelcomeWebview;\n    static get welcomeWebview() {\n        return this._welcomeWebview;\n    }\n\n    private static applyMode(config: Config) {\n        if (!config.mode.active) return config;\n\n        const mode = config.modes[config.mode.active];\n        if (mode == null) return config;\n\n        if (mode.annotations != null) {\n            let command: string | undefined;\n            switch (mode.annotations) {\n                case 'blame':\n                    config.blame.toggleMode = AnnotationsToggleMode.Window;\n                    command = Commands.ToggleFileBlame;\n                    break;\n                case 'heatmap':\n                    config.heatmap.toggleMode = AnnotationsToggleMode.Window;\n                    command = Commands.ToggleFileHeatmap;\n                    break;\n                case 'recentChanges':\n                    config.recentChanges.toggleMode = AnnotationsToggleMode.Window;\n                    command = Commands.ToggleFileRecentChanges;\n                    break;\n            }\n\n            if (command !== undefined) {\n                const commandArgs: ToggleFileBlameCommandArgs = {\n                    on: true\n                };\n                // Make sure to delay the execution by a bit so that the configuration changes get propegated first\n                setTimeout(() => commands.executeCommand(command!, commandArgs), 50);\n            }\n        }\n\n        if (mode.codeLens != null) {\n            config.codeLens.enabled = mode.codeLens;\n        }\n\n        if (mode.currentLine != null) {\n            config.currentLine.enabled = mode.currentLine;\n        }\n\n        if (mode.hovers != null) {\n            config.hovers.enabled = mode.hovers;\n        }\n\n        if (mode.statusBar != null) {\n            config.statusBar.enabled = mode.statusBar;\n        }\n\n        if (mode.views != null) {\n            config.views.compare.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.fileHistory.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.lineHistory.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.repositories.enabled = mode.views;\n        }\n        if (mode.views != null) {\n            config.views.search.enabled = mode.views;\n        }\n\n        return config;\n    }\n\n    private static applyModeConfigurationTransform(e: ConfigurationChangeEvent): ConfigurationChangeEvent {\n        if (this._configsAffectedByMode === undefined) {\n            this._configsAffectedByMode = [\n                `gitlens.${configuration.name('mode').value}`,\n                `gitlens.${configuration.name('modes').value}`,\n                `gitlens.${configuration.name('blame')('toggleMode').value}`,\n                `gitlens.${configuration.name('codeLens').value}`,\n                `gitlens.${configuration.name('currentLine').value}`,\n                `gitlens.${configuration.name('heatmap')('toggleMode').value}`,\n                `gitlens.${configuration.name('hovers').value}`,\n                `gitlens.${configuration.name('recentChanges')('toggleMode').value}`,\n                `gitlens.${configuration.name('statusBar').value}`,\n                `gitlens.${configuration.name('views')('compare').value}`,\n                `gitlens.${configuration.name('views')('fileHistory').value}`,\n                `gitlens.${configuration.name('views')('lineHistory').value}`,\n                `gitlens.${configuration.name('views')('repositories').value}`,\n                `gitlens.${configuration.name('views')('search').value}`\n            ];\n        }\n\n        const original = e.affectsConfiguration;\n        return {\n            ...e,\n            affectsConfiguration: (section: string, resource?: Uri) => {\n                if (this._configsAffectedByMode && this._configsAffectedByMode.some(n => section.startsWith(n))) {\n                    return true;\n                }\n\n                return original(section, resource);\n            }\n        };\n    }\n}\n","'use strict';\nimport { commands, TextEditor, TextEditorEdit, Uri, window } from 'vscode';\nimport { UriComparer } from '../comparers';\nimport { FileAnnotationType } from '../configuration';\nimport { isTextEditor } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, EditorCommand } from './common';\n\n@command()\nexport class ClearFileAnnotationsCommand extends EditorCommand {\n    constructor() {\n        super([Commands.ClearFileAnnotations, Commands.ComputingFileAnnotations]);\n    }\n\n    execute(editor: TextEditor, edit: TextEditorEdit, uri?: Uri): Promise<any> {\n        // Handle the case where we are focused on a non-editor editor (output, debug console)\n        if (editor != null && !isTextEditor(editor)) {\n            if (uri != null && !UriComparer.equals(uri, editor.document.uri)) {\n                const e = window.visibleTextEditors.find(e => UriComparer.equals(uri, e.document.uri));\n                if (e !== undefined) {\n                    editor = e;\n                }\n            }\n        }\n\n        try {\n            return Container.fileAnnotations.clear(editor);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ClearFileAnnotationsCommand');\n            return Messages.showGenericErrorMessage('Unable to clear file annotations');\n        }\n    }\n}\n\nexport interface ToggleFileBlameCommandArgs {\n    on?: boolean;\n    sha?: string;\n    type?: FileAnnotationType;\n}\n\n@command()\nexport class ToggleFileBlameCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleFileBlame);\n    }\n\n    execute(editor: TextEditor, uri?: Uri, args: ToggleFileBlameCommandArgs = {}): Thenable<any> {\n        // Handle the case where we are focused on a non-editor editor (output, debug console)\n        if (editor != null && !isTextEditor(editor)) {\n            if (uri != null && !UriComparer.equals(uri, editor.document.uri)) {\n                const e = window.visibleTextEditors.find(e => UriComparer.equals(uri, e.document.uri));\n                if (e !== undefined) {\n                    editor = e;\n                }\n            }\n        }\n\n        try {\n            if (args.type === undefined) {\n                args = { ...args, type: FileAnnotationType.Blame };\n            }\n\n            return Container.fileAnnotations.toggle(\n                editor,\n                args.type!,\n                args.sha !== undefined ? args.sha : editor && editor.selection.active.line,\n                args.on\n            );\n        }\n        catch (ex) {\n            Logger.error(ex, 'ToggleFileBlameCommand');\n            return window.showErrorMessage(\n                `Unable to toggle file ${args.type} annotations. See output channel for more details`\n            );\n        }\n    }\n}\n\n@command()\nexport class ToggleFileHeatmapCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleFileHeatmap);\n    }\n\n    execute(editor: TextEditor, uri?: Uri, args: ToggleFileBlameCommandArgs = {}): Thenable<any> {\n        const copyArgs: ToggleFileBlameCommandArgs = {\n            ...args,\n            type: FileAnnotationType.Heatmap\n        };\n        return commands.executeCommand(Commands.ToggleFileBlame, uri, copyArgs);\n    }\n}\n\n@command()\nexport class ToggleFileRecentChangesCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleFileRecentChanges);\n    }\n\n    execute(editor: TextEditor, uri?: Uri, args: ToggleFileBlameCommandArgs = {}): Thenable<any> {\n        const copyArgs: ToggleFileBlameCommandArgs = {\n            ...args,\n            type: FileAnnotationType.RecentChanges\n        };\n        return commands.executeCommand(Commands.ToggleFileBlame, uri, copyArgs);\n    }\n}\n\n@command()\nexport class ToggleLineBlameCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.ToggleLineBlame);\n    }\n\n    execute(editor: TextEditor, uri?: Uri): Thenable<any> {\n        try {\n            return Container.lineAnnotations.toggle(editor);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ToggleLineBlameCommand');\n            return window.showErrorMessage(\n                'Unable to toggle line blame annotations. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { TextEditorComparer, UriComparer } from '../comparers';\nimport { BuiltInCommands, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Functions } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, getRepoPathOrPrompt } from './common';\n\nexport interface CloseUnchangedFilesCommandArgs {\n    uris?: Uri[];\n}\n\n@command()\nexport class CloseUnchangedFilesCommand extends ActiveEditorCommand {\n    private _onEditorChangedFn: ((editor: TextEditor | undefined) => void) | undefined;\n\n    constructor() {\n        super(Commands.CloseUnchangedFiles);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CloseUnchangedFilesCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            if (args.uris === undefined) {\n                args = { ...args };\n\n                const repoPath = await getRepoPathOrPrompt(\n                    undefined,\n                    `Close all files except those changed in which repository${GlyphChars.Ellipsis}`\n                );\n                if (!repoPath) return undefined;\n\n                const status = await Container.git.getStatusForRepo(repoPath);\n                if (status === undefined) return window.showWarningMessage('Unable to close unchanged files');\n\n                args.uris = status.files.map(f => f.uri);\n            }\n\n            if (args.uris.length === 0) return commands.executeCommand(BuiltInCommands.CloseAllEditors);\n\n            const disposable = window.onDidChangeActiveTextEditor(\n                Functions.debounce(\n                    (e: TextEditor | undefined) => this._onEditorChangedFn && this._onEditorChangedFn(e),\n                    50\n                )\n            );\n\n            editor = window.activeTextEditor;\n\n            let count = 0;\n            let loopCount = 0;\n            const editors: TextEditor[] = [];\n\n            // Find out how many editors there are\n            while (true) {\n                if (editor != null) {\n                    let found = false;\n                    for (const e of editors) {\n                        if (TextEditorComparer.equals(e, editor, { useId: true, usePosition: true })) {\n                            found = true;\n                            break;\n                        }\n                    }\n                    if (found) break;\n\n                    // Start counting at the first real editor\n                    count++;\n                    editors.push(editor);\n                }\n                else if (count !== 0) {\n                    count++;\n                }\n\n                editor = await this.nextEditor();\n\n                loopCount++;\n                // Break out if we've looped 4 times and haven't found any editors\n                if (loopCount >= 4 && editors.length === 0) break;\n            }\n\n            if (editors.length) {\n                editor = window.activeTextEditor;\n\n                for (let i = 0; i <= count; i++) {\n                    if (\n                        editor == null ||\n                        (editor.document !== undefined &&\n                            (editor.document.isDirty ||\n                                // eslint-disable-next-line no-loop-func\n                                args.uris.some(uri =>\n                                    UriComparer.equals(uri, editor!.document && editor!.document.uri)\n                                )))\n                    ) {\n                        editor = await this.nextEditor();\n                    }\n                    else {\n                        editor = await this.closeEditor();\n                    }\n                }\n            }\n\n            disposable.dispose();\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'CloseUnchangedFilesCommand');\n            return Messages.showGenericErrorMessage('Unable to close all unchanged files');\n        }\n    }\n\n    private async closeEditor(timeout: number = 500): Promise<TextEditor | undefined> {\n        const editor = window.activeTextEditor;\n\n        void (await commands.executeCommand(BuiltInCommands.CloseActiveEditor));\n\n        if (editor !== window.activeTextEditor) {\n            return window.activeTextEditor;\n        }\n\n        return this.waitForEditorChange(timeout);\n    }\n\n    private async nextEditor(timeout: number = 500): Promise<TextEditor | undefined> {\n        const editor = window.activeTextEditor;\n\n        void (await commands.executeCommand(BuiltInCommands.NextEditor));\n\n        if (editor !== window.activeTextEditor) {\n            return window.activeTextEditor;\n        }\n\n        return this.waitForEditorChange(timeout);\n    }\n\n    private waitForEditorChange(timeout: number = 500): Promise<TextEditor | undefined> {\n        return new Promise<TextEditor>((resolve, reject) => {\n            let timer: NodeJS.Timer | undefined;\n\n            this._onEditorChangedFn = (editor: TextEditor | undefined) => {\n                if (timer) {\n                    clearTimeout(timer);\n                    timer = undefined;\n\n                    resolve(editor);\n                }\n            };\n\n            timer = setTimeout(() => {\n                timer = undefined;\n\n                resolve(window.activeTextEditor);\n            }, timeout);\n        });\n    }\n}\n","'use strict';\nimport { env, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Iterables } from '../system';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\n\nexport interface CopyMessageToClipboardCommandArgs {\n    message?: string;\n    sha?: string;\n}\n\n@command()\nexport class CopyMessageToClipboardCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.CopyMessageToClipboard);\n    }\n\n    protected preExecute(context: CommandContext, args: CopyMessageToClipboardCommandArgs = {}) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.sha = context.node.commit.sha;\n            return this.execute(context.editor, context.node.commit.uri, args);\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CopyMessageToClipboardCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            args = { ...args };\n\n            // If we don't have an editor then get the message of the last commit to the branch\n            if (uri == null) {\n                const repoPath = await Container.git.getActiveRepoPath(editor);\n                if (!repoPath) return undefined;\n\n                const log = await Container.git.getLog(repoPath, { maxCount: 1 });\n                if (!log) return undefined;\n\n                args.message = Iterables.first(log.commits.values()).message;\n            }\n            else if (args.message === undefined) {\n                const gitUri = await GitUri.fromUri(uri);\n\n                if (args.sha === undefined) {\n                    const blameline = (editor && editor.selection.active.line) || 0;\n                    if (blameline < 0) return undefined;\n\n                    try {\n                        const blame =\n                            editor && editor.document && editor.document.isDirty\n                                ? await Container.git.getBlameForLineContents(\n                                      gitUri,\n                                      blameline,\n                                      editor.document.getText()\n                                  )\n                                : await Container.git.getBlameForLine(gitUri, blameline);\n                        if (!blame) return undefined;\n\n                        if (blame.commit.isUncommitted) return undefined;\n\n                        args.sha = blame.commit.sha;\n                        if (!gitUri.repoPath) {\n                            gitUri.repoPath = blame.commit.repoPath;\n                        }\n                    }\n                    catch (ex) {\n                        Logger.error(ex, 'CopyMessageToClipboardCommand', `getBlameForLine(${blameline})`);\n                        return Messages.showGenericErrorMessage('Unable to copy message');\n                    }\n                }\n\n                // Get the full commit message -- since blame only returns the summary\n                const commit = await Container.git.getLogCommit(gitUri.repoPath!, args.sha);\n                if (commit === undefined) return undefined;\n\n                args.message = commit.message;\n            }\n\n            void (await env.clipboard.writeText(args.message));\n            return undefined;\n        }\n        catch (ex) {\n            if (ex.message.includes(\"Couldn't find the required `xsel` binary\")) {\n                window.showErrorMessage(\n                    'Unable to copy message, xsel is not installed. Please install it via your package manager, e.g. `sudo apt install xsel`'\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, 'CopyMessageToClipboardCommand');\n            return Messages.showGenericErrorMessage('Unable to copy message');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { StatusFileNode } from '../views/nodes';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\n\nexport interface CopyRemoteFileUrlToClipboardCommandArgs {\n    range?: boolean;\n    sha?: string;\n}\n\n@command()\nexport class CopyRemoteFileUrlToClipboardCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.CopyRemoteFileUrlToClipboard);\n    }\n\n    protected preExecute(context: CommandContext, args: CopyRemoteFileUrlToClipboardCommandArgs = { range: true }) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.range = false;\n            args.sha = context.node.commit.sha;\n\n            // If it is a StatusFileNode then don't include the sha, since it hasn't been pushed yet\n            if (context.node instanceof StatusFileNode) {\n                args.sha = undefined;\n            }\n\n            return this.execute(\n                context.editor,\n                context.node.commit.isFile ? context.node.commit.uri : context.node.uri,\n                args\n            );\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CopyRemoteFileUrlToClipboardCommandArgs = { range: true }) {\n        if (args.sha === undefined) {\n            uri = getCommandUri(uri, editor);\n            if (uri == null) return undefined;\n\n            const gitUri = await GitUri.fromUri(uri);\n            if (!gitUri.repoPath) return undefined;\n\n            args = { ...args };\n            if (gitUri.sha === undefined) {\n                const commit = await Container.git.getLogCommitForFile(gitUri.repoPath, gitUri.fsPath, {\n                    firstIfNotFound: true\n                });\n\n                if (commit !== undefined) {\n                    args.sha = commit.sha;\n                }\n            }\n            else {\n                args.sha = gitUri.sha;\n            }\n        }\n\n        return commands.executeCommand(Commands.OpenFileInRemote, uri, { ...args, clipboard: true });\n    }\n}\n","'use strict';\nimport { env, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Iterables } from '../system';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\n\nexport interface CopyShaToClipboardCommandArgs {\n    sha?: string;\n}\n\n@command()\nexport class CopyShaToClipboardCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.CopyShaToClipboard);\n    }\n\n    protected preExecute(context: CommandContext, args: CopyShaToClipboardCommandArgs = {}) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.sha = context.node.commit.sha;\n            return this.execute(context.editor, context.node.commit.uri, args);\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: CopyShaToClipboardCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            args = { ...args };\n\n            // If we don't have an editor then get the sha of the last commit to the branch\n            if (uri == null) {\n                const repoPath = await Container.git.getActiveRepoPath(editor);\n                if (!repoPath) return undefined;\n\n                const log = await Container.git.getLog(repoPath, { maxCount: 1 });\n                if (!log) return undefined;\n\n                args.sha = Iterables.first(log.commits.values()).sha;\n            }\n            else if (args.sha === undefined) {\n                const blameline = (editor && editor.selection.active.line) || 0;\n                if (blameline < 0) return undefined;\n\n                try {\n                    const gitUri = await GitUri.fromUri(uri);\n                    const blame =\n                        editor && editor.document && editor.document.isDirty\n                            ? await Container.git.getBlameForLineContents(gitUri, blameline, editor.document.getText())\n                            : await Container.git.getBlameForLine(gitUri, blameline);\n                    if (blame === undefined) return undefined;\n\n                    args.sha = blame.commit.sha;\n                }\n                catch (ex) {\n                    Logger.error(ex, 'CopyShaToClipboardCommand', `getBlameForLine(${blameline})`);\n                    return Messages.showGenericErrorMessage('Unable to copy commit id');\n                }\n            }\n\n            void (await env.clipboard.writeText(args.sha));\n            return undefined;\n        }\n        catch (ex) {\n            if (ex.message.includes(\"Couldn't find the required `xsel` binary\")) {\n                window.showErrorMessage(\n                    'Unable to copy commit id, xsel is not installed. Please install it via your package manager, e.g. `sudo apt install xsel`'\n                );\n                return undefined;\n            }\n\n            Logger.error(ex, 'CopyShaToClipboardCommand');\n            return Messages.showGenericErrorMessage('Unable to copy commit id');\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt\n} from './common';\n\nexport interface DiffBranchWithCommandArgs {\n    ref1?: string;\n    ref2?: string;\n}\n\n@command()\nexport class DiffBranchWithCommand extends ActiveEditorCommand {\n    constructor() {\n        super([\n            Commands.DiffHeadWith,\n            Commands.DiffWorkingWith,\n            Commands.DiffHeadWithBranch,\n            Commands.DiffWorkingWithBranch\n        ]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffBranchWithCommandArgs = {}) {\n        switch (context.command) {\n            case Commands.DiffHeadWith:\n            case Commands.DiffHeadWithBranch:\n                args.ref2 = 'HEAD';\n                break;\n\n            case Commands.DiffWorkingWith:\n            case Commands.DiffWorkingWithBranch:\n                args.ref2 = '';\n                break;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffBranchWithCommandArgs = {}) {\n        if (args.ref2 === undefined) return undefined;\n\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Compare in which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            if (!args.ref1) {\n                let placeHolder;\n                switch (args.ref2) {\n                    case '':\n                        placeHolder = `Compare Working Tree with${GlyphChars.Ellipsis}`;\n                        break;\n                    case 'HEAD':\n                        placeHolder = `Compare HEAD with${GlyphChars.Ellipsis}`;\n                        break;\n                    default:\n                        placeHolder = `Compare ${args.ref2} with${GlyphChars.Ellipsis}`;\n                        break;\n                }\n\n                const pick = await new ReferencesQuickPick(repoPath).show(placeHolder, {\n                    allowEnteringRefs: true\n                });\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.ref1 = pick.ref;\n                if (args.ref1 === undefined) return undefined;\n            }\n\n            await Container.compareView.compare(repoPath, args.ref1, args.ref2);\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'DiffBranchWithBranchCommand');\n            return Messages.showGenericErrorMessage('Unable to open branch compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { BuiltInCommands, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { CompareResultsNode } from '../views/nodes';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRef\n} from './common';\n\nexport interface DiffDirectoryCommandArgs {\n    ref1?: string;\n    ref2?: string;\n}\n\n@command()\nexport class DiffDirectoryCommand extends ActiveEditorCommand {\n    constructor() {\n        super([\n            Commands.DiffDirectory,\n            Commands.DiffDirectoryWithHead,\n            Commands.ViewsOpenDirectoryDiff,\n            Commands.ViewsOpenDirectoryDiffWithWorking\n        ]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffDirectoryCommandArgs = {}) {\n        switch (context.command) {\n            case Commands.DiffDirectoryWithHead:\n                args.ref1 = 'HEAD';\n                args.ref2 = undefined;\n                break;\n\n            case Commands.ViewsOpenDirectoryDiff:\n                if (context.type === 'viewItem' && context.node instanceof CompareResultsNode) {\n                    args.ref1 = context.node.ref1.ref;\n                    args.ref2 = context.node.ref2.ref;\n                }\n                break;\n\n            case Commands.ViewsOpenDirectoryDiffWithWorking:\n                if (isCommandViewContextWithRef(context)) {\n                    args.ref1 = context.node.ref;\n                    args.ref2 = undefined;\n                }\n                break;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffDirectoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Compare directory in which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            if (!args.ref1) {\n                args = { ...args };\n\n                const pick = await new ReferencesQuickPick(repoPath).show(\n                    `Compare Working Tree with${GlyphChars.Ellipsis}`,\n                    { allowEnteringRefs: true }\n                );\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.ref1 = pick.ref;\n                if (args.ref1 === undefined) return undefined;\n            }\n\n            await Container.git.openDirectoryDiff(repoPath, args.ref1, args.ref2);\n            return undefined;\n        }\n        catch (ex) {\n            const msg = ex && ex.toString();\n            if (msg === 'No diff tool found') {\n                const result = await window.showWarningMessage(\n                    'Unable to open directory compare because there is no Git diff tool configured',\n                    'View Git Docs'\n                );\n                if (!result) return undefined;\n\n                return commands.executeCommand(\n                    BuiltInCommands.Open,\n                    Uri.parse('https://git-scm.com/docs/git-config#git-config-difftool')\n                );\n            }\n\n            Logger.error(ex, 'DiffDirectoryCommand');\n            return Messages.showGenericErrorMessage('Unable to open directory compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, Range, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { Iterables } from '../system';\n\nexport interface DiffLineWithPreviousCommandArgs {\n    commit?: GitCommit;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffLineWithPreviousCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.DiffLineWithPrevious);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffLineWithPreviousCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        if (args.commit === undefined || GitService.isUncommitted(args.commit.sha)) {\n            if (args.line < 0) return undefined;\n\n            try {\n                if (!GitService.isStagedUncommitted(gitUri.sha)) {\n                    const blame =\n                        editor && editor.document && editor.document.isDirty\n                            ? await Container.git.getBlameForLineContents(gitUri, args.line, editor.document.getText())\n                            : await Container.git.getBlameForLine(gitUri, args.line);\n                    if (blame === undefined) {\n                        return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                    }\n\n                    // If the line is uncommitted, change the previous commit\n                    if (blame.commit.isUncommitted) {\n                        const status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                        if (status !== undefined && status.indexStatus !== undefined) {\n                            args.commit = blame.commit.with({\n                                sha: GitService.stagedUncommittedSha\n                            });\n                        }\n                    }\n                }\n\n                if (args.commit === undefined) {\n                    const log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                        maxCount: 2,\n                        range: new Range(args.line, 0, args.line, 0),\n                        ref:\n                            gitUri.sha === undefined || GitService.isStagedUncommitted(gitUri.sha)\n                                ? undefined\n                                : `${gitUri.sha}^`,\n                        renames: true\n                    });\n                    if (log === undefined) {\n                        return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                    }\n\n                    args.commit = (gitUri.sha && log.commits.get(gitUri.sha)) || Iterables.first(log.commits.values());\n                }\n            }\n            catch (ex) {\n                Logger.error(ex, 'DiffLineWithPreviousCommand', `getLogForFile(${args.line})`);\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            rhs: {\n                sha: gitUri.sha || '',\n                uri: gitUri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffLineWithWorkingCommandArgs {\n    commit?: GitCommit;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffLineWithWorkingCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.DiffLineWithWorking);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffLineWithWorkingCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        if (args.commit === undefined || GitService.isUncommitted(args.commit.sha)) {\n            const blameline = args.line;\n            if (blameline < 0) return undefined;\n\n            try {\n                const blame =\n                    editor && editor.document && editor.document.isDirty\n                        ? await Container.git.getBlameForLineContents(gitUri, blameline, editor.document.getText())\n                        : await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                }\n\n                args.commit = blame.commit;\n\n                // If the line is uncommitted, change the previous commit\n                if (args.commit.isUncommitted) {\n                    const status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                    args.commit = args.commit.with({\n                        sha:\n                            status !== undefined && status.indexStatus !== undefined\n                                ? GitService.stagedUncommittedSha\n                                : args.commit.previousSha!,\n                        fileName: args.commit.previousFileName!,\n                        originalFileName: null,\n                        previousSha: null,\n                        previousFileName: null\n                    });\n                    args.line = blame.line.line + 1;\n                }\n            }\n            catch (ex) {\n                Logger.error(ex, 'DiffLineWithWorkingCommand', `getBlameForLine(${blameline})`);\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            rhs: {\n                sha: '',\n                uri: args.commit.workingUri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, Range, TextDocumentShowOptions, TextEditor, Uri, ViewColumn } from 'vscode';\nimport { BuiltInCommands, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands } from './common';\n\nexport interface DiffWithCommandArgsRevision {\n    sha: string;\n    uri: Uri;\n    title?: string;\n}\n\nexport interface DiffWithCommandArgs {\n    lhs?: DiffWithCommandArgsRevision;\n    rhs?: DiffWithCommandArgsRevision;\n    repoPath?: string;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithCommand extends ActiveEditorCommand {\n    static getMarkdownCommandArgs(args: DiffWithCommandArgs): string;\n    static getMarkdownCommandArgs(commit1: GitCommit, commit2: GitCommit): string;\n    static getMarkdownCommandArgs(argsOrCommit1: DiffWithCommandArgs | GitCommit, commit2?: GitCommit): string {\n        let args: DiffWithCommandArgs | GitCommit;\n        if (argsOrCommit1 instanceof GitCommit) {\n            const commit1 = argsOrCommit1;\n\n            if (commit2 === undefined) {\n                if (commit1.isUncommitted) {\n                    args = {\n                        repoPath: commit1.repoPath,\n                        lhs: {\n                            sha: 'HEAD',\n                            uri: commit1.uri\n                        },\n                        rhs: {\n                            sha: '',\n                            uri: commit1.uri\n                        }\n                    };\n                }\n                else {\n                    args = {\n                        repoPath: commit1.repoPath,\n                        lhs: {\n                            sha:\n                                commit1.previousSha !== undefined\n                                    ? commit1.previousSha\n                                    : GitService.deletedOrMissingSha,\n                            uri: commit1.previousUri!\n                        },\n                        rhs: {\n                            sha: commit1.sha,\n                            uri: commit1.uri\n                        }\n                    };\n                }\n            }\n            else {\n                args = {\n                    repoPath: commit1.repoPath,\n                    lhs: {\n                        sha: commit1.sha,\n                        uri: commit1.uri\n                    },\n                    rhs: {\n                        sha: commit2.sha,\n                        uri: commit2.uri\n                    }\n                };\n            }\n        }\n        else {\n            args = argsOrCommit1;\n        }\n\n        return super.getMarkdownCommandArgsCore<DiffWithCommandArgs>(Commands.DiffWith, args);\n    }\n\n    constructor() {\n        super(Commands.DiffWith);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithCommandArgs = {}): Promise<any> {\n        args = {\n            ...args,\n            lhs: { ...(args.lhs as DiffWithCommandArgsRevision) },\n            rhs: { ...(args.rhs as DiffWithCommandArgsRevision) },\n            showOptions: { ...args.showOptions }\n        };\n        if (args.repoPath === undefined || args.lhs === undefined || args.rhs === undefined) return undefined;\n\n        try {\n            let lhsSha = args.lhs.sha;\n            let rhsSha = args.rhs.sha;\n\n            [args.lhs.sha, args.rhs.sha] = await Promise.all([\n                await Container.git.resolveReference(args.repoPath, args.lhs.sha, args.lhs.uri),\n                await Container.git.resolveReference(args.repoPath, args.rhs.sha, args.rhs.uri)\n            ]);\n\n            if (args.lhs.sha !== GitService.deletedOrMissingSha) {\n                lhsSha = args.lhs.sha;\n            }\n\n            if (args.rhs.sha && args.rhs.sha !== GitService.deletedOrMissingSha) {\n                // Ensure that the file still exists in this commit\n                const status = await Container.git.getFileStatusForCommit(\n                    args.repoPath,\n                    args.rhs.uri.fsPath,\n                    args.rhs.sha\n                );\n                if (status !== undefined && status.status === 'D') {\n                    args.rhs.sha = GitService.deletedOrMissingSha;\n                }\n                else {\n                    rhsSha = args.rhs.sha;\n                }\n            }\n\n            const [lhs, rhs] = await Promise.all([\n                Container.git.getVersionedUri(args.repoPath, args.lhs.uri.fsPath, args.lhs.sha),\n                Container.git.getVersionedUri(args.repoPath, args.rhs.uri.fsPath, args.rhs.sha)\n            ]);\n\n            let rhsSuffix = GitService.shortenSha(rhsSha, { uncommitted: 'Working Tree' }) || '';\n            if (rhs === undefined) {\n                if (GitService.isUncommitted(args.rhs.sha)) {\n                    rhsSuffix = 'deleted';\n                }\n                else if (rhsSuffix.length === 0 && args.rhs.sha === GitService.deletedOrMissingSha) {\n                    rhsSuffix = 'not in Working Tree';\n                }\n                else {\n                    rhsSuffix = `deleted in ${rhsSuffix}`;\n                }\n            }\n            else if (lhs === undefined) {\n                rhsSuffix = `added in ${rhsSuffix}`;\n            }\n\n            let lhsSuffix = args.lhs.sha !== GitService.deletedOrMissingSha ? GitService.shortenSha(lhsSha) || '' : '';\n            if (lhs === undefined && args.rhs.sha.length === 0) {\n                if (rhs !== undefined) {\n                    lhsSuffix = `not in ${lhsSuffix}`;\n                    rhsSuffix = '';\n                }\n                else {\n                    lhsSuffix = `deleted in ${lhsSuffix})`;\n                }\n            }\n\n            if (args.lhs.title === undefined && (lhs !== undefined || lhsSuffix.length !== 0)) {\n                args.lhs.title = `${paths.basename(args.lhs.uri.fsPath)}${lhsSuffix ? ` (${lhsSuffix})` : ''}`;\n            }\n            if (args.rhs.title === undefined) {\n                args.rhs.title = `${paths.basename(args.rhs.uri.fsPath)}${rhsSuffix ? ` (${rhsSuffix})` : ''}`;\n            }\n\n            const title =\n                args.lhs.title !== undefined && args.rhs.title !== undefined\n                    ? `${args.lhs.title} ${GlyphChars.ArrowLeftRightLong} ${args.rhs.title}`\n                    : args.lhs.title || args.rhs.title;\n\n            if (args.showOptions === undefined) {\n                args.showOptions = {};\n            }\n\n            if (args.showOptions.viewColumn === undefined) {\n                args.showOptions.viewColumn = ViewColumn.Active;\n            }\n\n            if (args.line !== undefined && args.line !== 0) {\n                args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n            }\n\n            return await commands.executeCommand(\n                BuiltInCommands.Diff,\n                lhs === undefined\n                    ? GitUri.toRevisionUri(GitService.deletedOrMissingSha, args.lhs.uri.fsPath, args.repoPath)\n                    : lhs,\n                rhs === undefined\n                    ? GitUri.toRevisionUri(GitService.deletedOrMissingSha, args.rhs.uri.fsPath, args.repoPath)\n                    : rhs,\n                title,\n                args.showOptions\n            );\n        }\n        catch (ex) {\n            Logger.error(ex, 'DiffWithCommand', 'getVersionedFile');\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n    }\n}\n","'use strict';\nimport { commands, Range, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitLogCommit, GitService, GitStatusFile, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Iterables } from '../system';\nimport { ActiveEditorCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { UriComparer } from '../comparers';\n\nexport interface DiffWithNextCommandArgs {\n    commit?: GitLogCommit;\n    range?: Range;\n\n    inDiffEditor?: boolean;\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithNextCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithNext, Commands.DiffWithNextInDiff]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffWithNextCommandArgs = {}) {\n        if (\n            context.command === Commands.DiffWithNextInDiff\n            // || (context.editor !== undefined && context.editor.viewColumn === undefined)\n        ) {\n            // HACK: If in a diff, try to determine if we are on the right or left side\n            // If there is a context uri and it doesn't match the editor uri, assume we are on the left\n            // If on the left, use the editor uri and pretend we aren't in a diff\n            if (context.uri !== undefined && context.editor !== undefined && context.editor.document !== undefined) {\n                if (!UriComparer.equals(context.uri, context.editor.document.uri, { exact: true })) {\n                    return this.execute(context.editor, context.editor.document.uri, args);\n                }\n            }\n            args.inDiffEditor = true;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithNextCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = await GitUri.fromUri(uri);\n        let status: GitStatusFile | undefined;\n\n        if (args.commit === undefined || !(args.commit instanceof GitLogCommit) || args.range !== undefined) {\n            try {\n                const sha = args.commit === undefined ? gitUri.sha! : args.commit.sha;\n\n                if (GitService.isStagedUncommitted(sha)) {\n                    const diffArgs: DiffWithCommandArgs = {\n                        repoPath: gitUri.repoPath!,\n                        lhs: {\n                            sha: sha,\n                            uri: gitUri\n                        },\n                        rhs: {\n                            sha: '',\n                            uri: gitUri\n                        },\n                        line: args.line,\n                        showOptions: args.showOptions\n                    };\n                    return commands.executeCommand(Commands.DiffWith, diffArgs);\n                }\n\n                let log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                    maxCount: sha !== undefined ? undefined : 2,\n                    range: args.range!,\n                    renames: true\n                });\n                if (log === undefined) {\n                    const fileName = await Container.git.findNextFileName(gitUri.repoPath!, gitUri.fsPath);\n                    if (fileName !== undefined) {\n                        log = await Container.git.getLogForFile(gitUri.repoPath, fileName, {\n                            maxCount: sha !== undefined ? undefined : 2,\n                            range: args.range!,\n                            renames: true\n                        });\n                    }\n\n                    if (log === undefined) {\n                        return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                    }\n                }\n\n                args.commit = (sha && log.commits.get(sha)) || Iterables.first(log.commits.values());\n\n                // If the sha is missing or the file is uncommitted, treat it as a DiffWithWorking\n                if (gitUri.sha === undefined) {\n                    status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                    if (status !== undefined) return commands.executeCommand(Commands.DiffWithWorking, uri);\n                }\n            }\n            catch (ex) {\n                Logger.error(ex, 'DiffWithNextCommand', `getLogForFile(${gitUri.repoPath}, ${gitUri.fsPath})`);\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        if (args.commit.nextSha === undefined) {\n            // Check if the file is staged\n            status = status || (await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath));\n            if (status !== undefined && status.indexStatus === 'M') {\n                const diffArgs: DiffWithCommandArgs = {\n                    repoPath: args.commit.repoPath,\n                    lhs: {\n                        sha: args.commit.sha,\n                        uri: args.commit.uri\n                    },\n                    rhs: {\n                        sha: GitService.stagedUncommittedSha,\n                        uri: args.commit.uri\n                    },\n                    line: args.line,\n                    showOptions: args.showOptions\n                };\n\n                return commands.executeCommand(Commands.DiffWith, diffArgs);\n            }\n\n            return commands.executeCommand(Commands.DiffWithWorking, uri);\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            rhs: {\n                sha: args.commit.nextSha,\n                uri: args.commit.nextUri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Iterables } from '../system';\nimport { ActiveEditorCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { DiffWithWorkingCommandArgs } from './diffWithWorking';\nimport { UriComparer } from '../comparers';\n\nexport interface DiffWithPreviousCommandArgs {\n    commit?: GitCommit;\n\n    inDiffEditor?: boolean;\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithPreviousCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithPrevious, Commands.DiffWithPreviousInDiff]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffWithPreviousCommandArgs = {}) {\n        if (\n            context.command === Commands.DiffWithPreviousInDiff\n            // || (context.editor !== undefined && context.editor.viewColumn === undefined)\n        ) {\n            // HACK: If in a diff, try to determine if we are on the right or left side\n            // If there is a context uri and it doesn't match the editor uri, assume we are on the left\n            // If on the left, use the editor uri and pretend we aren't in a diff\n            if (context.uri !== undefined && context.editor !== undefined && context.editor.document !== undefined) {\n                if (!UriComparer.equals(context.uri, context.editor.document.uri, { exact: true })) {\n                    return this.execute(context.editor, context.editor.document.uri, args);\n                }\n            }\n            args.inDiffEditor = true;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithPreviousCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        if (args.commit === undefined || !args.commit.isFile) {\n            const gitUri = await GitUri.fromUri(uri);\n\n            try {\n                let sha = args.commit === undefined ? gitUri.sha : args.commit.sha;\n                if (sha === GitService.deletedOrMissingSha) {\n                    return Messages.showCommitHasNoPreviousCommitWarningMessage();\n                }\n\n                // If we are a fake \"staged\" sha, remove it\n                let isStagedUncommitted = false;\n                if (GitService.isStagedUncommitted(sha!)) {\n                    gitUri.sha = sha = undefined;\n                    isStagedUncommitted = true;\n                }\n\n                // If we are in a diff editor, assume we are on the right side, and need to move back 2 revisions\n                const originalSha = sha;\n                if (args.inDiffEditor && sha !== undefined) {\n                    sha = `${sha}^`;\n                }\n\n                args.commit = undefined;\n\n                let log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                    maxCount: 2,\n                    ref: sha,\n                    renames: true\n                });\n\n                if (log !== undefined) {\n                    args.commit = (sha && log.commits.get(sha)) || Iterables.first(log.commits.values());\n                }\n                else {\n                    // Only kick out if we aren't looking for the previous sha -- since renames won't return a log above\n                    if (sha === undefined || !sha.endsWith('^')) {\n                        return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                    }\n\n                    // Check for renames\n                    log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                        maxCount: 3,\n                        ref: originalSha,\n                        renames: true\n                    });\n\n                    if (log === undefined) {\n                        return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                    }\n\n                    args.commit =\n                        Iterables.next(Iterables.skip(log.commits.values(), 1)) ||\n                        Iterables.first(log.commits.values());\n\n                    if (args.commit.sha === originalSha) {\n                        return Messages.showCommitHasNoPreviousCommitWarningMessage();\n                    }\n                }\n\n                // If the sha is missing (i.e. working tree), check the file status\n                // If file is uncommitted, then treat it as a DiffWithWorking\n                if (gitUri.sha === undefined) {\n                    const status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                    if (status !== undefined) {\n                        if (isStagedUncommitted) {\n                            const diffArgs: DiffWithCommandArgs = {\n                                repoPath: args.commit.repoPath,\n                                lhs: {\n                                    sha: args.inDiffEditor\n                                        ? args.commit.previousSha || GitService.deletedOrMissingSha\n                                        : args.commit.sha,\n                                    uri: args.inDiffEditor ? args.commit.previousUri : args.commit.uri\n                                },\n                                rhs: {\n                                    sha: args.inDiffEditor ? args.commit.sha : GitService.stagedUncommittedSha,\n                                    uri: args.commit.uri\n                                },\n                                line: args.line,\n                                showOptions: args.showOptions\n                            };\n                            return commands.executeCommand(Commands.DiffWith, diffArgs);\n                        }\n\n                        // Check if the file is staged\n                        if (status.indexStatus !== undefined) {\n                            const diffArgs: DiffWithCommandArgs = {\n                                repoPath: args.commit.repoPath,\n                                lhs: {\n                                    sha: args.inDiffEditor ? args.commit.sha : GitService.stagedUncommittedSha,\n                                    uri: args.commit.uri\n                                },\n                                rhs: {\n                                    sha: args.inDiffEditor ? GitService.stagedUncommittedSha : '',\n                                    uri: args.commit.uri\n                                },\n                                line: args.line,\n                                showOptions: args.showOptions\n                            };\n\n                            return commands.executeCommand(Commands.DiffWith, diffArgs);\n                        }\n\n                        if (!args.inDiffEditor) {\n                            const commandArgs: DiffWithWorkingCommandArgs = {\n                                commit: args.commit,\n                                showOptions: args.showOptions\n                            };\n                            return commands.executeCommand(Commands.DiffWithWorking, uri, commandArgs);\n                        }\n                    }\n                }\n            }\n            catch (ex) {\n                Logger.error(ex, 'DiffWithPreviousCommand', `getLogForFile(${gitUri.repoPath}, ${gitUri.fsPath})`);\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.previousSha !== undefined ? args.commit.previousSha : GitService.deletedOrMissingSha,\n                uri: args.commit.previousUri\n            },\n            rhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitUri } from '../git/gitService';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffWithRefCommandArgs {\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class DiffWithRefCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithRef, Commands.DiffWithBranch]);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithRefCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return Messages.showNoRepositoryWarningMessage('Unable to open file compare');\n\n        const pick = await new ReferencesQuickPick(gitUri.repoPath).show(\n            `Compare ${paths.basename(gitUri.fsPath)} with${GlyphChars.Ellipsis}`,\n            {\n                allowEnteringRefs: true,\n                goBack: args.goBackCommand\n            }\n        );\n        if (pick === undefined) return undefined;\n\n        if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n        const ref = pick.ref;\n        if (ref === undefined) return undefined;\n\n        let renamedUri: Uri | undefined;\n        let renamedTitle: string | undefined;\n\n        // Check to see if this file has been renamed\n        const files = await Container.git.getDiffStatus(gitUri.repoPath, 'HEAD', ref, { filter: 'R' });\n        if (files !== undefined) {\n            const fileName = Strings.normalizePath(paths.relative(gitUri.repoPath, gitUri.fsPath));\n            const rename = files.find(s => s.fileName === fileName);\n            if (rename !== undefined && rename.originalFileName !== undefined) {\n                renamedUri = GitUri.resolveToUri(rename.originalFileName, gitUri.repoPath);\n                renamedTitle = `${paths.basename(rename.originalFileName)} (${GitService.shortenSha(ref)})`;\n            }\n        }\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: gitUri.repoPath,\n            lhs: {\n                sha: pick.remote ? `remotes/${ref}` : ref,\n                uri: renamedUri || (gitUri as Uri),\n                title: renamedTitle || `${paths.basename(gitUri.fsPath)} (${GitService.shortenSha(ref)})`\n            },\n            rhs: {\n                sha: '',\n                uri: gitUri as Uri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, FileHistoryQuickPick, ShowFileHistoryFromQuickPickItem } from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\n\nexport interface DiffWithRevisionCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n    maxCount?: number;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class DiffWithRevisionCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.DiffWithRevision);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithRevisionCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        const placeHolder = `Compare ${gitUri.getFormattedPath({\n            suffix: args.reference ? ` (${args.reference.name})` : undefined\n        })}${gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''} with revision${\n            GlyphChars.Ellipsis\n        }`;\n\n        const progressCancellation = FileHistoryQuickPick.showProgress(placeHolder);\n        try {\n            const log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                maxCount: args.maxCount,\n                ref: (args.reference && args.reference.ref) || gitUri.sha\n            });\n            if (log === undefined) {\n                if (args.reference) {\n                    return window.showWarningMessage(`The file could not be found in ${args.reference.name}`);\n                }\n                return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open history compare');\n            }\n\n            if (progressCancellation.token.isCancellationRequested) return undefined;\n\n            let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n            let commandArgs: DiffWithRevisionCommandArgs;\n            if (log.truncated) {\n                commandArgs = { ...args };\n                const npc = new CommandQuickPickItem(\n                    {\n                        label: '$(arrow-right) Show Next Commits',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${log.maxCount} newer commits`\n                    },\n                    Commands.DiffWithRevision,\n                    [uri, commandArgs]\n                );\n\n                const last = Iterables.last(log.commits.values());\n                if (last != null) {\n                    commandArgs = { ...args, nextPageCommand: npc };\n                    previousPageCommand = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-left) Show Previous Commits',\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${log.maxCount} older commits`\n                        },\n                        Commands.DiffWithRevision,\n                        [new GitUri(uri, last), commandArgs]\n                    );\n                }\n            }\n\n            commandArgs = { ...args };\n            const icon =\n                args.reference instanceof GitTag\n                    ? '$(tag) '\n                    : args.reference instanceof GitBranch\n                    ? '$(git-branch) '\n                    : '';\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to history of ${\n                        GlyphChars.Space\n                    }$(file-text) ${gitUri.getFormattedPath()}${\n                        args.reference\n                            ? ` from ${GlyphChars.Space}${icon}${args.reference.name}`\n                            : gitUri.sha\n                            ? ` from ${GlyphChars.Space}$(git-commit) ${gitUri.shortSha}`\n                            : ''\n                    }`\n                },\n                Commands.DiffWithRevision,\n                [uri, commandArgs]\n            );\n\n            commandArgs = { ...args, maxCount: 0 };\n            const pick = await FileHistoryQuickPick.show(log, gitUri, placeHolder, {\n                pickerOnly: true,\n                progressCancellation: progressCancellation,\n                currentCommand: currentCommand,\n                nextPageCommand: args.nextPageCommand,\n                previousPageCommand: previousPageCommand,\n                showAllCommand: log.truncated\n                    ? new CommandQuickPickItem(\n                          {\n                              label: '$(sync) Show All Commits',\n                              description: `${Strings.pad(GlyphChars.Dash, 2, 3)} this may take a while`\n                          },\n                          Commands.DiffWithRevision,\n                          [uri, commandArgs]\n                      )\n                    : undefined\n            });\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof ShowFileHistoryFromQuickPickItem) {\n                const reference = await pick.execute();\n                if (reference === undefined) return undefined;\n                if (reference instanceof CommandQuickPickItem) return reference.execute();\n\n                commandArgs = {\n                    ...args,\n                    reference: reference.item\n                };\n                return commands.executeCommand(Commands.DiffWithRevision, gitUri, commandArgs);\n            }\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            const ref = pick.commit.sha;\n\n            const diffArgs: DiffWithCommandArgs = {\n                repoPath: gitUri.repoPath,\n                lhs: {\n                    sha: ref,\n                    uri: gitUri as Uri\n                },\n                rhs: {\n                    sha: '',\n                    uri: gitUri as Uri\n                },\n                line: args.line,\n                showOptions: args.showOptions\n            };\n            return await commands.executeCommand(Commands.DiffWith, diffArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'DiffWithRevisionCommand');\n            return Messages.showGenericErrorMessage('Unable to open compare');\n        }\n        finally {\n            progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { commands, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { DiffWithCommandArgs } from './diffWith';\nimport { UriComparer } from '../comparers';\n\nexport interface DiffWithWorkingCommandArgs {\n    commit?: GitCommit;\n\n    inDiffEditor?: boolean;\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class DiffWithWorkingCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.DiffWithWorking, Commands.DiffWithWorkingInDiff]);\n    }\n\n    protected preExecute(context: CommandContext, args: DiffWithWorkingCommandArgs = {}) {\n        if (\n            context.command === Commands.DiffWithWorkingInDiff ||\n            (context.editor !== undefined && context.editor.viewColumn === undefined)\n        ) {\n            // HACK: If in a diff, try to determine if we are on the right or left side\n            // If there is a context uri and it doesn't match the editor uri, assume we are on the left\n            // If on the left, use the editor uri and pretend we aren't in a diff\n            if (context.uri !== undefined && context.editor !== undefined && context.editor.document !== undefined) {\n                if (!UriComparer.equals(context.uri, context.editor.document.uri, { exact: true })) {\n                    return this.execute(context.editor, context.editor.document.uri, args);\n                }\n            }\n\n            args.inDiffEditor = true;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: DiffWithWorkingCommandArgs = {}): Promise<any> {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        if (args.commit === undefined || GitService.isUncommitted(args.commit.sha)) {\n            // If the sha is missing, just let the user know the file matches\n            if (gitUri.sha === undefined) return window.showInformationMessage('File matches the working tree');\n            if (gitUri.sha === GitService.deletedOrMissingSha) {\n                return window.showWarningMessage('Unable to open compare. File has been deleted from the working tree');\n            }\n\n            // If we are a fake \"staged\" sha, check the status\n            if (GitService.isStagedUncommitted(gitUri.sha!)) {\n                gitUri.sha = undefined;\n\n                const status = await Container.git.getStatusForFile(gitUri.repoPath!, gitUri.fsPath);\n                if (status !== undefined && status.indexStatus !== undefined) {\n                    let sha = GitService.stagedUncommittedSha;\n                    if (args.inDiffEditor) {\n                        const commit = await Container.git.getRecentLogCommitForFile(gitUri.repoPath!, gitUri.fsPath);\n                        if (commit === undefined) return Messages.showCommitHasNoPreviousCommitWarningMessage();\n\n                        sha = commit.sha;\n                    }\n\n                    const diffArgs: DiffWithCommandArgs = {\n                        repoPath: gitUri.repoPath,\n                        lhs: {\n                            sha: sha,\n                            uri: gitUri.documentUri()\n                        },\n                        rhs: {\n                            sha: '',\n                            uri: gitUri.documentUri()\n                        },\n                        line: args.line,\n                        showOptions: args.showOptions\n                    };\n\n                    return commands.executeCommand(Commands.DiffWith, diffArgs);\n                }\n            }\n\n            // If we are in a diff editor, assume we are on the right side, and need to move back 2 revisions\n            let sha = gitUri.sha;\n            if (args.inDiffEditor && sha !== undefined) {\n                sha = `${sha}^`;\n            }\n\n            try {\n                args.commit = await Container.git.getLogCommitForFile(gitUri.repoPath, gitUri.fsPath, {\n                    ref: sha,\n                    firstIfNotFound: true\n                });\n                if (args.commit === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open compare');\n                }\n            }\n            catch (ex) {\n                Logger.error(\n                    ex,\n                    'DiffWithWorkingCommand',\n                    `getLogCommit(${gitUri.repoPath}, ${gitUri.fsPath}, ${gitUri.sha})`\n                );\n                return Messages.showGenericErrorMessage('Unable to open compare');\n            }\n        }\n\n        const [workingFileName] = await Container.git.findWorkingFileName(gitUri.fsPath, gitUri.repoPath);\n        if (workingFileName === undefined) {\n            return window.showWarningMessage('Unable to open compare. File has been deleted from the working tree');\n        }\n\n        args.commit.workingFileName = workingFileName;\n\n        const diffArgs: DiffWithCommandArgs = {\n            repoPath: args.commit.repoPath,\n            lhs: {\n                sha: args.commit.sha,\n                uri: args.commit.uri\n            },\n            rhs: {\n                sha: '',\n                uri: args.commit.workingUri\n            },\n            line: args.line,\n            showOptions: args.showOptions\n        };\n        return commands.executeCommand(Commands.DiffWith, diffArgs);\n    }\n}\n","'use strict';\nimport { commands, SourceControlResourceState, Uri, window } from 'vscode';\nimport { BuiltInCommands, GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Arrays } from '../system';\nimport {\n    command,\n    Command,\n    CommandContext,\n    Commands,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithFileCommit,\n    isCommandViewContextWithFileRefs\n} from './common';\n\nenum Status {\n    INDEX_MODIFIED,\n    INDEX_ADDED,\n    INDEX_DELETED,\n    INDEX_RENAMED,\n    INDEX_COPIED,\n\n    MODIFIED,\n    DELETED,\n    UNTRACKED,\n    IGNORED,\n\n    ADDED_BY_US,\n    ADDED_BY_THEM,\n    DELETED_BY_US,\n    DELETED_BY_THEM,\n    BOTH_ADDED,\n    BOTH_DELETED,\n    BOTH_MODIFIED\n}\n\nenum ResourceGroupType {\n    Merge,\n    Index,\n    WorkingTree\n}\n\ninterface Resource extends SourceControlResourceState {\n    readonly resourceGroupType: ResourceGroupType;\n    readonly type: Status;\n}\n\ninterface ExternalDiffFile {\n    uri: Uri;\n    staged: boolean;\n    ref1?: string;\n    ref2?: string;\n}\n\nexport interface ExternalDiffCommandArgs {\n    files?: ExternalDiffFile[];\n}\n\n@command()\nexport class ExternalDiffCommand extends Command {\n    constructor() {\n        super([Commands.ExternalDiff, Commands.ExternalDiffAll]);\n    }\n\n    protected async preExecute(context: CommandContext, args: ExternalDiffCommandArgs = {}) {\n        if (isCommandViewContextWithFileCommit(context)) {\n            args = { ...args };\n\n            const ref1 = GitService.isUncommitted(context.node.commit.previousFileSha)\n                ? ''\n                : context.node.commit.previousFileSha;\n            const ref2 = context.node.commit.isUncommitted ? '' : context.node.commit.sha;\n\n            args.files = [\n                {\n                    uri: GitUri.fromFile(context.node.file, context.node.file.repoPath || context.node.repoPath),\n                    staged: context.node.commit.isStagedUncommitted || context.node.file.indexStatus !== undefined,\n                    ref1: ref1,\n                    ref2: ref2\n                }\n            ];\n\n            return this.execute(args);\n        }\n\n        if (isCommandViewContextWithFileRefs(context)) {\n            args = { ...args };\n\n            args.files = [\n                {\n                    uri: GitUri.fromFile(context.node.file, context.node.file.repoPath || context.node.repoPath),\n                    staged: context.node.file.indexStatus !== undefined,\n                    ref1: context.node.ref1,\n                    ref2: context.node.ref2\n                }\n            ];\n\n            return this.execute(args);\n        }\n\n        if (args.files === undefined) {\n            if (context.type === 'scm-states') {\n                args = { ...args };\n                args.files = context.scmResourceStates.map(r => ({\n                    uri: r.resourceUri,\n                    staged: (r as Resource).resourceGroupType === ResourceGroupType.Index\n                }));\n            }\n            else if (context.type === 'scm-groups') {\n                args = { ...args };\n                args.files = Arrays.filterMap(context.scmResourceGroups[0].resourceStates, r =>\n                    this.isModified(r)\n                        ? {\n                              uri: r.resourceUri,\n                              staged: (r as Resource).resourceGroupType === ResourceGroupType.Index\n                          }\n                        : undefined\n                );\n            }\n        }\n\n        if (context.command === Commands.ExternalDiffAll) {\n            if (args.files === undefined) {\n                const repoPath = await getRepoPathOrPrompt(\n                    undefined,\n                    `Open changes from which repository${GlyphChars.Ellipsis}`\n                );\n                if (!repoPath) return undefined;\n\n                const status = await Container.git.getStatusForRepo(repoPath);\n                if (status === undefined) {\n                    return window.showInformationMessage(\"The repository doesn't have any changes\");\n                }\n\n                args.files = [];\n\n                for (const file of status.files) {\n                    if (file.indexStatus === 'M') {\n                        args.files.push({ uri: file.uri, staged: true });\n                    }\n\n                    if (file.workingTreeStatus === 'M') {\n                        args.files.push({ uri: file.uri, staged: false });\n                    }\n                }\n            }\n        }\n\n        return this.execute(args);\n    }\n\n    private isModified(resource: SourceControlResourceState) {\n        const status = (resource as Resource).type;\n        return status === Status.BOTH_MODIFIED || status === Status.INDEX_MODIFIED || status === Status.MODIFIED;\n    }\n\n    async execute(args: ExternalDiffCommandArgs = {}) {\n        try {\n            let repoPath;\n            if (args.files === undefined) {\n                const editor = window.activeTextEditor;\n                if (editor === undefined) return undefined;\n\n                repoPath = await Container.git.getRepoPathOrActive(undefined, editor);\n                if (!repoPath) return undefined;\n\n                const uri = editor.document.uri;\n                const status = await Container.git.getStatusForFile(repoPath, uri.fsPath);\n                if (status === undefined) {\n                    return window.showInformationMessage(\"The current file doesn't have any changes\");\n                }\n\n                args.files = [];\n                if (status.indexStatus === 'M') {\n                    args.files.push({ uri: status.uri, staged: true });\n                }\n\n                if (status.workingTreeStatus === 'M') {\n                    args.files.push({ uri: status.uri, staged: false });\n                }\n            }\n            else {\n                repoPath = await Container.git.getRepoPath(args.files[0].uri.fsPath);\n                if (!repoPath) return undefined;\n            }\n\n            const tool = await Container.git.getDiffTool(repoPath);\n            if (tool === undefined) {\n                const result = await window.showWarningMessage(\n                    'Unable to open changes in diff tool. No Git diff tool is configured',\n                    'View Git Docs'\n                );\n                if (!result) return undefined;\n\n                return commands.executeCommand(\n                    BuiltInCommands.Open,\n                    Uri.parse('https://git-scm.com/docs/git-config#git-config-difftool')\n                );\n            }\n\n            for (const file of args.files) {\n                void Container.git.openDiffTool(repoPath, file.uri, {\n                    ref1: file.ref1,\n                    ref2: file.ref2,\n                    staged: file.staged,\n                    tool: tool\n                });\n            }\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'ExternalDiffCommand');\n            return Messages.showGenericErrorMessage('Unable to open changes in diff tool');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRemote\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenBranchesInRemoteCommandArgs {\n    remote?: string;\n}\n\n@command()\nexport class OpenBranchesInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenBranchesInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenBranchesInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithRemote(context)) {\n            args = { ...args };\n            args.remote = context.node.remote.name;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenBranchesInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Open branches on remote for which repository${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        try {\n            const remotes = await Container.git.getRemotes(repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Branches\n                },\n                remote: args.remote,\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenBranchesInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open branches on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithBranch\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenBranchInRemoteCommandArgs {\n    branch?: string;\n    remote?: string;\n}\n\n@command()\nexport class OpenBranchInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenBranchInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenBranchInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithBranch(context)) {\n            args = { ...args };\n            args.branch = context.node.branch.name;\n            args.remote = context.node.branch.getRemote();\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenBranchInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Open branch on remote for which repository${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        try {\n            if (args.branch === undefined) {\n                args = { ...args };\n\n                const pick = await new ReferencesQuickPick(repoPath).show(\n                    `Open which branch on remote${GlyphChars.Ellipsis}`,\n                    {\n                        autoPick: true,\n                        filters: {\n                            branches: b => b.tracking !== undefined\n                        },\n                        include: 'branches'\n                    }\n                );\n                if (pick === undefined || pick instanceof CommandQuickPickItem) return undefined;\n\n                args.branch = pick.ref;\n            }\n\n            const remotes = await Container.git.getRemotes(repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Branch,\n                    branch: args.branch || 'HEAD'\n                },\n                remote: args.remote,\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenBranchInRemoteCommandArgs');\n            return window.showErrorMessage(\n                'Unable to open branch on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { Arrays } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, getRepoPathOrPrompt, openEditor } from './common';\n\nexport interface OpenChangedFilesCommandArgs {\n    uris?: Uri[];\n}\n\n@command()\nexport class OpenChangedFilesCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenChangedFiles);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenChangedFilesCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            if (args.uris === undefined) {\n                args = { ...args };\n\n                const repoPath = await getRepoPathOrPrompt(\n                    undefined,\n                    `Open all files changed in which repository${GlyphChars.Ellipsis}`\n                );\n                if (!repoPath) return undefined;\n\n                const status = await Container.git.getStatusForRepo(repoPath);\n                if (status === undefined) return window.showWarningMessage('Unable to open changed files');\n\n                args.uris = Arrays.filterMap(status.files, f => (f.status !== 'D' ? f.uri : undefined));\n            }\n\n            for (const uri of args.uris) {\n                await openEditor(uri, { preserveFocus: true, preview: false });\n            }\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenChangedFilesCommand');\n            return Messages.showGenericErrorMessage('Unable to open all changed files');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenCommitInRemoteCommandArgs {\n    sha?: string;\n}\n\n@command()\nexport class OpenCommitInRemoteCommand extends ActiveEditorCommand {\n    static getMarkdownCommandArgs(sha: string): string;\n    static getMarkdownCommandArgs(args: OpenCommitInRemoteCommandArgs): string;\n    static getMarkdownCommandArgs(argsOrSha: OpenCommitInRemoteCommandArgs | string): string {\n        const args: OpenCommitInRemoteCommandArgs = typeof argsOrSha === 'string' ? { sha: argsOrSha } : argsOrSha;\n        return super.getMarkdownCommandArgsCore<OpenCommitInRemoteCommandArgs>(Commands.OpenCommitInRemote, args);\n    }\n\n    constructor() {\n        super(Commands.OpenCommitInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenCommitInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.sha = context.node.commit.sha;\n            return this.execute(context.editor, context.node.commit.uri, args);\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenCommitInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return undefined;\n\n        try {\n            if (args.sha === undefined) {\n                const blameline = editor == null ? 0 : editor.selection.active.line;\n                if (blameline < 0) return undefined;\n\n                const blame =\n                    editor && editor.document && editor.document.isDirty\n                        ? await Container.git.getBlameForLineContents(gitUri, blameline, editor.document.getText())\n                        : await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage(\n                        'Unable to open commit on remote provider'\n                    );\n                }\n\n                let commit = blame.commit;\n                // If the line is uncommitted, find the previous commit\n                if (commit.isUncommitted) {\n                    commit = commit.with({\n                        sha: commit.previousSha,\n                        fileName: commit.previousFileName,\n                        previousSha: null,\n                        previousFileName: null\n                    });\n                }\n\n                args.sha = commit.sha;\n            }\n\n            const remotes = await Container.git.getRemotes(gitUri.repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Commit,\n                    sha: args.sha\n                },\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenCommitInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open commit on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { commands, Range, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithBranch,\n    isCommandViewContextWithCommit\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\nimport { Git } from '../git/git';\nimport { Strings } from '../system';\n\nexport interface OpenFileInRemoteCommandArgs {\n    branch?: string;\n    clipboard?: boolean;\n    range?: boolean;\n    sha?: string;\n}\n\n@command()\nexport class OpenFileInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenFileInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenFileInRemoteCommandArgs = { range: true }) {\n        if (isCommandViewContextWithCommit(context)) {\n            args = { ...args };\n            args.range = false;\n            if (isCommandViewContextWithBranch(context)) {\n                args.branch = context.node.branch !== undefined ? context.node.branch.name : undefined;\n            }\n\n            return this.execute(\n                context.editor,\n                context.node.commit.isFile ? context.node.commit.uri : context.node.uri,\n                args\n            );\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenFileInRemoteCommandArgs = { range: true }) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return undefined;\n\n        try {\n            const remotes = await Container.git.getRemotes(gitUri.repoPath);\n            const range =\n                args.range && editor != null\n                    ? new Range(\n                          editor.selection.start.with({ line: editor.selection.start.line + 1 }),\n                          editor.selection.end.with({ line: editor.selection.end.line + 1 })\n                      )\n                    : undefined;\n            let sha = args.sha || gitUri.sha;\n\n            if (args.branch === undefined && sha !== undefined && !Git.isSha(sha) && remotes.length !== 0) {\n                const [remotePart, branchPart] = Strings.splitSingle(sha, '/');\n                if (branchPart !== undefined) {\n                    if (remotes.some(r => r.name === remotePart)) {\n                        args.branch = branchPart;\n                        sha = undefined;\n                    }\n                }\n            }\n\n            if (args.branch === undefined && args.sha === undefined) {\n                const branch = await Container.git.getBranch(gitUri.repoPath);\n                if (branch === undefined || branch.tracking === undefined) {\n                    const pick = await new ReferencesQuickPick(gitUri.repoPath).show(\n                        args.clipboard\n                            ? `Copy url for ${gitUri.getRelativePath()} to clipboard for which branch${\n                                  GlyphChars.Ellipsis\n                              }`\n                            : `Open ${gitUri.getRelativePath()} on remote for which branch${GlyphChars.Ellipsis}`,\n                        {\n                            autoPick: true,\n                            filters: {\n                                branches: b => b.tracking !== undefined\n                            },\n                            include: 'branches'\n                        }\n                    );\n                    if (pick === undefined || pick instanceof CommandQuickPickItem) return undefined;\n\n                    args.branch = pick.ref;\n                }\n                else {\n                    args.branch = branch.name;\n                }\n            }\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource:\n                    sha === undefined\n                        ? {\n                              type: RemoteResourceType.File,\n                              branch: args.branch || 'HEAD',\n                              fileName: gitUri.getRelativePath(),\n                              range: range\n                          }\n                        : {\n                              type: RemoteResourceType.Revision,\n                              branch: args.branch || 'HEAD',\n                              fileName: gitUri.getRelativePath(),\n                              range: range,\n                              sha: sha\n                          },\n                remotes: remotes,\n                clipboard: args.clipboard\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenFileInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open file on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { CancellationTokenSource, commands, Range, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, FileHistoryQuickPick, ShowFileHistoryFromQuickPickItem } from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, openEditor } from './common';\n\nexport interface OpenFileRevisionCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n    uri?: Uri;\n    maxCount?: number;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n    annotationType?: FileAnnotationType;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class OpenFileRevisionCommand extends ActiveEditorCommand {\n    static getMarkdownCommandArgs(args: OpenFileRevisionCommandArgs): string;\n    static getMarkdownCommandArgs(uri: Uri, annotationType?: FileAnnotationType, line?: number): string;\n    static getMarkdownCommandArgs(\n        argsOrUri: OpenFileRevisionCommandArgs | Uri,\n        annotationType?: FileAnnotationType,\n        line?: number\n    ): string {\n        let args: OpenFileRevisionCommandArgs | Uri;\n        if (argsOrUri instanceof Uri) {\n            const uri = argsOrUri;\n\n            args = {\n                uri: uri,\n                line: line,\n                annotationType: annotationType\n            };\n        }\n        else {\n            args = argsOrUri;\n        }\n\n        return super.getMarkdownCommandArgsCore<OpenFileRevisionCommandArgs>(Commands.OpenFileRevision, args);\n    }\n\n    constructor() {\n        super(Commands.OpenFileRevision);\n    }\n\n    async execute(editor: TextEditor | undefined, uri?: Uri, args: OpenFileRevisionCommandArgs = {}) {\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        let progressCancellation: CancellationTokenSource | undefined;\n\n        try {\n            let commandArgs: OpenFileRevisionCommandArgs;\n\n            if (args.uri == null) {\n                uri = getCommandUri(uri, editor);\n                if (uri == null) return undefined;\n\n                const gitUri = await GitUri.fromUri(uri);\n\n                const placeHolder = `Open revision of ${gitUri.getFormattedPath({\n                    suffix: args.reference ? ` (${args.reference.name})` : undefined\n                })}${gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''}${\n                    GlyphChars.Ellipsis\n                }`;\n\n                progressCancellation = FileHistoryQuickPick.showProgress(placeHolder);\n\n                const log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                    maxCount: args.maxCount,\n                    ref: (args.reference && args.reference.ref) || gitUri.sha\n                });\n                if (log === undefined) {\n                    if (args.reference) {\n                        return window.showWarningMessage(`The file could not be found in ${args.reference.name}`);\n                    }\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to open history compare');\n                }\n\n                if (progressCancellation.token.isCancellationRequested) return undefined;\n\n                let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n                if (log.truncated) {\n                    commandArgs = { ...args };\n                    const npc = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-right) Show Next Commits',\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${log.maxCount} newer commits`\n                        },\n                        Commands.OpenFileRevision,\n                        [uri, commandArgs]\n                    );\n\n                    const last = Iterables.last(log.commits.values());\n                    if (last != null) {\n                        commandArgs = { ...args, nextPageCommand: npc };\n                        previousPageCommand = new CommandQuickPickItem(\n                            {\n                                label: '$(arrow-left) Show Previous Commits',\n                                description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${log.maxCount} older commits`\n                            },\n                            Commands.OpenFileRevision,\n                            [new GitUri(uri, last), commandArgs]\n                        );\n                    }\n                }\n\n                commandArgs = { ...args };\n                const icon =\n                    args.reference instanceof GitTag\n                        ? '$(tag) '\n                        : args.reference instanceof GitBranch\n                        ? '$(git-branch) '\n                        : '';\n                const currentCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to history of ${\n                            GlyphChars.Space\n                        }$(file-text) ${gitUri.getFormattedPath()}${\n                            args.reference\n                                ? ` from ${GlyphChars.Space}${icon}${args.reference.name}`\n                                : gitUri.sha\n                                ? ` from ${GlyphChars.Space}$(git-commit) ${gitUri.shortSha}`\n                                : ''\n                        }`\n                    },\n                    Commands.OpenFileRevision,\n                    [uri, commandArgs]\n                );\n\n                commandArgs = { ...args, maxCount: 0 };\n                const pick = await FileHistoryQuickPick.show(log, gitUri, placeHolder, {\n                    pickerOnly: true,\n                    progressCancellation: progressCancellation,\n                    currentCommand: currentCommand,\n                    nextPageCommand: args.nextPageCommand,\n                    previousPageCommand: previousPageCommand,\n                    showAllCommand: log.truncated\n                        ? new CommandQuickPickItem(\n                              {\n                                  label: '$(sync) Show All Commits',\n                                  description: `${Strings.pad(GlyphChars.Dash, 2, 3)} this may take a while`\n                              },\n                              Commands.OpenFileRevision,\n                              [uri, commandArgs]\n                          )\n                        : undefined\n                });\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof ShowFileHistoryFromQuickPickItem) {\n                    const reference = await pick.execute();\n                    if (reference === undefined) return undefined;\n                    if (reference instanceof CommandQuickPickItem) return reference.execute();\n\n                    commandArgs = {\n                        ...args,\n                        reference: reference.item\n                    };\n                    return commands.executeCommand(Commands.OpenFileRevision, gitUri, commandArgs);\n                }\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.uri = GitUri.toRevisionUri(pick.commit.sha, pick.commit.uri.fsPath, pick.commit.repoPath);\n            }\n\n            if (args.line !== undefined && args.line !== 0) {\n                if (args.showOptions === undefined) {\n                    args.showOptions = {};\n                }\n                args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n            }\n\n            const e = await openEditor(args.uri!, { ...args.showOptions, rethrow: true });\n            if (args.annotationType === undefined) return e;\n\n            return Container.fileAnnotations.show(e!, args.annotationType, args.line);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenFileRevisionCommand');\n            return Messages.showGenericErrorMessage('Unable to open file revision');\n        }\n        finally {\n            progressCancellation && progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { Range, TextDocumentShowOptions, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { GitBranch, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, openEditor } from './common';\n\nexport interface OpenFileRevisionFromCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n}\n\n@command()\nexport class OpenFileRevisionFromCommand extends ActiveEditorCommand {\n    constructor() {\n        super([Commands.OpenFileRevisionFrom, Commands.OpenFileRevisionFromBranch]);\n    }\n\n    async execute(editor: TextEditor | undefined, uri?: Uri, args: OpenFileRevisionFromCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n        if (!gitUri.repoPath) return undefined;\n\n        if (args.reference === undefined) {\n            const placeHolder = `Open revision of ${gitUri.getFormattedPath()}${\n                gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''\n            } from${GlyphChars.Ellipsis}`;\n\n            const pick = await new ReferencesQuickPick(gitUri.repoPath).show(placeHolder, {\n                allowEnteringRefs: true\n            });\n            if (pick === undefined) return undefined;\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            args.reference = pick.item;\n        }\n\n        if (args.line !== undefined && args.line !== 0) {\n            if (args.showOptions === undefined) {\n                args.showOptions = {};\n            }\n            args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n        }\n\n        return openEditor(GitUri.toRevisionUri(args.reference.ref, gitUri.fsPath, gitUri.repoPath), {\n            ...args.showOptions,\n            rethrow: true\n        });\n    }\n}\n","'use strict';\nimport { TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { GitLogCommit, GitRemote, GitService, RemoteResource, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, OpenRemoteCommandQuickPickItem, RemotesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCommand, command, Commands } from './common';\n\nexport interface OpenInRemoteCommandArgs {\n    remote?: string;\n    remotes?: GitRemote[];\n    resource?: RemoteResource;\n    clipboard?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class OpenInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenInRemote);\n    }\n\n    async execute(editor: TextEditor, uri?: Uri, args: OpenInRemoteCommandArgs = {}) {\n        args = { ...args };\n        if (args.remotes === undefined || args.resource === undefined) return undefined;\n\n        if (args.remote !== undefined) {\n            const remotes = args.remotes.filter(r => r.name === args.remote);\n            // Only filter if we get some results\n            if (remotes.length > 0) {\n                args.remotes = remotes;\n            }\n        }\n\n        try {\n            let remote: GitRemote | undefined;\n            if (args.remotes.length > 1) {\n                remote = args.remotes.find(r => r.default);\n            }\n            else if (args.remotes.length === 1) {\n                remote = args.remotes[0];\n            }\n\n            if (remote != null) {\n                this.ensureRemoteBranchName(args);\n                const command = new OpenRemoteCommandQuickPickItem(remote, args.resource, args.clipboard);\n                return await command.execute();\n            }\n\n            const verb = args.clipboard ? 'Copy url for' : 'Open';\n            const suffix = args.clipboard ? `to clipboard from${GlyphChars.Ellipsis}` : `on${GlyphChars.Ellipsis}`;\n            let placeHolder = '';\n            switch (args.resource.type) {\n                case RemoteResourceType.Branch:\n                    this.ensureRemoteBranchName(args);\n                    placeHolder = `${verb} ${args.resource.branch} branch ${suffix}`;\n                    break;\n\n                case RemoteResourceType.Commit:\n                    placeHolder = `${verb} commit ${GitService.shortenSha(args.resource.sha)} ${suffix}`;\n                    break;\n\n                case RemoteResourceType.File:\n                    placeHolder = `${verb} ${args.resource.fileName} ${suffix}`;\n                    break;\n\n                case RemoteResourceType.Revision:\n                    if (args.resource.commit !== undefined && args.resource.commit instanceof GitLogCommit) {\n                        if (args.resource.commit.status === 'D') {\n                            args.resource.sha = args.resource.commit.previousSha;\n                            placeHolder = `${verb} ${args.resource.fileName} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                                args.resource.commit.previousShortSha\n                            } ${suffix}`;\n                        }\n                        else {\n                            args.resource.sha = args.resource.commit.sha;\n                            placeHolder = `${verb} ${args.resource.fileName} ${Strings.pad(GlyphChars.Dot, 1, 1)} ${\n                                args.resource.commit.shortSha\n                            } ${suffix}`;\n                        }\n                    }\n                    else {\n                        const shortFileSha =\n                            args.resource.sha === undefined ? '' : GitService.shortenSha(args.resource.sha);\n                        const shaSuffix = shortFileSha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${shortFileSha}` : '';\n\n                        placeHolder = `${verb} ${args.resource.fileName}${shaSuffix} ${suffix}`;\n                    }\n                    break;\n            }\n\n            const pick = await RemotesQuickPick.show(\n                args.remotes,\n                placeHolder,\n                args.resource,\n                args.clipboard,\n                args.goBackCommand\n            );\n            if (pick === undefined) return undefined;\n\n            return await pick.execute();\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenInRemoteCommand');\n            return Messages.showGenericErrorMessage('Unable to open in remote provider');\n        }\n    }\n\n    private ensureRemoteBranchName(args: OpenInRemoteCommandArgs) {\n        if (args.remotes === undefined || args.resource === undefined || args.resource.type !== 'branch') return;\n\n        // Check to see if the remote is in the branch\n        const [remotePart, branchPart] = Strings.splitSingle(args.resource.branch, '/');\n        if (branchPart === undefined) return;\n\n        const remote = args.remotes.find(r => r.name === remotePart);\n        if (remote === undefined) return;\n\n        args.resource.branch = branchPart;\n        args.remotes = [remote];\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri, RemoteResourceType } from '../git/gitService';\nimport { Logger } from '../logger';\nimport {\n    ActiveEditorCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRemote\n} from './common';\nimport { OpenInRemoteCommandArgs } from './openInRemote';\n\nexport interface OpenRepoInRemoteCommandArgs {\n    remote?: string;\n}\n\n@command()\nexport class OpenRepoInRemoteCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenRepoInRemote);\n    }\n\n    protected preExecute(context: CommandContext, args: OpenRepoInRemoteCommandArgs = {}) {\n        if (isCommandViewContextWithRemote(context)) {\n            args = { ...args };\n            args.remote = context.node.remote.name;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: OpenRepoInRemoteCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Open which repository on remote${GlyphChars.Ellipsis}`\n        );\n        if (!repoPath) return undefined;\n\n        try {\n            const remotes = await Container.git.getRemotes(repoPath);\n\n            const commandArgs: OpenInRemoteCommandArgs = {\n                resource: {\n                    type: RemoteResourceType.Repo\n                },\n                remote: args.remote,\n                remotes: remotes\n            };\n            return commands.executeCommand(Commands.OpenInRemote, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenRepoInRemoteCommand');\n            return window.showErrorMessage(\n                'Unable to open repository on remote provider. See output channel for more details'\n            );\n        }\n    }\n}\n","'use strict';\nimport { Range, TextDocumentShowOptions, TextEditor, Uri, window } from 'vscode';\nimport { FileAnnotationType } from '../configuration';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { ActiveEditorCommand, command, Commands, getCommandUri, openEditor } from './common';\n\nexport interface OpenWorkingFileCommandArgs {\n    uri?: Uri;\n    line?: number;\n    showOptions?: TextDocumentShowOptions;\n    annotationType?: FileAnnotationType;\n}\n\n@command()\nexport class OpenWorkingFileCommand extends ActiveEditorCommand {\n    constructor() {\n        super(Commands.OpenWorkingFile);\n    }\n\n    async execute(editor: TextEditor, uri?: Uri, args: OpenWorkingFileCommandArgs = {}) {\n        args = { ...args };\n        if (args.line === undefined) {\n            args.line = editor == null ? 0 : editor.selection.active.line;\n        }\n\n        try {\n            if (args.uri == null) {\n                uri = getCommandUri(uri, editor);\n                if (uri == null) return undefined;\n\n                args.uri = await GitUri.fromUri(uri);\n                if (args.uri instanceof GitUri && args.uri.sha) {\n                    const [fileName, repoPath] = await Container.git.findWorkingFileName(\n                        args.uri.fsPath,\n                        args.uri.repoPath\n                    );\n                    if (fileName === undefined) {\n                        return window.showWarningMessage(\n                            'Unable to open working file. File could not be found in the working tree'\n                        );\n                    }\n\n                    args.uri = new GitUri(GitUri.resolveToUri(fileName, repoPath), repoPath);\n                }\n            }\n\n            if (args.line !== undefined && args.line !== 0) {\n                if (args.showOptions === undefined) {\n                    args.showOptions = {};\n                }\n                args.showOptions.selection = new Range(args.line, 0, args.line, 0);\n            }\n\n            const e = await openEditor(args.uri, { ...args.showOptions, rethrow: true });\n            if (args.annotationType === undefined) return e;\n\n            return Container.fileAnnotations.show(e!, args.annotationType, args.line);\n        }\n        catch (ex) {\n            Logger.error(ex, 'OpenWorkingFileCommand');\n            return Messages.showGenericErrorMessage('Unable to open working file');\n        }\n    }\n}\n","'use strict';\nimport { Container } from '../container';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class FetchRepositoriesCommand extends Command {\n    constructor() {\n        super(Commands.FetchRepositories);\n    }\n\n    execute() {\n        return Container.git.fetchAll();\n    }\n}\n\n@command()\nexport class PullRepositoriesCommand extends Command {\n    constructor() {\n        super(Commands.PullRepositories);\n    }\n\n    execute() {\n        return Container.git.pullAll();\n    }\n}\n\n@command()\nexport class PushRepositoriesCommand extends Command {\n    constructor() {\n        super(Commands.PushRepositories);\n    }\n\n    execute() {\n        return Container.git.pushAll();\n    }\n}\n","'use strict';\nimport { ConfigurationTarget } from 'vscode';\nimport { configuration } from '../configuration';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class ResetSuppressedWarningsCommand extends Command {\n    constructor() {\n        super(Commands.ResetSuppressedWarnings);\n    }\n\n    async execute() {\n        await configuration.update(\n            configuration.name('advanced')('messages').value,\n            undefined,\n            ConfigurationTarget.Global\n        );\n    }\n}\n","'use strict';\nimport { commands, InputBoxOptions, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitRepoSearchBy, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, CommitsQuickPick, ShowCommitSearchResultsInViewQuickPickItem } from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { SearchResultsCommitsNode } from '../views/nodes';\nimport {\n    ActiveEditorCachedCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    getRepoPathOrActiveOrPrompt,\n    isCommandViewContextWithRepo\n} from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nconst searchByRegex = /^([@~=:#])/;\nconst symbolToSearchByMap = new Map<string, GitRepoSearchBy>([\n    ['@', GitRepoSearchBy.Author],\n    ['~', GitRepoSearchBy.ChangedLines],\n    ['=', GitRepoSearchBy.Changes],\n    [':', GitRepoSearchBy.Files],\n    ['#', GitRepoSearchBy.Sha]\n]);\n\nconst searchByToSymbolMap = new Map<GitRepoSearchBy, string>([\n    [GitRepoSearchBy.Author, '@'],\n    [GitRepoSearchBy.ChangedLines, '~'],\n    [GitRepoSearchBy.Changes, '='],\n    [GitRepoSearchBy.Files, ':'],\n    [GitRepoSearchBy.Sha, '#']\n]);\n\nexport interface SearchCommitsCommandArgs {\n    search?: string;\n    searchBy?: GitRepoSearchBy;\n    maxCount?: number;\n    prefillOnly?: boolean;\n    showInView?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class SearchCommitsCommand extends ActiveEditorCachedCommand {\n    private _lastSearch: string | undefined;\n\n    constructor() {\n        super([Commands.SearchCommits, Commands.SearchCommitsInView]);\n    }\n\n    protected preExecute(context: CommandContext, args: SearchCommitsCommandArgs = {}) {\n        if (context.type === 'viewItem') {\n            args = { ...args };\n            args.showInView = true;\n\n            if (context.node instanceof SearchResultsCommitsNode) {\n                args.search = context.node.search;\n                args.searchBy = context.node.searchBy;\n                args.prefillOnly = true;\n            }\n\n            if (isCommandViewContextWithRepo(context)) {\n                return this.execute(context.editor, context.node.uri, args);\n            }\n        }\n        else if (context.command === Commands.SearchCommitsInView) {\n            args = { ...args };\n            args.showInView = true;\n        }\n        else {\n            // TODO: Add a user setting (default to view?)\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: SearchCommitsCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        const repoPath = await getRepoPathOrActiveOrPrompt(\n            gitUri,\n            editor,\n            `Search for commits in which repository${GlyphChars.Ellipsis}`,\n            args.goBackCommand\n        );\n        if (!repoPath) return undefined;\n\n        args = { ...args };\n        const originalArgs = { ...args };\n\n        if (args.prefillOnly && args.search && args.searchBy) {\n            args.search = `${searchByToSymbolMap.get(args.searchBy) || ''}${args.search}`;\n            args.searchBy = undefined;\n        }\n\n        if (!args.search || args.searchBy == null) {\n            let selection: [number, number] | undefined;\n            if (!args.search) {\n                if (args.searchBy != null) {\n                    args.search = searchByToSymbolMap.get(args.searchBy);\n                    selection = [1, 1];\n                }\n                else {\n                    args.search = this._lastSearch;\n                }\n            }\n\n            if (args.showInView) {\n                await Container.searchView.show();\n            }\n\n            const opts: InputBoxOptions = {\n                value: args.search,\n                prompt: 'Please enter a search string',\n                placeHolder:\n                    'Search commits by message, author (@<pattern>), files (:<path/glob>), commit id (#<sha>), changes (=<pattern>), changed lines (~<pattern>)',\n                valueSelection: selection\n            };\n            args.search = await window.showInputBox(opts);\n            if (args.search === undefined) {\n                return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n            }\n\n            this._lastSearch = originalArgs.search = args.search;\n\n            const match = searchByRegex.exec(args.search);\n            if (match && match[1]) {\n                args.searchBy = symbolToSearchByMap.get(match[1]);\n                args.search = args.search.substring(args.search[1] === ' ' ? 2 : 1);\n            }\n            else if (GitService.isShaLike(args.search)) {\n                args.searchBy = GitRepoSearchBy.Sha;\n            }\n            else {\n                args.searchBy = GitRepoSearchBy.Message;\n            }\n        }\n\n        if (args.searchBy === undefined) {\n            args.searchBy = GitRepoSearchBy.Message;\n        }\n\n        let searchLabel: string | undefined = undefined;\n        switch (args.searchBy) {\n            case GitRepoSearchBy.Author:\n                searchLabel = `commits with an author matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.ChangedLines:\n                searchLabel = `commits with changed lines matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.Changes:\n                searchLabel = `commits with changes matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.Files:\n                searchLabel = `commits with files matching '${args.search}'`;\n                break;\n\n            case GitRepoSearchBy.Message:\n                searchLabel = args.search ? `commits with a message matching '${args.search}'` : 'all commits';\n                break;\n\n            case GitRepoSearchBy.Sha:\n                searchLabel = `commits with an id matching '${args.search}'`;\n                break;\n        }\n\n        if (args.showInView) {\n            void Container.searchView.search(repoPath, args.search, args.searchBy, {\n                maxCount: args.maxCount,\n                label: { label: searchLabel! }\n            });\n\n            return undefined;\n        }\n\n        const progressCancellation = CommitsQuickPick.showProgress(searchLabel!);\n        try {\n            const log = await Container.git.getLogForSearch(repoPath, args.search, args.searchBy, {\n                maxCount: args.maxCount\n            });\n\n            if (progressCancellation.token.isCancellationRequested) return undefined;\n\n            let goBackCommand: CommandQuickPickItem | undefined =\n                args.goBackCommand ||\n                new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to commit search`\n                    },\n                    Commands.SearchCommits,\n                    [uri, originalArgs]\n                );\n\n            let commit;\n            if (args.searchBy !== GitRepoSearchBy.Sha || log === undefined || log.count !== 1) {\n                const pick = await CommitsQuickPick.show(log, searchLabel!, progressCancellation, {\n                    goBackCommand: goBackCommand,\n                    showAllCommand:\n                        log !== undefined && log.truncated\n                            ? new CommandQuickPickItem(\n                                  {\n                                      label: '$(sync) Show All Commits',\n                                      description: `${Strings.pad(GlyphChars.Dash, 2, 3)} this may take a while`\n                                  },\n                                  Commands.SearchCommits,\n                                  [uri, { ...args, maxCount: 0, goBackCommand: goBackCommand }]\n                              )\n                            : undefined,\n                    showInViewCommand:\n                        log !== undefined\n                            ? new ShowCommitSearchResultsInViewQuickPickItem(args.search, args.searchBy, log, {\n                                  label: searchLabel!\n                              })\n                            : undefined\n                });\n                if (pick === undefined) return undefined;\n\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                commit = pick.commit;\n                goBackCommand = undefined;\n            }\n            else {\n                commit = Iterables.first(log.commits.values());\n            }\n\n            const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                sha: commit.sha,\n                commit: commit,\n                goBackCommand:\n                    goBackCommand ||\n                    new CommandQuickPickItem(\n                        {\n                            label: `go back ${GlyphChars.ArrowBack}`,\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 2)} to search for ${searchLabel}`\n                        },\n                        Commands.SearchCommits,\n                        [uri, args]\n                    )\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitDetails, commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowCommitSearchCommand');\n            return Messages.showGenericErrorMessage('Unable to find commits');\n        }\n        finally {\n            progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { commands } from 'vscode';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { command, Command, Commands, getLastCommand } from './common';\n\n@command()\nexport class ShowLastQuickPickCommand extends Command {\n    constructor() {\n        super(Commands.ShowLastQuickPick);\n    }\n\n    execute() {\n        const command = getLastCommand();\n        if (command === undefined) return Promise.resolve(undefined);\n\n        try {\n            return commands.executeCommand(command.command, ...command.args);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowLastQuickPickCommand');\n            return Messages.showGenericErrorMessage('Unable to show last quick pick');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitLog, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { BranchHistoryQuickPick, CommandQuickPickItem, ReferencesQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nexport interface ShowQuickBranchHistoryCommandArgs {\n    branch?: string;\n    log?: GitLog;\n    maxCount?: number;\n    repoPath?: string;\n\n    goBackCommand?: CommandQuickPickItem;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickBranchHistoryCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickBranchHistory);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickBranchHistoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const gitUri = uri && (await GitUri.fromUri(uri));\n\n        args = { ...args };\n\n        let progressCancellation =\n            args.branch === undefined ? undefined : BranchHistoryQuickPick.showProgress(args.branch);\n        try {\n            const repoPath =\n                args.repoPath ||\n                (await getRepoPathOrActiveOrPrompt(\n                    gitUri,\n                    editor,\n                    `Show branch history in which repository${GlyphChars.Ellipsis}`\n                ));\n            if (!repoPath) return undefined;\n\n            if (args.branch === undefined) {\n                let goBackCommand;\n                if (!(await Container.git.getRepoPathOrActive(uri, editor))) {\n                    goBackCommand = new CommandQuickPickItem(\n                        {\n                            label: `go back ${GlyphChars.ArrowBack}`,\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to which repository`\n                        },\n                        Commands.ShowQuickBranchHistory,\n                        [uri, args]\n                    );\n                }\n\n                const pick = await new ReferencesQuickPick(repoPath).show(\n                    `Show history for branch${GlyphChars.Ellipsis}`,\n                    {\n                        goBack: goBackCommand,\n                        include: 'branches'\n                    }\n                );\n                if (pick === undefined) return undefined;\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n                args.branch = pick.ref;\n                if (args.branch === undefined) return undefined;\n\n                progressCancellation = BranchHistoryQuickPick.showProgress(args.branch);\n            }\n\n            if (args.log === undefined) {\n                args.log = await Container.git.getLog(repoPath, {\n                    maxCount: args.maxCount,\n                    ref: (gitUri && gitUri.sha) || args.branch\n                });\n                if (args.log === undefined) return window.showWarningMessage('Unable to show branch history');\n            }\n\n            if (progressCancellation !== undefined && progressCancellation.token.isCancellationRequested) {\n                return undefined;\n            }\n\n            const pick = await BranchHistoryQuickPick.show(\n                args.log,\n                gitUri,\n                args.branch,\n                progressCancellation!,\n                args.goBackCommand,\n                args.nextPageCommand\n            );\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            // Create a command to get back to here\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to ${GlyphChars.Space}$(git-branch) ${\n                        args.branch\n                    } history`\n                },\n                Commands.ShowQuickBranchHistory,\n                [uri, { ...args }]\n            );\n\n            const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                sha: pick.commit.sha,\n                commit: pick.commit,\n                repoLog: args.log,\n                goBackCommand: currentCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitDetails, pick.commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickBranchHistoryCommand');\n            return Messages.showGenericErrorMessage('Unable to show branch history');\n        }\n        finally {\n            progressCancellation && progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitLog, GitLogCommit, GitRepoSearchBy, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, CommitQuickPick, CommitWithFileStatusQuickPickItem } from '../quickpicks';\nimport { Strings } from '../system';\nimport {\n    ActiveEditorCachedCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\nimport { ShowQuickCommitFileDetailsCommandArgs } from './showQuickCommitFileDetails';\n\nexport interface ShowQuickCommitDetailsCommandArgs {\n    sha?: string;\n    commit?: GitCommit | GitLogCommit;\n    repoLog?: GitLog;\n    showInView?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickCommitDetailsCommand extends ActiveEditorCachedCommand {\n    static getMarkdownCommandArgs(sha: string): string;\n    static getMarkdownCommandArgs(args: ShowQuickCommitDetailsCommandArgs): string;\n    static getMarkdownCommandArgs(argsOrSha: ShowQuickCommitDetailsCommandArgs | string): string {\n        const args = typeof argsOrSha === 'string' ? { sha: argsOrSha } : argsOrSha;\n        return super.getMarkdownCommandArgsCore<ShowQuickCommitDetailsCommandArgs>(\n            Commands.ShowQuickCommitDetails,\n            args\n        );\n    }\n\n    constructor() {\n        super([Commands.ShowCommitInView, Commands.ShowQuickCommitDetails]);\n    }\n\n    protected preExecute(context: CommandContext, args: ShowQuickCommitDetailsCommandArgs = {}) {\n        if (context.command === Commands.ShowCommitInView) {\n            args = { ...args };\n            args.showInView = true;\n        }\n\n        if (context.type === 'viewItem') {\n            args = { ...args };\n            args.sha = context.node.uri.sha;\n\n            if (isCommandViewContextWithCommit(context)) {\n                args.commit = context.node.commit;\n            }\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickCommitDetailsCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        let repoPath = gitUri.repoPath;\n        let workingFileName = repoPath ? paths.relative(repoPath, gitUri.fsPath) : gitUri.fsPath;\n\n        args = { ...args };\n        if (args.sha === undefined) {\n            if (editor == null) return undefined;\n\n            const blameline = editor.selection.active.line;\n            if (blameline < 0) return undefined;\n\n            try {\n                const blame = await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to show commit details');\n                }\n\n                // Because the previous sha of an uncommitted file isn't trust worthy we just have to kick out\n                if (blame.commit.isUncommitted) {\n                    return Messages.showLineUncommittedWarningMessage('Unable to show commit details');\n                }\n\n                args.sha = blame.commit.sha;\n                repoPath = blame.commit.repoPath;\n                workingFileName = blame.commit.fileName;\n\n                args.commit = blame.commit;\n            }\n            catch (ex) {\n                Logger.error(ex, 'ShowQuickCommitDetailsCommand', `getBlameForLine(${blameline})`);\n                return Messages.showGenericErrorMessage('Unable to show commit details');\n            }\n        }\n\n        try {\n            if (args.commit === undefined || args.commit.isFile) {\n                if (args.repoLog !== undefined) {\n                    args.commit = args.repoLog.commits.get(args.sha!);\n                    // If we can't find the commit, kill the repoLog\n                    if (args.commit === undefined) {\n                        args.repoLog = undefined;\n                    }\n                }\n\n                if (args.repoLog === undefined) {\n                    const log = await Container.git.getLog(repoPath!, { maxCount: 2, ref: args.sha });\n                    if (log === undefined) {\n                        return Messages.showCommitNotFoundWarningMessage('Unable to show commit details');\n                    }\n\n                    args.commit = log.commits.get(args.sha!);\n                }\n            }\n\n            if (args.commit === undefined) {\n                return Messages.showCommitNotFoundWarningMessage('Unable to show commit details');\n            }\n\n            if (args.commit.workingFileName === undefined) {\n                args.commit.workingFileName = workingFileName;\n            }\n\n            if (args.showInView) {\n                void (await Container.searchView.search(repoPath!, args.commit.sha, GitRepoSearchBy.Sha, {\n                    label: { label: `commits with an id matching '${args.commit.shortSha}'` }\n                }));\n\n                return undefined;\n            }\n\n            if (args.goBackCommand === undefined) {\n                const branch = await Container.git.getBranch(args.commit.repoPath);\n                if (branch !== undefined) {\n                    // Create a command to get back to the branch history\n                    args.goBackCommand = new CommandQuickPickItem(\n                        {\n                            label: `go back ${GlyphChars.ArrowBack}`,\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to ${branch.name} history`\n                        },\n                        Commands.ShowQuickCurrentBranchHistory,\n                        [args.commit.toGitUri()]\n                    );\n                }\n            }\n\n            // Create a command to get back to where we are right now\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to details of ${\n                        GlyphChars.Space\n                    }$(git-commit) ${args.commit.shortSha}`\n                },\n                Commands.ShowQuickCommitDetails,\n                [args.commit.toGitUri(), args]\n            );\n\n            const pick = await CommitQuickPick.show(\n                args.commit as GitLogCommit,\n                uri,\n                args.goBackCommand,\n                currentCommand,\n                args.repoLog\n            );\n            if (pick === undefined) return undefined;\n\n            if (!(pick instanceof CommitWithFileStatusQuickPickItem)) return pick.execute();\n\n            const commandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                commit: pick.commit,\n                sha: pick.sha,\n                goBackCommand: currentCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitFileDetails, pick.commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickCommitDetailsCommand');\n            return Messages.showGenericErrorMessage('Unable to show commit details');\n        }\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitCommit, GitLog, GitLogCommit, GitService, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, CommitFileQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport {\n    ActiveEditorCachedCommand,\n    command,\n    CommandContext,\n    Commands,\n    getCommandUri,\n    isCommandViewContextWithCommit\n} from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nexport interface ShowQuickCommitFileDetailsCommandArgs {\n    sha?: string;\n    commit?: GitCommit | GitLogCommit;\n    fileLog?: GitLog;\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickCommitFileDetailsCommand extends ActiveEditorCachedCommand {\n    static getMarkdownCommandArgs(sha: string): string;\n    static getMarkdownCommandArgs(args: ShowQuickCommitFileDetailsCommandArgs): string;\n    static getMarkdownCommandArgs(argsOrSha: ShowQuickCommitFileDetailsCommandArgs | string): string {\n        const args = typeof argsOrSha === 'string' ? { sha: argsOrSha } : argsOrSha;\n        return super.getMarkdownCommandArgsCore<ShowQuickCommitFileDetailsCommandArgs>(\n            Commands.ShowQuickCommitFileDetails,\n            args\n        );\n    }\n\n    constructor() {\n        super([Commands.ShowQuickCommitFileDetails, Commands.ShowQuickRevisionDetails]);\n    }\n\n    protected async preExecute(context: CommandContext, args: ShowQuickCommitFileDetailsCommandArgs = {}) {\n        if (context.command === Commands.ShowQuickRevisionDetails && context.editor !== undefined) {\n            args = { ...args };\n\n            const gitUri = await GitUri.fromUri(context.editor.document.uri);\n            args.sha = gitUri.sha;\n        }\n\n        if (context.type === 'viewItem') {\n            args = { ...args };\n            args.sha = context.node.uri.sha;\n\n            if (isCommandViewContextWithCommit(context)) {\n                args.commit = context.node.commit;\n            }\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickCommitFileDetailsCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return undefined;\n\n        let workingFileName = args.commit && args.commit.workingFileName;\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        args = { ...args };\n        if (args.sha === undefined) {\n            if (editor == null) return undefined;\n\n            const blameline = editor.selection.active.line;\n            if (blameline < 0) return undefined;\n\n            try {\n                const blame = await Container.git.getBlameForLine(gitUri, blameline);\n                if (blame === undefined) {\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to show commit file details');\n                }\n\n                // Because the previous sha of an uncommitted file isn't trust worthy we just have to kick out\n                if (blame.commit.isUncommitted) {\n                    return Messages.showLineUncommittedWarningMessage('Unable to show commit file details');\n                }\n\n                args.sha = blame.commit.sha;\n\n                args.commit = blame.commit;\n                workingFileName = paths.relative(args.commit.repoPath, gitUri.fsPath);\n            }\n            catch (ex) {\n                Logger.error(ex, 'ShowQuickCommitFileDetailsCommand', `getBlameForLine(${blameline})`);\n                return window.showErrorMessage(\n                    'Unable to show commit file details. See output channel for more details'\n                );\n            }\n        }\n\n        try {\n            if (args.commit === undefined || !args.commit.isFile) {\n                if (args.commit !== undefined) {\n                    workingFileName = undefined;\n                }\n\n                if (args.fileLog !== undefined) {\n                    args.commit = args.fileLog.commits.get(args.sha!);\n                    // If we can't find the commit, kill the fileLog\n                    if (args.commit === undefined) {\n                        args.fileLog = undefined;\n                    }\n                }\n\n                if (args.fileLog === undefined) {\n                    const repoPath = args.commit === undefined ? gitUri.repoPath : args.commit.repoPath;\n                    args.commit = await Container.git.getLogCommitForFile(repoPath, gitUri.fsPath, { ref: args.sha });\n                    if (args.commit === undefined) {\n                        return Messages.showCommitNotFoundWarningMessage('Unable to show commit file details');\n                    }\n                }\n            }\n\n            if (args.commit === undefined) {\n                return Messages.showCommitNotFoundWarningMessage('Unable to show commit file details');\n            }\n\n            // Attempt to the most recent commit -- so that we can find the real working filename if there was a rename\n            args.commit.workingFileName = workingFileName;\n            [args.commit.workingFileName] = await Container.git.findWorkingFileName(args.commit);\n\n            const shortSha = GitService.shortenSha(args.sha!);\n\n            if (args.goBackCommand === undefined) {\n                const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                    commit: args.commit,\n                    sha: args.sha\n                };\n\n                // Create a command to get back to the commit details\n                args.goBackCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to details of ${\n                            GlyphChars.Space\n                        }$(git-commit) ${shortSha}`\n                    },\n                    Commands.ShowQuickCommitDetails,\n                    [args.commit.toGitUri(), commandArgs]\n                );\n            }\n\n            // Create a command to get back to where we are right now\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to details of ${\n                        GlyphChars.Space\n                    }$(file-text) ${paths.basename(args.commit.fileName)} in ${\n                        GlyphChars.Space\n                    }$(git-commit) ${shortSha}`\n                },\n                Commands.ShowQuickCommitFileDetails,\n                [args.commit.toGitUri(), args]\n            );\n\n            const pick = await CommitFileQuickPick.show(\n                args.commit as GitLogCommit,\n                uri,\n                args.goBackCommand,\n                currentCommand,\n                args.fileLog\n            );\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickCommitFileDetailsCommand');\n            return Messages.showGenericErrorMessage('Unable to show commit file details');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem } from '../quickpicks';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\nimport { ShowQuickBranchHistoryCommandArgs } from './showQuickBranchHistory';\n\nexport interface ShowQuickCurrentBranchHistoryCommandArgs {\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickCurrentBranchHistoryCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickCurrentBranchHistory);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickCurrentBranchHistoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Show current branch history for which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            const branch = await Container.git.getBranch(repoPath);\n            if (branch === undefined) return undefined;\n\n            const commandArgs: ShowQuickBranchHistoryCommandArgs = {\n                branch: branch.name,\n                repoPath: repoPath,\n                goBackCommand: args.goBackCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickBranchHistory, uri, commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickCurrentBranchHistoryCommand');\n            return Messages.showGenericErrorMessage('Unable to show branch history');\n        }\n    }\n}\n","'use strict';\nimport * as paths from 'path';\nimport { commands, Range, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitBranch, GitLog, GitReference, GitTag, GitUri } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport {\n    CommandQuickPickItem,\n    FileHistoryQuickPick,\n    ShowFileHistoryFromQuickPickItem,\n    ShowFileHistoryInViewQuickPickItem\n} from '../quickpicks';\nimport { Iterables, Strings } from '../system';\nimport { ActiveEditorCachedCommand, command, CommandContext, Commands, getCommandUri } from './common';\nimport { ShowQuickCommitFileDetailsCommandArgs } from './showQuickCommitFileDetails';\n\nexport interface ShowQuickFileHistoryCommandArgs {\n    reference?: GitBranch | GitTag | GitReference;\n    log?: GitLog;\n    maxCount?: number;\n    range?: Range;\n    showInView?: boolean;\n\n    goBackCommand?: CommandQuickPickItem;\n    nextPageCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickFileHistoryCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super([Commands.ShowFileHistoryInView, Commands.ShowQuickFileHistory]);\n    }\n\n    protected preExecute(context: CommandContext, args: ShowQuickFileHistoryCommandArgs = {}) {\n        if (context.command === Commands.ShowFileHistoryInView) {\n            args = { ...args };\n            args.showInView = true;\n        }\n\n        return this.execute(context.editor, context.uri, args);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickFileHistoryCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n        if (uri == null) return commands.executeCommand(Commands.ShowQuickCurrentBranchHistory);\n\n        const gitUri = await GitUri.fromUri(uri);\n\n        if (args.showInView) {\n            await Container.fileHistoryView.showHistoryForUri(gitUri);\n\n            return undefined;\n        }\n\n        args = { ...args };\n\n        const placeHolder = `${gitUri.getFormattedPath({\n            suffix: args.reference ? ` (${args.reference.name})` : undefined\n        })}${gitUri.sha ? ` ${Strings.pad(GlyphChars.Dot, 1, 1)} ${gitUri.shortSha}` : ''}`;\n\n        const progressCancellation = FileHistoryQuickPick.showProgress(placeHolder);\n\n        try {\n            if (args.log === undefined) {\n                args.log = await Container.git.getLogForFile(gitUri.repoPath, gitUri.fsPath, {\n                    maxCount: args.maxCount,\n                    range: args.range,\n                    ref: (args.reference && args.reference.ref) || gitUri.sha\n                });\n                if (args.log === undefined) {\n                    if (args.reference) {\n                        return window.showWarningMessage(`The file could not be found in ${args.reference.name}`);\n                    }\n                    return Messages.showFileNotUnderSourceControlWarningMessage('Unable to show file history');\n                }\n            }\n\n            if (progressCancellation !== undefined && progressCancellation.token.isCancellationRequested) {\n                return undefined;\n            }\n\n            let previousPageCommand: CommandQuickPickItem | undefined = undefined;\n\n            if (args.log.truncated) {\n                let commandArgs: ShowQuickFileHistoryCommandArgs;\n                commandArgs = { ...args, log: undefined };\n                const npc = new CommandQuickPickItem(\n                    {\n                        label: '$(arrow-right) Show Next Commits',\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${args.log.maxCount} newer commits`\n                    },\n                    Commands.ShowQuickFileHistory,\n                    [gitUri, commandArgs]\n                );\n\n                const last = Iterables.last(args.log.commits.values());\n                if (last != null) {\n                    commandArgs = { ...args, log: undefined, nextPageCommand: npc };\n                    previousPageCommand = new CommandQuickPickItem(\n                        {\n                            label: '$(arrow-left) Show Previous Commits',\n                            description: `${Strings.pad(GlyphChars.Dash, 2, 3)} shows ${\n                                args.log.maxCount\n                            } older commits`\n                        },\n                        Commands.ShowQuickFileHistory,\n                        [new GitUri(uri, last), commandArgs]\n                    );\n                }\n            }\n\n            const icon =\n                args.reference instanceof GitTag\n                    ? '$(tag) '\n                    : args.reference instanceof GitBranch\n                    ? '$(git-branch) '\n                    : '';\n            // Create a command to get back to where we are right now\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to history of ${\n                        GlyphChars.Space\n                    }$(file-text) ${paths.basename(gitUri.fsPath)}${\n                        args.reference\n                            ? ` from ${GlyphChars.Space}${icon}${args.reference.name}`\n                            : gitUri.sha\n                            ? ` from ${GlyphChars.Space}$(git-commit) ${gitUri.shortSha}`\n                            : ''\n                    }`\n                },\n                Commands.ShowQuickFileHistory,\n                [uri, args]\n            );\n\n            const pick = await FileHistoryQuickPick.show(args.log, gitUri, placeHolder, {\n                progressCancellation: progressCancellation,\n                currentCommand: currentCommand,\n                goBackCommand: args.goBackCommand,\n                nextPageCommand: args.nextPageCommand,\n                previousPageCommand: previousPageCommand,\n                showAllCommand:\n                    args.log !== undefined && args.log.truncated\n                        ? new CommandQuickPickItem(\n                              {\n                                  label: '$(sync) Show All Commits',\n                                  description: `${Strings.pad(GlyphChars.Dash, 2, 3)} this may take a while`\n                              },\n                              Commands.ShowQuickFileHistory,\n                              [uri, { ...args, log: undefined, maxCount: 0 }]\n                          )\n                        : undefined,\n                showInViewCommand:\n                    args.log !== undefined\n                        ? new ShowFileHistoryInViewQuickPickItem(\n                              gitUri,\n                              (args.reference && args.reference.ref) || gitUri.sha\n                          )\n                        : undefined\n            });\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof ShowFileHistoryFromQuickPickItem) {\n                const reference = await pick.execute();\n                if (reference === undefined) return undefined;\n                if (reference instanceof CommandQuickPickItem) return reference.execute();\n\n                const commandArgs: ShowQuickFileHistoryCommandArgs = {\n                    ...args,\n                    log: undefined,\n                    reference: reference.item,\n                    goBackCommand: currentCommand\n                };\n                return commands.executeCommand(Commands.ShowQuickFileHistory, gitUri, commandArgs);\n            }\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            const commandArgs: ShowQuickCommitFileDetailsCommandArgs = {\n                commit: pick.commit,\n                fileLog: args.log,\n                sha: pick.commit.sha,\n                goBackCommand: currentCommand\n            };\n\n            return commands.executeCommand(Commands.ShowQuickCommitFileDetails, pick.commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickFileHistoryCommand');\n            return Messages.showGenericErrorMessage('Unable to show file history');\n        }\n        finally {\n            progressCancellation && progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, RepoStatusQuickPick } from '../quickpicks';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\n\nexport interface ShowQuickRepoStatusCommandArgs {\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickRepoStatusCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickRepoStatus);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickRepoStatusCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Show status for which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            const status = await Container.git.getStatusForRepo(repoPath);\n            if (status === undefined) return window.showWarningMessage('Unable to show repository status');\n\n            const pick = await RepoStatusQuickPick.show(status, args.goBackCommand);\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            return undefined;\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickRepoStatusCommand');\n            return Messages.showGenericErrorMessage('Unable to show repository status');\n        }\n    }\n}\n","'use strict';\nimport { commands, TextEditor, Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, StashListQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport { ActiveEditorCachedCommand, command, Commands, getCommandUri, getRepoPathOrActiveOrPrompt } from './common';\nimport { ShowQuickCommitDetailsCommandArgs } from './showQuickCommitDetails';\n\nexport interface ShowQuickStashListCommandArgs {\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class ShowQuickStashListCommand extends ActiveEditorCachedCommand {\n    constructor() {\n        super(Commands.ShowQuickStashList);\n    }\n\n    async execute(editor?: TextEditor, uri?: Uri, args: ShowQuickStashListCommandArgs = {}) {\n        uri = getCommandUri(uri, editor);\n\n        const progressCancellation = StashListQuickPick.showProgress('list');\n\n        try {\n            const repoPath = await getRepoPathOrActiveOrPrompt(\n                uri,\n                editor,\n                `Show stashed changes for which repository${GlyphChars.Ellipsis}`\n            );\n            if (!repoPath) return undefined;\n\n            const stash = await Container.git.getStashList(repoPath);\n            if (stash === undefined) return window.showWarningMessage('Unable to show stashed changes');\n\n            if (progressCancellation.token.isCancellationRequested) return undefined;\n\n            // Create a command to get back to here\n            const currentCommandArgs: ShowQuickStashListCommandArgs = {\n                goBackCommand: args.goBackCommand\n            };\n            const currentCommand = new CommandQuickPickItem(\n                {\n                    label: `go back ${GlyphChars.ArrowBack}`,\n                    description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to stashed changes`\n                },\n                Commands.ShowQuickStashList,\n                [uri, currentCommandArgs]\n            );\n\n            const pick = await StashListQuickPick.show(\n                stash,\n                'list',\n                progressCancellation,\n                args.goBackCommand,\n                currentCommand\n            );\n            if (pick === undefined) return undefined;\n\n            if (pick instanceof CommandQuickPickItem) return pick.execute();\n\n            const commandArgs: ShowQuickCommitDetailsCommandArgs = {\n                commit: pick.commit,\n                sha: pick.commit.sha,\n                goBackCommand: currentCommand\n            };\n            return commands.executeCommand(Commands.ShowQuickCommitDetails, pick.commit.toGitUri(), commandArgs);\n        }\n        catch (ex) {\n            Logger.error(ex, 'ShowQuickStashListCommand');\n            return Messages.showGenericErrorMessage('Unable to show stashed changes');\n        }\n        finally {\n            progressCancellation.cancel();\n        }\n    }\n}\n","'use strict';\nimport { Container } from '../container';\nimport { command, Command, CommandContext, Commands } from './common';\n\n@command()\nexport class ShowViewCommand extends Command {\n    constructor() {\n        super([\n            Commands.ShowCompareView,\n            Commands.ShowFileHistoryView,\n            Commands.ShowLineHistoryView,\n            Commands.ShowRepositoriesView,\n            Commands.ShowSearchView\n        ]);\n    }\n\n    protected preExecute(context: CommandContext) {\n        return this.execute(context.command as Commands);\n    }\n\n    execute(command: Commands) {\n        switch (command) {\n            case Commands.ShowCompareView:\n                return Container.compareView.show();\n            case Commands.ShowFileHistoryView:\n                return Container.fileHistoryView.show();\n            case Commands.ShowLineHistoryView:\n                return Container.lineHistoryView.show();\n            case Commands.ShowRepositoriesView:\n                return Container.repositoriesView.show();\n            case Commands.ShowSearchView:\n                return Container.searchView.show();\n        }\n\n        return Promise.resolve(undefined);\n    }\n}\n","'use strict';\nimport { window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitStashCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem, StashListQuickPick } from '../quickpicks';\nimport { Strings } from '../system';\nimport {\n    command,\n    Command,\n    CommandContext,\n    Commands,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithCommit,\n    isCommandViewContextWithRepo\n} from './common';\n\nexport interface StashApplyCommandArgs {\n    confirm?: boolean;\n    deleteAfter?: boolean;\n    repoPath?: string;\n    stashItem?: { stashName: string; message: string; repoPath: string };\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class StashApplyCommand extends Command {\n    constructor() {\n        super(Commands.StashApply);\n    }\n\n    protected preExecute(context: CommandContext, args: StashApplyCommandArgs = { confirm: true, deleteAfter: false }) {\n        if (isCommandViewContextWithCommit<GitStashCommit>(context)) {\n            args = { ...args };\n            args.stashItem = context.node.commit;\n            return this.execute(args);\n        }\n        else if (isCommandViewContextWithRepo(context)) {\n            args = { ...args };\n            args.repoPath = context.node.repo.path;\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: StashApplyCommandArgs = { confirm: true, deleteAfter: false }) {\n        args = { ...args };\n\n        if (args.stashItem === undefined || args.stashItem.stashName === undefined) {\n            if (args.repoPath === undefined) {\n                args.repoPath = await getRepoPathOrPrompt(\n                    undefined,\n                    `Apply stashed changes from which repository${GlyphChars.Ellipsis}`,\n                    args.goBackCommand\n                );\n            }\n            if (!args.repoPath) return undefined;\n\n            const progressCancellation = StashListQuickPick.showProgress('apply');\n\n            try {\n                const stash = await Container.git.getStashList(args.repoPath);\n                if (stash === undefined) return window.showInformationMessage('There are no stashed changes');\n\n                if (progressCancellation.token.isCancellationRequested) return undefined;\n\n                const currentCommand = new CommandQuickPickItem(\n                    {\n                        label: `go back ${GlyphChars.ArrowBack}`,\n                        description: `${Strings.pad(GlyphChars.Dash, 2, 3)} to apply stashed changes`\n                    },\n                    Commands.StashApply,\n                    [args]\n                );\n\n                const pick = await StashListQuickPick.show(\n                    stash,\n                    'apply',\n                    progressCancellation,\n                    args.goBackCommand,\n                    currentCommand\n                );\n                if (pick instanceof CommandQuickPickItem) return pick.execute();\n                if (pick === undefined) {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n\n                args.goBackCommand = currentCommand;\n                args.stashItem = pick.commit;\n            }\n            finally {\n                progressCancellation.cancel();\n            }\n        }\n\n        try {\n            if (args.confirm) {\n                const message =\n                    args.stashItem.message.length > 80\n                        ? `${args.stashItem.message.substring(0, 80)}${GlyphChars.Ellipsis}`\n                        : args.stashItem.message;\n                const result = await window.showWarningMessage(\n                    `Apply stashed changes '${message}' to your working tree?`,\n                    { title: 'Yes, delete after applying' },\n                    { title: 'Yes' },\n                    { title: 'No', isCloseAffordance: true }\n                );\n                if (result === undefined || result.title === 'No') {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n\n                args.deleteAfter = result.title !== 'Yes';\n            }\n\n            return await Container.git.stashApply(args.stashItem.repoPath, args.stashItem.stashName, args.deleteAfter);\n        }\n        catch (ex) {\n            Logger.error(ex, 'StashApplyCommand');\n            if (ex.message.includes('Your local changes to the following files would be overwritten by merge')) {\n                return window.showWarningMessage(\n                    'Unable to apply stash. Your working tree changes would be overwritten.'\n                );\n            }\n            else if (ex.message.includes('Auto-merging') && ex.message.includes('CONFLICT')) {\n                return window.showInformationMessage('Stash applied with conflicts');\n            }\n\n            return Messages.showGenericErrorMessage(\n                `Unable to apply stash \\u2014 ${ex.message.trim().replace(/\\n+?/g, '; ')}`\n            );\n        }\n    }\n}\n","'use strict';\nimport { window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitStashCommit } from '../git/gitService';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem } from '../quickpicks';\nimport { command, Command, CommandContext, Commands, isCommandViewContextWithCommit } from './common';\n\nexport interface StashDeleteCommandArgs {\n    confirm?: boolean;\n    stashItem?: { stashName: string; message: string; repoPath: string };\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class StashDeleteCommand extends Command {\n    constructor() {\n        super(Commands.StashDelete);\n    }\n\n    protected preExecute(context: CommandContext, args: StashDeleteCommandArgs = { confirm: true }) {\n        if (isCommandViewContextWithCommit<GitStashCommit>(context)) {\n            args = { ...args };\n            args.stashItem = context.node.commit;\n            return this.execute(args);\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: StashDeleteCommandArgs = { confirm: true }) {\n        args = { ...args };\n        if (\n            args.stashItem === undefined ||\n            args.stashItem.stashName === undefined ||\n            args.stashItem.repoPath === undefined\n        ) {\n            return undefined;\n        }\n\n        if (args.confirm === undefined) {\n            args.confirm = true;\n        }\n\n        try {\n            if (args.confirm) {\n                const message =\n                    args.stashItem.message.length > 80\n                        ? `${args.stashItem.message.substring(0, 80)}${GlyphChars.Ellipsis}`\n                        : args.stashItem.message;\n                const result = await window.showWarningMessage(\n                    `Delete stashed changes '${message}'?`,\n                    { title: 'Yes' },\n                    { title: 'No', isCloseAffordance: true }\n                );\n                if (result === undefined || result.title !== 'Yes') {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n            }\n\n            return await Container.git.stashDelete(args.stashItem.repoPath, args.stashItem.stashName);\n        }\n        catch (ex) {\n            Logger.error(ex, 'StashDeleteCommand');\n            return Messages.showGenericErrorMessage('Unable to delete stash');\n        }\n    }\n}\n","'use strict';\nimport { Uri, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\nimport { GitUri } from '../git/gitUri';\nimport { Logger } from '../logger';\nimport { Messages } from '../messages';\nimport { CommandQuickPickItem } from '../quickpicks';\nimport {\n    command,\n    Command,\n    CommandContext,\n    Commands,\n    getRepoPathOrPrompt,\n    isCommandViewContextWithFile,\n    isCommandViewContextWithRepo,\n    isCommandViewContextWithRepoPath\n} from './common';\n\nexport interface StashSaveCommandArgs {\n    message?: string;\n    repoPath?: string;\n    uris?: Uri[];\n\n    goBackCommand?: CommandQuickPickItem;\n}\n\n@command()\nexport class StashSaveCommand extends Command {\n    constructor() {\n        super([Commands.StashSave, Commands.StashSaveFiles]);\n    }\n\n    protected preExecute(context: CommandContext, args: StashSaveCommandArgs = {}) {\n        if (isCommandViewContextWithFile(context)) {\n            args = { ...args };\n            args.uris = [GitUri.fromFile(context.node.file, context.node.file.repoPath || context.node.repoPath)];\n        }\n        else if (isCommandViewContextWithRepo(context)) {\n            args = { ...args };\n            args.repoPath = context.node.repo.path;\n        }\n        else if (isCommandViewContextWithRepoPath(context)) {\n            args = { ...args };\n            args.repoPath = context.node.repoPath;\n        }\n        else if (context.type === 'scm-states') {\n            args = { ...args };\n            args.uris = context.scmResourceStates.map(s => s.resourceUri);\n        }\n        else if (context.type === 'scm-groups') {\n            args = { ...args };\n            args.uris = context.scmResourceGroups.reduce<Uri[]>(\n                (a, b) => a.concat(b.resourceStates.map(s => s.resourceUri)),\n                []\n            );\n        }\n\n        return this.execute(args);\n    }\n\n    async execute(args: StashSaveCommandArgs = {}) {\n        args = { ...args };\n\n        const uri = args.uris !== undefined && args.uris.length !== 0 ? args.uris[0] : undefined;\n        if (args.repoPath === undefined) {\n            args.repoPath = await getRepoPathOrPrompt(\n                uri,\n                `Stash changes for which repository${GlyphChars.Ellipsis}`,\n                args.goBackCommand\n            );\n        }\n        if (!args.repoPath) return undefined;\n\n        try {\n            if (args.message == null) {\n                args.message = await window.showInputBox({\n                    prompt: 'Please provide a stash message',\n                    placeHolder: 'Stash message'\n                });\n                if (args.message === undefined) {\n                    return args.goBackCommand === undefined ? undefined : args.goBackCommand.execute();\n                }\n            }\n\n            return await Container.git.stashSave(args.repoPath, args.message, args.uris);\n        }\n        catch (ex) {\n            Logger.error(ex, 'StashSaveCommand');\n\n            const msg = ex && ex.message;\n            if (msg.includes('newer version of Git')) {\n                return window.showErrorMessage(`Unable to save stash. ${msg}`);\n            }\n            return Messages.showGenericErrorMessage('Unable to save stash');\n        }\n    }\n}\n","'use strict';\nimport { Messages } from '../messages';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class SupportGitLensCommand extends Command {\n    constructor() {\n        super(Commands.SupportGitLens);\n    }\n\n    execute() {\n        return Messages.showSupportGitLensMessage();\n    }\n}\n","'use strict';\nimport { ConfigurationTarget } from 'vscode';\nimport { configuration } from '../configuration';\nimport { Container } from '../container';\nimport { ModesQuickPick } from '../quickpicks';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class SwitchModeCommand extends Command {\n    constructor() {\n        super(Commands.SwitchMode);\n    }\n\n    async execute() {\n        const pick = await ModesQuickPick.show();\n        if (pick === undefined) return;\n\n        const active = Container.config.mode.active;\n        if (active === pick.key) return;\n\n        // Check if we have applied any annotations and clear them if we won't be applying them again\n        if (active != null && active.length !== 0) {\n            const activeAnnotations = Container.config.modes[active].annotations;\n            if (activeAnnotations != null) {\n                const newAnnotations = pick.key != null ? Container.config.modes[pick.key].annotations : undefined;\n                if (activeAnnotations !== newAnnotations) {\n                    await Container.fileAnnotations.clearAll();\n                }\n            }\n        }\n\n        await configuration.update(configuration.name('mode')('active').value, pick.key, ConfigurationTarget.Global);\n    }\n}\n\n@command()\nexport class ToggleReviewModeCommand extends Command {\n    constructor() {\n        super(Commands.ToggleReviewMode);\n    }\n\n    async execute() {\n        if (!Object.keys(Container.config.modes).includes('review')) return;\n\n        const mode = Container.config.mode.active === 'review' ? undefined : 'review';\n        await configuration.update(configuration.name('mode')('active').value, mode, ConfigurationTarget.Global);\n    }\n}\n\n@command()\nexport class ToggleZenModeCommand extends Command {\n    constructor() {\n        super(Commands.ToggleZenMode);\n    }\n\n    async execute() {\n        if (!Object.keys(Container.config.modes).includes('zen')) return;\n\n        const mode = Container.config.mode.active === 'zen' ? undefined : 'zen';\n        await configuration.update(configuration.name('mode')('active').value, mode, ConfigurationTarget.Global);\n    }\n}\n","'use strict';\nimport { QuickPickItem, window } from 'vscode';\nimport { GlyphChars } from '../constants';\nimport { Container } from '../container';\n\nexport interface ModesQuickPickItem extends QuickPickItem {\n    key: string | undefined;\n}\n\nexport class ModesQuickPick {\n    static async show(): Promise<ModesQuickPickItem | undefined> {\n        const modes = Object.keys(Container.config.modes);\n        if (modes.length === 0) return undefined;\n\n        const mode = Container.config.mode.active;\n\n        const items = modes.map(key => {\n            const modeCfg = Container.config.modes[key];\n            const item: ModesQuickPickItem = {\n                label: `${mode === key ? '$(check)\\u00a0\\u00a0' : '\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0'}${\n                    modeCfg.name\n                } mode`,\n                description: modeCfg.description ? `\\u00a0${GlyphChars.Dash}\\u00a0 ${modeCfg.description}` : '',\n                key: key\n            };\n            return item;\n        });\n\n        if (mode) {\n            items.splice(0, 0, {\n                label: `Exit ${Container.config.modes[mode].name} mode`,\n                key: undefined\n            });\n        }\n\n        const pick = await window.showQuickPick(items, {\n            placeHolder: 'select a GitLens mode to enter'\n        });\n\n        return pick;\n    }\n}\n","'use strict';\nimport { Container } from '../container';\nimport { command, Command, Commands } from './common';\n\n@command()\nexport class ToggleCodeLensCommand extends Command {\n    constructor() {\n        super(Commands.ToggleCodeLens);\n    }\n\n    execute() {\n        return Container.codeLens.toggleCodeLens();\n    }\n}\n","'use strict';\nimport { commands, ExtensionContext, extensions, window, workspace } from 'vscode';\nimport { Commands, registerCommands } from './commands';\nimport { ModeConfig } from './config';\nimport { Config, configuration, Configuration } from './configuration';\nimport { CommandContext, extensionQualifiedId, GlobalState, GlyphChars, setCommandContext } from './constants';\nimport { Container } from './container';\nimport { GitCommit, GitService, GitUri } from './git/gitService';\nimport { Logger, TraceLevel } from './logger';\nimport { Messages } from './messages';\nimport { Strings, Versions } from './system';\n// import { Telemetry } from './telemetry';\n\nexport async function activate(context: ExtensionContext) {\n    const start = process.hrtime();\n\n    // Pretend we are enabled (until we know otherwise) and set the view contexts to reduce flashing on load\n    setCommandContext(CommandContext.Enabled, true);\n\n    Logger.configure(context, configuration.get<TraceLevel>(configuration.name('outputLevel').value), o => {\n        if (o instanceof GitUri) {\n            return `GitUri(${o.toString(true)}${o.repoPath ? ` repoPath=${o.repoPath}` : ''}${\n                o.sha ? ` sha=${o.sha}` : ''\n            })`;\n        }\n\n        if (o instanceof GitCommit) {\n            return `GitCommit(${o.sha ? ` sha=${o.sha}` : ''}${o.repoPath ? ` repoPath=${o.repoPath}` : ''})`;\n        }\n\n        return undefined;\n    });\n\n    const gitlens = extensions.getExtension(extensionQualifiedId)!;\n    const gitlensVersion = gitlens.packageJSON.version;\n\n    const enabled = workspace.getConfiguration('git', null!).get<boolean>('enabled', true);\n    if (!enabled) {\n        Logger.log(`GitLens(v${gitlensVersion}) was NOT activated -- \"git.enabled\": false`);\n        setCommandContext(CommandContext.Enabled, false);\n\n        void Messages.showGitDisabledErrorMessage();\n\n        return;\n    }\n\n    Configuration.configure(context);\n\n    const cfg = configuration.get<Config>();\n\n    const previousVersion = context.globalState.get<string>(GlobalState.GitLensVersion);\n    await migrateSettings(context, previousVersion);\n\n    try {\n        await GitService.initialize();\n    }\n    catch (ex) {\n        Logger.error(ex, `GitLens(v${gitlensVersion}).activate`);\n        setCommandContext(CommandContext.Enabled, false);\n\n        if (ex.message.includes('Unable to find git')) {\n            await window.showErrorMessage(\n                \"GitLens was unable to find Git. Please make sure Git is installed. Also ensure that Git is either in the PATH, or that 'git.path' is pointed to its installed location.\"\n            );\n        }\n\n        return;\n    }\n\n    Container.initialize(context, cfg);\n\n    registerCommands(context);\n\n    const gitVersion = GitService.getGitVersion();\n\n    // Telemetry.configure(ApplicationInsightsKey);\n\n    // const telemetryContext: { [id: string]: any } = Object.create(null);\n    // telemetryContext.version = gitlensVersion;\n    // telemetryContext['git.version'] = gitVersion;\n    // Telemetry.setContext(telemetryContext);\n\n    notifyOnUnsupportedGitVersion(gitVersion);\n    void showWelcomePage(gitlensVersion, previousVersion);\n\n    context.globalState.update(GlobalState.GitLensVersion, gitlensVersion);\n\n    // Constantly over my data cap so stop collecting initialized event\n    // Telemetry.trackEvent('initialized', Objects.flatten(cfg, 'config', true));\n\n    Logger.log(`GitLens(v${gitlensVersion}) activated ${GlyphChars.Dot} ${Strings.getDurationMilliseconds(start)} ms`);\n}\n\nexport function deactivate() {\n    // nothing to do\n}\n\nasync function migrateSettings(context: ExtensionContext, previousVersion: string | undefined) {\n    if (previousVersion === undefined) return;\n\n    const previous = Versions.fromString(previousVersion);\n\n    try {\n        if (Versions.compare(previous, Versions.from(9, 2, 2)) !== 1) {\n            await configuration.migrate('views.avatars', configuration.name('views')('compare')('avatars').value);\n            await configuration.migrate('views.avatars', configuration.name('views')('repositories')('avatars').value);\n            await configuration.migrate('views.avatars', configuration.name('views')('search')('avatars').value);\n        }\n        else if (Versions.compare(previous, Versions.from(9, 0, 0)) !== 1) {\n            await configuration.migrate(\n                'gitExplorer.autoRefresh',\n                configuration.name('views')('repositories')('autoRefresh').value\n            );\n            await configuration.migrate(\n                'gitExplorer.branches.layout',\n                configuration.name('views')('repositories')('branches')('layout').value\n            );\n            await configuration.migrate(\n                'gitExplorer.enabled',\n                configuration.name('views')('repositories')('enabled').value\n            );\n            await configuration.migrate(\n                'gitExplorer.files.compact',\n                configuration.name('views')('repositories')('files')('compact').value\n            );\n            await configuration.migrate(\n                'gitExplorer.files.layout',\n                configuration.name('views')('repositories')('files')('layout').value\n            );\n            await configuration.migrate(\n                'gitExplorer.files.threshold',\n                configuration.name('views')('repositories')('files')('threshold').value\n            );\n            await configuration.migrate(\n                'gitExplorer.includeWorkingTree',\n                configuration.name('views')('repositories')('includeWorkingTree').value\n            );\n            await configuration.migrate(\n                'gitExplorer.location',\n                configuration.name('views')('repositories')('location').value\n            );\n            await configuration.migrate(\n                'gitExplorer.showTrackingBranch',\n                configuration.name('views')('repositories')('showTrackingBranch').value\n            );\n\n            await configuration.migrate(\n                'historyExplorer.avatars',\n                configuration.name('views')('fileHistory')('avatars').value\n            );\n            await configuration.migrate(\n                'historyExplorer.enabled',\n                configuration.name('views')('fileHistory')('enabled').value\n            );\n            await configuration.migrate(\n                'historyExplorer.location',\n                configuration.name('views')('fileHistory')('location').value\n            );\n\n            await configuration.migrate(\n                'historyExplorer.avatars',\n                configuration.name('views')('lineHistory')('avatars').value\n            );\n            await configuration.migrate(\n                'historyExplorer.enabled',\n                configuration.name('views')('lineHistory')('enabled').value\n            );\n            await configuration.migrate(\n                'historyExplorer.location',\n                configuration.name('views')('lineHistory')('location').value\n            );\n\n            await configuration.migrate(\n                'resultsExplorer.files.compact',\n                configuration.name('views')('compare')('files')('compact').value\n            );\n            await configuration.migrate(\n                'resultsExplorer.files.layout',\n                configuration.name('views')('compare')('files')('layout').value\n            );\n            await configuration.migrate(\n                'resultsExplorer.files.threshold',\n                configuration.name('views')('compare')('files')('threshold').value\n            );\n            await configuration.migrate(\n                'resultsExplorer.location',\n                configuration.name('views')('compare')('location').value\n            );\n\n            await configuration.migrate(\n                'resultsExplorer.files.compact',\n                configuration.name('views')('search')('files')('compact').value\n            );\n            await configuration.migrate(\n                'resultsExplorer.files.layout',\n                configuration.name('views')('search')('files')('layout').value\n            );\n            await configuration.migrate(\n                'resultsExplorer.files.threshold',\n                configuration.name('views')('search')('files')('threshold').value\n            );\n            await configuration.migrate(\n                'resultsExplorer.location',\n                configuration.name('views')('search')('location').value\n            );\n\n            await configuration.migrate('explorers.avatars', configuration.name('views')('compare')('avatars').value);\n            await configuration.migrate(\n                'explorers.avatars',\n                configuration.name('views')('repositories')('avatars').value\n            );\n            await configuration.migrate('explorers.avatars', configuration.name('views')('search')('avatars').value);\n            await configuration.migrate(\n                'explorers.commitFileFormat',\n                configuration.name('views')('commitFileFormat').value\n            );\n            await configuration.migrate('explorers.commitFormat', configuration.name('views')('commitFormat').value);\n            await configuration.migrate(\n                'explorers.defaultItemLimit',\n                configuration.name('views')('defaultItemLimit').value\n            );\n            await configuration.migrate(\n                'explorers.stashFileFormat',\n                configuration.name('views')('stashFileFormat').value\n            );\n            await configuration.migrate('explorers.stashFormat', configuration.name('views')('stashFormat').value);\n            await configuration.migrate(\n                'explorers.statusFileFormat',\n                configuration.name('views')('statusFileFormat').value\n            );\n\n            await configuration.migrate<\n                {\n                    [key: string]: {\n                        name: string;\n                        statusBarItemName?: string;\n                        description?: string;\n                        codeLens?: boolean;\n                        currentLine?: boolean;\n                        explorers?: boolean;\n                        hovers?: boolean;\n                        statusBar?: boolean;\n                    };\n                },\n                {\n                    [key: string]: ModeConfig;\n                }\n            >('modes', configuration.name('modes').value, {\n                migrationFn: v => {\n                    const modes = Object.create(null);\n\n                    for (const k in v) {\n                        const { explorers, ...mode } = v[k];\n                        modes[k] = { ...mode, views: explorers };\n                    }\n\n                    return modes;\n                }\n            });\n        }\n    }\n    catch (ex) {\n        Logger.error(ex, 'migrateSettings');\n    }\n}\n\nfunction notifyOnUnsupportedGitVersion(version: string) {\n    if (GitService.compareGitVersion('2.2.0') !== -1) return;\n\n    // If git is less than v2.2.0\n    void Messages.showGitVersionUnsupportedErrorMessage(version);\n}\n\nasync function showWelcomePage(version: string, previousVersion: string | undefined) {\n    if (previousVersion === undefined) {\n        Logger.log('GitLens first-time install');\n\n        if (Container.config.showWhatsNewAfterUpgrades) {\n            await commands.executeCommand(Commands.ShowWelcomePage);\n        }\n\n        return;\n    }\n\n    if (previousVersion !== version) {\n        Logger.log(`GitLens upgraded from v${previousVersion} to v${version}`);\n    }\n\n    const [major, minor] = version.split('.');\n    const [prevMajor, prevMinor] = previousVersion.split('.');\n    if (\n        (major === prevMajor && minor === prevMinor) ||\n        // Don't notify on downgrades\n        (major < prevMajor || (major === prevMajor && minor < prevMinor))\n    ) {\n        return;\n    }\n\n    if (Container.config.showWhatsNewAfterUpgrades && major !== prevMajor) {\n        await commands.executeCommand(Commands.ShowWelcomePage);\n    }\n    else {\n        await Messages.showWhatsNewMessage(version);\n    }\n}\n"],"sourceRoot":""}